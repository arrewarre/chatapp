const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C-biJheu.js","assets/jszip.min-BiKqZY1f.js"])))=>i.map(i=>d[i]);
var vL=Object.defineProperty;var rS=t=>{throw TypeError(t)};var _L=(t,e,n)=>e in t?vL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ce=(t,e,n)=>_L(t,typeof e!="symbol"?e+"":e,n),fv=(t,e,n)=>e.has(t)||rS("Cannot "+n);var h=(t,e,n)=>(fv(t,e,"read from private field"),n?n.call(t):e.get(t)),x=(t,e,n)=>e.has(t)?rS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),S=(t,e,n,i)=>(fv(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),C=(t,e,n)=>(fv(t,e,"access private method"),n);var pn=(t,e,n,i)=>({set _(r){S(t,e,r,n)},get _(){return h(t,e,i)}});function EL(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var fm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n7(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var jC={exports:{}},Ty={},ek={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _p=Symbol.for("react.element"),bL=Symbol.for("react.portal"),wL=Symbol.for("react.fragment"),SL=Symbol.for("react.strict_mode"),AL=Symbol.for("react.profiler"),xL=Symbol.for("react.provider"),TL=Symbol.for("react.context"),CL=Symbol.for("react.forward_ref"),kL=Symbol.for("react.suspense"),IL=Symbol.for("react.memo"),RL=Symbol.for("react.lazy"),sS=Symbol.iterator;function NL(t){return t===null||typeof t!="object"?null:(t=sS&&t[sS]||t["@@iterator"],typeof t=="function"?t:null)}var tk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nk=Object.assign,ik={};function sd(t,e,n){this.props=t,this.context=e,this.refs=ik,this.updater=n||tk}sd.prototype.isReactComponent={};sd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rk(){}rk.prototype=sd.prototype;function ib(t,e,n){this.props=t,this.context=e,this.refs=ik,this.updater=n||tk}var rb=ib.prototype=new rk;rb.constructor=ib;nk(rb,sd.prototype);rb.isPureReactComponent=!0;var oS=Array.isArray,sk=Object.prototype.hasOwnProperty,sb={current:null},ok={key:!0,ref:!0,__self:!0,__source:!0};function ak(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)sk.call(e,i)&&!ok.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:_p,type:t,key:s,ref:o,props:r,_owner:sb.current}}function ML(t,e){return{$$typeof:_p,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ob(t){return typeof t=="object"&&t!==null&&t.$$typeof===_p}function PL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var aS=/\/+/g;function pv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?PL(""+t.key):e.toString(36)}function _g(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _p:case bL:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+pv(o,0):i,oS(r)?(n="",t!=null&&(n=t.replace(aS,"$&/")+"/"),_g(r,e,n,"",function(u){return u})):r!=null&&(ob(r)&&(r=ML(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(aS,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",oS(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+pv(s,a);o+=_g(s,e,n,l,r)}else if(l=NL(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+pv(s,a++),o+=_g(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Lp(t,e,n){if(t==null)return t;var i=[],r=0;return _g(t,i,"","",function(s){return e.call(n,s,r++)}),i}function LL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rn={current:null},Eg={transition:null},DL={ReactCurrentDispatcher:Rn,ReactCurrentBatchConfig:Eg,ReactCurrentOwner:sb};function lk(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:Lp,forEach:function(t,e,n){Lp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Lp(t,function(){e++}),e},toArray:function(t){return Lp(t,function(e){return e})||[]},only:function(t){if(!ob(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=sd;Te.Fragment=wL;Te.Profiler=AL;Te.PureComponent=ib;Te.StrictMode=SL;Te.Suspense=kL;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DL;Te.act=lk;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=nk({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=sb.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)sk.call(e,l)&&!ok.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:_p,type:t.type,key:r,ref:s,props:i,_owner:o}};Te.createContext=function(t){return t={$$typeof:TL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xL,_context:t},t.Consumer=t};Te.createElement=ak;Te.createFactory=function(t){var e=ak.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:CL,render:t}};Te.isValidElement=ob;Te.lazy=function(t){return{$$typeof:RL,_payload:{_status:-1,_result:t},_init:LL}};Te.memo=function(t,e){return{$$typeof:IL,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=Eg.transition;Eg.transition={};try{t()}finally{Eg.transition=e}};Te.unstable_act=lk;Te.useCallback=function(t,e){return Rn.current.useCallback(t,e)};Te.useContext=function(t){return Rn.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return Rn.current.useDeferredValue(t)};Te.useEffect=function(t,e){return Rn.current.useEffect(t,e)};Te.useId=function(){return Rn.current.useId()};Te.useImperativeHandle=function(t,e,n){return Rn.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return Rn.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return Rn.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return Rn.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return Rn.current.useReducer(t,e,n)};Te.useRef=function(t){return Rn.current.useRef(t)};Te.useState=function(t){return Rn.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return Rn.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return Rn.current.useTransition()};Te.version="18.3.1";ek.exports=Te;var q=ek.exports;const Cy=xy(q),OL=EL({__proto__:null,default:Cy},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FL=q,UL=Symbol.for("react.element"),BL=Symbol.for("react.fragment"),zL=Object.prototype.hasOwnProperty,HL=FL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GL={key:!0,ref:!0,__self:!0,__source:!0};function uk(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)zL.call(e,i)&&!GL.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:UL,type:t,key:s,ref:o,props:r,_owner:HL.current}}Ty.Fragment=BL;Ty.jsx=uk;Ty.jsxs=uk;jC.exports=Ty;var P=jC.exports,g_={},ck={exports:{}},yi={},dk={exports:{}},hk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,$){var I=B.length;B.push($);e:for(;0<I;){var Z=I-1>>>1,ee=B[Z];if(0<r(ee,$))B[Z]=$,B[I]=ee,I=Z;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var $=B[0],I=B.pop();if(I!==$){B[0]=I;e:for(var Z=0,ee=B.length,M=ee>>>1;Z<M;){var ge=2*(Z+1)-1,Pe=B[ge],he=ge+1,be=B[he];if(0>r(Pe,I))he<ee&&0>r(be,Pe)?(B[Z]=be,B[he]=I,Z=he):(B[Z]=Pe,B[ge]=I,Z=ge);else if(he<ee&&0>r(be,I))B[Z]=be,B[he]=I,Z=he;else break e}}return $}function r(B,$){var I=B.sortIndex-$.sortIndex;return I!==0?I:B.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,g=!1,y=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var $=n(u);$!==null;){if($.callback===null)i(u);else if($.startTime<=B)i(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function A(B){if(v=!1,w(B),!y)if(n(l)!==null)y=!0,D(k);else{var $=n(u);$!==null&&z(A,$.startTime-B)}}function k(B,$){y=!1,v&&(v=!1,_(L),L=-1),g=!0;var I=f;try{for(w($),d=n(l);d!==null&&(!(d.expirationTime>$)||B&&!U());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,f=d.priorityLevel;var ee=Z(d.expirationTime<=$);$=t.unstable_now(),typeof ee=="function"?d.callback=ee:d===n(l)&&i(l),w($)}else i(l);d=n(l)}if(d!==null)var M=!0;else{var ge=n(u);ge!==null&&z(A,ge.startTime-$),M=!1}return M}finally{d=null,f=I,g=!1}}var T=!1,N=null,L=-1,F=5,R=-1;function U(){return!(t.unstable_now()-R<F)}function H(){if(N!==null){var B=t.unstable_now();R=B;var $=!0;try{$=N(!0,B)}finally{$?V():(T=!1,N=null)}}else T=!1}var V;if(typeof b=="function")V=function(){b(H)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,X=W.port2;W.port1.onmessage=H,V=function(){X.postMessage(null)}}else V=function(){E(H,0)};function D(B){N=B,T||(T=!0,V())}function z(B,$){L=E(function(){B(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,D(k))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var I=f;f=$;try{return B()}finally{f=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,$){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var I=f;f=B;try{return $()}finally{f=I}},t.unstable_scheduleCallback=function(B,$,I){var Z=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?Z+I:Z):I=Z,B){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=I+ee,B={id:c++,callback:$,priorityLevel:B,startTime:I,expirationTime:ee,sortIndex:-1},I>Z?(B.sortIndex=I,e(u,B),n(l)===null&&B===n(u)&&(v?(_(L),L=-1):v=!0,z(A,I-Z))):(B.sortIndex=ee,e(l,B),y||g||(y=!0,D(k))),B},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(B){var $=f;return function(){var I=f;f=$;try{return B.apply(this,arguments)}finally{f=I}}}})(hk);dk.exports=hk;var $L=dk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VL=q,mi=$L;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fk=new Set,_h={};function $l(t,e){Xc(t,e),Xc(t+"Capture",e)}function Xc(t,e){for(_h[t]=e,t=0;t<e.length;t++)fk.add(e[t])}var Os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m_=Object.prototype.hasOwnProperty,qL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lS={},uS={};function WL(t){return m_.call(uS,t)?!0:m_.call(lS,t)?!1:qL.test(t)?uS[t]=!0:(lS[t]=!0,!1)}function KL(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YL(t,e,n,i){if(e===null||typeof e>"u"||KL(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nn(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xt[t]=new Nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xt[e]=new Nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xt[t]=new Nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xt[t]=new Nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xt[t]=new Nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xt[t]=new Nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xt[t]=new Nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xt[t]=new Nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xt[t]=new Nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ab=/[\-:]([a-z])/g;function lb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ab,lb);Xt[e]=new Nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ab,lb);Xt[e]=new Nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ab,lb);Xt[e]=new Nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xt[t]=new Nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Xt.xlinkHref=new Nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xt[t]=new Nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function ub(t,e,n,i){var r=Xt.hasOwnProperty(e)?Xt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YL(e,n,r,i)&&(n=null),i||r===null?WL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var $s=VL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dp=Symbol.for("react.element"),mu=Symbol.for("react.portal"),yu=Symbol.for("react.fragment"),cb=Symbol.for("react.strict_mode"),y_=Symbol.for("react.profiler"),pk=Symbol.for("react.provider"),gk=Symbol.for("react.context"),db=Symbol.for("react.forward_ref"),v_=Symbol.for("react.suspense"),__=Symbol.for("react.suspense_list"),hb=Symbol.for("react.memo"),Zs=Symbol.for("react.lazy"),mk=Symbol.for("react.offscreen"),cS=Symbol.iterator;function _d(t){return t===null||typeof t!="object"?null:(t=cS&&t[cS]||t["@@iterator"],typeof t=="function"?t:null)}var lt=Object.assign,gv;function Od(t){if(gv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gv=e&&e[1]||""}return`
`+gv+t}var mv=!1;function yv(t,e){if(!t||mv)return"";mv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{mv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Od(t):""}function XL(t){switch(t.tag){case 5:return Od(t.type);case 16:return Od("Lazy");case 13:return Od("Suspense");case 19:return Od("SuspenseList");case 0:case 2:case 15:return t=yv(t.type,!1),t;case 11:return t=yv(t.type.render,!1),t;case 1:return t=yv(t.type,!0),t;default:return""}}function E_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yu:return"Fragment";case mu:return"Portal";case y_:return"Profiler";case cb:return"StrictMode";case v_:return"Suspense";case __:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gk:return(t.displayName||"Context")+".Consumer";case pk:return(t._context.displayName||"Context")+".Provider";case db:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hb:return e=t.displayName||null,e!==null?e:E_(t.type)||"Memo";case Zs:e=t._payload,t=t._init;try{return E_(t(e))}catch{}}return null}function JL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E_(e);case 8:return e===cb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function QL(t){var e=yk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Op(t){t._valueTracker||(t._valueTracker=QL(t))}function vk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=yk(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function pm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function b_(t,e){var n=e.checked;return lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dS(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Jo(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _k(t,e){e=e.checked,e!=null&&ub(t,"checked",e,!1)}function w_(t,e){_k(t,e);var n=Jo(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?S_(t,e.type,n):e.hasOwnProperty("defaultValue")&&S_(t,e.type,Jo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function S_(t,e,n){(e!=="number"||pm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fd=Array.isArray;function Pu(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Jo(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function A_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Fd(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jo(n)}}function Ek(t,e){var n=Jo(e.value),i=Jo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function pS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function x_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fp,wk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fp=Fp||document.createElement("div"),Fp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Eh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var rh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZL=["Webkit","ms","Moz","O"];Object.keys(rh).forEach(function(t){ZL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),rh[e]=rh[t]})});function Sk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||rh.hasOwnProperty(t)&&rh[t]?(""+e).trim():e+"px"}function Ak(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Sk(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var jL=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function T_(t,e){if(e){if(jL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function C_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var k_=null;function fb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var I_=null,Lu=null,Du=null;function gS(t){if(t=wp(t)){if(typeof I_!="function")throw Error(K(280));var e=t.stateNode;e&&(e=My(e),I_(t.stateNode,t.type,e))}}function xk(t){Lu?Du?Du.push(t):Du=[t]:Lu=t}function Tk(){if(Lu){var t=Lu,e=Du;if(Du=Lu=null,gS(t),e)for(t=0;t<e.length;t++)gS(e[t])}}function Ck(t,e){return t(e)}function kk(){}var vv=!1;function Ik(t,e,n){if(vv)return t(e,n);vv=!0;try{return Ck(t,e,n)}finally{vv=!1,(Lu!==null||Du!==null)&&(kk(),Tk())}}function bh(t,e){var n=t.stateNode;if(n===null)return null;var i=My(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var R_=!1;if(Os)try{var Ed={};Object.defineProperty(Ed,"passive",{get:function(){R_=!0}}),window.addEventListener("test",Ed,Ed),window.removeEventListener("test",Ed,Ed)}catch{R_=!1}function eD(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var sh=!1,gm=null,mm=!1,N_=null,tD={onError:function(t){sh=!0,gm=t}};function nD(t,e,n,i,r,s,o,a,l){sh=!1,gm=null,eD.apply(tD,arguments)}function iD(t,e,n,i,r,s,o,a,l){if(nD.apply(this,arguments),sh){if(sh){var u=gm;sh=!1,gm=null}else throw Error(K(198));mm||(mm=!0,N_=u)}}function Vl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Rk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mS(t){if(Vl(t)!==t)throw Error(K(188))}function rD(t){var e=t.alternate;if(!e){if(e=Vl(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return mS(r),t;if(s===i)return mS(r),e;s=s.sibling}throw Error(K(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==i)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function Nk(t){return t=rD(t),t!==null?Mk(t):null}function Mk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Mk(t);if(e!==null)return e;t=t.sibling}return null}var Pk=mi.unstable_scheduleCallback,yS=mi.unstable_cancelCallback,sD=mi.unstable_shouldYield,oD=mi.unstable_requestPaint,gt=mi.unstable_now,aD=mi.unstable_getCurrentPriorityLevel,pb=mi.unstable_ImmediatePriority,Lk=mi.unstable_UserBlockingPriority,ym=mi.unstable_NormalPriority,lD=mi.unstable_LowPriority,Dk=mi.unstable_IdlePriority,ky=null,qr=null;function uD(t){if(qr&&typeof qr.onCommitFiberRoot=="function")try{qr.onCommitFiberRoot(ky,t,void 0,(t.current.flags&128)===128)}catch{}}var cr=Math.clz32?Math.clz32:hD,cD=Math.log,dD=Math.LN2;function hD(t){return t>>>=0,t===0?32:31-(cD(t)/dD|0)|0}var Up=64,Bp=4194304;function Ud(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vm(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Ud(a):(s&=o,s!==0&&(i=Ud(s)))}else o=n&~r,o!==0?i=Ud(o):s!==0&&(i=Ud(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-cr(e),r=1<<n,i|=t[n],e&=~r;return i}function fD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pD(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-cr(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=fD(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function M_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ok(){var t=Up;return Up<<=1,!(Up&4194240)&&(Up=64),t}function _v(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ep(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cr(e),t[e]=n}function gD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-cr(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function gb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-cr(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Ue=0;function Fk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Uk,mb,Bk,zk,Hk,P_=!1,zp=[],zo=null,Ho=null,Go=null,wh=new Map,Sh=new Map,eo=[],mD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vS(t,e){switch(t){case"focusin":case"focusout":zo=null;break;case"dragenter":case"dragleave":Ho=null;break;case"mouseover":case"mouseout":Go=null;break;case"pointerover":case"pointerout":wh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sh.delete(e.pointerId)}}function bd(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=wp(e),e!==null&&mb(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function yD(t,e,n,i,r){switch(e){case"focusin":return zo=bd(zo,t,e,n,i,r),!0;case"dragenter":return Ho=bd(Ho,t,e,n,i,r),!0;case"mouseover":return Go=bd(Go,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return wh.set(s,bd(wh.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Sh.set(s,bd(Sh.get(s)||null,t,e,n,i,r)),!0}return!1}function Gk(t){var e=Ea(t.target);if(e!==null){var n=Vl(e);if(n!==null){if(e=n.tag,e===13){if(e=Rk(n),e!==null){t.blockedOn=e,Hk(t.priority,function(){Bk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=L_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);k_=i,n.target.dispatchEvent(i),k_=null}else return e=wp(n),e!==null&&mb(e),t.blockedOn=n,!1;e.shift()}return!0}function _S(t,e,n){bg(t)&&n.delete(e)}function vD(){P_=!1,zo!==null&&bg(zo)&&(zo=null),Ho!==null&&bg(Ho)&&(Ho=null),Go!==null&&bg(Go)&&(Go=null),wh.forEach(_S),Sh.forEach(_S)}function wd(t,e){t.blockedOn===e&&(t.blockedOn=null,P_||(P_=!0,mi.unstable_scheduleCallback(mi.unstable_NormalPriority,vD)))}function Ah(t){function e(r){return wd(r,t)}if(0<zp.length){wd(zp[0],t);for(var n=1;n<zp.length;n++){var i=zp[n];i.blockedOn===t&&(i.blockedOn=null)}}for(zo!==null&&wd(zo,t),Ho!==null&&wd(Ho,t),Go!==null&&wd(Go,t),wh.forEach(e),Sh.forEach(e),n=0;n<eo.length;n++)i=eo[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<eo.length&&(n=eo[0],n.blockedOn===null);)Gk(n),n.blockedOn===null&&eo.shift()}var Ou=$s.ReactCurrentBatchConfig,_m=!0;function _D(t,e,n,i){var r=Ue,s=Ou.transition;Ou.transition=null;try{Ue=1,yb(t,e,n,i)}finally{Ue=r,Ou.transition=s}}function ED(t,e,n,i){var r=Ue,s=Ou.transition;Ou.transition=null;try{Ue=4,yb(t,e,n,i)}finally{Ue=r,Ou.transition=s}}function yb(t,e,n,i){if(_m){var r=L_(t,e,n,i);if(r===null)Iv(t,e,i,Em,n),vS(t,i);else if(yD(r,t,e,n,i))i.stopPropagation();else if(vS(t,i),e&4&&-1<mD.indexOf(t)){for(;r!==null;){var s=wp(r);if(s!==null&&Uk(s),s=L_(t,e,n,i),s===null&&Iv(t,e,i,Em,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Iv(t,e,i,null,n)}}var Em=null;function L_(t,e,n,i){if(Em=null,t=fb(i),t=Ea(t),t!==null)if(e=Vl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Rk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Em=t,null}function $k(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aD()){case pb:return 1;case Lk:return 4;case ym:case lD:return 16;case Dk:return 536870912;default:return 16}default:return 16}}var Do=null,vb=null,wg=null;function Vk(){if(wg)return wg;var t,e=vb,n=e.length,i,r="value"in Do?Do.value:Do.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return wg=r.slice(t,1<i?1-i:void 0)}function Sg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hp(){return!0}function ES(){return!1}function vi(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Hp:ES,this.isPropagationStopped=ES,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hp)},persist:function(){},isPersistent:Hp}),e}var od={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_b=vi(od),bp=lt({},od,{view:0,detail:0}),bD=vi(bp),Ev,bv,Sd,Iy=lt({},bp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eb,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sd&&(Sd&&t.type==="mousemove"?(Ev=t.screenX-Sd.screenX,bv=t.screenY-Sd.screenY):bv=Ev=0,Sd=t),Ev)},movementY:function(t){return"movementY"in t?t.movementY:bv}}),bS=vi(Iy),wD=lt({},Iy,{dataTransfer:0}),SD=vi(wD),AD=lt({},bp,{relatedTarget:0}),wv=vi(AD),xD=lt({},od,{animationName:0,elapsedTime:0,pseudoElement:0}),TD=vi(xD),CD=lt({},od,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kD=vi(CD),ID=lt({},od,{data:0}),wS=vi(ID),RD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ND={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=MD[t])?!!e[t]:!1}function Eb(){return PD}var LD=lt({},bp,{key:function(t){if(t.key){var e=RD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ND[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eb,charCode:function(t){return t.type==="keypress"?Sg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DD=vi(LD),OD=lt({},Iy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),SS=vi(OD),FD=lt({},bp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eb}),UD=vi(FD),BD=lt({},od,{propertyName:0,elapsedTime:0,pseudoElement:0}),zD=vi(BD),HD=lt({},Iy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GD=vi(HD),$D=[9,13,27,32],bb=Os&&"CompositionEvent"in window,oh=null;Os&&"documentMode"in document&&(oh=document.documentMode);var VD=Os&&"TextEvent"in window&&!oh,qk=Os&&(!bb||oh&&8<oh&&11>=oh),AS=" ",xS=!1;function Wk(t,e){switch(t){case"keyup":return $D.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vu=!1;function qD(t,e){switch(t){case"compositionend":return Kk(e);case"keypress":return e.which!==32?null:(xS=!0,AS);case"textInput":return t=e.data,t===AS&&xS?null:t;default:return null}}function WD(t,e){if(vu)return t==="compositionend"||!bb&&Wk(t,e)?(t=Vk(),wg=vb=Do=null,vu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qk&&e.locale!=="ko"?null:e.data;default:return null}}var KD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function TS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!KD[t.type]:e==="textarea"}function Yk(t,e,n,i){xk(i),e=bm(e,"onChange"),0<e.length&&(n=new _b("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ah=null,xh=null;function YD(t){sI(t,0)}function Ry(t){var e=bu(t);if(vk(e))return t}function XD(t,e){if(t==="change")return e}var Xk=!1;if(Os){var Sv;if(Os){var Av="oninput"in document;if(!Av){var CS=document.createElement("div");CS.setAttribute("oninput","return;"),Av=typeof CS.oninput=="function"}Sv=Av}else Sv=!1;Xk=Sv&&(!document.documentMode||9<document.documentMode)}function kS(){ah&&(ah.detachEvent("onpropertychange",Jk),xh=ah=null)}function Jk(t){if(t.propertyName==="value"&&Ry(xh)){var e=[];Yk(e,xh,t,fb(t)),Ik(YD,e)}}function JD(t,e,n){t==="focusin"?(kS(),ah=e,xh=n,ah.attachEvent("onpropertychange",Jk)):t==="focusout"&&kS()}function QD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ry(xh)}function ZD(t,e){if(t==="click")return Ry(e)}function jD(t,e){if(t==="input"||t==="change")return Ry(e)}function eO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gr=typeof Object.is=="function"?Object.is:eO;function Th(t,e){if(gr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!m_.call(e,r)||!gr(t[r],e[r]))return!1}return!0}function IS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function RS(t,e){var n=IS(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=IS(n)}}function Qk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Qk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Zk(){for(var t=window,e=pm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=pm(t.document)}return e}function wb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tO(t){var e=Zk(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Qk(n.ownerDocument.documentElement,n)){if(i!==null&&wb(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=RS(n,s);var o=RS(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nO=Os&&"documentMode"in document&&11>=document.documentMode,_u=null,D_=null,lh=null,O_=!1;function NS(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;O_||_u==null||_u!==pm(i)||(i=_u,"selectionStart"in i&&wb(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),lh&&Th(lh,i)||(lh=i,i=bm(D_,"onSelect"),0<i.length&&(e=new _b("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=_u)))}function Gp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Eu={animationend:Gp("Animation","AnimationEnd"),animationiteration:Gp("Animation","AnimationIteration"),animationstart:Gp("Animation","AnimationStart"),transitionend:Gp("Transition","TransitionEnd")},xv={},jk={};Os&&(jk=document.createElement("div").style,"AnimationEvent"in window||(delete Eu.animationend.animation,delete Eu.animationiteration.animation,delete Eu.animationstart.animation),"TransitionEvent"in window||delete Eu.transitionend.transition);function Ny(t){if(xv[t])return xv[t];if(!Eu[t])return t;var e=Eu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jk)return xv[t]=e[n];return t}var eI=Ny("animationend"),tI=Ny("animationiteration"),nI=Ny("animationstart"),iI=Ny("transitionend"),rI=new Map,MS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ta(t,e){rI.set(t,e),$l(e,[t])}for(var Tv=0;Tv<MS.length;Tv++){var Cv=MS[Tv],iO=Cv.toLowerCase(),rO=Cv[0].toUpperCase()+Cv.slice(1);ta(iO,"on"+rO)}ta(eI,"onAnimationEnd");ta(tI,"onAnimationIteration");ta(nI,"onAnimationStart");ta("dblclick","onDoubleClick");ta("focusin","onFocus");ta("focusout","onBlur");ta(iI,"onTransitionEnd");Xc("onMouseEnter",["mouseout","mouseover"]);Xc("onMouseLeave",["mouseout","mouseover"]);Xc("onPointerEnter",["pointerout","pointerover"]);Xc("onPointerLeave",["pointerout","pointerover"]);$l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$l("onBeforeInput",["compositionend","keypress","textInput","paste"]);$l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bd));function PS(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,iD(i,e,void 0,t),t.currentTarget=null}function sI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;PS(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;PS(r,a,u),s=l}}}if(mm)throw t=N_,mm=!1,N_=null,t}function Xe(t,e){var n=e[H_];n===void 0&&(n=e[H_]=new Set);var i=t+"__bubble";n.has(i)||(oI(e,t,2,!1),n.add(i))}function kv(t,e,n){var i=0;e&&(i|=4),oI(n,t,i,e)}var $p="_reactListening"+Math.random().toString(36).slice(2);function Ch(t){if(!t[$p]){t[$p]=!0,fk.forEach(function(n){n!=="selectionchange"&&(sO.has(n)||kv(n,!1,t),kv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$p]||(e[$p]=!0,kv("selectionchange",!1,e))}}function oI(t,e,n,i){switch($k(e)){case 1:var r=_D;break;case 4:r=ED;break;default:r=yb}n=r.bind(null,e,n,t),r=void 0,!R_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Iv(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Ea(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}Ik(function(){var u=s,c=fb(n),d=[];e:{var f=rI.get(t);if(f!==void 0){var g=_b,y=t;switch(t){case"keypress":if(Sg(n)===0)break e;case"keydown":case"keyup":g=DD;break;case"focusin":y="focus",g=wv;break;case"focusout":y="blur",g=wv;break;case"beforeblur":case"afterblur":g=wv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=bS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=SD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=UD;break;case eI:case tI:case nI:g=TD;break;case iI:g=zD;break;case"scroll":g=bD;break;case"wheel":g=GD;break;case"copy":case"cut":case"paste":g=kD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=SS}var v=(e&4)!==0,E=!v&&t==="scroll",_=v?f!==null?f+"Capture":null:f;v=[];for(var b=u,w;b!==null;){w=b;var A=w.stateNode;if(w.tag===5&&A!==null&&(w=A,_!==null&&(A=bh(b,_),A!=null&&v.push(kh(b,A,w)))),E)break;b=b.return}0<v.length&&(f=new g(f,y,null,n,c),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==k_&&(y=n.relatedTarget||n.fromElement)&&(Ea(y)||y[Fs]))break e;if((g||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=u,y=y?Ea(y):null,y!==null&&(E=Vl(y),y!==E||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(v=bS,A="onMouseLeave",_="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(v=SS,A="onPointerLeave",_="onPointerEnter",b="pointer"),E=g==null?f:bu(g),w=y==null?f:bu(y),f=new v(A,b+"leave",g,n,c),f.target=E,f.relatedTarget=w,A=null,Ea(c)===u&&(v=new v(_,b+"enter",y,n,c),v.target=w,v.relatedTarget=E,A=v),E=A,g&&y)t:{for(v=g,_=y,b=0,w=v;w;w=tu(w))b++;for(w=0,A=_;A;A=tu(A))w++;for(;0<b-w;)v=tu(v),b--;for(;0<w-b;)_=tu(_),w--;for(;b--;){if(v===_||_!==null&&v===_.alternate)break t;v=tu(v),_=tu(_)}v=null}else v=null;g!==null&&LS(d,f,g,v,!1),y!==null&&E!==null&&LS(d,E,y,v,!0)}}e:{if(f=u?bu(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var k=XD;else if(TS(f))if(Xk)k=jD;else{k=QD;var T=JD}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=ZD);if(k&&(k=k(t,u))){Yk(d,k,n,c);break e}T&&T(t,f,u),t==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&S_(f,"number",f.value)}switch(T=u?bu(u):window,t){case"focusin":(TS(T)||T.contentEditable==="true")&&(_u=T,D_=u,lh=null);break;case"focusout":lh=D_=_u=null;break;case"mousedown":O_=!0;break;case"contextmenu":case"mouseup":case"dragend":O_=!1,NS(d,n,c);break;case"selectionchange":if(nO)break;case"keydown":case"keyup":NS(d,n,c)}var N;if(bb)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else vu?Wk(t,n)&&(L="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(qk&&n.locale!=="ko"&&(vu||L!=="onCompositionStart"?L==="onCompositionEnd"&&vu&&(N=Vk()):(Do=c,vb="value"in Do?Do.value:Do.textContent,vu=!0)),T=bm(u,L),0<T.length&&(L=new wS(L,t,null,n,c),d.push({event:L,listeners:T}),N?L.data=N:(N=Kk(n),N!==null&&(L.data=N)))),(N=VD?qD(t,n):WD(t,n))&&(u=bm(u,"onBeforeInput"),0<u.length&&(c=new wS("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=N))}sI(d,e)})}function kh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bm(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=bh(t,n),s!=null&&i.unshift(kh(t,s,r)),s=bh(t,e),s!=null&&i.push(kh(t,s,r))),t=t.return}return i}function tu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function LS(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=bh(n,s),l!=null&&o.unshift(kh(n,l,a))):r||(l=bh(n,s),l!=null&&o.push(kh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var oO=/\r\n?/g,aO=/\u0000|\uFFFD/g;function DS(t){return(typeof t=="string"?t:""+t).replace(oO,`
`).replace(aO,"")}function Vp(t,e,n){if(e=DS(e),DS(t)!==e&&n)throw Error(K(425))}function wm(){}var F_=null,U_=null;function B_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var z_=typeof setTimeout=="function"?setTimeout:void 0,lO=typeof clearTimeout=="function"?clearTimeout:void 0,OS=typeof Promise=="function"?Promise:void 0,uO=typeof queueMicrotask=="function"?queueMicrotask:typeof OS<"u"?function(t){return OS.resolve(null).then(t).catch(cO)}:z_;function cO(t){setTimeout(function(){throw t})}function Rv(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Ah(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Ah(e)}function $o(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function FS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ad=Math.random().toString(36).slice(2),Vr="__reactFiber$"+ad,Ih="__reactProps$"+ad,Fs="__reactContainer$"+ad,H_="__reactEvents$"+ad,dO="__reactListeners$"+ad,hO="__reactHandles$"+ad;function Ea(t){var e=t[Vr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fs]||n[Vr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=FS(t);t!==null;){if(n=t[Vr])return n;t=FS(t)}return e}t=n,n=t.parentNode}return null}function wp(t){return t=t[Vr]||t[Fs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function bu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function My(t){return t[Ih]||null}var G_=[],wu=-1;function na(t){return{current:t}}function Qe(t){0>wu||(t.current=G_[wu],G_[wu]=null,wu--)}function Ye(t,e){wu++,G_[wu]=t.current,t.current=e}var Qo={},dn=na(Qo),$n=na(!1),Nl=Qo;function Jc(t,e){var n=t.type.contextTypes;if(!n)return Qo;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Vn(t){return t=t.childContextTypes,t!=null}function Sm(){Qe($n),Qe(dn)}function US(t,e,n){if(dn.current!==Qo)throw Error(K(168));Ye(dn,e),Ye($n,n)}function aI(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(K(108,JL(t)||"Unknown",r));return lt({},n,i)}function Am(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qo,Nl=dn.current,Ye(dn,t),Ye($n,$n.current),!0}function BS(t,e,n){var i=t.stateNode;if(!i)throw Error(K(169));n?(t=aI(t,e,Nl),i.__reactInternalMemoizedMergedChildContext=t,Qe($n),Qe(dn),Ye(dn,t)):Qe($n),Ye($n,n)}var rs=null,Py=!1,Nv=!1;function lI(t){rs===null?rs=[t]:rs.push(t)}function fO(t){Py=!0,lI(t)}function ia(){if(!Nv&&rs!==null){Nv=!0;var t=0,e=Ue;try{var n=rs;for(Ue=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}rs=null,Py=!1}catch(r){throw rs!==null&&(rs=rs.slice(t+1)),Pk(pb,ia),r}finally{Ue=e,Nv=!1}}return null}var Su=[],Au=0,xm=null,Tm=0,Ii=[],Ri=0,Ml=null,Ns=1,Ms="";function da(t,e){Su[Au++]=Tm,Su[Au++]=xm,xm=t,Tm=e}function uI(t,e,n){Ii[Ri++]=Ns,Ii[Ri++]=Ms,Ii[Ri++]=Ml,Ml=t;var i=Ns;t=Ms;var r=32-cr(i)-1;i&=~(1<<r),n+=1;var s=32-cr(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ns=1<<32-cr(e)+r|n<<r|i,Ms=s+t}else Ns=1<<s|n<<r|i,Ms=t}function Sb(t){t.return!==null&&(da(t,1),uI(t,1,0))}function Ab(t){for(;t===xm;)xm=Su[--Au],Su[Au]=null,Tm=Su[--Au],Su[Au]=null;for(;t===Ml;)Ml=Ii[--Ri],Ii[Ri]=null,Ms=Ii[--Ri],Ii[Ri]=null,Ns=Ii[--Ri],Ii[Ri]=null}var fi=null,hi=null,nt=!1,ar=null;function cI(t,e){var n=Li(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fi=t,hi=$o(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fi=t,hi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ml!==null?{id:Ns,overflow:Ms}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Li(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fi=t,hi=null,!0):!1;default:return!1}}function $_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function V_(t){if(nt){var e=hi;if(e){var n=e;if(!zS(t,e)){if($_(t))throw Error(K(418));e=$o(n.nextSibling);var i=fi;e&&zS(t,e)?cI(i,n):(t.flags=t.flags&-4097|2,nt=!1,fi=t)}}else{if($_(t))throw Error(K(418));t.flags=t.flags&-4097|2,nt=!1,fi=t}}}function HS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fi=t}function qp(t){if(t!==fi)return!1;if(!nt)return HS(t),nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!B_(t.type,t.memoizedProps)),e&&(e=hi)){if($_(t))throw dI(),Error(K(418));for(;e;)cI(t,e),e=$o(e.nextSibling)}if(HS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){hi=$o(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}hi=null}}else hi=fi?$o(t.stateNode.nextSibling):null;return!0}function dI(){for(var t=hi;t;)t=$o(t.nextSibling)}function Qc(){hi=fi=null,nt=!1}function xb(t){ar===null?ar=[t]:ar.push(t)}var pO=$s.ReactCurrentBatchConfig;function Ad(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var i=n.stateNode}if(!i)throw Error(K(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Wp(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function GS(t){var e=t._init;return e(t._payload)}function hI(t){function e(_,b){if(t){var w=_.deletions;w===null?(_.deletions=[b],_.flags|=16):w.push(b)}}function n(_,b){if(!t)return null;for(;b!==null;)e(_,b),b=b.sibling;return null}function i(_,b){for(_=new Map;b!==null;)b.key!==null?_.set(b.key,b):_.set(b.index,b),b=b.sibling;return _}function r(_,b){return _=Ko(_,b),_.index=0,_.sibling=null,_}function s(_,b,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<b?(_.flags|=2,b):w):(_.flags|=2,b)):(_.flags|=1048576,b)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,b,w,A){return b===null||b.tag!==6?(b=Uv(w,_.mode,A),b.return=_,b):(b=r(b,w),b.return=_,b)}function l(_,b,w,A){var k=w.type;return k===yu?c(_,b,w.props.children,A,w.key):b!==null&&(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Zs&&GS(k)===b.type)?(A=r(b,w.props),A.ref=Ad(_,b,w),A.return=_,A):(A=Rg(w.type,w.key,w.props,null,_.mode,A),A.ref=Ad(_,b,w),A.return=_,A)}function u(_,b,w,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=Bv(w,_.mode,A),b.return=_,b):(b=r(b,w.children||[]),b.return=_,b)}function c(_,b,w,A,k){return b===null||b.tag!==7?(b=kl(w,_.mode,A,k),b.return=_,b):(b=r(b,w),b.return=_,b)}function d(_,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Uv(""+b,_.mode,w),b.return=_,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Dp:return w=Rg(b.type,b.key,b.props,null,_.mode,w),w.ref=Ad(_,null,b),w.return=_,w;case mu:return b=Bv(b,_.mode,w),b.return=_,b;case Zs:var A=b._init;return d(_,A(b._payload),w)}if(Fd(b)||_d(b))return b=kl(b,_.mode,w,null),b.return=_,b;Wp(_,b)}return null}function f(_,b,w,A){var k=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:a(_,b,""+w,A);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Dp:return w.key===k?l(_,b,w,A):null;case mu:return w.key===k?u(_,b,w,A):null;case Zs:return k=w._init,f(_,b,k(w._payload),A)}if(Fd(w)||_d(w))return k!==null?null:c(_,b,w,A,null);Wp(_,w)}return null}function g(_,b,w,A,k){if(typeof A=="string"&&A!==""||typeof A=="number")return _=_.get(w)||null,a(b,_,""+A,k);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Dp:return _=_.get(A.key===null?w:A.key)||null,l(b,_,A,k);case mu:return _=_.get(A.key===null?w:A.key)||null,u(b,_,A,k);case Zs:var T=A._init;return g(_,b,w,T(A._payload),k)}if(Fd(A)||_d(A))return _=_.get(w)||null,c(b,_,A,k,null);Wp(b,A)}return null}function y(_,b,w,A){for(var k=null,T=null,N=b,L=b=0,F=null;N!==null&&L<w.length;L++){N.index>L?(F=N,N=null):F=N.sibling;var R=f(_,N,w[L],A);if(R===null){N===null&&(N=F);break}t&&N&&R.alternate===null&&e(_,N),b=s(R,b,L),T===null?k=R:T.sibling=R,T=R,N=F}if(L===w.length)return n(_,N),nt&&da(_,L),k;if(N===null){for(;L<w.length;L++)N=d(_,w[L],A),N!==null&&(b=s(N,b,L),T===null?k=N:T.sibling=N,T=N);return nt&&da(_,L),k}for(N=i(_,N);L<w.length;L++)F=g(N,_,L,w[L],A),F!==null&&(t&&F.alternate!==null&&N.delete(F.key===null?L:F.key),b=s(F,b,L),T===null?k=F:T.sibling=F,T=F);return t&&N.forEach(function(U){return e(_,U)}),nt&&da(_,L),k}function v(_,b,w,A){var k=_d(w);if(typeof k!="function")throw Error(K(150));if(w=k.call(w),w==null)throw Error(K(151));for(var T=k=null,N=b,L=b=0,F=null,R=w.next();N!==null&&!R.done;L++,R=w.next()){N.index>L?(F=N,N=null):F=N.sibling;var U=f(_,N,R.value,A);if(U===null){N===null&&(N=F);break}t&&N&&U.alternate===null&&e(_,N),b=s(U,b,L),T===null?k=U:T.sibling=U,T=U,N=F}if(R.done)return n(_,N),nt&&da(_,L),k;if(N===null){for(;!R.done;L++,R=w.next())R=d(_,R.value,A),R!==null&&(b=s(R,b,L),T===null?k=R:T.sibling=R,T=R);return nt&&da(_,L),k}for(N=i(_,N);!R.done;L++,R=w.next())R=g(N,_,L,R.value,A),R!==null&&(t&&R.alternate!==null&&N.delete(R.key===null?L:R.key),b=s(R,b,L),T===null?k=R:T.sibling=R,T=R);return t&&N.forEach(function(H){return e(_,H)}),nt&&da(_,L),k}function E(_,b,w,A){if(typeof w=="object"&&w!==null&&w.type===yu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Dp:e:{for(var k=w.key,T=b;T!==null;){if(T.key===k){if(k=w.type,k===yu){if(T.tag===7){n(_,T.sibling),b=r(T,w.props.children),b.return=_,_=b;break e}}else if(T.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Zs&&GS(k)===T.type){n(_,T.sibling),b=r(T,w.props),b.ref=Ad(_,T,w),b.return=_,_=b;break e}n(_,T);break}else e(_,T);T=T.sibling}w.type===yu?(b=kl(w.props.children,_.mode,A,w.key),b.return=_,_=b):(A=Rg(w.type,w.key,w.props,null,_.mode,A),A.ref=Ad(_,b,w),A.return=_,_=A)}return o(_);case mu:e:{for(T=w.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(_,b.sibling),b=r(b,w.children||[]),b.return=_,_=b;break e}else{n(_,b);break}else e(_,b);b=b.sibling}b=Bv(w,_.mode,A),b.return=_,_=b}return o(_);case Zs:return T=w._init,E(_,b,T(w._payload),A)}if(Fd(w))return y(_,b,w,A);if(_d(w))return v(_,b,w,A);Wp(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(_,b.sibling),b=r(b,w),b.return=_,_=b):(n(_,b),b=Uv(w,_.mode,A),b.return=_,_=b),o(_)):n(_,b)}return E}var Zc=hI(!0),fI=hI(!1),Cm=na(null),km=null,xu=null,Tb=null;function Cb(){Tb=xu=km=null}function kb(t){var e=Cm.current;Qe(Cm),t._currentValue=e}function q_(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Fu(t,e){km=t,Tb=xu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Hn=!0),t.firstContext=null)}function Bi(t){var e=t._currentValue;if(Tb!==t)if(t={context:t,memoizedValue:e,next:null},xu===null){if(km===null)throw Error(K(308));xu=t,km.dependencies={lanes:0,firstContext:t}}else xu=xu.next=t;return e}var ba=null;function Ib(t){ba===null?ba=[t]:ba.push(t)}function pI(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Ib(e)):(n.next=r.next,r.next=n),e.interleaved=n,Us(t,i)}function Us(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var js=!1;function Rb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ps(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vo(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ie&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Us(t,n)}return r=i.interleaved,r===null?(e.next=e,Ib(i)):(e.next=r.next,r.next=e),i.interleaved=e,Us(t,n)}function Ag(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,gb(t,n)}}function $S(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Im(t,e,n,i){var r=t.updateQueue;js=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((i&f)===f){c!==null&&(c=c.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(f=e,g=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(g,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(g,d,f):y,f==null)break e;d=lt({},d,f);break e;case 2:js=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=g,l=d):c=c.next=g,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ll|=o,t.lanes=o,t.memoizedState=d}}function VS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(K(191,r));r.call(i)}}}var Sp={},Wr=na(Sp),Rh=na(Sp),Nh=na(Sp);function wa(t){if(t===Sp)throw Error(K(174));return t}function Nb(t,e){switch(Ye(Nh,e),Ye(Rh,t),Ye(Wr,Sp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:x_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=x_(e,t)}Qe(Wr),Ye(Wr,e)}function jc(){Qe(Wr),Qe(Rh),Qe(Nh)}function mI(t){wa(Nh.current);var e=wa(Wr.current),n=x_(e,t.type);e!==n&&(Ye(Rh,t),Ye(Wr,n))}function Mb(t){Rh.current===t&&(Qe(Wr),Qe(Rh))}var st=na(0);function Rm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mv=[];function Pb(){for(var t=0;t<Mv.length;t++)Mv[t]._workInProgressVersionPrimary=null;Mv.length=0}var xg=$s.ReactCurrentDispatcher,Pv=$s.ReactCurrentBatchConfig,Pl=0,at=null,kt=null,Ft=null,Nm=!1,uh=!1,Mh=0,gO=0;function Jt(){throw Error(K(321))}function Lb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gr(t[n],e[n]))return!1;return!0}function Db(t,e,n,i,r,s){if(Pl=s,at=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xg.current=t===null||t.memoizedState===null?_O:EO,t=n(i,r),uh){s=0;do{if(uh=!1,Mh=0,25<=s)throw Error(K(301));s+=1,Ft=kt=null,e.updateQueue=null,xg.current=bO,t=n(i,r)}while(uh)}if(xg.current=Mm,e=kt!==null&&kt.next!==null,Pl=0,Ft=kt=at=null,Nm=!1,e)throw Error(K(300));return t}function Ob(){var t=Mh!==0;return Mh=0,t}function xr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?at.memoizedState=Ft=t:Ft=Ft.next=t,Ft}function zi(){if(kt===null){var t=at.alternate;t=t!==null?t.memoizedState:null}else t=kt.next;var e=Ft===null?at.memoizedState:Ft.next;if(e!==null)Ft=e,kt=t;else{if(t===null)throw Error(K(310));kt=t,t={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Ft===null?at.memoizedState=Ft=t:Ft=Ft.next=t}return Ft}function Ph(t,e){return typeof e=="function"?e(t):e}function Lv(t){var e=zi(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var i=kt,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Pl&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,at.lanes|=c,Ll|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,gr(i,e.memoizedState)||(Hn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,at.lanes|=s,Ll|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dv(t){var e=zi(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);gr(s,e.memoizedState)||(Hn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function yI(){}function vI(t,e){var n=at,i=zi(),r=e(),s=!gr(i.memoizedState,r);if(s&&(i.memoizedState=r,Hn=!0),i=i.queue,Fb(bI.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Ft!==null&&Ft.memoizedState.tag&1){if(n.flags|=2048,Lh(9,EI.bind(null,n,i,r,e),void 0,null),Ut===null)throw Error(K(349));Pl&30||_I(n,e,r)}return r}function _I(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function EI(t,e,n,i){e.value=n,e.getSnapshot=i,wI(e)&&SI(t)}function bI(t,e,n){return n(function(){wI(e)&&SI(t)})}function wI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gr(t,n)}catch{return!0}}function SI(t){var e=Us(t,1);e!==null&&dr(e,t,1,-1)}function qS(t){var e=xr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ph,lastRenderedState:t},e.queue=t,t=t.dispatch=vO.bind(null,at,t),[e.memoizedState,t]}function Lh(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function AI(){return zi().memoizedState}function Tg(t,e,n,i){var r=xr();at.flags|=t,r.memoizedState=Lh(1|e,n,void 0,i===void 0?null:i)}function Ly(t,e,n,i){var r=zi();i=i===void 0?null:i;var s=void 0;if(kt!==null){var o=kt.memoizedState;if(s=o.destroy,i!==null&&Lb(i,o.deps)){r.memoizedState=Lh(e,n,s,i);return}}at.flags|=t,r.memoizedState=Lh(1|e,n,s,i)}function WS(t,e){return Tg(8390656,8,t,e)}function Fb(t,e){return Ly(2048,8,t,e)}function xI(t,e){return Ly(4,2,t,e)}function TI(t,e){return Ly(4,4,t,e)}function CI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kI(t,e,n){return n=n!=null?n.concat([t]):null,Ly(4,4,CI.bind(null,e,t),n)}function Ub(){}function II(t,e){var n=zi();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Lb(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function RI(t,e){var n=zi();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Lb(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function NI(t,e,n){return Pl&21?(gr(n,e)||(n=Ok(),at.lanes|=n,Ll|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Hn=!0),t.memoizedState=n)}function mO(t,e){var n=Ue;Ue=n!==0&&4>n?n:4,t(!0);var i=Pv.transition;Pv.transition={};try{t(!1),e()}finally{Ue=n,Pv.transition=i}}function MI(){return zi().memoizedState}function yO(t,e,n){var i=Wo(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},PI(t))LI(e,n);else if(n=pI(t,e,n,i),n!==null){var r=xn();dr(n,t,i,r),DI(n,e,i)}}function vO(t,e,n){var i=Wo(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(PI(t))LI(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,gr(a,o)){var l=e.interleaved;l===null?(r.next=r,Ib(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=pI(t,e,r,i),n!==null&&(r=xn(),dr(n,t,i,r),DI(n,e,i))}}function PI(t){var e=t.alternate;return t===at||e!==null&&e===at}function LI(t,e){uh=Nm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function DI(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,gb(t,n)}}var Mm={readContext:Bi,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},_O={readContext:Bi,useCallback:function(t,e){return xr().memoizedState=[t,e===void 0?null:e],t},useContext:Bi,useEffect:WS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Tg(4194308,4,CI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Tg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Tg(4,2,t,e)},useMemo:function(t,e){var n=xr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=xr();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=yO.bind(null,at,t),[i.memoizedState,t]},useRef:function(t){var e=xr();return t={current:t},e.memoizedState=t},useState:qS,useDebugValue:Ub,useDeferredValue:function(t){return xr().memoizedState=t},useTransition:function(){var t=qS(!1),e=t[0];return t=mO.bind(null,t[1]),xr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=at,r=xr();if(nt){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),Ut===null)throw Error(K(349));Pl&30||_I(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,WS(bI.bind(null,i,s,t),[t]),i.flags|=2048,Lh(9,EI.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=xr(),e=Ut.identifierPrefix;if(nt){var n=Ms,i=Ns;n=(i&~(1<<32-cr(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},EO={readContext:Bi,useCallback:II,useContext:Bi,useEffect:Fb,useImperativeHandle:kI,useInsertionEffect:xI,useLayoutEffect:TI,useMemo:RI,useReducer:Lv,useRef:AI,useState:function(){return Lv(Ph)},useDebugValue:Ub,useDeferredValue:function(t){var e=zi();return NI(e,kt.memoizedState,t)},useTransition:function(){var t=Lv(Ph)[0],e=zi().memoizedState;return[t,e]},useMutableSource:yI,useSyncExternalStore:vI,useId:MI,unstable_isNewReconciler:!1},bO={readContext:Bi,useCallback:II,useContext:Bi,useEffect:Fb,useImperativeHandle:kI,useInsertionEffect:xI,useLayoutEffect:TI,useMemo:RI,useReducer:Dv,useRef:AI,useState:function(){return Dv(Ph)},useDebugValue:Ub,useDeferredValue:function(t){var e=zi();return kt===null?e.memoizedState=t:NI(e,kt.memoizedState,t)},useTransition:function(){var t=Dv(Ph)[0],e=zi().memoizedState;return[t,e]},useMutableSource:yI,useSyncExternalStore:vI,useId:MI,unstable_isNewReconciler:!1};function Wi(t,e){if(t&&t.defaultProps){e=lt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function W_(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Dy={isMounted:function(t){return(t=t._reactInternals)?Vl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=xn(),r=Wo(t),s=Ps(i,r);s.payload=e,n!=null&&(s.callback=n),e=Vo(t,s,r),e!==null&&(dr(e,t,r,i),Ag(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=xn(),r=Wo(t),s=Ps(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Vo(t,s,r),e!==null&&(dr(e,t,r,i),Ag(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xn(),i=Wo(t),r=Ps(n,i);r.tag=2,e!=null&&(r.callback=e),e=Vo(t,r,i),e!==null&&(dr(e,t,i,n),Ag(e,t,i))}};function KS(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Th(n,i)||!Th(r,s):!0}function OI(t,e,n){var i=!1,r=Qo,s=e.contextType;return typeof s=="object"&&s!==null?s=Bi(s):(r=Vn(e)?Nl:dn.current,i=e.contextTypes,s=(i=i!=null)?Jc(t,r):Qo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Dy,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function YS(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Dy.enqueueReplaceState(e,e.state,null)}function K_(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Rb(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Bi(s):(s=Vn(e)?Nl:dn.current,r.context=Jc(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(W_(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Dy.enqueueReplaceState(r,r.state,null),Im(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ed(t,e){try{var n="",i=e;do n+=XL(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Ov(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Y_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wO=typeof WeakMap=="function"?WeakMap:Map;function FI(t,e,n){n=Ps(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Lm||(Lm=!0,rE=i),Y_(t,e)},n}function UI(t,e,n){n=Ps(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Y_(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Y_(t,e),typeof i!="function"&&(qo===null?qo=new Set([this]):qo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function XS(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new wO;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=OO.bind(null,t,e,n),e.then(t,t))}function JS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function QS(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ps(-1,1),e.tag=2,Vo(n,e,1))),n.lanes|=1),t)}var SO=$s.ReactCurrentOwner,Hn=!1;function wn(t,e,n,i){e.child=t===null?fI(e,null,n,i):Zc(e,t.child,n,i)}function ZS(t,e,n,i,r){n=n.render;var s=e.ref;return Fu(e,r),i=Db(t,e,n,i,s,r),n=Ob(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Bs(t,e,r)):(nt&&n&&Sb(e),e.flags|=1,wn(t,e,i,r),e.child)}function jS(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Wb(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,BI(t,e,s,i,r)):(t=Rg(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Th,n(o,i)&&t.ref===e.ref)return Bs(t,e,r)}return e.flags|=1,t=Ko(s,i),t.ref=e.ref,t.return=e,e.child=t}function BI(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Th(s,i)&&t.ref===e.ref)if(Hn=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Hn=!0);else return e.lanes=t.lanes,Bs(t,e,r)}return X_(t,e,n,i,r)}function zI(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Cu,ui),ui|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(Cu,ui),ui|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Ye(Cu,ui),ui|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Ye(Cu,ui),ui|=i;return wn(t,e,r,n),e.child}function HI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function X_(t,e,n,i,r){var s=Vn(n)?Nl:dn.current;return s=Jc(e,s),Fu(e,r),n=Db(t,e,n,i,s,r),i=Ob(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Bs(t,e,r)):(nt&&i&&Sb(e),e.flags|=1,wn(t,e,n,r),e.child)}function eA(t,e,n,i,r){if(Vn(n)){var s=!0;Am(e)}else s=!1;if(Fu(e,r),e.stateNode===null)Cg(t,e),OI(e,n,i),K_(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Bi(u):(u=Vn(n)?Nl:dn.current,u=Jc(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&YS(e,o,i,u),js=!1;var f=e.memoizedState;o.state=f,Im(e,i,o,r),l=e.memoizedState,a!==i||f!==l||$n.current||js?(typeof c=="function"&&(W_(e,n,c,i),l=e.memoizedState),(a=js||KS(e,n,a,i,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,gI(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Wi(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Bi(l):(l=Vn(n)?Nl:dn.current,l=Jc(e,l));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&YS(e,o,i,l),js=!1,f=e.memoizedState,o.state=f,Im(e,i,o,r);var y=e.memoizedState;a!==d||f!==y||$n.current||js?(typeof g=="function"&&(W_(e,n,g,i),y=e.memoizedState),(u=js||KS(e,n,u,i,f,y,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return J_(t,e,n,i,s,r)}function J_(t,e,n,i,r,s){HI(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&BS(e,n,!1),Bs(t,e,s);i=e.stateNode,SO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Zc(e,t.child,null,s),e.child=Zc(e,null,a,s)):wn(t,e,a,s),e.memoizedState=i.state,r&&BS(e,n,!0),e.child}function GI(t){var e=t.stateNode;e.pendingContext?US(t,e.pendingContext,e.pendingContext!==e.context):e.context&&US(t,e.context,!1),Nb(t,e.containerInfo)}function tA(t,e,n,i,r){return Qc(),xb(r),e.flags|=256,wn(t,e,n,i),e.child}var Q_={dehydrated:null,treeContext:null,retryLane:0};function Z_(t){return{baseLanes:t,cachePool:null,transitions:null}}function $I(t,e,n){var i=e.pendingProps,r=st.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ye(st,r&1),t===null)return V_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Uy(o,i,0,null),t=kl(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Z_(n),e.memoizedState=Q_,t):Bb(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return AO(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Ko(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Ko(a,s):(s=kl(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Z_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Q_,i}return s=t.child,t=s.sibling,i=Ko(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Bb(t,e){return e=Uy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kp(t,e,n,i){return i!==null&&xb(i),Zc(e,t.child,null,n),t=Bb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function AO(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Ov(Error(K(422))),Kp(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Uy({mode:"visible",children:i.children},r,0,null),s=kl(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Zc(e,t.child,null,o),e.child.memoizedState=Z_(o),e.memoizedState=Q_,s);if(!(e.mode&1))return Kp(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(K(419)),i=Ov(s,i,void 0),Kp(t,e,o,i)}if(a=(o&t.childLanes)!==0,Hn||a){if(i=Ut,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Us(t,r),dr(i,t,r,-1))}return qb(),i=Ov(Error(K(421))),Kp(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=FO.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,hi=$o(r.nextSibling),fi=e,nt=!0,ar=null,t!==null&&(Ii[Ri++]=Ns,Ii[Ri++]=Ms,Ii[Ri++]=Ml,Ns=t.id,Ms=t.overflow,Ml=e),e=Bb(e,i.children),e.flags|=4096,e)}function nA(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),q_(t.return,e,n)}function Fv(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function VI(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(wn(t,e,i.children,n),i=st.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nA(t,n,e);else if(t.tag===19)nA(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ye(st,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Rm(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Fv(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Rm(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Fv(e,!0,n,null,s);break;case"together":Fv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ll|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Ko(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ko(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xO(t,e,n){switch(e.tag){case 3:GI(e),Qc();break;case 5:mI(e);break;case 1:Vn(e.type)&&Am(e);break;case 4:Nb(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ye(Cm,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ye(st,st.current&1),e.flags|=128,null):n&e.child.childLanes?$I(t,e,n):(Ye(st,st.current&1),t=Bs(t,e,n),t!==null?t.sibling:null);Ye(st,st.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return VI(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ye(st,st.current),i)break;return null;case 22:case 23:return e.lanes=0,zI(t,e,n)}return Bs(t,e,n)}var qI,j_,WI,KI;qI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};j_=function(){};WI=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,wa(Wr.current);var s=null;switch(n){case"input":r=b_(t,r),i=b_(t,i),s=[];break;case"select":r=lt({},r,{value:void 0}),i=lt({},i,{value:void 0}),s=[];break;case"textarea":r=A_(t,r),i=A_(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=wm)}T_(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_h.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_h.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Xe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};KI=function(t,e,n,i){n!==i&&(e.flags|=4)};function xd(t,e){if(!nt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function TO(t,e,n){var i=e.pendingProps;switch(Ab(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(e),null;case 1:return Vn(e.type)&&Sm(),Qt(e),null;case 3:return i=e.stateNode,jc(),Qe($n),Qe(dn),Pb(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(qp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ar!==null&&(aE(ar),ar=null))),j_(t,e),Qt(e),null;case 5:Mb(e);var r=wa(Nh.current);if(n=e.type,t!==null&&e.stateNode!=null)WI(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(K(166));return Qt(e),null}if(t=wa(Wr.current),qp(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Vr]=e,i[Ih]=s,t=(e.mode&1)!==0,n){case"dialog":Xe("cancel",i),Xe("close",i);break;case"iframe":case"object":case"embed":Xe("load",i);break;case"video":case"audio":for(r=0;r<Bd.length;r++)Xe(Bd[r],i);break;case"source":Xe("error",i);break;case"img":case"image":case"link":Xe("error",i),Xe("load",i);break;case"details":Xe("toggle",i);break;case"input":dS(i,s),Xe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Xe("invalid",i);break;case"textarea":fS(i,s),Xe("invalid",i)}T_(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Vp(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Vp(i.textContent,a,t),r=["children",""+a]):_h.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Xe("scroll",i)}switch(n){case"input":Op(i),hS(i,s,!0);break;case"textarea":Op(i),pS(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=wm)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Vr]=e,t[Ih]=i,qI(t,e,!1,!1),e.stateNode=t;e:{switch(o=C_(n,i),n){case"dialog":Xe("cancel",t),Xe("close",t),r=i;break;case"iframe":case"object":case"embed":Xe("load",t),r=i;break;case"video":case"audio":for(r=0;r<Bd.length;r++)Xe(Bd[r],t);r=i;break;case"source":Xe("error",t),r=i;break;case"img":case"image":case"link":Xe("error",t),Xe("load",t),r=i;break;case"details":Xe("toggle",t),r=i;break;case"input":dS(t,i),r=b_(t,i),Xe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=lt({},i,{value:void 0}),Xe("invalid",t);break;case"textarea":fS(t,i),r=A_(t,i),Xe("invalid",t);break;default:r=i}T_(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Ak(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wk(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Eh(t,l):typeof l=="number"&&Eh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(_h.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Xe("scroll",t):l!=null&&ub(t,s,l,o))}switch(n){case"input":Op(t),hS(t,i,!1);break;case"textarea":Op(t),pS(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Jo(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Pu(t,!!i.multiple,s,!1):i.defaultValue!=null&&Pu(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=wm)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qt(e),null;case 6:if(t&&e.stateNode!=null)KI(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(K(166));if(n=wa(Nh.current),wa(Wr.current),qp(e)){if(i=e.stateNode,n=e.memoizedProps,i[Vr]=e,(s=i.nodeValue!==n)&&(t=fi,t!==null))switch(t.tag){case 3:Vp(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vp(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Vr]=e,e.stateNode=i}return Qt(e),null;case 13:if(Qe(st),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nt&&hi!==null&&e.mode&1&&!(e.flags&128))dI(),Qc(),e.flags|=98560,s=!1;else if(s=qp(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(K(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[Vr]=e}else Qc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qt(e),s=!1}else ar!==null&&(aE(ar),ar=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||st.current&1?It===0&&(It=3):qb())),e.updateQueue!==null&&(e.flags|=4),Qt(e),null);case 4:return jc(),j_(t,e),t===null&&Ch(e.stateNode.containerInfo),Qt(e),null;case 10:return kb(e.type._context),Qt(e),null;case 17:return Vn(e.type)&&Sm(),Qt(e),null;case 19:if(Qe(st),s=e.memoizedState,s===null)return Qt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)xd(s,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Rm(t),o!==null){for(e.flags|=128,xd(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ye(st,st.current&1|2),e.child}t=t.sibling}s.tail!==null&&gt()>td&&(e.flags|=128,i=!0,xd(s,!1),e.lanes=4194304)}else{if(!i)if(t=Rm(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!nt)return Qt(e),null}else 2*gt()-s.renderingStartTime>td&&n!==1073741824&&(e.flags|=128,i=!0,xd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=gt(),e.sibling=null,n=st.current,Ye(st,i?n&1|2:n&1),e):(Qt(e),null);case 22:case 23:return Vb(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ui&1073741824&&(Qt(e),e.subtreeFlags&6&&(e.flags|=8192)):Qt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function CO(t,e){switch(Ab(e),e.tag){case 1:return Vn(e.type)&&Sm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return jc(),Qe($n),Qe(dn),Pb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mb(e),null;case 13:if(Qe(st),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));Qc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(st),null;case 4:return jc(),null;case 10:return kb(e.type._context),null;case 22:case 23:return Vb(),null;case 24:return null;default:return null}}var Yp=!1,an=!1,kO=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Tu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ct(t,e,i)}else n.current=null}function eE(t,e,n){try{n()}catch(i){ct(t,e,i)}}var iA=!1;function IO(t,e){if(F_=_m,t=Zk(),wb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var g;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++u===r&&(a=o),f===s&&++c===i&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(U_={focusedElem:t,selectionRange:n},_m=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,E=y.memoizedState,_=e.stateNode,b=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:Wi(e.type,v),E);_.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(A){ct(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return y=iA,iA=!1,y}function ch(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&eE(e,n,s)}r=r.next}while(r!==i)}}function Oy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function tE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function YI(t){var e=t.alternate;e!==null&&(t.alternate=null,YI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vr],delete e[Ih],delete e[H_],delete e[dO],delete e[hO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function XI(t){return t.tag===5||t.tag===3||t.tag===4}function rA(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||XI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nE(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wm));else if(i!==4&&(t=t.child,t!==null))for(nE(t,e,n),t=t.sibling;t!==null;)nE(t,e,n),t=t.sibling}function iE(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(iE(t,e,n),t=t.sibling;t!==null;)iE(t,e,n),t=t.sibling}var Wt=null,or=!1;function Xs(t,e,n){for(n=n.child;n!==null;)JI(t,e,n),n=n.sibling}function JI(t,e,n){if(qr&&typeof qr.onCommitFiberUnmount=="function")try{qr.onCommitFiberUnmount(ky,n)}catch{}switch(n.tag){case 5:an||Tu(n,e);case 6:var i=Wt,r=or;Wt=null,Xs(t,e,n),Wt=i,or=r,Wt!==null&&(or?(t=Wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Wt.removeChild(n.stateNode));break;case 18:Wt!==null&&(or?(t=Wt,n=n.stateNode,t.nodeType===8?Rv(t.parentNode,n):t.nodeType===1&&Rv(t,n),Ah(t)):Rv(Wt,n.stateNode));break;case 4:i=Wt,r=or,Wt=n.stateNode.containerInfo,or=!0,Xs(t,e,n),Wt=i,or=r;break;case 0:case 11:case 14:case 15:if(!an&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&eE(n,e,o),r=r.next}while(r!==i)}Xs(t,e,n);break;case 1:if(!an&&(Tu(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){ct(n,e,a)}Xs(t,e,n);break;case 21:Xs(t,e,n);break;case 22:n.mode&1?(an=(i=an)||n.memoizedState!==null,Xs(t,e,n),an=i):Xs(t,e,n);break;default:Xs(t,e,n)}}function sA(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kO),e.forEach(function(i){var r=UO.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Vi(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Wt=a.stateNode,or=!1;break e;case 3:Wt=a.stateNode.containerInfo,or=!0;break e;case 4:Wt=a.stateNode.containerInfo,or=!0;break e}a=a.return}if(Wt===null)throw Error(K(160));JI(s,o,r),Wt=null,or=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){ct(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)QI(e,t),e=e.sibling}function QI(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vi(e,t),Er(t),i&4){try{ch(3,t,t.return),Oy(3,t)}catch(v){ct(t,t.return,v)}try{ch(5,t,t.return)}catch(v){ct(t,t.return,v)}}break;case 1:Vi(e,t),Er(t),i&512&&n!==null&&Tu(n,n.return);break;case 5:if(Vi(e,t),Er(t),i&512&&n!==null&&Tu(n,n.return),t.flags&32){var r=t.stateNode;try{Eh(r,"")}catch(v){ct(t,t.return,v)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&_k(r,s),C_(a,o);var u=C_(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?Ak(r,d):c==="dangerouslySetInnerHTML"?wk(r,d):c==="children"?Eh(r,d):ub(r,c,d,u)}switch(a){case"input":w_(r,s);break;case"textarea":Ek(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Pu(r,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?Pu(r,!!s.multiple,s.defaultValue,!0):Pu(r,!!s.multiple,s.multiple?[]:"",!1))}r[Ih]=s}catch(v){ct(t,t.return,v)}}break;case 6:if(Vi(e,t),Er(t),i&4){if(t.stateNode===null)throw Error(K(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(v){ct(t,t.return,v)}}break;case 3:if(Vi(e,t),Er(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ah(e.containerInfo)}catch(v){ct(t,t.return,v)}break;case 4:Vi(e,t),Er(t);break;case 13:Vi(e,t),Er(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Gb=gt())),i&4&&sA(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(an=(u=an)||c,Vi(e,t),an=u):Vi(e,t),Er(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ie=t,c=t.child;c!==null;){for(d=ie=c;ie!==null;){switch(f=ie,g=f.child,f.tag){case 0:case 11:case 14:case 15:ch(4,f,f.return);break;case 1:Tu(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){ct(i,n,v)}}break;case 5:Tu(f,f.return);break;case 22:if(f.memoizedState!==null){aA(d);continue}}g!==null?(g.return=f,ie=g):aA(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Sk("display",o))}catch(v){ct(t,t.return,v)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){ct(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Vi(e,t),Er(t),i&4&&sA(t);break;case 21:break;default:Vi(e,t),Er(t)}}function Er(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(XI(n)){var i=n;break e}n=n.return}throw Error(K(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Eh(r,""),i.flags&=-33);var s=rA(t);iE(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=rA(t);nE(t,a,o);break;default:throw Error(K(161))}}catch(l){ct(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function RO(t,e,n){ie=t,ZI(t)}function ZI(t,e,n){for(var i=(t.mode&1)!==0;ie!==null;){var r=ie,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Yp;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||an;a=Yp;var u=an;if(Yp=o,(an=l)&&!u)for(ie=r;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?lA(r):l!==null?(l.return=o,ie=l):lA(r);for(;s!==null;)ie=s,ZI(s),s=s.sibling;ie=r,Yp=a,an=u}oA(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,ie=s):oA(t)}}function oA(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:an||Oy(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!an)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Wi(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&VS(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}VS(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Ah(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}an||e.flags&512&&tE(e)}catch(f){ct(e,e.return,f)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function aA(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function lA(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Oy(4,e)}catch(l){ct(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){ct(e,r,l)}}var s=e.return;try{tE(e)}catch(l){ct(e,s,l)}break;case 5:var o=e.return;try{tE(e)}catch(l){ct(e,o,l)}}}catch(l){ct(e,e.return,l)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var NO=Math.ceil,Pm=$s.ReactCurrentDispatcher,zb=$s.ReactCurrentOwner,Di=$s.ReactCurrentBatchConfig,Ie=0,Ut=null,Et=null,Yt=0,ui=0,Cu=na(0),It=0,Dh=null,Ll=0,Fy=0,Hb=0,dh=null,zn=null,Gb=0,td=1/0,ts=null,Lm=!1,rE=null,qo=null,Xp=!1,Oo=null,Dm=0,hh=0,sE=null,kg=-1,Ig=0;function xn(){return Ie&6?gt():kg!==-1?kg:kg=gt()}function Wo(t){return t.mode&1?Ie&2&&Yt!==0?Yt&-Yt:pO.transition!==null?(Ig===0&&(Ig=Ok()),Ig):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:$k(t.type)),t):1}function dr(t,e,n,i){if(50<hh)throw hh=0,sE=null,Error(K(185));Ep(t,n,i),(!(Ie&2)||t!==Ut)&&(t===Ut&&(!(Ie&2)&&(Fy|=n),It===4&&to(t,Yt)),qn(t,i),n===1&&Ie===0&&!(e.mode&1)&&(td=gt()+500,Py&&ia()))}function qn(t,e){var n=t.callbackNode;pD(t,e);var i=vm(t,t===Ut?Yt:0);if(i===0)n!==null&&yS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&yS(n),e===1)t.tag===0?fO(uA.bind(null,t)):lI(uA.bind(null,t)),uO(function(){!(Ie&6)&&ia()}),n=null;else{switch(Fk(i)){case 1:n=pb;break;case 4:n=Lk;break;case 16:n=ym;break;case 536870912:n=Dk;break;default:n=ym}n=oR(n,jI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jI(t,e){if(kg=-1,Ig=0,Ie&6)throw Error(K(327));var n=t.callbackNode;if(Uu()&&t.callbackNode!==n)return null;var i=vm(t,t===Ut?Yt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Om(t,i);else{e=i;var r=Ie;Ie|=2;var s=tR();(Ut!==t||Yt!==e)&&(ts=null,td=gt()+500,Cl(t,e));do try{LO();break}catch(a){eR(t,a)}while(!0);Cb(),Pm.current=s,Ie=r,Et!==null?e=0:(Ut=null,Yt=0,e=It)}if(e!==0){if(e===2&&(r=M_(t),r!==0&&(i=r,e=oE(t,r))),e===1)throw n=Dh,Cl(t,0),to(t,i),qn(t,gt()),n;if(e===6)to(t,i);else{if(r=t.current.alternate,!(i&30)&&!MO(r)&&(e=Om(t,i),e===2&&(s=M_(t),s!==0&&(i=s,e=oE(t,s))),e===1))throw n=Dh,Cl(t,0),to(t,i),qn(t,gt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(K(345));case 2:ha(t,zn,ts);break;case 3:if(to(t,i),(i&130023424)===i&&(e=Gb+500-gt(),10<e)){if(vm(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){xn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=z_(ha.bind(null,t,zn,ts),e);break}ha(t,zn,ts);break;case 4:if(to(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-cr(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=gt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*NO(i/1960))-i,10<i){t.timeoutHandle=z_(ha.bind(null,t,zn,ts),i);break}ha(t,zn,ts);break;case 5:ha(t,zn,ts);break;default:throw Error(K(329))}}}return qn(t,gt()),t.callbackNode===n?jI.bind(null,t):null}function oE(t,e){var n=dh;return t.current.memoizedState.isDehydrated&&(Cl(t,e).flags|=256),t=Om(t,e),t!==2&&(e=zn,zn=n,e!==null&&aE(e)),t}function aE(t){zn===null?zn=t:zn.push.apply(zn,t)}function MO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!gr(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function to(t,e){for(e&=~Hb,e&=~Fy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cr(e),i=1<<n;t[n]=-1,e&=~i}}function uA(t){if(Ie&6)throw Error(K(327));Uu();var e=vm(t,0);if(!(e&1))return qn(t,gt()),null;var n=Om(t,e);if(t.tag!==0&&n===2){var i=M_(t);i!==0&&(e=i,n=oE(t,i))}if(n===1)throw n=Dh,Cl(t,0),to(t,e),qn(t,gt()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ha(t,zn,ts),qn(t,gt()),null}function $b(t,e){var n=Ie;Ie|=1;try{return t(e)}finally{Ie=n,Ie===0&&(td=gt()+500,Py&&ia())}}function Dl(t){Oo!==null&&Oo.tag===0&&!(Ie&6)&&Uu();var e=Ie;Ie|=1;var n=Di.transition,i=Ue;try{if(Di.transition=null,Ue=1,t)return t()}finally{Ue=i,Di.transition=n,Ie=e,!(Ie&6)&&ia()}}function Vb(){ui=Cu.current,Qe(Cu)}function Cl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lO(n)),Et!==null)for(n=Et.return;n!==null;){var i=n;switch(Ab(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Sm();break;case 3:jc(),Qe($n),Qe(dn),Pb();break;case 5:Mb(i);break;case 4:jc();break;case 13:Qe(st);break;case 19:Qe(st);break;case 10:kb(i.type._context);break;case 22:case 23:Vb()}n=n.return}if(Ut=t,Et=t=Ko(t.current,null),Yt=ui=e,It=0,Dh=null,Hb=Fy=Ll=0,zn=dh=null,ba!==null){for(e=0;e<ba.length;e++)if(n=ba[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}ba=null}return t}function eR(t,e){do{var n=Et;try{if(Cb(),xg.current=Mm,Nm){for(var i=at.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Nm=!1}if(Pl=0,Ft=kt=at=null,uh=!1,Mh=0,zb.current=null,n===null||n.return===null){It=1,Dh=e,Et=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Yt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=JS(o);if(g!==null){g.flags&=-257,QS(g,o,a,s,e),g.mode&1&&XS(s,u,e),e=g,l=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){XS(s,u,e),qb();break e}l=Error(K(426))}}else if(nt&&a.mode&1){var E=JS(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),QS(E,o,a,s,e),xb(ed(l,a));break e}}s=l=ed(l,a),It!==4&&(It=2),dh===null?dh=[s]:dh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=FI(s,l,e);$S(s,_);break e;case 1:a=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(qo===null||!qo.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=UI(s,a,e);$S(s,A);break e}}s=s.return}while(s!==null)}iR(n)}catch(k){e=k,Et===n&&n!==null&&(Et=n=n.return);continue}break}while(!0)}function tR(){var t=Pm.current;return Pm.current=Mm,t===null?Mm:t}function qb(){(It===0||It===3||It===2)&&(It=4),Ut===null||!(Ll&268435455)&&!(Fy&268435455)||to(Ut,Yt)}function Om(t,e){var n=Ie;Ie|=2;var i=tR();(Ut!==t||Yt!==e)&&(ts=null,Cl(t,e));do try{PO();break}catch(r){eR(t,r)}while(!0);if(Cb(),Ie=n,Pm.current=i,Et!==null)throw Error(K(261));return Ut=null,Yt=0,It}function PO(){for(;Et!==null;)nR(Et)}function LO(){for(;Et!==null&&!sD();)nR(Et)}function nR(t){var e=sR(t.alternate,t,ui);t.memoizedProps=t.pendingProps,e===null?iR(t):Et=e,zb.current=null}function iR(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=CO(n,e),n!==null){n.flags&=32767,Et=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,Et=null;return}}else if(n=TO(n,e,ui),n!==null){Et=n;return}if(e=e.sibling,e!==null){Et=e;return}Et=e=t}while(e!==null);It===0&&(It=5)}function ha(t,e,n){var i=Ue,r=Di.transition;try{Di.transition=null,Ue=1,DO(t,e,n,i)}finally{Di.transition=r,Ue=i}return null}function DO(t,e,n,i){do Uu();while(Oo!==null);if(Ie&6)throw Error(K(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(gD(t,s),t===Ut&&(Et=Ut=null,Yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xp||(Xp=!0,oR(ym,function(){return Uu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Di.transition,Di.transition=null;var o=Ue;Ue=1;var a=Ie;Ie|=4,zb.current=null,IO(t,n),QI(n,t),tO(U_),_m=!!F_,U_=F_=null,t.current=n,RO(n),oD(),Ie=a,Ue=o,Di.transition=s}else t.current=n;if(Xp&&(Xp=!1,Oo=t,Dm=r),s=t.pendingLanes,s===0&&(qo=null),uD(n.stateNode),qn(t,gt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Lm)throw Lm=!1,t=rE,rE=null,t;return Dm&1&&t.tag!==0&&Uu(),s=t.pendingLanes,s&1?t===sE?hh++:(hh=0,sE=t):hh=0,ia(),null}function Uu(){if(Oo!==null){var t=Fk(Dm),e=Di.transition,n=Ue;try{if(Di.transition=null,Ue=16>t?16:t,Oo===null)var i=!1;else{if(t=Oo,Oo=null,Dm=0,Ie&6)throw Error(K(331));var r=Ie;for(Ie|=4,ie=t.current;ie!==null;){var s=ie,o=s.child;if(ie.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ie=u;ie!==null;){var c=ie;switch(c.tag){case 0:case 11:case 15:ch(8,c,s)}var d=c.child;if(d!==null)d.return=c,ie=d;else for(;ie!==null;){c=ie;var f=c.sibling,g=c.return;if(YI(c),c===u){ie=null;break}if(f!==null){f.return=g,ie=f;break}ie=g}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var E=v.sibling;v.sibling=null,v=E}while(v!==null)}}ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ie=o;else e:for(;ie!==null;){if(s=ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ch(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,ie=_;break e}ie=s.return}}var b=t.current;for(ie=b;ie!==null;){o=ie;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ie=w;else e:for(o=b;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Oy(9,a)}}catch(k){ct(a,a.return,k)}if(a===o){ie=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,ie=A;break e}ie=a.return}}if(Ie=r,ia(),qr&&typeof qr.onPostCommitFiberRoot=="function")try{qr.onPostCommitFiberRoot(ky,t)}catch{}i=!0}return i}finally{Ue=n,Di.transition=e}}return!1}function cA(t,e,n){e=ed(n,e),e=FI(t,e,1),t=Vo(t,e,1),e=xn(),t!==null&&(Ep(t,1,e),qn(t,e))}function ct(t,e,n){if(t.tag===3)cA(t,t,n);else for(;e!==null;){if(e.tag===3){cA(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(qo===null||!qo.has(i))){t=ed(n,t),t=UI(e,t,1),e=Vo(e,t,1),t=xn(),e!==null&&(Ep(e,1,t),qn(e,t));break}}e=e.return}}function OO(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=xn(),t.pingedLanes|=t.suspendedLanes&n,Ut===t&&(Yt&n)===n&&(It===4||It===3&&(Yt&130023424)===Yt&&500>gt()-Gb?Cl(t,0):Hb|=n),qn(t,e)}function rR(t,e){e===0&&(t.mode&1?(e=Bp,Bp<<=1,!(Bp&130023424)&&(Bp=4194304)):e=1);var n=xn();t=Us(t,e),t!==null&&(Ep(t,e,n),qn(t,n))}function FO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rR(t,n)}function UO(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(K(314))}i!==null&&i.delete(e),rR(t,n)}var sR;sR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$n.current)Hn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Hn=!1,xO(t,e,n);Hn=!!(t.flags&131072)}else Hn=!1,nt&&e.flags&1048576&&uI(e,Tm,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Cg(t,e),t=e.pendingProps;var r=Jc(e,dn.current);Fu(e,n),r=Db(null,e,i,t,r,n);var s=Ob();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vn(i)?(s=!0,Am(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Rb(e),r.updater=Dy,e.stateNode=r,r._reactInternals=e,K_(e,i,t,n),e=J_(null,e,i,!0,s,n)):(e.tag=0,nt&&s&&Sb(e),wn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Cg(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=zO(i),t=Wi(i,t),r){case 0:e=X_(null,e,i,t,n);break e;case 1:e=eA(null,e,i,t,n);break e;case 11:e=ZS(null,e,i,t,n);break e;case 14:e=jS(null,e,i,Wi(i.type,t),n);break e}throw Error(K(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Wi(i,r),X_(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Wi(i,r),eA(t,e,i,r,n);case 3:e:{if(GI(e),t===null)throw Error(K(387));i=e.pendingProps,s=e.memoizedState,r=s.element,gI(t,e),Im(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=ed(Error(K(423)),e),e=tA(t,e,i,n,r);break e}else if(i!==r){r=ed(Error(K(424)),e),e=tA(t,e,i,n,r);break e}else for(hi=$o(e.stateNode.containerInfo.firstChild),fi=e,nt=!0,ar=null,n=fI(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qc(),i===r){e=Bs(t,e,n);break e}wn(t,e,i,n)}e=e.child}return e;case 5:return mI(e),t===null&&V_(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,B_(i,r)?o=null:s!==null&&B_(i,s)&&(e.flags|=32),HI(t,e),wn(t,e,o,n),e.child;case 6:return t===null&&V_(e),null;case 13:return $I(t,e,n);case 4:return Nb(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Zc(e,null,i,n):wn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Wi(i,r),ZS(t,e,i,r,n);case 7:return wn(t,e,e.pendingProps,n),e.child;case 8:return wn(t,e,e.pendingProps.children,n),e.child;case 12:return wn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ye(Cm,i._currentValue),i._currentValue=o,s!==null)if(gr(s.value,o)){if(s.children===r.children&&!$n.current){e=Bs(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ps(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),q_(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),q_(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Fu(e,n),r=Bi(r),i=i(r),e.flags|=1,wn(t,e,i,n),e.child;case 14:return i=e.type,r=Wi(i,e.pendingProps),r=Wi(i.type,r),jS(t,e,i,r,n);case 15:return BI(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Wi(i,r),Cg(t,e),e.tag=1,Vn(i)?(t=!0,Am(e)):t=!1,Fu(e,n),OI(e,i,r),K_(e,i,r,n),J_(null,e,i,!0,t,n);case 19:return VI(t,e,n);case 22:return zI(t,e,n)}throw Error(K(156,e.tag))};function oR(t,e){return Pk(t,e)}function BO(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Li(t,e,n,i){return new BO(t,e,n,i)}function Wb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zO(t){if(typeof t=="function")return Wb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===db)return 11;if(t===hb)return 14}return 2}function Ko(t,e){var n=t.alternate;return n===null?(n=Li(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Rg(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Wb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case yu:return kl(n.children,r,s,e);case cb:o=8,r|=8;break;case y_:return t=Li(12,n,e,r|2),t.elementType=y_,t.lanes=s,t;case v_:return t=Li(13,n,e,r),t.elementType=v_,t.lanes=s,t;case __:return t=Li(19,n,e,r),t.elementType=__,t.lanes=s,t;case mk:return Uy(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pk:o=10;break e;case gk:o=9;break e;case db:o=11;break e;case hb:o=14;break e;case Zs:o=16,i=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=Li(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function kl(t,e,n,i){return t=Li(7,t,i,e),t.lanes=n,t}function Uy(t,e,n,i){return t=Li(22,t,i,e),t.elementType=mk,t.lanes=n,t.stateNode={isHidden:!1},t}function Uv(t,e,n){return t=Li(6,t,null,e),t.lanes=n,t}function Bv(t,e,n){return e=Li(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function HO(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_v(0),this.expirationTimes=_v(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_v(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Kb(t,e,n,i,r,s,o,a,l){return t=new HO(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Li(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rb(s),t}function GO(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function aR(t){if(!t)return Qo;t=t._reactInternals;e:{if(Vl(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(Vn(n))return aI(t,n,e)}return e}function lR(t,e,n,i,r,s,o,a,l){return t=Kb(n,i,!0,t,r,s,o,a,l),t.context=aR(null),n=t.current,i=xn(),r=Wo(n),s=Ps(i,r),s.callback=e??null,Vo(n,s,r),t.current.lanes=r,Ep(t,r,i),qn(t,i),t}function By(t,e,n,i){var r=e.current,s=xn(),o=Wo(r);return n=aR(n),e.context===null?e.context=n:e.pendingContext=n,e=Ps(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Vo(r,e,o),t!==null&&(dr(t,r,o,s),Ag(t,r,o)),o}function Fm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dA(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yb(t,e){dA(t,e),(t=t.alternate)&&dA(t,e)}function $O(){return null}var uR=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xb(t){this._internalRoot=t}zy.prototype.render=Xb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));By(t,e,null,null)};zy.prototype.unmount=Xb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dl(function(){By(null,t,null,null)}),e[Fs]=null}};function zy(t){this._internalRoot=t}zy.prototype.unstable_scheduleHydration=function(t){if(t){var e=zk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<eo.length&&e!==0&&e<eo[n].priority;n++);eo.splice(n,0,t),n===0&&Gk(t)}};function Jb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hA(){}function VO(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Fm(o);s.call(u)}}var o=lR(e,i,t,0,null,!1,!1,"",hA);return t._reactRootContainer=o,t[Fs]=o.current,Ch(t.nodeType===8?t.parentNode:t),Dl(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Fm(l);a.call(u)}}var l=Kb(t,0,!1,null,null,!1,!1,"",hA);return t._reactRootContainer=l,t[Fs]=l.current,Ch(t.nodeType===8?t.parentNode:t),Dl(function(){By(e,l,n,i)}),l}function Gy(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Fm(o);a.call(l)}}By(e,o,t,r)}else o=VO(n,e,t,r,i);return Fm(o)}Uk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ud(e.pendingLanes);n!==0&&(gb(e,n|1),qn(e,gt()),!(Ie&6)&&(td=gt()+500,ia()))}break;case 13:Dl(function(){var i=Us(t,1);if(i!==null){var r=xn();dr(i,t,1,r)}}),Yb(t,1)}};mb=function(t){if(t.tag===13){var e=Us(t,134217728);if(e!==null){var n=xn();dr(e,t,134217728,n)}Yb(t,134217728)}};Bk=function(t){if(t.tag===13){var e=Wo(t),n=Us(t,e);if(n!==null){var i=xn();dr(n,t,e,i)}Yb(t,e)}};zk=function(){return Ue};Hk=function(t,e){var n=Ue;try{return Ue=t,e()}finally{Ue=n}};I_=function(t,e,n){switch(e){case"input":if(w_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=My(i);if(!r)throw Error(K(90));vk(i),w_(i,r)}}}break;case"textarea":Ek(t,n);break;case"select":e=n.value,e!=null&&Pu(t,!!n.multiple,e,!1)}};Ck=$b;kk=Dl;var qO={usingClientEntryPoint:!1,Events:[wp,bu,My,xk,Tk,$b]},Td={findFiberByHostInstance:Ea,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WO={bundleType:Td.bundleType,version:Td.version,rendererPackageName:Td.rendererPackageName,rendererConfig:Td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$s.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Nk(t),t===null?null:t.stateNode},findFiberByHostInstance:Td.findFiberByHostInstance||$O,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jp.isDisabled&&Jp.supportsFiber)try{ky=Jp.inject(WO),qr=Jp}catch{}}yi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qO;yi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jb(e))throw Error(K(200));return GO(t,e,null,n)};yi.createRoot=function(t,e){if(!Jb(t))throw Error(K(299));var n=!1,i="",r=uR;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Kb(t,1,!1,null,null,n,!1,i,r),t[Fs]=e.current,Ch(t.nodeType===8?t.parentNode:t),new Xb(e)};yi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=Nk(e),t=t===null?null:t.stateNode,t};yi.flushSync=function(t){return Dl(t)};yi.hydrate=function(t,e,n){if(!Hy(e))throw Error(K(200));return Gy(null,t,e,!0,n)};yi.hydrateRoot=function(t,e,n){if(!Jb(t))throw Error(K(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=uR;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=lR(e,null,t,1,n??null,r,!1,s,o),t[Fs]=e.current,Ch(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new zy(e)};yi.render=function(t,e,n){if(!Hy(e))throw Error(K(200));return Gy(null,t,e,!1,n)};yi.unmountComponentAtNode=function(t){if(!Hy(t))throw Error(K(40));return t._reactRootContainer?(Dl(function(){Gy(null,null,t,!1,function(){t._reactRootContainer=null,t[Fs]=null})}),!0):!1};yi.unstable_batchedUpdates=$b;yi.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Hy(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Gy(t,e,n,!1,i)};yi.version="18.3.1-next-f1338f8080-20240426";function cR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cR)}catch(t){console.error(t)}}cR(),ck.exports=yi;var KO=ck.exports,fA=KO;g_.createRoot=fA.createRoot,g_.hydrateRoot=fA.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oh(){return Oh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Oh.apply(this,arguments)}var Fo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fo||(Fo={}));const pA="popstate";function YO(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return lE("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Um(r)}return JO(e,n,null,t)}function wt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XO(){return Math.random().toString(36).substr(2,8)}function gA(t,e){return{usr:t.state,key:t.key,idx:e}}function lE(t,e,n,i){return n===void 0&&(n=null),Oh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ld(e):e,{state:n,key:e&&e.key||i||XO()})}function Um(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ld(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function JO(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Fo.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(Oh({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=Fo.Pop;let E=c(),_=E==null?null:E-u;u=E,l&&l({action:a,location:v.location,delta:_})}function f(E,_){a=Fo.Push;let b=lE(v.location,E,_);u=c()+1;let w=gA(b,u),A=v.createHref(b);try{o.pushState(w,"",A)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(A)}s&&l&&l({action:a,location:v.location,delta:1})}function g(E,_){a=Fo.Replace;let b=lE(v.location,E,_);u=c();let w=gA(b,u),A=v.createHref(b);o.replaceState(w,"",A),s&&l&&l({action:a,location:v.location,delta:0})}function y(E){let _=r.location.origin!=="null"?r.location.origin:r.location.href,b=typeof E=="string"?E:Um(E);return b=b.replace(/ $/,"%20"),wt(_,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,_)}let v={get action(){return a},get location(){return t(r,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(pA,d),l=E,()=>{r.removeEventListener(pA,d),l=null}},createHref(E){return e(r,E)},createURL:y,encodeLocation(E){let _=y(E);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:g,go(E){return o.go(E)}};return v}var mA;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(mA||(mA={}));function QO(t,e,n){return n===void 0&&(n="/"),ZO(t,e,n)}function ZO(t,e,n,i){let r=typeof e=="string"?ld(e):e,s=Zb(r.pathname||"/",n);if(s==null)return null;let o=dR(t);jO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=dF(s);a=lF(o[l],u)}return a}function dR(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(wt(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=Yo([i,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(wt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),dR(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:oF(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of hR(s.path))r(s,o,l)}),e}function hR(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=hR(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function jO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aF(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const eF=/^:[\w-]+$/,tF=3,nF=2,iF=1,rF=10,sF=-2,yA=t=>t==="*";function oF(t,e){let n=t.split("/"),i=n.length;return n.some(yA)&&(i+=sF),e&&(i+=nF),n.filter(r=>!yA(r)).reduce((r,s)=>r+(eF.test(s)?tF:s===""?iF:rF),i)}function aF(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function lF(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=uF({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:Yo([s,d.pathname]),pathnameBase:mF(Yo([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Yo([s,d.pathnameBase]))}return o}function uF(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=cF(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,c,d)=>{let{paramName:f,isOptional:g}=c;if(f==="*"){let v=a[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const y=a[d];return g&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function cF(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Qb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function dF(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Zb(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const hF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fF=t=>hF.test(t);function pF(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?ld(t):t,s;if(n)if(fF(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Qb(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=vA(n.substring(1),"/"):s=vA(n,e)}else s=e;return{pathname:s,search:yF(i),hash:vF(r)}}function vA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function zv(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gF(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fR(t,e){let n=gF(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function pR(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=ld(t):(r=Oh({},t),wt(!r.pathname||!r.pathname.includes("?"),zv("?","pathname","search",r)),wt(!r.pathname||!r.pathname.includes("#"),zv("#","pathname","hash",r)),wt(!r.search||!r.search.includes("#"),zv("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=pF(r,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Yo=t=>t.join("/").replace(/\/\/+/g,"/"),mF=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yF=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vF=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _F(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const gR=["post","put","patch","delete"];new Set(gR);const EF=["get",...gR];new Set(EF);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fh(){return Fh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Fh.apply(this,arguments)}const jb=q.createContext(null),bF=q.createContext(null),ql=q.createContext(null),$y=q.createContext(null),ra=q.createContext({outlet:null,matches:[],isDataRoute:!1}),mR=q.createContext(null);function wF(t,e){let{relative:n}=e===void 0?{}:e;Ap()||wt(!1);let{basename:i,navigator:r}=q.useContext(ql),{hash:s,pathname:o,search:a}=vR(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:Yo([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Ap(){return q.useContext($y)!=null}function xp(){return Ap()||wt(!1),q.useContext($y).location}function yR(t){q.useContext(ql).static||q.useLayoutEffect(t)}function ew(){let{isDataRoute:t}=q.useContext(ra);return t?OF():SF()}function SF(){Ap()||wt(!1);let t=q.useContext(jb),{basename:e,future:n,navigator:i}=q.useContext(ql),{matches:r}=q.useContext(ra),{pathname:s}=xp(),o=JSON.stringify(fR(r,n.v7_relativeSplatPath)),a=q.useRef(!1);return yR(()=>{a.current=!0}),q.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let d=pR(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Yo([e,d.pathname])),(c.replace?i.replace:i.push)(d,c.state,c)},[e,i,o,s,t])}function AF(){let{matches:t}=q.useContext(ra),e=t[t.length-1];return e?e.params:{}}function vR(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=q.useContext(ql),{matches:r}=q.useContext(ra),{pathname:s}=xp(),o=JSON.stringify(fR(r,i.v7_relativeSplatPath));return q.useMemo(()=>pR(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function xF(t,e){return TF(t,e)}function TF(t,e,n,i){Ap()||wt(!1);let{navigator:r}=q.useContext(ql),{matches:s}=q.useContext(ra),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=xp(),c;if(e){var d;let E=typeof e=="string"?ld(e):e;l==="/"||(d=E.pathname)!=null&&d.startsWith(l)||wt(!1),c=E}else c=u;let f=c.pathname||"/",g=f;if(l!=="/"){let E=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(E.length).join("/")}let y=QO(t,{pathname:g}),v=NF(y&&y.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:Yo([l,r.encodeLocation?r.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:Yo([l,r.encodeLocation?r.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,n,i);return e&&v?q.createElement($y.Provider,{value:{location:Fh({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Fo.Pop}},v):v}function CF(){let t=DF(),e=_F(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),n?q.createElement("pre",{style:r},n):null,null)}const kF=q.createElement(CF,null);class IF extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?q.createElement(ra.Provider,{value:this.props.routeContext},q.createElement(mR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RF(t){let{routeContext:e,match:n,children:i}=t,r=q.useContext(jb);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(ra.Provider,{value:e},i)}function NF(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||wt(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:g}=n,y=d.route.loader&&f[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,f)=>{let g,y=!1,v=null,E=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||kF,l&&(u<0&&f===0?(FF("route-fallback"),y=!0,E=null):u===f&&(y=!0,E=d.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,f+1)),b=()=>{let w;return g?w=v:y?w=E:d.route.Component?w=q.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=c,q.createElement(RF,{match:d,routeContext:{outlet:c,matches:_,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?q.createElement(IF,{location:n.location,revalidation:n.revalidation,component:v,error:g,children:b(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):b()},null)}var _R=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(_R||{}),ER=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ER||{});function MF(t){let e=q.useContext(jb);return e||wt(!1),e}function PF(t){let e=q.useContext(bF);return e||wt(!1),e}function LF(t){let e=q.useContext(ra);return e||wt(!1),e}function bR(t){let e=LF(),n=e.matches[e.matches.length-1];return n.route.id||wt(!1),n.route.id}function DF(){var t;let e=q.useContext(mR),n=PF(),i=bR();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function OF(){let{router:t}=MF(_R.UseNavigateStable),e=bR(ER.UseNavigateStable),n=q.useRef(!1);return yR(()=>{n.current=!0}),q.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Fh({fromRouteId:e},s)))},[t,e])}const _A={};function FF(t,e,n){_A[t]||(_A[t]=!0)}function UF(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function uE(t){wt(!1)}function BF(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Fo.Pop,navigator:s,static:o=!1,future:a}=t;Ap()&&wt(!1);let l=e.replace(/^\/*/,"/"),u=q.useMemo(()=>({basename:l,navigator:s,static:o,future:Fh({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=ld(i));let{pathname:c="/",search:d="",hash:f="",state:g=null,key:y="default"}=i,v=q.useMemo(()=>{let E=Zb(c,l);return E==null?null:{location:{pathname:E,search:d,hash:f,state:g,key:y},navigationType:r}},[l,c,d,f,g,y,r]);return v==null?null:q.createElement(ql.Provider,{value:u},q.createElement($y.Provider,{children:n,value:v}))}function zF(t){let{children:e,location:n}=t;return xF(cE(e),n)}new Promise(()=>{});function cE(t,e){e===void 0&&(e=[]);let n=[];return q.Children.forEach(t,(i,r)=>{if(!q.isValidElement(i))return;let s=[...e,r];if(i.type===q.Fragment){n.push.apply(n,cE(i.props.children,s));return}i.type!==uE&&wt(!1),!i.props.index||!i.props.children||wt(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=cE(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dE(){return dE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},dE.apply(this,arguments)}function HF(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function GF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $F(t,e){return t.button===0&&(!e||e==="_self")&&!GF(t)}const VF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qF="6";try{window.__reactRouterVersion=qF}catch{}const WF="startTransition",EA=OL[WF];function KF(t){let{basename:e,children:n,future:i,window:r}=t,s=q.useRef();s.current==null&&(s.current=YO({window:r,v5Compat:!0}));let o=s.current,[a,l]=q.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},c=q.useCallback(d=>{u&&EA?EA(()=>l(d)):l(d)},[l,u]);return q.useLayoutEffect(()=>o.listen(c),[o,c]),q.useEffect(()=>UF(i),[i]),q.createElement(BF,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const YF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",XF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bA=q.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d}=e,f=HF(e,VF),{basename:g}=q.useContext(ql),y,v=!1;if(typeof u=="string"&&XF.test(u)&&(y=u,YF))try{let w=new URL(window.location.href),A=u.startsWith("//")?new URL(w.protocol+u):new URL(u),k=Zb(A.pathname,g);A.origin===w.origin&&k!=null?u=k+A.search+A.hash:v=!0}catch{}let E=wF(u,{relative:r}),_=JF(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:r,viewTransition:d});function b(w){i&&i(w),w.defaultPrevented||_(w)}return q.createElement("a",dE({},f,{href:y||E,onClick:v||s?i:b,ref:n,target:l}))});var wA;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(wA||(wA={}));var SA;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(SA||(SA={}));function JF(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=ew(),u=xp(),c=vR(t,{relative:o});return q.useCallback(d=>{if($F(d,n)){d.preventDefault();let f=i!==void 0?i:Um(u)===Um(c);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,c,i,r,n,t,s,o,a])}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var QF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ze=(t,e)=>{const n=q.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},c)=>q.createElement("svg",{ref:c,...QF,width:r,height:r,stroke:i,strokeWidth:o?Number(s)*24/Number(r):s,className:["lucide",`lucide-${ZF(t)}`,a].join(" "),...u},[...e.map(([d,f])=>q.createElement(d,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=Ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=Ze("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=Ze("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=Ze("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=Ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=Ze("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=Ze("FileOutput",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4",key:"702lig"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M2 15h10",key:"jfw4w8"}],["path",{d:"m5 12-3 3 3 3",key:"oke12k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=Ze("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=Ze("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=Ze("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=Ze("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=Ze("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=Ze("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=Ze("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=Ze("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=Ze("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=Ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=Ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=Ze("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=Ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=Ze("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=Ze("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=Ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=Ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=Ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);let Qp;const y2=new Uint8Array(16);function v2(){if(!Qp&&(Qp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Qp))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qp(y2)}const zt=[];for(let t=0;t<256;++t)zt.push((t+256).toString(16).slice(1));function _2(t,e=0){return zt[t[e+0]]+zt[t[e+1]]+zt[t[e+2]]+zt[t[e+3]]+"-"+zt[t[e+4]]+zt[t[e+5]]+"-"+zt[t[e+6]]+zt[t[e+7]]+"-"+zt[t[e+8]]+zt[t[e+9]]+"-"+zt[t[e+10]]+zt[t[e+11]]+zt[t[e+12]]+zt[t[e+13]]+zt[t[e+14]]+zt[t[e+15]]}const E2=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),TA={randomUUID:E2};function b2(t,e,n){if(TA.randomUUID&&!t)return TA.randomUUID();t=t||{};const i=t.random||(t.rng||v2)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,_2(i)}const xR=({toggleTheme:t,theme:e,title:n})=>{const r=xp().pathname.includes("/notebook/");return P.jsxs("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-md border-b border-border pl-6 pr-6 h-16 flex items-center justify-between transition-colors duration-300",children:[P.jsxs("div",{className:"flex items-center gap-4",children:[r?P.jsx(bA,{to:"/",className:"p-2 hover:bg-muted rounded-full transition-colors text-muted-foreground hover:text-foreground",children:P.jsx(jF,{size:20})}):P.jsx("div",{className:"p-2 bg-gradient-to-br from-primary to-blue-400 rounded-xl text-white shadow-md",children:P.jsx(wR,{size:20})}),n?P.jsx("h1",{className:"font-semibold text-lg truncate max-w-md",children:n}):P.jsx(bA,{to:"/",className:"font-semibold text-xl tracking-tight hover:opacity-80 transition-opacity",children:"NotebookLM Clone"})]}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-muted text-muted-foreground hover:text-foreground transition-colors","aria-label":"Toggle theme",children:e==="dark"?P.jsx(g2,{size:20}):P.jsx(c2,{size:20})}),P.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("open-settings")),className:"p-2 rounded-full hover:bg-muted text-muted-foreground hover:text-foreground transition-colors",title:"Settings & API Key",children:P.jsx(p2,{size:20})}),P.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-purple-400 to-pink-400 border-2 border-background ring-2 ring-muted cursor-pointer"})]})]})},w2=({notebook:t,onDelete:e,onClick:n})=>{const i=`var(--color-${t.colorIndex})`,r=`var(--color-${t.colorIndex}-fg)`;return P.jsxs("div",{onClick:n,className:"notebook-card bg-card border border-border rounded-3xl p-6 cursor-pointer relative group h-64 flex flex-col justify-between overflow-hidden",children:[P.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 rounded-bl-full opacity-50 transition-transform group-hover:scale-110",style:{backgroundColor:i}}),P.jsxs("div",{className:"relative z-10",children:[P.jsxs("div",{className:"flex justify-between items-start mb-4",children:[P.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-lg font-bold shadow-sm",style:{backgroundColor:i,color:r},children:t.title.charAt(0).toUpperCase()}),P.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-muted text-muted-foreground hover:text-destructive transition-colors opacity-0 group-hover:opacity-100",children:P.jsx(AR,{size:18})})]}),P.jsx("h3",{className:"font-bold text-xl mb-1 line-clamp-2",children:t.title}),P.jsxs("p",{className:"text-muted-foreground text-sm",children:["Updated ",new Date(t.updatedAt).toLocaleDateString()]})]}),P.jsx("div",{className:"relative z-10 flex items-center gap-2 text-sm text-muted-foreground mt-auto",children:P.jsxs("div",{className:"flex items-center gap-1 bg-muted px-3 py-1.5 rounded-full",children:[P.jsx(Vy,{size:14}),P.jsxs("span",{children:[t.sourceCount||0," sources"]})]})})]})},S2=({isOpen:t,onClose:e,onSubmit:n})=>{const[i,r]=q.useState("");if(!t)return null;const s=o=>{o.preventDefault(),i.trim()&&(n(i),r(""))};return P.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",children:P.jsxs("div",{className:"bg-card w-full max-w-md rounded-3xl shadow-2xl overflow-hidden transform transition-all scale-100",onClick:o=>o.stopPropagation(),children:[P.jsxs("div",{className:"p-6 border-b border-border flex justify-between items-center",children:[P.jsx("h2",{className:"text-xl font-semibold",children:"Create New Notebook"}),P.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-muted text-muted-foreground transition-colors",children:P.jsx(tw,{size:20})})]}),P.jsxs("form",{onSubmit:s,className:"p-6",children:[P.jsxs("div",{className:"mb-6",children:[P.jsx("label",{className:"block text-sm font-medium mb-2 text-muted-foreground",children:"Notebook Title"}),P.jsx("input",{type:"text",autoFocus:!0,className:"w-full px-4 py-3 rounded-xl border border-border bg-muted/50 focus:bg-background focus:ring-2 focus:ring-primary focus:outline-none transition-colors text-lg",placeholder:"e.g., Biology 101, Project Alpha",value:i,onChange:o=>r(o.target.value)})]}),P.jsxs("div",{className:"flex justify-end gap-3",children:[P.jsx("button",{type:"button",onClick:e,className:"px-6 py-2.5 rounded-xl hover:bg-muted font-medium transition-colors text-muted-foreground hover:text-foreground",children:"Cancel"}),P.jsx("button",{type:"submit",disabled:!i.trim(),className:"bg-primary text-primary-foreground px-8 py-2.5 rounded-xl font-medium hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-blue-500/25",children:"Create"})]})]})]})})};function zd(t,e){const[n,i]=q.useState(()=>{if(typeof window>"u")return e;try{const s=window.localStorage.getItem(t);return s?JSON.parse(s):e}catch(s){return console.log(s),e}});return[n,s=>{try{const o=s instanceof Function?s(n):s;i(o),typeof window<"u"&&window.localStorage.setItem(t,JSON.stringify(o))}catch(o){console.log(o)}}]}const A2=({theme:t,toggleTheme:e})=>{const n=ew(),[i,r]=zd("notebooks",[]),[s,o]=q.useState(!1),[a,l]=q.useState(""),u=f=>{const g={id:b2(),title:f,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),sourceCount:0,colorIndex:Math.floor(Math.random()*5)+1};r([g,...i]),o(!1),n(`/notebook/${g.id}`)},c=(f,g)=>{f.stopPropagation(),confirm("Are you sure you want to delete this notebook?")&&r(i.filter(y=>y.id!==g))},d=i.filter(f=>f.title.toLowerCase().includes(a.toLowerCase()));return P.jsxs("div",{className:"min-h-screen pb-10",children:[P.jsx(xR,{toggleTheme:e,theme:t}),P.jsxs("main",{className:"max-w-6xl mx-auto px-6 pt-12",children:[P.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-12",children:[P.jsxs("div",{children:[P.jsx("h1",{className:"text-4xl font-normal mb-2 tracking-tight",children:"Welcome to NotebookLM"}),P.jsx("p",{className:"text-muted-foreground text-lg",children:"Your personalized AI research assistant"})]}),P.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 bg-primary text-primary-foreground px-6 py-3 rounded-2xl hover:bg-opacity-90 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-1 mt-6 md:mt-0 font-medium",children:[P.jsx("div",{className:"bg-white/20 p-1 rounded-full",children:P.jsx(SR,{size:20})}),"New Notebook"]})]}),P.jsxs("div",{className:"mb-8 relative",children:[P.jsx(h2,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-muted-foreground",size:20}),P.jsx("input",{type:"text",placeholder:"Search your notebooks...",className:"w-full pl-12 pr-4 py-4 rounded-2xl border border-border bg-card text-card-foreground focus:ring-2 focus:ring-primary focus:outline-none transition-shadow shadow-sm",value:a,onChange:f=>l(f.target.value)})]}),d.length===0?P.jsxs("div",{className:"text-center py-20 opacity-60",children:[P.jsx("div",{className:"w-24 h-24 bg-muted rounded-full mx-auto flex items-center justify-center mb-4",children:P.jsx(wR,{size:40})}),P.jsx("h3",{className:"text-xl font-medium mb-2",children:"No notebooks yet"}),P.jsx("p",{children:"Create your first notebook to get started"})]}):P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(f=>P.jsx(w2,{notebook:f,onDelete:g=>c(g,f.id),onClick:()=>n(`/notebook/${f.id}`)},f.id))})]}),P.jsx(S2,{isOpen:s,onClose:()=>o(!1),onSubmit:u})]})},x2="modulepreload",T2=function(t){return"/"+t},CA={},nw=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=T2(l),l in CA)return;CA[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":x2,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var fh={};fh.d=(t,e)=>{for(var n in e)fh.o(e,n)&&!fh.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})};fh.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var fe=globalThis.pdfjsLib={};fh.d(fe,{AbortException:()=>Zo,AnnotationEditorLayer:()=>E0,AnnotationEditorParamsType:()=>Ce,AnnotationEditorType:()=>_e,AnnotationEditorUIManager:()=>Fl,AnnotationLayer:()=>bB,AnnotationMode:()=>no,ColorPicker:()=>Vm,DOMSVGFactory:()=>dw,DrawLayer:()=>S0,FeatureTest:()=>Tn,GlobalWorkerOptions:()=>Rs,ImageKind:()=>Ng,InvalidPDFException:()=>fE,MissingPDFException:()=>Uh,OPS:()=>Ki,OutputScale:()=>gE,PDFDataRangeTransport:()=>CN,PDFDateString:()=>aw,PDFWorker:()=>zu,PasswordResponses:()=>R2,PermissionFlag:()=>I2,PixelsPerInch:()=>jo,RenderingCancelledException:()=>sw,TextLayer:()=>Bh,TouchManager:()=>Gm,UnexpectedResponseException:()=>Bm,Util:()=>ae,VerbosityLevel:()=>qy,XfaLayer:()=>IN,build:()=>tB,createValidAbsoluteUrl:()=>L2,fetchData:()=>Xy,getDocument:()=>WU,getFilenameFromUrl:()=>$2,getPdfFilenameFromUrl:()=>V2,getXfaPageViewport:()=>q2,isDataScheme:()=>Jy,isPdfFile:()=>ow,noContextMenu:()=>mr,normalizeUnicode:()=>z2,setLayerDimensions:()=>Ol,shadow:()=>Ae,stopEvent:()=>di,version:()=>eB});const ln=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),TR=[1,0,0,1,0,0],hE=[.001,0,0,.001,0,0],C2=1e7,Hv=1.35,li={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},no={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},k2="pdfjs_internal_editor_",_e={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ce={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},I2={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Zt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ng={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},At={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Cd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},qy={ERRORS:0,WARNINGS:1,INFOS:5},Ki={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},R2={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Wy=qy.WARNINGS;function N2(t){Number.isInteger(t)&&(Wy=t)}function M2(){return Wy}function Ky(t){Wy>=qy.INFOS&&console.log(`Info: ${t}`)}function Ee(t){Wy>=qy.WARNINGS&&console.log(`Warning: ${t}`)}function Ve(t){throw new Error(t)}function bt(t,e){t||Ve(e)}function P2(t){switch(t==null?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function L2(t,e=null,n=null){if(!t)return null;try{if(n&&typeof t=="string"){if(n.addDefaultProtocol&&t.startsWith("www.")){const r=t.match(/\./g);(r==null?void 0:r.length)>=2&&(t=`http://${t}`)}if(n.tryConvertEncoding)try{t=B2(t)}catch{}}const i=e?new URL(t,e):new URL(t);if(P2(i))return i}catch{}return null}function Ae(t,e,n,i=!1){return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const sa=function(){function e(n,i){this.message=n,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class kA extends sa{constructor(e,n){super(e,"PasswordException"),this.code=n}}class Gv extends sa{constructor(e,n){super(e,"UnknownErrorException"),this.details=n}}class fE extends sa{constructor(e){super(e,"InvalidPDFException")}}class Uh extends sa{constructor(e){super(e,"MissingPDFException")}}class Bm extends sa{constructor(e,n){super(e,"UnexpectedResponseException"),this.status=n}}class D2 extends sa{constructor(e){super(e,"FormatError")}}class Zo extends sa{constructor(e){super(e,"AbortException")}}function CR(t){(typeof t!="object"||(t==null?void 0:t.length)===void 0)&&Ve("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const i=[];for(let r=0;r<e;r+=n){const s=Math.min(r+n,e),o=t.subarray(r,s);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Yy(t){typeof t!="string"&&Ve("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let i=0;i<e;++i)n[i]=t.charCodeAt(i)&255;return n}function O2(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function iw(t){const e=Object.create(null);for(const[n,i]of t)e[n]=i;return e}function F2(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function U2(){try{return new Function(""),!0}catch{return!1}}class Tn{static get isLittleEndian(){return Ae(this,"isLittleEndian",F2())}static get isEvalSupported(){return Ae(this,"isEvalSupported",U2())}static get isOffscreenCanvasSupported(){return Ae(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ae(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Ae(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Ae(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,n;return Ae(this,"isCSSRoundSupported",(n=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:n.call(e,"width: round(1.5px, 1px)"))}}const $v=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));var Ls,Mg,pE;class ae{static makeHexColor(e,n,i){return`#${$v[e]}${$v[n]}${$v[i]}`}static scaleMinMax(e,n){let i;e[0]?(e[0]<0&&(i=n[0],n[0]=n[2],n[2]=i),n[0]*=e[0],n[2]*=e[0],e[3]<0&&(i=n[1],n[1]=n[3],n[3]=i),n[1]*=e[3],n[3]*=e[3]):(i=n[0],n[0]=n[1],n[1]=i,i=n[2],n[2]=n[3],n[3]=i,e[1]<0&&(i=n[1],n[1]=n[3],n[3]=i),n[1]*=e[1],n[3]*=e[1],e[2]<0&&(i=n[0],n[0]=n[2],n[2]=i),n[0]*=e[2],n[2]*=e[2]),n[0]+=e[4],n[1]+=e[5],n[2]+=e[4],n[3]+=e[5]}static transform(e,n){return[e[0]*n[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]]}static applyTransform(e,n){const i=e[0]*n[0]+e[1]*n[2]+n[4],r=e[0]*n[1]+e[1]*n[3]+n[5];return[i,r]}static applyInverseTransform(e,n){const i=n[0]*n[3]-n[1]*n[2],r=(e[0]*n[3]-e[1]*n[2]+n[2]*n[5]-n[4]*n[3])/i,s=(-e[0]*n[1]+e[1]*n[0]+n[4]*n[1]-n[5]*n[0])/i;return[r,s]}static getAxialAlignedBoundingBox(e,n){const i=this.applyTransform(e,n),r=this.applyTransform(e.slice(2,4),n),s=this.applyTransform([e[0],e[3]],n),o=this.applyTransform([e[2],e[1]],n);return[Math.min(i[0],r[0],s[0],o[0]),Math.min(i[1],r[1],s[1],o[1]),Math.max(i[0],r[0],s[0],o[0]),Math.max(i[1],r[1],s[1],o[1])]}static inverseTransform(e){const n=e[0]*e[3]-e[1]*e[2];return[e[3]/n,-e[1]/n,-e[2]/n,e[0]/n,(e[2]*e[5]-e[4]*e[3])/n,(e[4]*e[1]-e[5]*e[0])/n]}static singularValueDecompose2dScale(e){const n=[e[0],e[2],e[1],e[3]],i=e[0]*n[0]+e[1]*n[2],r=e[0]*n[1]+e[1]*n[3],s=e[2]*n[0]+e[3]*n[2],o=e[2]*n[1]+e[3]*n[3],a=(i+o)/2,l=Math.sqrt((i+o)**2-4*(i*o-s*r))/2,u=a+l||1,c=a-l||1;return[Math.sqrt(u),Math.sqrt(c)]}static normalizeRect(e){const n=e.slice(0);return e[0]>e[2]&&(n[0]=e[2],n[2]=e[0]),e[1]>e[3]&&(n[1]=e[3],n[3]=e[1]),n}static intersect(e,n){const i=Math.max(Math.min(e[0],e[2]),Math.min(n[0],n[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(n[0],n[2]));if(i>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(n[1],n[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(n[1],n[3]));return s>o?null:[i,s,r,o]}static bezierBoundingBox(e,n,i,r,s,o,a,l,u){return u?(u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],n,l),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],n,l)):u=[Math.min(e,a),Math.min(n,l),Math.max(e,a),Math.max(n,l)],C(this,Ls,pE).call(this,e,i,s,a,n,r,o,l,3*(-e+3*(i-s)+a),6*(e-2*i+s),3*(i-e),u),C(this,Ls,pE).call(this,e,i,s,a,n,r,o,l,3*(-n+3*(r-o)+l),6*(n-2*r+o),3*(r-n),u),u}}Ls=new WeakSet,Mg=function(e,n,i,r,s,o,a,l,u,c){if(u<=0||u>=1)return;const d=1-u,f=u*u,g=f*u,y=d*(d*(d*e+3*u*n)+3*f*i)+g*r,v=d*(d*(d*s+3*u*o)+3*f*a)+g*l;c[0]=Math.min(c[0],y),c[1]=Math.min(c[1],v),c[2]=Math.max(c[2],y),c[3]=Math.max(c[3],v)},pE=function(e,n,i,r,s,o,a,l,u,c,d,f){if(Math.abs(u)<1e-12){Math.abs(c)>=1e-12&&C(this,Ls,Mg).call(this,e,n,i,r,s,o,a,l,-d/c,f);return}const g=c**2-4*d*u;if(g<0)return;const y=Math.sqrt(g),v=2*u;C(this,Ls,Mg).call(this,e,n,i,r,s,o,a,l,(-c+y)/v,f),C(this,Ls,Mg).call(this,e,n,i,r,s,o,a,l,(-c-y)/v,f)},x(ae,Ls);function B2(t){return decodeURIComponent(escape(t))}let Vv=null,IA=null;function z2(t){return Vv||(Vv=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,IA=new Map([["","t"]])),t.replaceAll(Vv,(e,n,i)=>n?n.normalize("NFKC"):IA.get(i))}function H2(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),CR(t)}const rw="pdfjs_internal_id_";function G2(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(CR(t))}typeof Promise.try!="function"&&(Promise.try=function(t,...e){return new Promise(n=>{n(t(...e))})});const Zr="http://www.w3.org/2000/svg",va=class va{};ce(va,"CSS",96),ce(va,"PDF",72),ce(va,"PDF_TO_CSS_UNITS",va.CSS/va.PDF);let jo=va;async function Xy(t,e="text"){if(Hd(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,i)=>{const r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":n(r.response);return}n(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class Tp{constructor({viewBox:e,userUnit:n,scale:i,rotation:r,offsetX:s=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=n,this.scale=i,this.rotation=r,this.offsetX=s,this.offsetY=o,i*=n;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let c,d,f,g;switch(r%=360,r<0&&(r+=360),r){case 180:c=-1,d=0,f=0,g=1;break;case 90:c=0,d=1,f=1,g=0;break;case 270:c=0,d=-1,f=-1,g=0;break;case 0:c=1,d=0,f=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,g=-g);let y,v,E,_;c===0?(y=Math.abs(u-e[1])*i+s,v=Math.abs(l-e[0])*i+o,E=(e[3]-e[1])*i,_=(e[2]-e[0])*i):(y=Math.abs(l-e[0])*i+s,v=Math.abs(u-e[1])*i+o,E=(e[2]-e[0])*i,_=(e[3]-e[1])*i),this.transform=[c*i,d*i,f*i,g*i,y-c*i*l-f*i*u,v-d*i*l-g*i*u],this.width=E,this.height=_}get rawDims(){const{userUnit:e,viewBox:n}=this,i=n.map(r=>r*e);return Ae(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone({scale:e=this.scale,rotation:n=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new Tp({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:n,offsetX:i,offsetY:r,dontFlip:s})}convertToViewportPoint(e,n){return ae.applyTransform([e,n],this.transform)}convertToViewportRectangle(e){const n=ae.applyTransform([e[0],e[1]],this.transform),i=ae.applyTransform([e[2],e[3]],this.transform);return[n[0],n[1],i[0],i[1]]}convertToPdfPoint(e,n){return ae.applyInverseTransform([e,n],this.transform)}}class sw extends sa{constructor(e,n=0){super(e,"RenderingCancelledException"),this.extraDelay=n}}function Jy(t){const e=t.length;let n=0;for(;n<e&&t[n].trim()==="";)n++;return t.substring(n,n+5).toLowerCase()==="data:"}function ow(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function $2(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function V2(t,e="document.pdf"){if(typeof t!="string")return e;if(Jy(t))return Ee('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=n.exec(t);let s=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(s&&(s=s[0],s.includes("%")))try{s=i.exec(decodeURIComponent(s))[0]}catch{}return s||e}class RA{constructor(){ce(this,"started",Object.create(null));ce(this,"times",[])}time(e){e in this.started&&Ee(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ee(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let n=0;for(const{name:i}of this.times)n=Math.max(i.length,n);for(const{name:i,start:r,end:s}of this.times)e.push(`${i.padEnd(n)} ${s-r}ms
`);return e.join("")}}function Hd(t,e){try{const{protocol:n}=e?new URL(t,e):new URL(t);return n==="http:"||n==="https:"}catch{return!1}}function mr(t){t.preventDefault()}function di(t){t.preventDefault(),t.stopPropagation()}var Kh;class aw{static toDateObject(e){if(!e||typeof e!="string")return null;h(this,Kh)||S(this,Kh,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const n=h(this,Kh).exec(e);if(!n)return null;const i=parseInt(n[1],10);let r=parseInt(n[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(n[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(n[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(n[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(n[6],10);l=l>=0&&l<=59?l:0;const u=n[7]||"Z";let c=parseInt(n[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(n[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=c,a+=d):u==="+"&&(o-=c,a-=d),new Date(Date.UTC(i,r,s,o,a,l))}}Kh=new WeakMap,x(aw,Kh);function q2(t,{scale:e=1,rotation:n=0}){const{width:i,height:r}=t.attributes.style,s=[0,0,parseInt(i),parseInt(r)];return new Tp({viewBox:s,userUnit:1,scale:e,rotation:n})}function lw(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ee(`Not a valid color format: "${t}"`),[0,0,0])}function W2(t){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const n of t.keys()){e.style.color=n;const i=window.getComputedStyle(e).color;t.set(n,lw(i))}e.remove()}function et(t){const{a:e,b:n,c:i,d:r,e:s,f:o}=t.getTransform();return[e,n,i,r,s,o]}function br(t){const{a:e,b:n,c:i,d:r,e:s,f:o}=t.getTransform().invertSelf();return[e,n,i,r,s,o]}function Ol(t,e,n=!1,i=!0){if(e instanceof Tp){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:o}=t,a=Tn.isCSSRoundSupported,l=`var(--scale-factor) * ${r}px`,u=`var(--scale-factor) * ${s}px`,c=a?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,d=a?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!n||e.rotation%180===0?(o.width=c,o.height=d):(o.width=d,o.height=c)}i&&t.setAttribute("data-main-rotation",e.rotation)}class gE{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var io,Sa,Yi,Aa,Yh,Xh,oy,kR,Cn,IR,RR,Pg,NR,yE;const ns=class ns{constructor(e){x(this,Cn);x(this,io,null);x(this,Sa,null);x(this,Yi);x(this,Aa,null);x(this,Yh,null);S(this,Yi,e),h(ns,Xh)||S(ns,Xh,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=S(this,io,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const n=h(this,Yi)._uiManager._signal;e.addEventListener("contextmenu",mr,{signal:n}),e.addEventListener("pointerdown",C(ns,oy,kR),{signal:n});const i=S(this,Aa,document.createElement("div"));i.className="buttons",e.append(i);const r=h(this,Yi).toolbarPosition;if(r){const{style:s}=e,o=h(this,Yi)._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return C(this,Cn,NR).call(this),e}get div(){return h(this,io)}hide(){var e;h(this,io).classList.add("hidden"),(e=h(this,Sa))==null||e.hideDropdown()}show(){var e;h(this,io).classList.remove("hidden"),(e=h(this,Yh))==null||e.shown()}async addAltText(e){const n=await e.render();C(this,Cn,Pg).call(this,n),h(this,Aa).prepend(n,h(this,Cn,yE)),S(this,Yh,e)}addColorPicker(e){S(this,Sa,e);const n=e.renderButton();C(this,Cn,Pg).call(this,n),h(this,Aa).prepend(n,h(this,Cn,yE))}remove(){var e;h(this,io).remove(),(e=h(this,Sa))==null||e.destroy(),S(this,Sa,null)}};io=new WeakMap,Sa=new WeakMap,Yi=new WeakMap,Aa=new WeakMap,Yh=new WeakMap,Xh=new WeakMap,oy=new WeakSet,kR=function(e){e.stopPropagation()},Cn=new WeakSet,IR=function(e){h(this,Yi)._focusEventsAllowed=!1,di(e)},RR=function(e){h(this,Yi)._focusEventsAllowed=!0,di(e)},Pg=function(e){const n=h(this,Yi)._uiManager._signal;e.addEventListener("focusin",C(this,Cn,IR).bind(this),{capture:!0,signal:n}),e.addEventListener("focusout",C(this,Cn,RR).bind(this),{capture:!0,signal:n}),e.addEventListener("contextmenu",mr,{signal:n})},NR=function(){const{editorType:e,_uiManager:n}=h(this,Yi),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",h(ns,Xh)[e]),C(this,Cn,Pg).call(this,i),i.addEventListener("click",r=>{n.delete()},{signal:n._signal}),h(this,Aa).append(i)},yE=function(){const e=document.createElement("div");return e.className="divider",e},x(ns,oy),x(ns,Xh,null);let mE=ns;var Jh,xa,Ta,ea,MR,PR,LR;class K2{constructor(e){x(this,ea);x(this,Jh,null);x(this,xa,null);x(this,Ta);S(this,Ta,e)}show(e,n,i){const[r,s]=C(this,ea,PR).call(this,n,i),{style:o}=h(this,xa)||S(this,xa,C(this,ea,MR).call(this));e.append(h(this,xa)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){h(this,xa).remove()}}Jh=new WeakMap,xa=new WeakMap,Ta=new WeakMap,ea=new WeakSet,MR=function(){const e=S(this,xa,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",mr,{signal:h(this,Ta)._signal});const n=S(this,Jh,document.createElement("div"));return n.className="buttons",e.append(n),C(this,ea,LR).call(this),e},PR=function(e,n){let i=0,r=0;for(const s of e){const o=s.y+s.height;if(o<i)continue;const a=s.x+(n?s.width:0);if(o>i){r=a,i=o;continue}n?a>r&&(r=a):a<r&&(r=a)}return[n?1-r:r,i]},LR=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const n=document.createElement("span");e.append(n),n.className="visuallyHidden",n.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=h(this,Ta)._signal;e.addEventListener("contextmenu",mr,{signal:i}),e.addEventListener("click",()=>{h(this,Ta).highlightSelection("floating_button")},{signal:i}),h(this,Jh).append(e)};function zm(t,e,n){for(const i of n)e.addEventListener(i,t[i].bind(t))}var ay;class Y2{constructor(){x(this,ay,0)}get id(){return`${k2}${pn(this,ay)._++}`}}ay=new WeakMap;var Vu,Qh,tn,qu,Lg;const Zw=class Zw{constructor(){x(this,qu);x(this,Vu,H2());x(this,Qh,0);x(this,tn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const s=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Ae(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:n,name:i,size:r,type:s}=e;return C(this,qu,Lg).call(this,`${n}_${i}_${r}_${s}`,e)}async getFromUrl(e){return C(this,qu,Lg).call(this,e,e)}async getFromBlob(e,n){const i=await n;return C(this,qu,Lg).call(this,e,i)}async getFromId(e){h(this,tn)||S(this,tn,new Map);const n=h(this,tn).get(e);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:i}=n;return delete n.blobPromise,this.getFromBlob(n.id,i)}return this.getFromUrl(n.url)}getFromCanvas(e,n){h(this,tn)||S(this,tn,new Map);let i=h(this,tn).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(n.width,n.height);return r.getContext("2d").drawImage(n,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${h(this,Vu)}_${pn(this,Qh)._++}`,refCounter:1,isSvg:!1},h(this,tn).set(e,i),h(this,tn).set(i.id,i),i}getSvgUrl(e){const n=h(this,tn).get(e);return n!=null&&n.isSvg?n.svgUrl:null}deleteId(e){var r;h(this,tn)||S(this,tn,new Map);const n=h(this,tn).get(e);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:i}=n;if(!n.url&&!n.file){const s=new OffscreenCanvas(i.width,i.height);s.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=s.convertToBlob()}(r=i.close)==null||r.call(i),n.bitmap=null}isValidId(e){return e.startsWith(`image_${h(this,Vu)}_`)}};Vu=new WeakMap,Qh=new WeakMap,tn=new WeakMap,qu=new WeakSet,Lg=async function(e,n){h(this,tn)||S(this,tn,new Map);let i=h(this,tn).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${h(this,Vu)}_${pn(this,Qh)._++}`,refCounter:0,isSvg:!1});let r;if(typeof n=="string"?(i.url=n,r=await Xy(n,"blob")):n instanceof File?r=i.file=n:n instanceof Blob&&(r=n),r.type==="image/svg+xml"){const s=Zw._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((u,c)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,u()},o.onload=async()=>{const d=i.svgUrl=o.result;a.src=await s?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=c});o.readAsDataURL(r),await l}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){Ee(r),i=null}return h(this,tn).set(e,i),i&&h(this,tn).set(i.id,i),i};let vE=Zw;var ft,ro,Zh,it;class X2{constructor(e=128){x(this,ft,[]);x(this,ro,!1);x(this,Zh);x(this,it,-1);S(this,Zh,e)}add({cmd:e,undo:n,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(r&&e(),h(this,ro))return;const l={cmd:e,undo:n,post:i,type:s};if(h(this,it)===-1){h(this,ft).length>0&&(h(this,ft).length=0),S(this,it,0),h(this,ft).push(l);return}if(o&&h(this,ft)[h(this,it)].type===s){a&&(l.undo=h(this,ft)[h(this,it)].undo),h(this,ft)[h(this,it)]=l;return}const u=h(this,it)+1;u===h(this,Zh)?h(this,ft).splice(0,1):(S(this,it,u),u<h(this,ft).length&&h(this,ft).splice(u)),h(this,ft).push(l)}undo(){if(h(this,it)===-1)return;S(this,ro,!0);const{undo:e,post:n}=h(this,ft)[h(this,it)];e(),n==null||n(),S(this,ro,!1),S(this,it,h(this,it)-1)}redo(){if(h(this,it)<h(this,ft).length-1){S(this,it,h(this,it)+1),S(this,ro,!0);const{cmd:e,post:n}=h(this,ft)[h(this,it)];e(),n==null||n(),S(this,ro,!1)}}hasSomethingToUndo(){return h(this,it)!==-1}hasSomethingToRedo(){return h(this,it)<h(this,ft).length-1}cleanType(e){if(h(this,it)!==-1){for(let n=h(this,it);n>=0;n--)if(h(this,ft)[n].type!==e){h(this,ft).splice(n+1,h(this,it)-n),S(this,it,n);return}h(this,ft).length=0,S(this,it,-1)}}destroy(){S(this,ft,null)}}ft=new WeakMap,ro=new WeakMap,Zh=new WeakMap,it=new WeakMap;var ly,DR;class Cp{constructor(e){x(this,ly);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=Tn.platform;for(const[i,r,s={}]of e)for(const o of i){const a=o.startsWith("mac+");n&&a?(this.callbacks.set(o.slice(4),{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1))):!n&&!a&&(this.callbacks.set(o,{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,n){if(!this.allKeys.has(n.key))return;const i=this.callbacks.get(C(this,ly,DR).call(this,n));if(!i)return;const{callback:r,options:{bubbles:s=!1,args:o=[],checker:a=null}}=i;a&&!a(e,n)||(r.bind(e,...o,n)(),s||di(n))}}ly=new WeakSet,DR=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const n=this.buffer.join("+");return this.buffer.length=0,n};const uy=class uy{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return W2(e),Ae(this,"_colors",e)}convert(e){const n=lw(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[i,r]of this._colors)if(r.every((s,o)=>s===n[o]))return uy._colorsMapping.get(i);return n}getHexCode(e){const n=this._colors.get(e);return n?ae.makeHexColor(...n):e}};ce(uy,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let _E=uy;var Wu,Jn,Tt,Ht,Ku,ss,Yu,wi,so,Ca,Xu,ka,Cr,Xi,Ia,jh,ef,Ju,tf,kr,oo,Qu,ao,Ir,cy,lo,nf,uo,Ra,rf,sf,Nt,Oe,os,Na,of,af,co,Rr,as,lf,Si,Q,Dg,EE,OR,FR,Og,UR,BR,zR,bE,HR,wE,SE,GR,gn,jr,$R,VR,AE,qR,Gd,xE;const Nu=class Nu{constructor(e,n,i,r,s,o,a,l,u,c,d,f,g){x(this,Q);x(this,Wu,new AbortController);x(this,Jn,null);x(this,Tt,new Map);x(this,Ht,new Map);x(this,Ku,null);x(this,ss,null);x(this,Yu,null);x(this,wi,new X2);x(this,so,null);x(this,Ca,null);x(this,Xu,0);x(this,ka,new Set);x(this,Cr,null);x(this,Xi,null);x(this,Ia,new Set);ce(this,"_editorUndoBar",null);x(this,jh,!1);x(this,ef,!1);x(this,Ju,!1);x(this,tf,null);x(this,kr,null);x(this,oo,null);x(this,Qu,null);x(this,ao,!1);x(this,Ir,null);x(this,cy,new Y2);x(this,lo,!1);x(this,nf,!1);x(this,uo,null);x(this,Ra,null);x(this,rf,null);x(this,sf,null);x(this,Nt,_e.NONE);x(this,Oe,new Set);x(this,os,null);x(this,Na,null);x(this,of,null);x(this,af,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,co,[0,0]);x(this,Rr,null);x(this,as,null);x(this,lf,null);x(this,Si,null);const y=this._signal=h(this,Wu).signal;S(this,as,e),S(this,lf,n),S(this,Ku,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:y}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),r._on("setpreference",this.onSetPreference.bind(this),{signal:y}),r._on("switchannotationeditorparams",v=>this.updateParams(v.type,v.value),{signal:y}),C(this,Q,UR).call(this),C(this,Q,GR).call(this),C(this,Q,bE).call(this),S(this,ss,s.annotationStorage),S(this,tf,s.filterFactory),S(this,Na,o),S(this,Qu,a||null),S(this,jh,l),S(this,ef,u),S(this,Ju,c),S(this,sf,d||null),this.viewParameters={realScale:jo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=g!==!1}static get _keyboardManager(){const e=Nu.prototype,n=o=>h(o,as).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Ae(this,"_keyboardManager",new Cp([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&h(o,as).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&h(o,as).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:n}]]))}destroy(){var e,n,i,r,s;(e=h(this,Si))==null||e.resolve(),S(this,Si,null),(n=h(this,Wu))==null||n.abort(),S(this,Wu,null),this._signal=null;for(const o of h(this,Ht).values())o.destroy();h(this,Ht).clear(),h(this,Tt).clear(),h(this,Ia).clear(),S(this,Jn,null),h(this,Oe).clear(),h(this,wi).destroy(),(i=h(this,Ku))==null||i.destroy(),(r=h(this,Ir))==null||r.hide(),S(this,Ir,null),h(this,kr)&&(clearTimeout(h(this,kr)),S(this,kr,null)),h(this,Rr)&&(clearTimeout(h(this,Rr)),S(this,Rr,null)),(s=this._editorUndoBar)==null||s.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return h(this,sf)}get useNewAltTextFlow(){return h(this,ef)}get useNewAltTextWhenAddingImage(){return h(this,Ju)}get hcmFilter(){return Ae(this,"hcmFilter",h(this,Na)?h(this,tf).addHCMFilter(h(this,Na).foreground,h(this,Na).background):"none")}get direction(){return Ae(this,"direction",getComputedStyle(h(this,as)).direction)}get highlightColors(){return Ae(this,"highlightColors",h(this,Qu)?new Map(h(this,Qu).split(",").map(e=>e.split("=").map(n=>n.trim()))):null)}get highlightColorNames(){return Ae(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),S(this,Ca,e)}setMainHighlightColorPicker(e){S(this,rf,e)}editAltText(e,n=!1){var i;(i=h(this,Ku))==null||i.editAltText(this,e,n)}switchToMode(e,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,n){this._eventBus.dispatch("setpreference",{source:this,name:e,value:n})}onSetPreference({name:e,value:n}){switch(e){case"enableNewAltTextWhenAddingImage":S(this,Ju,n);break}}onPageChanging({pageNumber:e}){S(this,Xu,e-1)}focusMainContainer(){h(this,as).focus()}findParent(e,n){for(const i of h(this,Ht).values()){const{x:r,y:s,width:o,height:a}=i.div.getBoundingClientRect();if(e>=r&&e<=r+o&&n>=s&&n<=s+a)return i}return null}disableUserSelect(e=!1){h(this,lf).classList.toggle("noUserSelect",e)}addShouldRescale(e){h(this,Ia).add(e)}removeShouldRescale(e){h(this,Ia).delete(e)}onScaleChanging({scale:e}){var n;this.commitOrRemove(),this.viewParameters.realScale=e*jo.PDF_TO_CSS_UNITS;for(const i of h(this,Ia))i.onScaleChanging();(n=h(this,Ca))==null||n.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}=n,a=n.toString(),u=C(this,Q,Dg).call(this,n).closest(".textLayer"),c=this.getSelectionBoxes(u);if(!c)return;n.empty();const d=C(this,Q,EE).call(this,u),f=h(this,Nt)===_e.NONE,g=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:c,anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o,text:a}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(_e.HIGHLIGHT,g);return}g()}addToAnnotationStorage(e){!e.isEmpty()&&h(this,ss)&&!h(this,ss).has(e.id)&&h(this,ss).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,h(this,ao)&&(S(this,ao,!1),C(this,Q,Og).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const n of h(this,Oe))if(n.div.contains(e)){S(this,Ra,[n,e]),n._focusEventsAllowed=!1;break}}focus(){if(!h(this,Ra))return;const[e,n]=h(this,Ra);S(this,Ra,null),n.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}addEditListeners(){C(this,Q,bE).call(this),C(this,Q,wE).call(this)}removeEditListeners(){C(this,Q,HR).call(this),C(this,Q,SE).call(this)}dragOver(e){for(const{type:n}of e.dataTransfer.items)for(const i of h(this,Xi))if(i.isHandlingMimeForPasting(n)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const n of e.dataTransfer.items)for(const i of h(this,Xi))if(i.isHandlingMimeForPasting(n.type)){i.paste(n,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=h(this,Jn))==null||i.commitOrRemove(),!this.hasSelection)return;const n=[];for(const r of h(this,Oe)){const s=r.serialize(!0);s&&n.push(s)}n.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:n}=e;for(const s of n.items)for(const o of h(this,Xi))if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let i=n.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){Ee(`paste: "${s.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const l of i){const u=await r.deserialize(l);if(!u)return;s.push(u)}const o=()=>{for(const l of s)C(this,Q,AE).call(this,l);C(this,Q,xE).call(this,s)},a=()=>{for(const l of s)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(s){Ee(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),h(this,Nt)!==_e.NONE&&!this.isEditorHandlingKeyboard&&Nu._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,h(this,ao)&&(S(this,ao,!1),C(this,Q,Og).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(C(this,Q,BR).call(this),C(this,Q,wE).call(this),C(this,Q,gn).call(this,{isEditing:h(this,Nt)!==_e.NONE,isEmpty:C(this,Q,Gd).call(this),hasSomethingToUndo:h(this,wi).hasSomethingToUndo(),hasSomethingToRedo:h(this,wi).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,Q,zR).call(this),C(this,Q,SE).call(this),C(this,Q,gn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!h(this,Xi)){S(this,Xi,e);for(const n of h(this,Xi))C(this,Q,jr).call(this,n.defaultPropertiesToUpdate)}}getId(){return h(this,cy).id}get currentLayer(){return h(this,Ht).get(h(this,Xu))}getLayer(e){return h(this,Ht).get(e)}get currentPageIndex(){return h(this,Xu)}addLayer(e){h(this,Ht).set(e.pageIndex,e),h(this,lo)?e.enable():e.disable()}removeLayer(e){h(this,Ht).delete(e.pageIndex)}async updateMode(e,n=null,i=!1){var r;if(h(this,Nt)!==e&&!(h(this,Si)&&(await h(this,Si).promise,!h(this,Si)))){if(S(this,Si,Promise.withResolvers()),S(this,Nt,e),e===_e.NONE){this.setEditingState(!1),C(this,Q,VR).call(this),(r=this._editorUndoBar)==null||r.hide(),h(this,Si).resolve();return}this.setEditingState(!0),await C(this,Q,$R).call(this),this.unselectAll();for(const s of h(this,Ht).values())s.updateMode(e);if(!n){i&&this.addNewEditorFromKeyboard(),h(this,Si).resolve();return}for(const s of h(this,Tt).values())s.annotationElementId===n?(this.setSelected(s),s.enterInEditMode()):s.unselect();h(this,Si).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==h(this,Nt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,n){var i;if(h(this,Xi)){switch(e){case Ce.CREATE:this.currentLayer.addNewEditor();return;case Ce.HIGHLIGHT_DEFAULT_COLOR:(i=h(this,rf))==null||i.updateColor(n);break;case Ce.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(h(this,of)||S(this,of,new Map)).set(e,n),this.showAllEditors("highlight",n);break}for(const r of h(this,Oe))r.updateParams(e,n);for(const r of h(this,Xi))r.updateDefaultParams(e,n)}}showAllEditors(e,n,i=!1){var s;for(const o of h(this,Tt).values())o.editorType===e&&o.show(n);(((s=h(this,of))==null?void 0:s.get(Ce.HIGHLIGHT_SHOW_ALL))??!0)!==n&&C(this,Q,jr).call(this,[[Ce.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(e=!1){if(h(this,nf)!==e){S(this,nf,e);for(const n of h(this,Ht).values())e?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",e)}}getEditors(e){const n=[];for(const i of h(this,Tt).values())i.pageIndex===e&&n.push(i);return n}getEditor(e){return h(this,Tt).get(e)}addEditor(e){h(this,Tt).set(e.id,e)}removeEditor(e){var n;e.div.contains(document.activeElement)&&(h(this,kr)&&clearTimeout(h(this,kr)),S(this,kr,setTimeout(()=>{this.focusMainContainer(),S(this,kr,null)},0))),h(this,Tt).delete(e.id),this.unselect(e),(!e.annotationElementId||!h(this,ka).has(e.annotationElementId))&&((n=h(this,ss))==null||n.remove(e.id))}addDeletedAnnotationElement(e){h(this,ka).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return h(this,ka).has(e)}removeDeletedAnnotationElement(e){h(this,ka).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){h(this,Jn)!==e&&(S(this,Jn,e),e&&C(this,Q,jr).call(this,e.propertiesToUpdate))}updateUI(e){h(this,Q,qR)===e&&C(this,Q,jr).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){C(this,Q,jr).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(h(this,Oe).has(e)){h(this,Oe).delete(e),e.unselect(),C(this,Q,gn).call(this,{hasSelectedEditor:this.hasSelection});return}h(this,Oe).add(e),e.select(),C(this,Q,jr).call(this,e.propertiesToUpdate),C(this,Q,gn).call(this,{hasSelectedEditor:!0})}setSelected(e){var n;(n=h(this,Ca))==null||n.commitOrRemove();for(const i of h(this,Oe))i!==e&&i.unselect();h(this,Oe).clear(),h(this,Oe).add(e),e.select(),C(this,Q,jr).call(this,e.propertiesToUpdate),C(this,Q,gn).call(this,{hasSelectedEditor:!0})}isSelected(e){return h(this,Oe).has(e)}get firstSelectedEditor(){return h(this,Oe).values().next().value}unselect(e){e.unselect(),h(this,Oe).delete(e),C(this,Q,gn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return h(this,Oe).size!==0}get isEnterHandled(){return h(this,Oe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;h(this,wi).undo(),C(this,Q,gn).call(this,{hasSomethingToUndo:h(this,wi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,Q,Gd).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){h(this,wi).redo(),C(this,Q,gn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:h(this,wi).hasSomethingToRedo(),isEmpty:C(this,Q,Gd).call(this)})}addCommands(e){h(this,wi).add(e),C(this,Q,gn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,Q,Gd).call(this)})}cleanUndoStack(e){h(this,wi).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const n=e?[e]:[...h(this,Oe)],i=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,n.length===1?n[0].editorType:n.length);for(const a of n)a.remove()},r=()=>{for(const o of n)C(this,Q,AE).call(this,o)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=h(this,Jn))==null||e.commitOrRemove()}hasSomethingToControl(){return h(this,Jn)||this.hasSelection}selectAll(){for(const e of h(this,Oe))e.commit();C(this,Q,xE).call(this,h(this,Tt).values())}unselectAll(){var e;if(!(h(this,Jn)&&(h(this,Jn).commitOrRemove(),h(this,Nt)!==_e.NONE))&&!((e=h(this,Ca))!=null&&e.commitOrRemove())&&this.hasSelection){for(const n of h(this,Oe))n.unselect();h(this,Oe).clear(),C(this,Q,gn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,n,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;h(this,co)[0]+=e,h(this,co)[1]+=n;const[r,s]=h(this,co),o=[...h(this,Oe)],a=1e3;h(this,Rr)&&clearTimeout(h(this,Rr)),S(this,Rr,setTimeout(()=>{S(this,Rr,null),h(this,co)[0]=h(this,co)[1]=0,this.addCommands({cmd:()=>{for(const l of o)h(this,Tt).has(l.id)&&l.translateInPage(r,s)},undo:()=>{for(const l of o)h(this,Tt).has(l.id)&&l.translateInPage(-r,-s)},mustExec:!1})},a));for(const l of o)l.translateInPage(e,n)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,Cr,new Map);for(const e of h(this,Oe))h(this,Cr).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!h(this,Cr))return!1;this.disableUserSelect(!1);const e=h(this,Cr);S(this,Cr,null);let n=!1;for(const[{x:r,y:s,pageIndex:o},a]of e)a.newX=r,a.newY=s,a.newPageIndex=o,n||(n=r!==a.savedX||s!==a.savedY||o!==a.savedPageIndex);if(!n)return!1;const i=(r,s,o,a)=>{if(h(this,Tt).has(r.id)){const l=h(this,Ht).get(a);l?r._setParentAndPosition(l,s,o):(r.pageIndex=a,r.x=s,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:o,newPageIndex:a}]of e)i(r,s,o,a)},undo:()=>{for(const[r,{savedX:s,savedY:o,savedPageIndex:a}]of e)i(r,s,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,n){if(h(this,Cr))for(const i of h(this,Cr).keys())i.drag(e,n)}rebuild(e){if(e.parent===null){const n=this.getLayer(e.pageIndex);n?(n.changeParent(e),n.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||h(this,Oe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return h(this,Jn)===e}getActive(){return h(this,Jn)}getMode(){return h(this,Nt)}get imageManager(){return Ae(this,"imageManager",new vE)}getSelectionBoxes(e){if(!e)return null;const n=document.getSelection();for(let u=0,c=n.rangeCount;u<c;u++)if(!e.contains(n.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:r,width:s,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,c,d,f)=>({x:(c-r)/o,y:1-(u+d-i)/s,width:f/o,height:d/s});break;case"180":a=(u,c,d,f)=>({x:1-(u+d-i)/s,y:1-(c+f-r)/o,width:d/s,height:f/o});break;case"270":a=(u,c,d,f)=>({x:1-(c+f-r)/o,y:(u-i)/s,width:f/o,height:d/s});break;default:a=(u,c,d,f)=>({x:(u-i)/s,y:(c-r)/o,width:d/s,height:f/o});break}const l=[];for(let u=0,c=n.rangeCount;u<c;u++){const d=n.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:g,width:y,height:v}of d.getClientRects())y===0||v===0||l.push(a(f,g,y,v))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:n}){(h(this,Yu)||S(this,Yu,new Map)).set(e,n)}removeChangedExistingAnnotation({annotationElementId:e}){var n;(n=h(this,Yu))==null||n.delete(e)}renderAnnotationElement(e){var r;const n=(r=h(this,Yu))==null?void 0:r.get(e.data.id);if(!n)return;const i=h(this,ss).getRawValue(n);i&&(h(this,Nt)===_e.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};Wu=new WeakMap,Jn=new WeakMap,Tt=new WeakMap,Ht=new WeakMap,Ku=new WeakMap,ss=new WeakMap,Yu=new WeakMap,wi=new WeakMap,so=new WeakMap,Ca=new WeakMap,Xu=new WeakMap,ka=new WeakMap,Cr=new WeakMap,Xi=new WeakMap,Ia=new WeakMap,jh=new WeakMap,ef=new WeakMap,Ju=new WeakMap,tf=new WeakMap,kr=new WeakMap,oo=new WeakMap,Qu=new WeakMap,ao=new WeakMap,Ir=new WeakMap,cy=new WeakMap,lo=new WeakMap,nf=new WeakMap,uo=new WeakMap,Ra=new WeakMap,rf=new WeakMap,sf=new WeakMap,Nt=new WeakMap,Oe=new WeakMap,os=new WeakMap,Na=new WeakMap,of=new WeakMap,af=new WeakMap,co=new WeakMap,Rr=new WeakMap,as=new WeakMap,lf=new WeakMap,Si=new WeakMap,Q=new WeakSet,Dg=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},EE=function(e){const{currentLayer:n}=this;if(n.hasTextLayer(e))return n;for(const i of h(this,Ht).values())if(i.hasTextLayer(e))return i;return null},OR=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=C(this,Q,Dg).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(h(this,Ir)||S(this,Ir,new K2(this)),h(this,Ir).show(i,r,this.direction==="ltr"))},FR=function(){var s,o,a;const e=document.getSelection();if(!e||e.isCollapsed){h(this,os)&&((s=h(this,Ir))==null||s.hide(),S(this,os,null),C(this,Q,gn).call(this,{hasSelectedText:!1}));return}const{anchorNode:n}=e;if(n===h(this,os))return;const r=C(this,Q,Dg).call(this,e).closest(".textLayer");if(!r){h(this,os)&&((o=h(this,Ir))==null||o.hide(),S(this,os,null),C(this,Q,gn).call(this,{hasSelectedText:!1}));return}if((a=h(this,Ir))==null||a.hide(),S(this,os,n),C(this,Q,gn).call(this,{hasSelectedText:!0}),!(h(this,Nt)!==_e.HIGHLIGHT&&h(this,Nt)!==_e.NONE)&&(h(this,Nt)===_e.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,ao,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=h(this,Nt)===_e.HIGHLIGHT?C(this,Q,EE).call(this,r):null;l==null||l.toggleDrawing();const u=new AbortController,c=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&C(this,Q,Og).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:c}),window.addEventListener("blur",d,{signal:c})}},Og=function(e=""){h(this,Nt)===_e.HIGHLIGHT?this.highlightSelection(e):h(this,jh)&&C(this,Q,OR).call(this)},UR=function(){document.addEventListener("selectionchange",C(this,Q,FR).bind(this),{signal:this._signal})},BR=function(){if(h(this,oo))return;S(this,oo,new AbortController);const e=this.combinedSignal(h(this,oo));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},zR=function(){var e;(e=h(this,oo))==null||e.abort(),S(this,oo,null)},bE=function(){if(h(this,uo))return;S(this,uo,new AbortController);const e=this.combinedSignal(h(this,uo));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},HR=function(){var e;(e=h(this,uo))==null||e.abort(),S(this,uo,null)},wE=function(){if(h(this,so))return;S(this,so,new AbortController);const e=this.combinedSignal(h(this,so));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},SE=function(){var e;(e=h(this,so))==null||e.abort(),S(this,so,null)},GR=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},gn=function(e){Object.entries(e).some(([i,r])=>h(this,af)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(h(this,af),e)}),h(this,Nt)===_e.HIGHLIGHT&&e.hasSelectedEditor===!1&&C(this,Q,jr).call(this,[[Ce.HIGHLIGHT_FREE,!0]]))},jr=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},$R=async function(){if(!h(this,lo)){S(this,lo,!0);const e=[];for(const n of h(this,Ht).values())e.push(n.enable());await Promise.all(e);for(const n of h(this,Tt).values())n.enable()}},VR=function(){if(this.unselectAll(),h(this,lo)){S(this,lo,!1);for(const e of h(this,Ht).values())e.disable();for(const e of h(this,Tt).values())e.disable()}},AE=function(e){const n=h(this,Ht).get(e.pageIndex);n?n.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},qR=function(){let e=null;for(e of h(this,Oe));return e},Gd=function(){if(h(this,Tt).size===0)return!0;if(h(this,Tt).size===1)for(const e of h(this,Tt).values())return e.isEmpty();return!1},xE=function(e){for(const n of h(this,Oe))n.unselect();h(this,Oe).clear();for(const n of e)n.isEmpty()||(h(this,Oe).add(n),n.select());C(this,Q,gn).call(this,{hasSelectedEditor:this.hasSelection})},ce(Nu,"TRANSLATE_SMALL",1),ce(Nu,"TRANSLATE_BIG",10);let Fl=Nu;var Mt,Nr,Ji,Zu,Mr,Qn,ju,Pr,On,ls,Ma,Lr,ho,ur,$d,Fg;const mn=class mn{constructor(e){x(this,ur);x(this,Mt,null);x(this,Nr,!1);x(this,Ji,null);x(this,Zu,null);x(this,Mr,null);x(this,Qn,null);x(this,ju,!1);x(this,Pr,null);x(this,On,null);x(this,ls,null);x(this,Ma,null);x(this,Lr,!1);S(this,On,e),S(this,Lr,e._uiManager.useNewAltTextFlow),h(mn,ho)||S(mn,ho,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){mn._l10n??(mn._l10n=e)}async render(){const e=S(this,Ji,document.createElement("button"));e.className="altText",e.tabIndex="0";const n=S(this,Zu,document.createElement("span"));e.append(n),h(this,Lr)?(e.classList.add("new"),e.setAttribute("data-l10n-id",h(mn,ho).missing),n.setAttribute("data-l10n-id",h(mn,ho)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=h(this,On)._uiManager._signal;e.addEventListener("contextmenu",mr,{signal:i}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const r=s=>{s.preventDefault(),h(this,On)._uiManager.editAltText(h(this,On)),h(this,Lr)&&h(this,On)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:h(this,ur,$d)}})};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(S(this,ju,!0),r(s))},{signal:i}),await C(this,ur,Fg).call(this),e}finish(){h(this,Ji)&&(h(this,Ji).focus({focusVisible:h(this,ju)}),S(this,ju,!1))}isEmpty(){return h(this,Lr)?h(this,Mt)===null:!h(this,Mt)&&!h(this,Nr)}hasData(){return h(this,Lr)?h(this,Mt)!==null||!!h(this,ls):this.isEmpty()}get guessedText(){return h(this,ls)}async setGuessedText(e){h(this,Mt)===null&&(S(this,ls,e),S(this,Ma,await mn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),C(this,ur,Fg).call(this))}toggleAltTextBadge(e=!1){var n;if(!h(this,Lr)||h(this,Mt)){(n=h(this,Pr))==null||n.remove(),S(this,Pr,null);return}if(!h(this,Pr)){const i=S(this,Pr,document.createElement("div"));i.className="noAltTextBadge",h(this,On).div.append(i)}h(this,Pr).classList.toggle("hidden",!e)}serialize(e){let n=h(this,Mt);return!e&&h(this,ls)===n&&(n=h(this,Ma)),{altText:n,decorative:h(this,Nr),guessedText:h(this,ls),textWithDisclaimer:h(this,Ma)}}get data(){return{altText:h(this,Mt),decorative:h(this,Nr)}}set data({altText:e,decorative:n,guessedText:i,textWithDisclaimer:r,cancel:s=!1}){i&&(S(this,ls,i),S(this,Ma,r)),!(h(this,Mt)===e&&h(this,Nr)===n)&&(s||(S(this,Mt,e),S(this,Nr,n)),C(this,ur,Fg).call(this))}toggle(e=!1){h(this,Ji)&&(!e&&h(this,Qn)&&(clearTimeout(h(this,Qn)),S(this,Qn,null)),h(this,Ji).disabled=!e)}shown(){h(this,On)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:h(this,ur,$d)}})}destroy(){var e,n;(e=h(this,Ji))==null||e.remove(),S(this,Ji,null),S(this,Zu,null),S(this,Mr,null),(n=h(this,Pr))==null||n.remove(),S(this,Pr,null)}};Mt=new WeakMap,Nr=new WeakMap,Ji=new WeakMap,Zu=new WeakMap,Mr=new WeakMap,Qn=new WeakMap,ju=new WeakMap,Pr=new WeakMap,On=new WeakMap,ls=new WeakMap,Ma=new WeakMap,Lr=new WeakMap,ho=new WeakMap,ur=new WeakSet,$d=function(){return h(this,Mt)&&"added"||h(this,Mt)===null&&this.guessedText&&"review"||"missing"},Fg=async function(){var r,s,o;const e=h(this,Ji);if(!e)return;if(h(this,Lr)){if(e.classList.toggle("done",!!h(this,Mt)),e.setAttribute("data-l10n-id",h(mn,ho)[h(this,ur,$d)]),(r=h(this,Zu))==null||r.setAttribute("data-l10n-id",h(mn,ho)[`${h(this,ur,$d)}-label`]),!h(this,Mt)){(s=h(this,Mr))==null||s.remove();return}}else{if(!h(this,Mt)&&!h(this,Nr)){e.classList.remove("done"),(o=h(this,Mr))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=h(this,Mr);if(!n){S(this,Mr,n=document.createElement("span")),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${h(this,On).id}`;const a=100,l=h(this,On)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(h(this,Qn)),S(this,Qn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{S(this,Qn,setTimeout(()=>{S(this,Qn,null),h(this,Mr).classList.add("show"),h(this,On)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;h(this,Qn)&&(clearTimeout(h(this,Qn)),S(this,Qn,null)),(u=h(this,Mr))==null||u.classList.remove("show")},{signal:l})}h(this,Nr)?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=h(this,Mt)),n.parentNode||e.append(n);const i=h(this,On).getImageForAltText();i==null||i.setAttribute("aria-describedby",n.id)},x(mn,ho,null),ce(mn,"_l10n",null);let Hm=mn;var uf,Pa,cf,df,hf,ff,pf,ec,us,La,fo,Hs,WR,KR,TE;const jw=class jw{constructor({container:e,isPinchingDisabled:n=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:o=null,signal:a}){x(this,Hs);x(this,uf);x(this,Pa,!1);x(this,cf,null);x(this,df);x(this,hf);x(this,ff);x(this,pf);x(this,ec);x(this,us,null);x(this,La);x(this,fo,null);S(this,uf,e),S(this,cf,i),S(this,df,n),S(this,hf,r),S(this,ff,s),S(this,pf,o),S(this,La,new AbortController),S(this,ec,AbortSignal.any([a,h(this,La).signal])),e.addEventListener("touchstart",C(this,Hs,WR).bind(this),{passive:!1,signal:h(this,ec)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Ae(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=h(this,La))==null||e.abort(),S(this,La,null)}};uf=new WeakMap,Pa=new WeakMap,cf=new WeakMap,df=new WeakMap,hf=new WeakMap,ff=new WeakMap,pf=new WeakMap,ec=new WeakMap,us=new WeakMap,La=new WeakMap,fo=new WeakMap,Hs=new WeakSet,WR=function(e){var r,s,o;if((r=h(this,df))!=null&&r.call(this)||e.touches.length<2)return;if(!h(this,fo)){S(this,fo,new AbortController);const a=AbortSignal.any([h(this,ec),h(this,fo).signal]),l=h(this,uf),u={signal:a,passive:!1};l.addEventListener("touchmove",C(this,Hs,KR).bind(this),u),l.addEventListener("touchend",C(this,Hs,TE).bind(this),u),l.addEventListener("touchcancel",C(this,Hs,TE).bind(this),u),(s=h(this,hf))==null||s.call(this)}if(di(e),e.touches.length!==2||(o=h(this,cf))!=null&&o.call(this)){S(this,us,null);return}let[n,i]=e.touches;n.identifier>i.identifier&&([n,i]=[i,n]),S(this,us,{touch0X:n.screenX,touch0Y:n.screenY,touch1X:i.screenX,touch1Y:i.screenY})},KR=function(e){var A;if(!h(this,us)||e.touches.length!==2)return;let[n,i]=e.touches;n.identifier>i.identifier&&([n,i]=[i,n]);const{screenX:r,screenY:s}=n,{screenX:o,screenY:a}=i,l=h(this,us),{touch0X:u,touch0Y:c,touch1X:d,touch1Y:f}=l,g=d-u,y=f-c,v=o-r,E=a-s,_=Math.hypot(v,E)||1,b=Math.hypot(g,y)||1;if(!h(this,Pa)&&Math.abs(b-_)<=jw.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=s,l.touch1X=o,l.touch1Y=a,e.preventDefault(),!h(this,Pa)){S(this,Pa,!0);return}const w=[(r+o)/2,(s+a)/2];(A=h(this,ff))==null||A.call(this,w,b,_)},TE=function(e){var n;h(this,fo).abort(),S(this,fo,null),(n=h(this,pf))==null||n.call(this),h(this,us)&&(e.preventDefault(),S(this,us,null),S(this,Pa,!1))};let Gm=jw;var Da,Qi,Je,tc,po,gf,Oa,Gt,Fa,cs,go,mf,Ua,Zn,yf,Ba,ds,Dr,nc,ic,Ai,za,vf,dy,de,CE,_f,kE,Ug,YR,XR,IE,Bg,RE,JR,QR,ZR,NE,jR,ME,eN,tN,nN,PE,Vd;const we=class we{constructor(e){x(this,de);x(this,Da,null);x(this,Qi,null);x(this,Je,null);x(this,tc,!1);x(this,po,null);x(this,gf,"");x(this,Oa,!1);x(this,Gt,null);x(this,Fa,null);x(this,cs,null);x(this,go,null);x(this,mf,"");x(this,Ua,!1);x(this,Zn,null);x(this,yf,!1);x(this,Ba,!1);x(this,ds,!1);x(this,Dr,null);x(this,nc,0);x(this,ic,0);x(this,Ai,null);x(this,za,null);ce(this,"_editToolbar",null);ce(this,"_initialOptions",Object.create(null));ce(this,"_initialData",null);ce(this,"_isVisible",!0);ce(this,"_uiManager",null);ce(this,"_focusEventsAllowed",!0);x(this,vf,!1);x(this,dy,we._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:n,rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[s,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=we.prototype._resizeWithKeyboard,n=Fl.TRANSLATE_SMALL,i=Fl.TRANSLATE_BIG;return Ae(this,"_resizerKeyboardManager",new Cp([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],we.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Ae(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const n=new J2({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});n.annotationElementId=e.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(e,n){if(we._l10n??(we._l10n=e),we._l10nResizer||(we._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),we._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);we._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,n){Ve("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return h(this,vf)}set _isDraggable(e){var n;S(this,vf,e),(n=this.div)==null||n.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(e*2),this.y+=this.width*e/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(e*2),this.y-=this.width*e/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=h(this,dy)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):C(this,de,Vd).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(h(this,Ua)?S(this,Ua,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const n=e.relatedTarget;n!=null&&n.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,n,i,r){const[s,o]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/s,this.y=(n+r)/o,this.fixAndSetPosition()}translate(e,n){C(this,de,CE).call(this,this.parentDimensions,e,n)}translateInPage(e,n){h(this,Zn)||S(this,Zn,[this.x,this.y,this.width,this.height]),C(this,de,CE).call(this,this.pageDimensions,e,n),this.div.scrollIntoView({block:"nearest"})}drag(e,n){h(this,Zn)||S(this,Zn,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[r,s]}=this;if(this.x+=e/r,this.y+=n/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,u]=this.getBaseTranslation();o+=l,a+=u;const{style:c}=i;c.left=`${(100*o).toFixed(2)}%`,c.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),i.scrollIntoView({block:"nearest"})}_onTranslating(e,n){}_onTranslated(e,n){}get _hasBeenMoved(){return!!h(this,Zn)&&(h(this,Zn)[0]!==this.x||h(this,Zn)[1]!==this.y)}get _hasBeenResized(){return!!h(this,Zn)&&(h(this,Zn)[2]!==this.width||h(this,Zn)[3]!==this.height)}getBaseTranslation(){const[e,n]=this.parentDimensions,{_borderLineWidth:i}=we,r=i/e,s=i/n;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:n},pageDimensions:[i,r]}=this;let{x:s,y:o,width:a,height:l}=this;if(a*=i,l*=r,s*=i,o*=r,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(i-a,s)),o=Math.max(0,Math.min(r-l,o));break;case 90:s=Math.max(0,Math.min(i-l,s)),o=Math.min(r,Math.max(a,o));break;case 180:s=Math.min(i,Math.max(a,s)),o=Math.min(r,Math.max(l,o));break;case 270:s=Math.min(i,Math.max(l,s)),o=Math.max(0,Math.min(r-a,o));break}this.x=s/=i,this.y=o/=r;const[u,c]=this.getBaseTranslation();s+=u,o+=c,n.left=`${(100*s).toFixed(2)}%`,n.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,n){var i;return C(i=we,_f,kE).call(i,e,n,this.parentRotation)}pageTranslationToScreen(e,n){var i;return C(i=we,_f,kE).call(i,e,n,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[n,i]}=this;return[n*e,i*e]}setDims(e,n){const[i,r]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*e/i).toFixed(2)}%`,h(this,Oa)||(s.height=`${(100*n/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:n,width:i}=e,r=i.endsWith("%"),s=!h(this,Oa)&&n.endsWith("%");if(r&&s)return;const[o,a]=this.parentDimensions;r||(e.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!h(this,Oa)&&!s&&(e.height=`${(100*parseFloat(n)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=h(this,Je))==null||e.finish()}async addEditToolbar(){return this._editToolbar||h(this,Ba)?this._editToolbar:(this._editToolbar=new mE(this),this.div.append(this._editToolbar.render()),h(this,Je)&&await this._editToolbar.addAltText(h(this,Je)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=h(this,Je))==null||e.destroy())}addContainer(e){var i;const n=(i=this._editToolbar)==null?void 0:i.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){h(this,Je)||(Hm.initialize(we._l10n),S(this,Je,new Hm(this)),h(this,Da)&&(h(this,Je).data=h(this,Da),S(this,Da,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=h(this,Je))==null?void 0:e.data}set altTextData(e){h(this,Je)&&(h(this,Je).data=e)}get guessedAltText(){var e;return(e=h(this,Je))==null?void 0:e.guessedText}async setGuessedAltText(e){var n;await((n=h(this,Je))==null?void 0:n.setGuessedText(e))}serializeAltText(e){var n;return(n=h(this,Je))==null?void 0:n.serialize(e)}hasAltText(){return!!h(this,Je)&&!h(this,Je).isEmpty()}hasAltTextData(){var e;return((e=h(this,Je))==null?void 0:e.hasData())??!1}render(){var s;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=h(this,tc)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),C(this,de,ME).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*n/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),zm(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(h(this,za)||S(this,za,new Gm({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:C(this,de,JR).bind(this),onPinching:C(this,de,QR).bind(this),onPinchEnd:C(this,de,ZR).bind(this),signal:this._uiManager._signal}))),(s=this._uiManager._editorUndoBar)==null||s.hide(),this.div}pointerdown(e){const{isMac:n}=Tn.platform;if(e.button!==0||e.ctrlKey&&n){e.preventDefault();return}if(S(this,Ua,!0),this._isDraggable){C(this,de,jR).call(this,e);return}C(this,de,NE).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){h(this,Dr)&&clearTimeout(h(this,Dr)),S(this,Dr,setTimeout(()=>{var e;S(this,Dr,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,n,i){e.changeParent(this),this.x=n,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,n,i=this.rotation){const r=this.parentScale,[s,o]=this.pageDimensions,[a,l]=this.pageTranslation,u=e/r,c=n/r,d=this.x*s,f=this.y*o,g=this.width*s,y=this.height*o;switch(i){case 0:return[d+u+a,o-f-c-y+l,d+u+g+a,o-f-c+l];case 90:return[d+c+a,o-f+u+l,d+c+y+a,o-f+u+g+l];case 180:return[d-u-g+a,o-f+c+l,d-u+a,o-f+c+y+l];case 270:return[d-c-y+a,o-f-u-g+l,d-c+a,o-f-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,n){const[i,r,s,o]=e,a=s-i,l=o-r;switch(this.rotation){case 0:return[i,n-o,a,l];case 90:return[i,n-r,l,a];case 180:return[s,n-r,a,l];case 270:return[s,n-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){S(this,Ba,!0)}disableEditMode(){S(this,Ba,!1)}isInEditMode(){return h(this,Ba)}shouldGetKeyboardEvents(){return h(this,ds)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:n,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:s,innerWidth:o}=window;return n<o&&r>0&&e<s&&i>0}rebuild(){C(this,de,ME).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,n=null){Ve("An editor must be serializable")}static async deserialize(e,n,i){const r=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:i});r.rotation=e.rotation,S(r,Da,e.accessibilityData);const[s,o]=r.pageDimensions,[a,l,u,c]=r.getRectInCurrentCoords(e.rect,o);return r.x=a/s,r.y=l/o,r.width=u/s,r.height=c/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,n;if((e=h(this,go))==null||e.abort(),S(this,go,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),h(this,Dr)&&(clearTimeout(h(this,Dr)),S(this,Dr,null)),C(this,de,Vd).call(this),this.removeEditToolbar(),h(this,Ai)){for(const i of h(this,Ai).values())clearTimeout(i);S(this,Ai,null)}this.parent=null,(n=h(this,za))==null||n.destroy(),S(this,za,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,de,YR).call(this),h(this,Gt).classList.remove("hidden"),zm(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),S(this,cs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const n=h(this,Gt).children;if(!h(this,Qi)){S(this,Qi,Array.from(n));const o=C(this,de,eN).bind(this),a=C(this,de,tN).bind(this),l=this._uiManager._signal;for(const u of h(this,Qi)){const c=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:l}),u.addEventListener("blur",a,{signal:l}),u.addEventListener("focus",C(this,de,nN).bind(this,c),{signal:l}),u.setAttribute("data-l10n-id",we._l10nResizer[c])}}const i=h(this,Qi)[0];let r=0;for(const o of n){if(o===i)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(h(this,Qi).length/4);if(s!==r){if(s<r)for(let a=0;a<r-s;a++)h(this,Gt).append(h(this,Gt).firstChild);else if(s>r)for(let a=0;a<s-r;a++)h(this,Gt).firstChild.before(h(this,Gt).lastChild);let o=0;for(const a of n){const u=h(this,Qi)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",we._l10nResizer[u])}}C(this,de,PE).call(this,0),S(this,ds,!0),h(this,Gt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,n){h(this,ds)&&C(this,de,RE).call(this,h(this,mf),{deltaX:e,deltaY:n,fromKeyboard:!0})}_stopResizingWithKeyboard(){C(this,de,Vd).call(this),this.div.focus()}select(){var e,n,i;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,s;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(n=this._editToolbar)==null||n.show(),(i=h(this,Je))==null||i.toggleAltTextBadge(!1)}unselect(){var e,n,i,r,s;(e=h(this,Gt))==null||e.classList.add("hidden"),(n=this.div)==null||n.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(s=h(this,Je))==null||s.toggleAltTextBadge(!0)}updateParams(e,n){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return h(this,yf)}set isEditing(e){S(this,yf,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,n){S(this,Oa,!0);const i=e/n,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,n=!1){if(n){h(this,Ai)||S(this,Ai,new Map);const{action:i}=e;let r=h(this,Ai).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),h(this,Ai).delete(i),h(this,Ai).size===0&&S(this,Ai,null)},we._telemetryTimeout),h(this,Ai).set(i,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),S(this,tc,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,tc,!0)}renderAnnotationElement(e){let n=e.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),e.container.prepend(n);else if(n.nodeName==="CANVAS"){const i=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),i.before(n)}return n}resetAnnotationElement(e){const{firstChild:n}=e.container;(n==null?void 0:n.nodeName)==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}};Da=new WeakMap,Qi=new WeakMap,Je=new WeakMap,tc=new WeakMap,po=new WeakMap,gf=new WeakMap,Oa=new WeakMap,Gt=new WeakMap,Fa=new WeakMap,cs=new WeakMap,go=new WeakMap,mf=new WeakMap,Ua=new WeakMap,Zn=new WeakMap,yf=new WeakMap,Ba=new WeakMap,ds=new WeakMap,Dr=new WeakMap,nc=new WeakMap,ic=new WeakMap,Ai=new WeakMap,za=new WeakMap,vf=new WeakMap,dy=new WeakMap,de=new WeakSet,CE=function([e,n],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},_f=new WeakSet,kE=function(e,n,i){switch(i){case 90:return[n,-e];case 180:return[-e,-n];case 270:return[-n,e];default:return[e,n]}},Ug=function(e){switch(e){case 90:{const[n,i]=this.pageDimensions;return[0,-n/i,i/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,i]=this.pageDimensions;return[0,n/i,-i/n,0]}default:return[1,0,0,1]}},YR=function(){if(h(this,Gt))return;S(this,Gt,document.createElement("div")),h(this,Gt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const i of e){const r=document.createElement("div");h(this,Gt).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",C(this,de,XR).bind(this,i),{signal:n}),r.addEventListener("contextmenu",mr,{signal:n}),r.tabIndex=-1}this.div.prepend(h(this,Gt))},XR=function(e,n){var c;n.preventDefault();const{isMac:i}=Tn.platform;if(n.button!==0||n.ctrlKey&&i)return;(c=h(this,Je))==null||c.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,S(this,Fa,[n.screenX,n.screenY]);const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C(this,de,RE).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",di,{passive:!1,signal:o}),window.addEventListener("contextmenu",mr,{signal:o}),S(this,cs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const u=()=>{var d;s.abort(),this.parent.togglePointerEvents(!0),(d=h(this,Je))==null||d.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=a,this.div.style.cursor=l,C(this,de,Bg).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},IE=function(e,n,i,r){this.width=i,this.height=r,this.x=e,this.y=n;const[s,o]=this.parentDimensions;this.setDims(s*i,o*r),this.fixAndSetPosition(),this._onResized()},Bg=function(){if(!h(this,cs))return;const{savedX:e,savedY:n,savedWidth:i,savedHeight:r}=h(this,cs);S(this,cs,null);const s=this.x,o=this.y,a=this.width,l=this.height;s===e&&o===n&&a===i&&l===r||this.addCommands({cmd:C(this,de,IE).bind(this,s,o,a,l),undo:C(this,de,IE).bind(this,e,n,i,r),mustExec:!0})},RE=function(e,n){const[i,r]=this.parentDimensions,s=this.x,o=this.y,a=this.width,l=this.height,u=we.MIN_SIZE/i,c=we.MIN_SIZE/r,d=C(this,de,Ug).call(this,this.rotation),f=(D,z)=>[d[0]*D+d[2]*z,d[1]*D+d[3]*z],g=C(this,de,Ug).call(this,360-this.rotation),y=(D,z)=>[g[0]*D+g[2]*z,g[1]*D+g[3]*z];let v,E,_=!1,b=!1;switch(e){case"topLeft":_=!0,v=(D,z)=>[0,0],E=(D,z)=>[D,z];break;case"topMiddle":v=(D,z)=>[D/2,0],E=(D,z)=>[D/2,z];break;case"topRight":_=!0,v=(D,z)=>[D,0],E=(D,z)=>[0,z];break;case"middleRight":b=!0,v=(D,z)=>[D,z/2],E=(D,z)=>[0,z/2];break;case"bottomRight":_=!0,v=(D,z)=>[D,z],E=(D,z)=>[0,0];break;case"bottomMiddle":v=(D,z)=>[D/2,z],E=(D,z)=>[D/2,0];break;case"bottomLeft":_=!0,v=(D,z)=>[0,z],E=(D,z)=>[D,0];break;case"middleLeft":b=!0,v=(D,z)=>[0,z/2],E=(D,z)=>[D,z/2];break}const w=v(a,l),A=E(a,l);let k=f(...A);const T=we._round(s+k[0]),N=we._round(o+k[1]);let L=1,F=1,R,U;if(n.fromKeyboard)({deltaX:R,deltaY:U}=n);else{const{screenX:D,screenY:z}=n,[B,$]=h(this,Fa);[R,U]=this.screenToPageTranslation(D-B,z-$),h(this,Fa)[0]=D,h(this,Fa)[1]=z}if([R,U]=y(R/i,U/r),_){const D=Math.hypot(a,l);L=F=Math.max(Math.min(Math.hypot(A[0]-w[0]-R,A[1]-w[1]-U)/D,1/a,1/l),u/a,c/l)}else b?L=Math.max(u,Math.min(1,Math.abs(A[0]-w[0]-R)))/a:F=Math.max(c,Math.min(1,Math.abs(A[1]-w[1]-U)))/l;const H=we._round(a*L),V=we._round(l*F);k=f(...E(H,V));const W=T-k[0],X=N-k[1];h(this,Zn)||S(this,Zn,[this.x,this.y,this.width,this.height]),this.width=H,this.height=V,this.x=W,this.y=X,this.setDims(i*H,r*V),this.fixAndSetPosition(),this._onResizing()},JR=function(){var e;S(this,cs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=h(this,Je))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},QR=function(e,n,i){let s=.7*(i/n)+1-.7;if(s===1)return;const o=C(this,de,Ug).call(this,this.rotation),a=(T,N)=>[o[0]*T+o[2]*N,o[1]*T+o[3]*N],[l,u]=this.parentDimensions,c=this.x,d=this.y,f=this.width,g=this.height,y=we.MIN_SIZE/l,v=we.MIN_SIZE/u;s=Math.max(Math.min(s,1/f,1/g),y/f,v/g);const E=we._round(f*s),_=we._round(g*s);if(E===f&&_===g)return;h(this,Zn)||S(this,Zn,[c,d,f,g]);const b=a(f/2,g/2),w=we._round(c+b[0]),A=we._round(d+b[1]),k=a(E/2,_/2);this.x=w-k[0],this.y=A-k[1],this.width=E,this.height=_,this.setDims(l*E,u*_),this.fixAndSetPosition(),this._onResizing()},ZR=function(){var e;(e=h(this,Je))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),C(this,de,Bg).call(this)},NE=function(e){const{isMac:n}=Tn.platform;e.ctrlKey&&!n||e.shiftKey||e.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)},jR=function(e){const{isSelected:n}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,s=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:s},a=u=>{r.abort(),S(this,po,null),S(this,Ua,!1),this._uiManager.endDragSession()||C(this,de,NE).call(this,u),i&&this._onStopDragging()};n&&(S(this,nc,e.clientX),S(this,ic,e.clientY),S(this,po,e.pointerId),S(this,gf,e.pointerType),window.addEventListener("pointermove",u=>{i||(i=!0,this._onStartDragging());const{clientX:c,clientY:d,pointerId:f}=u;if(f!==h(this,po)){di(u);return}const[g,y]=this.screenToPageTranslation(c-h(this,nc),d-h(this,ic));S(this,nc,c),S(this,ic,d),this._uiManager.dragSelectedEditors(g,y)},o),window.addEventListener("touchmove",di,o),window.addEventListener("pointerdown",u=>{u.pointerType===h(this,gf)&&(h(this,za)||u.isPrimary)&&a(u),di(u)},o));const l=u=>{if(!h(this,po)||h(this,po)===u.pointerId){a(u);return}di(u)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})},ME=function(){if(h(this,go)||!this.div)return;S(this,go,new AbortController);const e=this._uiManager.combinedSignal(h(this,go));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},eN=function(e){we._resizerKeyboardManager.exec(this,e)},tN=function(e){var n;h(this,ds)&&((n=e.relatedTarget)==null?void 0:n.parentNode)!==h(this,Gt)&&C(this,de,Vd).call(this)},nN=function(e){S(this,mf,h(this,ds)?e:"")},PE=function(e){if(h(this,Qi))for(const n of h(this,Qi))n.tabIndex=e},Vd=function(){S(this,ds,!1),C(this,de,PE).call(this,-1),C(this,de,Bg).call(this)},x(we,_f),ce(we,"_l10n",null),ce(we,"_l10nResizer",null),ce(we,"_borderLineWidth",-1),ce(we,"_colorManager",new _E),ce(we,"_zIndex",1),ce(we,"_telemetryTimeout",1e3);let ot=we;class J2 extends ot{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const NA=3285377520,Ei=4294901760,wr=65535;class iN{constructor(e){this.h1=e?e&4294967295:NA,this.h2=e?e&4294967295:NA}update(e){let n,i;if(typeof e=="string"){n=new Uint8Array(e.length*2),i=0;for(let v=0,E=e.length;v<E;v++){const _=e.charCodeAt(v);_<=255?n[i++]=_:(n[i++]=_>>>8,n[i++]=_&255)}}else if(ArrayBuffer.isView(e))n=e.slice(),i=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,s=i-r*4,o=new Uint32Array(n.buffer,0,r);let a=0,l=0,u=this.h1,c=this.h2;const d=3432918353,f=461845907,g=d&wr,y=f&wr;for(let v=0;v<r;v++)v&1?(a=o[v],a=a*d&Ei|a*g&wr,a=a<<15|a>>>17,a=a*f&Ei|a*y&wr,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(l=o[v],l=l*d&Ei|l*g&wr,l=l<<15|l>>>17,l=l*f&Ei|l*y&wr,c^=l,c=c<<13|c>>>19,c=c*5+3864292196);switch(a=0,s){case 3:a^=n[r*4+2]<<16;case 2:a^=n[r*4+1]<<8;case 1:a^=n[r*4],a=a*d&Ei|a*g&wr,a=a<<15|a>>>17,a=a*f&Ei|a*y&wr,r&1?u^=a:c^=a}this.h1=u,this.h2=c}hexdigest(){let e=this.h1,n=this.h2;return e^=n>>>1,e=e*3981806797&Ei|e*36045&wr,n=n*4283543511&Ei|((n<<16|e>>>16)*2950163797&Ei)>>>16,e^=n>>>1,e=e*444984403&Ei|e*60499&wr,n=n*3301882366&Ei|((n<<16|e>>>16)*3120437893&Ei)>>>16,e^=n>>>1,(e>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const LE=Object.freeze({map:null,hash:"",transfer:void 0});var Ha,Ga,Pt,hy,rN;class uw{constructor(){x(this,hy);x(this,Ha,!1);x(this,Ga,null);x(this,Pt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,n){const i=h(this,Pt).get(e);return i===void 0?n:Object.assign(n,i)}getRawValue(e){return h(this,Pt).get(e)}remove(e){if(h(this,Pt).delete(e),h(this,Pt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const n of h(this,Pt).values())if(n instanceof ot)return;this.onAnnotationEditor(null)}}setValue(e,n){const i=h(this,Pt).get(e);let r=!1;if(i!==void 0)for(const[s,o]of Object.entries(n))i[s]!==o&&(r=!0,i[s]=o);else r=!0,h(this,Pt).set(e,n);r&&C(this,hy,rN).call(this),n instanceof ot&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type)}has(e){return h(this,Pt).has(e)}getAll(){return h(this,Pt).size>0?iw(h(this,Pt)):null}setAll(e){for(const[n,i]of Object.entries(e))this.setValue(n,i)}get size(){return h(this,Pt).size}resetModified(){h(this,Ha)&&(S(this,Ha,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new sN(this)}get serializable(){if(h(this,Pt).size===0)return LE;const e=new Map,n=new iN,i=[],r=Object.create(null);let s=!1;for(const[o,a]of h(this,Pt)){const l=a instanceof ot?a.serialize(!1,r):a;l&&(e.set(o,l),n.update(`${o}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const o of e.values())o.bitmap&&i.push(o.bitmap);return e.size>0?{map:e,hash:n.hexdigest(),transfer:i}:LE}get editorStats(){let e=null;const n=new Map;for(const i of h(this,Pt).values()){if(!(i instanceof ot))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:s}=r;n.has(s)||n.set(s,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const o=e[s]||(e[s]=new Map);for(const[a,l]of Object.entries(r)){if(a==="type")continue;let u=o.get(a);u||(u=new Map,o.set(a,u));const c=u.get(l)??0;u.set(l,c+1)}}for(const[i,r]of n)e[i]=r.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){S(this,Ga,null)}get modifiedIds(){if(h(this,Ga))return h(this,Ga);const e=[];for(const n of h(this,Pt).values())!(n instanceof ot)||!n.annotationElementId||!n.serialize()||e.push(n.annotationElementId);return S(this,Ga,{ids:new Set(e),hash:e.join(",")})}}Ha=new WeakMap,Ga=new WeakMap,Pt=new WeakMap,hy=new WeakSet,rN=function(){h(this,Ha)||(S(this,Ha,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Ef;class sN extends uw{constructor(n){super();x(this,Ef);const{map:i,hash:r,transfer:s}=n.serializable,o=structuredClone(i,s?{transfer:s}:null);S(this,Ef,{map:o,hash:r,transfer:s})}get print(){Ve("Should not call PrintAnnotationStorage.print")}get serializable(){return h(this,Ef)}get modifiedIds(){return Ae(this,"modifiedIds",{ids:new Set,hash:""})}}Ef=new WeakMap;var rc;class Q2{constructor({ownerDocument:e=globalThis.document,styleElement:n=null}){x(this,rc,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(e,n.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),h(this,rc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:n}){if(!(!e||h(this,rc).has(e.loadedName))){if(bt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:s}=e,o=new FontFace(i,r,s);this.addNativeFontFace(o);try{await o.load(),h(this,rc).add(i),n==null||n(e)}catch{Ee(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Ve("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw Ee(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const n=e.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var n;const e=!!((n=this._document)!=null&&n.fonts);return Ae(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(ln||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Ae(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function n(){for(bt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:n,callback:e};return i.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ae(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,n){function i(A,k){return A.charCodeAt(k)<<24|A.charCodeAt(k+1)<<16|A.charCodeAt(k+2)<<8|A.charCodeAt(k+3)&255}function r(A,k,T,N){const L=A.substring(0,k),F=A.substring(k+T);return L+N+F}let s,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let u=0;function c(A,k){if(++u>30){Ee("Load test font never loaded."),k();return}if(l.font="30px "+A,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(c.bind(null,A,k))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=r(f,976,d.length,d);const y=16,v=1482184792;let E=i(f,y);for(s=0,o=d.length-3;s<o;s+=4)E=E-v+i(d,s)|0;s<d.length&&(E=E-v+i(d+"XXX",s)|0),f=r(f,y,4,O2(E));const _=`url(data:font/opentype;base64,${btoa(f)});`,b=`@font-face {font-family:"${d}";src:${_}}`;this.insertRule(b);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const A of[e.loadedName,d]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=A,w.append(k)}this._document.body.append(w),c(d,()=>{w.remove(),n.complete()})}}rc=new WeakMap;class Z2{constructor(e,{disableFontFace:n=!1,fontExtraProperties:i=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=n===!0,this.fontExtraProperties=i===!0,this._inspectFont=r}createNativeFontFace(){var n;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(n=this._inspectFont)==null||n.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${G2(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),n}getPathGenerator(e,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const i=this.loadedName+"_path_"+n;let r;try{r=e.get(i)}catch(o){Ee(`getPathGenerator - ignoring character: "${o}".`)}const s=new Path2D(r||"");return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[n]=s}}const Zp={DATA:1,ERROR:2},vt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function MA(){}function Ln(t){if(t instanceof Zo||t instanceof fE||t instanceof Uh||t instanceof kA||t instanceof Bm||t instanceof Gv)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||Ve('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new Zo(t.message);case"InvalidPDFException":return new fE(t.message);case"MissingPDFException":return new Uh(t.message);case"PasswordException":return new kA(t.message,t.code);case"UnexpectedResponseException":return new Bm(t.message,t.status);case"UnknownErrorException":return new Gv(t.message,t.details)}return new Gv(t.message,t.toString())}var sc,Ui,oN,aN,lN,zg;class qd{constructor(e,n,i){x(this,Ui);x(this,sc,new AbortController);this.sourceName=e,this.targetName=n,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",C(this,Ui,oN).bind(this),{signal:h(this,sc).signal})}on(e,n){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=n}send(e,n,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:n},i)}sendWithPromise(e,n,i){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:n},i)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,n,i,r){const s=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const c=Promise.withResolvers();return this.streamControllers[s]={controller:u,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:s,data:n,desiredSize:u.desiredSize},r),c.promise},pull:u=>{const c=Promise.withResolvers();return this.streamControllers[s].pullCall=c,l.postMessage({sourceName:o,targetName:a,stream:vt.PULL,streamId:s,desiredSize:u.desiredSize}),c.promise},cancel:u=>{bt(u instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[s].cancelCall=c,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:vt.CANCEL,streamId:s,reason:Ln(u)}),c.promise}},i)}destroy(){var e;(e=h(this,sc))==null||e.abort(),S(this,sc,null)}}sc=new WeakMap,Ui=new WeakSet,oN=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){C(this,Ui,lN).call(this,e);return}if(e.callback){const i=e.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Zp.DATA)r.resolve(e.data);else if(e.callback===Zp.ERROR)r.reject(Ln(e.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,r=e.sourceName,s=this.comObj;Promise.try(n,e.data).then(function(o){s.postMessage({sourceName:i,targetName:r,callback:Zp.DATA,callbackId:e.callbackId,data:o})},function(o){s.postMessage({sourceName:i,targetName:r,callback:Zp.ERROR,callbackId:e.callbackId,reason:Ln(o)})});return}if(e.streamId){C(this,Ui,aN).call(this,e);return}n(e.data)},aN=function(e){const n=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(u,c=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=c,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:r,stream:vt.ENQUEUE,streamId:n,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:vt.CLOSE,streamId:n}),delete o.streamSinks[n])},error(u){bt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:vt.ERROR,streamId:n,reason:Ln(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[n]=l,Promise.try(a,e.data,l).then(function(){s.postMessage({sourceName:i,targetName:r,stream:vt.START_COMPLETE,streamId:n,success:!0})},function(u){s.postMessage({sourceName:i,targetName:r,stream:vt.START_COMPLETE,streamId:n,reason:Ln(u)})})},lN=function(e){const n=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,o=this.streamControllers[n],a=this.streamSinks[n];switch(e.stream){case vt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Ln(e.reason));break;case vt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Ln(e.reason));break;case vt.PULL:if(!a){s.postMessage({sourceName:i,targetName:r,stream:vt.PULL_COMPLETE,streamId:n,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||MA).then(function(){s.postMessage({sourceName:i,targetName:r,stream:vt.PULL_COMPLETE,streamId:n,success:!0})},function(u){s.postMessage({sourceName:i,targetName:r,stream:vt.PULL_COMPLETE,streamId:n,reason:Ln(u)})});break;case vt.ENQUEUE:if(bt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case vt.CLOSE:if(bt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),C(this,Ui,zg).call(this,o,n);break;case vt.ERROR:bt(o,"error should have stream controller"),o.controller.error(Ln(e.reason)),C(this,Ui,zg).call(this,o,n);break;case vt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Ln(e.reason)),C(this,Ui,zg).call(this,o,n);break;case vt.CANCEL:if(!a)break;const l=Ln(e.reason);Promise.try(a.onCancel||MA,l).then(function(){s.postMessage({sourceName:i,targetName:r,stream:vt.CANCEL_COMPLETE,streamId:n,success:!0})},function(u){s.postMessage({sourceName:i,targetName:r,stream:vt.CANCEL_COMPLETE,streamId:n,reason:Ln(u)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}},zg=async function(e,n){var i,r,s;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(r=e.pullCall)==null?void 0:r.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[n]};var bf;class uN{constructor({enableHWA:e=!1}){x(this,bf,!1);S(this,bf,e)}create(e,n){if(e<=0||n<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,n);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!h(this,bf)})}}reset(e,n,i){if(!e.canvas)throw new Error("Canvas is not specified");if(n<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=n,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,n){Ve("Abstract method `_createCanvas` called.")}}bf=new WeakMap;class j2 extends uN{constructor({ownerDocument:e=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=e}_createCanvas(e,n){const i=this._document.createElement("canvas");return i.width=e,i.height=n,i}}class cN{constructor({baseUrl:e=null,isCompressed:n=!0}){this.baseUrl=e,this.isCompressed=n}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(e){Ve("Abstract method `_fetch` called.")}}class dN extends cN{async _fetch(e){const n=await Xy(e,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):Yy(n)}}class hN{addFilter(e){return"none"}addHCMFilter(e,n){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,n,i,r,s){return"none"}destroy(e=!1){}}var $a,oc,hs,fs,nn,Va,qa,te,jt,Wd,su,Hg,ou,fN,DE,au,Kd,Yd,OE,Xd;class eU extends hN{constructor({docId:n,ownerDocument:i=globalThis.document}){super();x(this,te);x(this,$a);x(this,oc);x(this,hs);x(this,fs);x(this,nn);x(this,Va);x(this,qa,0);S(this,fs,n),S(this,nn,i)}addFilter(n){if(!n)return"none";let i=h(this,te,jt).get(n);if(i)return i;const[r,s,o]=C(this,te,Hg).call(this,n),a=n.length===1?r:`${r}${s}${o}`;if(i=h(this,te,jt).get(a),i)return h(this,te,jt).set(n,i),i;const l=`g_${h(this,fs)}_transfer_map_${pn(this,qa)._++}`,u=C(this,te,ou).call(this,l);h(this,te,jt).set(n,u),h(this,te,jt).set(a,u);const c=C(this,te,au).call(this,l);return C(this,te,Yd).call(this,r,s,o,c),u}addHCMFilter(n,i){var y;const r=`${n}-${i}`,s="base";let o=h(this,te,Wd).get(s);if((o==null?void 0:o.key)===r||(o?((y=o.filter)==null||y.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},h(this,te,Wd).set(s,o)),!n||!i))return o.url;const a=C(this,te,Xd).call(this,n);n=ae.makeHexColor(...a);const l=C(this,te,Xd).call(this,i);if(i=ae.makeHexColor(...l),h(this,te,su).style.color="",n==="#000000"&&i==="#ffffff"||n===i)return o.url;const u=new Array(256);for(let v=0;v<=255;v++){const E=v/255;u[v]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const c=u.join(","),d=`g_${h(this,fs)}_hcm_filter`,f=o.filter=C(this,te,au).call(this,d);C(this,te,Yd).call(this,c,c,c,f),C(this,te,DE).call(this,f);const g=(v,E)=>{const _=a[v]/255,b=l[v]/255,w=new Array(E+1);for(let A=0;A<=E;A++)w[A]=_+A/E*(b-_);return w.join(",")};return C(this,te,Yd).call(this,g(0,5),g(1,5),g(2,5),f),o.url=C(this,te,ou).call(this,d),o.url}addAlphaFilter(n){let i=h(this,te,jt).get(n);if(i)return i;const[r]=C(this,te,Hg).call(this,[n]),s=`alpha_${r}`;if(i=h(this,te,jt).get(s),i)return h(this,te,jt).set(n,i),i;const o=`g_${h(this,fs)}_alpha_map_${pn(this,qa)._++}`,a=C(this,te,ou).call(this,o);h(this,te,jt).set(n,a),h(this,te,jt).set(s,a);const l=C(this,te,au).call(this,o);return C(this,te,OE).call(this,r,l),a}addLuminosityFilter(n){let i=h(this,te,jt).get(n||"luminosity");if(i)return i;let r,s;if(n?([r]=C(this,te,Hg).call(this,[n]),s=`luminosity_${r}`):s="luminosity",i=h(this,te,jt).get(s),i)return h(this,te,jt).set(n,i),i;const o=`g_${h(this,fs)}_luminosity_map_${pn(this,qa)._++}`,a=C(this,te,ou).call(this,o);h(this,te,jt).set(n,a),h(this,te,jt).set(s,a);const l=C(this,te,au).call(this,o);return C(this,te,fN).call(this,l),n&&C(this,te,OE).call(this,r,l),a}addHighlightHCMFilter(n,i,r,s,o){var b;const a=`${i}-${r}-${s}-${o}`;let l=h(this,te,Wd).get(n);if((l==null?void 0:l.key)===a||(l?((b=l.filter)==null||b.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},h(this,te,Wd).set(n,l)),!i||!r))return l.url;const[u,c]=[i,r].map(C(this,te,Xd).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[g,y]=[s,o].map(C(this,te,Xd).bind(this));f<d&&([d,f,g,y]=[f,d,y,g]),h(this,te,su).style.color="";const v=(w,A,k)=>{const T=new Array(256),N=(f-d)/k,L=w/255,F=(A-w)/(255*k);let R=0;for(let U=0;U<=k;U++){const H=Math.round(d+U*N),V=L+U*F;for(let W=R;W<=H;W++)T[W]=V;R=H+1}for(let U=R;U<256;U++)T[U]=T[R-1];return T.join(",")},E=`g_${h(this,fs)}_hcm_${n}_filter`,_=l.filter=C(this,te,au).call(this,E);return C(this,te,DE).call(this,_),C(this,te,Yd).call(this,v(g[0],y[0],5),v(g[1],y[1],5),v(g[2],y[2],5),_),l.url=C(this,te,ou).call(this,E),l.url}destroy(n=!1){var i,r,s,o;n&&((i=h(this,Va))!=null&&i.size)||((r=h(this,hs))==null||r.parentNode.parentNode.remove(),S(this,hs,null),(s=h(this,oc))==null||s.clear(),S(this,oc,null),(o=h(this,Va))==null||o.clear(),S(this,Va,null),S(this,qa,0))}}$a=new WeakMap,oc=new WeakMap,hs=new WeakMap,fs=new WeakMap,nn=new WeakMap,Va=new WeakMap,qa=new WeakMap,te=new WeakSet,jt=function(){return h(this,oc)||S(this,oc,new Map)},Wd=function(){return h(this,Va)||S(this,Va,new Map)},su=function(){if(!h(this,hs)){const n=h(this,nn).createElement("div"),{style:i}=n;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=h(this,nn).createElementNS(Zr,"svg");r.setAttribute("width",0),r.setAttribute("height",0),S(this,hs,h(this,nn).createElementNS(Zr,"defs")),n.append(r),r.append(h(this,hs)),h(this,nn).body.append(n)}return h(this,hs)},Hg=function(n){if(n.length===1){const u=n[0],c=new Array(256);for(let f=0;f<256;f++)c[f]=u[f]/255;const d=c.join(",");return[d,d,d]}const[i,r,s]=n,o=new Array(256),a=new Array(256),l=new Array(256);for(let u=0;u<256;u++)o[u]=i[u]/255,a[u]=r[u]/255,l[u]=s[u]/255;return[o.join(","),a.join(","),l.join(",")]},ou=function(n){if(h(this,$a)===void 0){S(this,$a,"");const i=h(this,nn).URL;i!==h(this,nn).baseURI&&(Jy(i)?Ee('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,$a,i.split("#",1)[0]))}return`url(${h(this,$a)}#${n})`},fN=function(n){const i=h(this,nn).createElementNS(Zr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),n.append(i)},DE=function(n){const i=h(this,nn).createElementNS(Zr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),n.append(i)},au=function(n){const i=h(this,nn).createElementNS(Zr,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",n),h(this,te,su).append(i),i},Kd=function(n,i,r){const s=h(this,nn).createElementNS(Zr,i);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),n.append(s)},Yd=function(n,i,r,s){const o=h(this,nn).createElementNS(Zr,"feComponentTransfer");s.append(o),C(this,te,Kd).call(this,o,"feFuncR",n),C(this,te,Kd).call(this,o,"feFuncG",i),C(this,te,Kd).call(this,o,"feFuncB",r)},OE=function(n,i){const r=h(this,nn).createElementNS(Zr,"feComponentTransfer");i.append(r),C(this,te,Kd).call(this,r,"feFuncA",n)},Xd=function(n){return h(this,te,su).style.color=n,lw(getComputedStyle(h(this,te,su)).getPropertyValue("color"))};class pN{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(i=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(e){Ve("Abstract method `_fetch` called.")}}class gN extends pN{async _fetch(e){const n=await Xy(e,"arraybuffer");return new Uint8Array(n)}}ln&&Ee("Please use the `legacy` build in Node.js environments.");async function mN(t){const n=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(n)}class tU extends hN{}class nU extends uN{_createCanvas(e,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,n)}}class iU extends cN{async _fetch(e){return mN(e)}}class rU extends pN{async _fetch(e){return mN(e)}}const on={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function FE(t,e){if(!e)return;const n=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],n,i),t.clip(r)}class cw{getPattern(){Ve("Abstract method `getPattern` called.")}}class sU extends cw{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let n;this._type==="axial"?n=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)n.addColorStop(i[0],i[1]);return n}getPattern(e,n,i,r){let s;if(r===on.STROKE||r===on.FILL){const o=n.current.getClippedPathBoundingBox(r,et(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,u=n.cachedCanvases.getCanvas("pattern",a,l),c=u.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-o[0],-o[1]),i=ae.transform(i,[1,0,0,1,o[0],o[1]]),c.transform(...n.baseTransform),this.matrix&&c.transform(...this.matrix),FE(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),s=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(i);s.setTransform(d)}else FE(e,this._bbox),s=this._createGradient(e);return s}}function qv(t,e,n,i,r,s,o,a){const l=e.coords,u=e.colors,c=t.data,d=t.width*4;let f;l[n+1]>l[i+1]&&(f=n,n=i,i=f,f=s,s=o,o=f),l[i+1]>l[r+1]&&(f=i,i=r,r=f,f=o,o=a,a=f),l[n+1]>l[i+1]&&(f=n,n=i,i=f,f=s,s=o,o=f);const g=(l[n]+e.offsetX)*e.scaleX,y=(l[n+1]+e.offsetY)*e.scaleY,v=(l[i]+e.offsetX)*e.scaleX,E=(l[i+1]+e.offsetY)*e.scaleY,_=(l[r]+e.offsetX)*e.scaleX,b=(l[r+1]+e.offsetY)*e.scaleY;if(y>=b)return;const w=u[s],A=u[s+1],k=u[s+2],T=u[o],N=u[o+1],L=u[o+2],F=u[a],R=u[a+1],U=u[a+2],H=Math.round(y),V=Math.round(b);let W,X,D,z,B,$,I,Z;for(let ee=H;ee<=V;ee++){if(ee<E){const be=ee<y?0:(y-ee)/(y-E);W=g-(g-v)*be,X=w-(w-T)*be,D=A-(A-N)*be,z=k-(k-L)*be}else{let be;ee>b?be=1:E===b?be=0:be=(E-ee)/(E-b),W=v-(v-_)*be,X=T-(T-F)*be,D=N-(N-R)*be,z=L-(L-U)*be}let M;ee<y?M=0:ee>b?M=1:M=(y-ee)/(y-b),B=g-(g-_)*M,$=w-(w-F)*M,I=A-(A-R)*M,Z=k-(k-U)*M;const ge=Math.round(Math.min(W,B)),Pe=Math.round(Math.max(W,B));let he=d*ee+ge*4;for(let be=ge;be<=Pe;be++)M=(W-be)/(W-B),M<0?M=0:M>1&&(M=1),c[he++]=X-(X-$)*M|0,c[he++]=D-(D-I)*M|0,c[he++]=z-(z-Z)*M|0,c[he++]=255}}function oU(t,e,n){const i=e.coords,r=e.colors;let s,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(i.length/a)-1,u=a-1;for(s=0;s<l;s++){let c=s*a;for(let d=0;d<u;d++,c++)qv(t,n,i[c],i[c+1],i[c+a],r[c],r[c+1],r[c+a]),qv(t,n,i[c+a+1],i[c+1],i[c+a],r[c+a+1],r[c+1],r[c+a])}break;case"triangles":for(s=0,o=i.length;s<o;s+=3)qv(t,n,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class aU extends cw{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,n,i){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,c=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(c*e[1]*1.1)),3e3),g=u/d,y=c/f,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/g,scaleY:1/y},E=d+2*2,_=f+2*2,b=i.getCanvas("mesh",E,_),w=b.context,A=w.createImageData(d,f);if(n){const T=A.data;for(let N=0,L=T.length;N<L;N+=4)T[N]=n[0],T[N+1]=n[1],T[N+2]=n[2],T[N+3]=255}for(const T of this._figures)oU(A,T,v);return w.putImageData(A,2,2),{canvas:b.canvas,offsetX:a-2*g,offsetY:l-2*y,scaleX:g,scaleY:y}}getPattern(e,n,i,r){FE(e,this._bbox);let s;if(r===on.SHADING)s=ae.singularValueDecompose2dScale(et(e));else if(s=ae.singularValueDecompose2dScale(n.baseTransform),this.matrix){const a=ae.singularValueDecompose2dScale(this.matrix);s=[s[0]*a[0],s[1]*a[1]]}const o=this._createMeshCanvas(s,r===on.SHADING?null:this._background,n.cachedCanvases);return r!==on.SHADING&&(e.setTransform(...n.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class lU extends cw{getPattern(){return"hotpink"}}function uU(t){switch(t[0]){case"RadialAxial":return new sU(t);case"Mesh":return new aU(t);case"Dummy":return new lU}throw new Error(`Unknown IR type: ${t[0]}`)}const PA={COLORED:1,UNCOLORED:2},fy=class fy{constructor(e,n,i,r,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=n,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e){const{bbox:n,operatorList:i,paintType:r,tilingType:s,color:o,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:u}=this;l=Math.abs(l),u=Math.abs(u),Ky("TilingType: "+s);const c=n[0],d=n[1],f=n[2],g=n[3],y=f-c,v=g-d,E=ae.singularValueDecompose2dScale(this.matrix),_=ae.singularValueDecompose2dScale(this.baseTransform),b=E[0]*_[0],w=E[1]*_[1];let A=y,k=v,T=!1,N=!1;const L=Math.ceil(l*b),F=Math.ceil(u*w),R=Math.ceil(y*b),U=Math.ceil(v*w);L>=R?A=l:T=!0,F>=U?k=u:N=!0;const H=this.getSizeAndScale(A,this.ctx.canvas.width,b),V=this.getSizeAndScale(k,this.ctx.canvas.height,w),W=e.cachedCanvases.getCanvas("pattern",H.size,V.size),X=W.context,D=a.createCanvasGraphics(X);if(D.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(D,r,o),X.translate(-H.scale*c,-V.scale*d),D.transform(H.scale,0,0,V.scale,0,0),X.save(),this.clipBbox(D,c,d,f,g),D.baseTransform=et(D.ctx),D.executeOperatorList(i),D.endDrawing(),X.restore(),T||N){const z=W.canvas;T&&(A=l),N&&(k=u);const B=this.getSizeAndScale(A,this.ctx.canvas.width,b),$=this.getSizeAndScale(k,this.ctx.canvas.height,w),I=B.size,Z=$.size,ee=e.cachedCanvases.getCanvas("pattern-workaround",I,Z),M=ee.context,ge=T?Math.floor(y/l):0,Pe=N?Math.floor(v/u):0;for(let he=0;he<=ge;he++)for(let be=0;be<=Pe;be++)M.drawImage(z,I*he,Z*be,I,Z,0,0,I,Z);return{canvas:ee.canvas,scaleX:B.scale,scaleY:$.scale,offsetX:c,offsetY:d}}return{canvas:W.canvas,scaleX:H.scale,scaleY:V.scale,offsetX:c,offsetY:d}}getSizeAndScale(e,n,i){const r=Math.max(fy.MAX_PATTERN_SIZE,n);let s=Math.ceil(e*i);return s>=r?s=r:i=s/e,{scale:i,size:s}}clipBbox(e,n,i,r,s){const o=r-n,a=s-i;e.ctx.rect(n,i,o,a),e.current.updateRectMinMax(et(e.ctx),[n,i,r,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,n,i){const r=e.ctx,s=e.current;switch(n){case PA.COLORED:const o=this.ctx;r.fillStyle=o.fillStyle,r.strokeStyle=o.strokeStyle,s.fillColor=o.fillStyle,s.strokeColor=o.strokeStyle;break;case PA.UNCOLORED:const a=ae.makeHexColor(i[0],i[1],i[2]);r.fillStyle=a,r.strokeStyle=a,s.fillColor=a,s.strokeColor=a;break;default:throw new D2(`Unsupported paint type: ${n}`)}}getPattern(e,n,i,r){let s=i;r!==on.SHADING&&(s=ae.transform(s,n.baseTransform),this.matrix&&(s=ae.transform(s,this.matrix)));const o=this.createPatternCanvas(n);let a=new DOMMatrix(s);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};ce(fy,"MAX_PATTERN_SIZE",3e3);let UE=fy;function cU({src:t,srcPos:e=0,dest:n,width:i,height:r,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const a=Tn.isLittleEndian?4278190080:255,[l,u]=o?[s,a]:[a,s],c=i>>3,d=i&7,f=t.length;n=new Uint32Array(n.buffer);let g=0;for(let y=0;y<r;y++){for(const E=e+c;e<E;e++){const _=e<f?t[e]:255;n[g++]=_&128?u:l,n[g++]=_&64?u:l,n[g++]=_&32?u:l,n[g++]=_&16?u:l,n[g++]=_&8?u:l,n[g++]=_&4?u:l,n[g++]=_&2?u:l,n[g++]=_&1?u:l}if(d===0)continue;const v=e<f?t[e++]:255;for(let E=0;E<d;E++)n[g++]=v&1<<7-E?u:l}return{srcPos:e,destPos:g}}const LA=16,DA=100,dU=15,OA=10,FA=1e3,Bn=16;function hU(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(i,r){e.translate(i,r),this.__originalTranslate(i,r)},t.scale=function(i,r){e.scale(i,r),this.__originalScale(i,r)},t.transform=function(i,r,s,o,a,l){e.transform(i,r,s,o,a,l),this.__originalTransform(i,r,s,o,a,l)},t.setTransform=function(i,r,s,o,a,l){e.setTransform(i,r,s,o,a,l),this.__originalSetTransform(i,r,s,o,a,l)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(i){e.rotate(i),this.__originalRotate(i)},t.clip=function(i){e.clip(i),this.__originalClip(i)},t.moveTo=function(n,i){e.moveTo(n,i),this.__originalMoveTo(n,i)},t.lineTo=function(n,i){e.lineTo(n,i),this.__originalLineTo(n,i)},t.bezierCurveTo=function(n,i,r,s,o,a){e.bezierCurveTo(n,i,r,s,o,a),this.__originalBezierCurveTo(n,i,r,s,o,a)},t.rect=function(n,i,r,s){e.rect(n,i,r,s),this.__originalRect(n,i,r,s)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class fU{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,n,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,n,i)):(r=this.canvasFactory.create(n,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const n=this.cache[e];this.canvasFactory.destroy(n),delete this.cache[e]}}}function jp(t,e,n,i,r,s,o,a,l,u){const[c,d,f,g,y,v]=et(t);if(d===0&&f===0){const b=o*c+y,w=Math.round(b),A=a*g+v,k=Math.round(A),T=(o+l)*c+y,N=Math.abs(Math.round(T)-w)||1,L=(a+u)*g+v,F=Math.abs(Math.round(L)-k)||1;return t.setTransform(Math.sign(c),0,0,Math.sign(g),w,k),t.drawImage(e,n,i,r,s,0,0,N,F),t.setTransform(c,d,f,g,y,v),[N,F]}if(c===0&&g===0){const b=a*f+y,w=Math.round(b),A=o*d+v,k=Math.round(A),T=(a+u)*f+y,N=Math.abs(Math.round(T)-w)||1,L=(o+l)*d+v,F=Math.abs(Math.round(L)-k)||1;return t.setTransform(0,Math.sign(d),Math.sign(f),0,w,k),t.drawImage(e,n,i,r,s,0,0,F,N),t.setTransform(c,d,f,g,y,v),[F,N]}t.drawImage(e,n,i,r,s,o,a,l,u);const E=Math.hypot(c,d),_=Math.hypot(f,g);return[E*l,_*u]}function pU(t){const{width:e,height:n}=t;if(e>FA||n>FA)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let o=new Uint8Array(s*(n+1)),a,l,u;const c=e+7&-8;let d=new Uint8Array(c*n),f=0;for(const _ of t.data){let b=128;for(;b>0;)d[f++]=_&b?0:255,b>>=1}let g=0;for(f=0,d[f]!==0&&(o[0]=1,++g),l=1;l<e;l++)d[f]!==d[f+1]&&(o[l]=d[f]?2:1,++g),f++;for(d[f]!==0&&(o[l]=2,++g),a=1;a<n;a++){f=a*c,u=a*s,d[f-c]!==d[f]&&(o[u]=d[f]?1:8,++g);let _=(d[f]?4:0)+(d[f-c]?8:0);for(l=1;l<e;l++)_=(_>>2)+(d[f+1]?4:0)+(d[f-c+1]?8:0),r[_]&&(o[u+l]=r[_],++g),f++;if(d[f-c]!==d[f]&&(o[u+l]=d[f]?2:4,++g),g>i)return null}for(f=c*(n-1),u=a*s,d[f]!==0&&(o[u]=8,++g),l=1;l<e;l++)d[f]!==d[f+1]&&(o[u+l]=d[f]?4:8,++g),f++;if(d[f]!==0&&(o[u+l]=4,++g),g>i)return null;const y=new Int32Array([0,s,-1,0,-s,0,0,0,1]),v=new Path2D;for(a=0;g&&a<=n;a++){let _=a*s;const b=_+e;for(;_<b&&!o[_];)_++;if(_===b)continue;v.moveTo(_%s,a);const w=_;let A=o[_];do{const k=y[A];do _+=k;while(!o[_]);const T=o[_];T!==5&&T!==10?(A=T,o[_]=0):(A=T&51*A>>4,o[_]&=A>>2|A<<2),v.lineTo(_%s,_/s|0),o[_]||--g}while(w!==_);--a}return d=null,o=null,function(_){_.save(),_.scale(1/e,-1/n),_.translate(0,-n),_.fill(v),_.beginPath(),_.restore()}}class UA{constructor(e,n){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=TR,this.textMatrixScale=1,this.fontMatrix=hE,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Zt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,n])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,n){this.x=e,this.y=n}updatePathMinMax(e,n,i){[n,i]=ae.applyTransform([n,i],e),this.minX=Math.min(this.minX,n),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,n),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,n){const i=ae.applyTransform(n,e),r=ae.applyTransform(n.slice(2),e),s=ae.applyTransform([n[0],n[3]],e),o=ae.applyTransform([n[2],n[1]],e);this.minX=Math.min(this.minX,i[0],r[0],s[0],o[0]),this.minY=Math.min(this.minY,i[1],r[1],s[1],o[1]),this.maxX=Math.max(this.maxX,i[0],r[0],s[0],o[0]),this.maxY=Math.max(this.maxY,i[1],r[1],s[1],o[1])}updateScalingPathMinMax(e,n){ae.scaleMinMax(e,n),this.minX=Math.min(this.minX,n[0]),this.minY=Math.min(this.minY,n[1]),this.maxX=Math.max(this.maxX,n[2]),this.maxY=Math.max(this.maxY,n[3])}updateCurvePathMinMax(e,n,i,r,s,o,a,l,u,c){const d=ae.bezierBoundingBox(n,i,r,s,o,a,l,u,c);c||this.updateRectMinMax(e,d)}getPathBoundingBox(e=on.FILL,n=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===on.STROKE){n||Ve("Stroke bounding box must include transform.");const r=ae.singularValueDecompose2dScale(n),s=r[0]*this.lineWidth/2,o=r[1]*this.lineWidth/2;i[0]-=s,i[1]-=o,i[2]+=s,i[3]+=o}return i}updateClipFromPath(){const e=ae.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=on.FILL,n=null){return ae.intersect(this.clipBox,this.getPathBoundingBox(e,n))}}function BA(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const n=e.height,i=e.width,r=n%Bn,s=(n-r)/Bn,o=r===0?s:s+1,a=t.createImageData(i,Bn);let l=0,u;const c=e.data,d=a.data;let f,g,y,v;if(e.kind===Ng.GRAYSCALE_1BPP){const E=c.byteLength,_=new Uint32Array(d.buffer,0,d.byteLength>>2),b=_.length,w=i+7>>3,A=4294967295,k=Tn.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<s?Bn:r,u=0,g=0;g<y;g++){const T=E-l;let N=0;const L=T>w?i:T*8-7,F=L&-8;let R=0,U=0;for(;N<F;N+=8)U=c[l++],_[u++]=U&128?A:k,_[u++]=U&64?A:k,_[u++]=U&32?A:k,_[u++]=U&16?A:k,_[u++]=U&8?A:k,_[u++]=U&4?A:k,_[u++]=U&2?A:k,_[u++]=U&1?A:k;for(;N<L;N++)R===0&&(U=c[l++],R=128),_[u++]=U&R?A:k,R>>=1}for(;u<b;)_[u++]=0;t.putImageData(a,0,f*Bn)}}else if(e.kind===Ng.RGBA_32BPP){for(g=0,v=i*Bn*4,f=0;f<s;f++)d.set(c.subarray(l,l+v)),l+=v,t.putImageData(a,0,g),g+=Bn;f<o&&(v=i*r*4,d.set(c.subarray(l,l+v)),t.putImageData(a,0,g))}else if(e.kind===Ng.RGB_24BPP)for(y=Bn,v=i*y,f=0;f<o;f++){for(f>=s&&(y=r,v=i*y),u=0,g=v;g--;)d[u++]=c[l++],d[u++]=c[l++],d[u++]=c[l++],d[u++]=255;t.putImageData(a,0,f*Bn)}else throw new Error(`bad image kind: ${e.kind}`)}function zA(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const n=e.height,i=e.width,r=n%Bn,s=(n-r)/Bn,o=r===0?s:s+1,a=t.createImageData(i,Bn);let l=0;const u=e.data,c=a.data;for(let d=0;d<o;d++){const f=d<s?Bn:r;({srcPos:l}=cU({src:u,srcPos:l,dest:c,width:i,height:f,nonBlackColor:0})),t.putImageData(a,0,d*Bn)}}function kd(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)t[i]!==void 0&&(e[i]=t[i]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function eg(t){if(t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0),!ln){const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}}function HA(t,e){if(e)return!0;const n=ae.singularValueDecompose2dScale(t);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*jo.PDF_TO_CSS_UNITS);return n[0]<=i&&n[1]<=i}const gU=["butt","round","square"],mU=["miter","round","bevel"],yU={},GA={};var vr,BE,zE,HE;const eS=class eS{constructor(e,n,i,r,s,{optionalContentConfig:o,markedContentStack:a=null},l,u){x(this,vr);this.ctx=e,this.current=new UA(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=i,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new fU(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,n=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):n}beginDrawing({transform:e,viewport:n,transparency:i=!1,background:r=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,i){const l=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...et(this.compositeCtx))}this.ctx.save(),eg(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=et(this.ctx)}executeOperatorList(e,n,i,r){const s=e.argsArray,o=e.fnArray;let a=n||0;const l=s.length;if(l===a)return a;const u=l-a>OA&&typeof i=="function",c=u?Date.now()+dU:0;let d=0;const f=this.commonObjs,g=this.objs;let y;for(;;){if(r!==void 0&&a===r.nextBreakPoint)return r.breakIt(a,i),a;if(y=o[a],y!==Ki.dependency)this[y].apply(this,s[a]);else for(const v of s[a]){const E=v.startsWith("g_")?f:g;if(!E.has(v))return E.get(v,i),a}if(a++,a===l)return a;if(u&&++d>OA){if(Date.now()>c)return i(),a;d=0}}}endDrawing(){C(this,vr,BE).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const n of e.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);e.clear()}this._cachedBitmapsMap.clear(),C(this,vr,zE).call(this)}_scaleImage(e,n){const i=e.width??e.displayWidth,r=e.height??e.displayHeight;let s=Math.max(Math.hypot(n[0],n[1]),1),o=Math.max(Math.hypot(n[2],n[3]),1),a=i,l=r,u="prescale1",c,d;for(;s>2&&a>1||o>2&&l>1;){let f=a,g=l;s>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/f),o>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/g),c=this.cachedCanvases.getCanvas(u,f,g),d=c.context,d.clearRect(0,0,f,g),d.drawImage(e,0,0,a,l,0,0,f,g),e=c.canvas,a=f,l=g,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const n=this.ctx,{width:i,height:r}=e,s=this.current.fillColor,o=this.current.patternFill,a=et(n);let l,u,c,d;if((e.bitmap||e.data)&&e.count>1){const L=e.bitmap||e.data.buffer;u=JSON.stringify(o?a:[a.slice(0,4),s]),l=this._cachedBitmapsMap.get(L),l||(l=new Map,this._cachedBitmapsMap.set(L,l));const F=l.get(u);if(F&&!o){const R=Math.round(Math.min(a[0],a[2])+a[4]),U=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:F,offsetX:R,offsetY:U}}c=F}c||(d=this.cachedCanvases.getCanvas("maskCanvas",i,r),zA(d.context,e));let f=ae.transform(a,[1/i,0,0,-1/r,0,0]);f=ae.transform(f,[1,0,0,1,0,-r]);const[g,y,v,E]=ae.getAxialAlignedBoundingBox([0,0,i,r],f),_=Math.round(v-g)||1,b=Math.round(E-y)||1,w=this.cachedCanvases.getCanvas("fillCanvas",_,b),A=w.context,k=g,T=y;A.translate(-k,-T),A.transform(...f),c||(c=this._scaleImage(d.canvas,br(A)),c=c.img,l&&o&&l.set(u,c)),A.imageSmoothingEnabled=HA(et(A),e.interpolate),jp(A,c,0,0,c.width,c.height,0,0,i,r),A.globalCompositeOperation="source-in";const N=ae.transform(br(A),[1,0,0,1,-k,-T]);return A.fillStyle=o?s.getPattern(n,this,N,on.FILL):s,A.fillRect(0,0,i,r),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,w.canvas)),{canvas:w.canvas,offsetX:Math.round(k),offsetY:Math.round(T)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=gU[e]}setLineJoin(e){this.ctx.lineJoin=mU[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,n){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=n)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[n,i]of e)switch(n){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,n);this.suspendedCtx=this.ctx,this.ctx=r.context;const s=this.ctx;s.setTransform(...et(this.suspendedCtx)),kd(this.suspendedCtx,s),hU(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),kd(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,n,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,n,i,r){const s=r[0],o=r[1],a=r[2]-s,l=r[3]-o;a===0||l===0||(this.genericComposeSMask(n.context,i,a,l,n.subtype,n.backdrop,n.transferMap,s,o,n.offsetX,n.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,n,i,r,s,o,a,l,u,c,d){let f=e.canvas,g=l-c,y=u-d;if(o){const E=ae.makeHexColor(...o);if(g<0||y<0||g+i>f.width||y+r>f.height){const _=this.cachedCanvases.getCanvas("maskExtension",i,r),b=_.context;b.drawImage(f,-g,-y),b.globalCompositeOperation="destination-atop",b.fillStyle=E,b.fillRect(0,0,i,r),b.globalCompositeOperation="source-over",f=_.canvas,g=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(g,y,i,r),e.clip(_),e.globalCompositeOperation="destination-atop",e.fillStyle=E,e.fillRect(g,y,i,r),e.restore()}}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?n.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(a));const v=new Path2D;v.rect(l,u,i,r),n.clip(v),n.globalCompositeOperation="destination-in",n.drawImage(f,g,y,i,r,l,u,i,r),n.restore()}save(){this.inSMaskMode?(kd(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),kd(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,n,i,r,s,o){this.ctx.transform(e,n,i,r,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,n,i){const r=this.ctx,s=this.current;let o=s.x,a=s.y,l,u;const c=et(r),d=c[0]===0&&c[3]===0||c[1]===0&&c[2]===0,f=d?i.slice(0):null;for(let g=0,y=0,v=e.length;g<v;g++)switch(e[g]|0){case Ki.rectangle:o=n[y++],a=n[y++];const E=n[y++],_=n[y++],b=o+E,w=a+_;r.moveTo(o,a),E===0||_===0?r.lineTo(b,w):(r.lineTo(b,a),r.lineTo(b,w),r.lineTo(o,w)),d||s.updateRectMinMax(c,[o,a,b,w]),r.closePath();break;case Ki.moveTo:o=n[y++],a=n[y++],r.moveTo(o,a),d||s.updatePathMinMax(c,o,a);break;case Ki.lineTo:o=n[y++],a=n[y++],r.lineTo(o,a),d||s.updatePathMinMax(c,o,a);break;case Ki.curveTo:l=o,u=a,o=n[y+4],a=n[y+5],r.bezierCurveTo(n[y],n[y+1],n[y+2],n[y+3],o,a),s.updateCurvePathMinMax(c,l,u,n[y],n[y+1],n[y+2],n[y+3],o,a,f),y+=6;break;case Ki.curveTo2:l=o,u=a,r.bezierCurveTo(o,a,n[y],n[y+1],n[y+2],n[y+3]),s.updateCurvePathMinMax(c,l,u,o,a,n[y],n[y+1],n[y+2],n[y+3],f),o=n[y+2],a=n[y+3],y+=4;break;case Ki.curveTo3:l=o,u=a,o=n[y+2],a=n[y+3],r.bezierCurveTo(n[y],n[y+1],o,a,o,a),s.updateCurvePathMinMax(c,l,u,n[y],n[y+1],o,a,o,a,f),y+=4;break;case Ki.closePath:r.closePath();break}d&&s.updateScalingPathMinMax(c,f),s.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const n=this.ctx,i=this.current.strokeColor;n.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(n.save(),n.strokeStyle=i.getPattern(n,this,br(n),on.STROKE),this.rescaleAndStroke(!1),n.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),n.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const n=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let s=!1;r&&(n.save(),n.fillStyle=i.getPattern(n,this,br(n),on.FILL),s=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(n.fill("evenodd"),this.pendingEOFill=!1):n.fill()),s&&n.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=yU}eoClip(){this.pendingClip=GA}beginText(){this.current.textMatrix=TR,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,n=this.ctx;if(e===void 0){n.beginPath();return}const i=new Path2D,r=n.getTransform().invertSelf();for(const{transform:s,x:o,y:a,fontSize:l,path:u}of e)i.addPath(u,new DOMMatrix(s).preMultiplySelf(r).translate(o,a).scale(l,-l));n.clip(i),n.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,n){var c;const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||hE,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Ee("Invalid font matrix for font "+e),n<0?(n=-n,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const s=i.loadedName||"sans-serif",o=((c=i.systemFontInfo)==null?void 0:c.css)||`"${s}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const l=i.italic?"italic":"normal";let u=n;n<LA?u=LA:n>DA&&(u=DA),this.current.fontSizeScale=n/u,this.ctx.font=`${l} ${a} ${u}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,n){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,n){this.setLeading(-n),this.moveText(e,n)}setTextMatrix(e,n,i,r,s,o){this.current.textMatrix=[e,n,i,r,s,o],this.current.textMatrixScale=Math.hypot(e,n),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,n,i,r,s){const o=this.ctx,a=this.current,l=a.font,u=a.textRenderingMode,c=a.fontSize/a.fontSizeScale,d=u&Zt.FILL_STROKE_MASK,f=!!(u&Zt.ADD_TO_PATH_FLAG),g=a.patternFill&&!l.missingFile,y=a.patternStroke&&!l.missingFile;let v;if((l.disableFontFace||f||g||y)&&(v=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||g||y){if(o.save(),o.translate(n,i),o.scale(c,-c),d===Zt.FILL||d===Zt.FILL_STROKE)if(r){const E=o.getTransform();o.setTransform(...r),o.fill(C(this,vr,HE).call(this,v,E,r))}else o.fill(v);if(d===Zt.STROKE||d===Zt.FILL_STROKE)if(s){const E=o.getTransform();o.setTransform(...s),o.stroke(C(this,vr,HE).call(this,v,E,s))}else o.lineWidth/=c,o.stroke(v);o.restore()}else(d===Zt.FILL||d===Zt.FILL_STROKE)&&o.fillText(e,n,i),(d===Zt.STROKE||d===Zt.FILL_STROKE)&&o.strokeText(e,n,i);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:et(o),x:n,y:i,fontSize:c,path:v})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const n=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<n.length;r+=4)if(n[r]>0&&n[r]<255){i=!0;break}return Ae(this,"isFontSubpixelAAEnabled",i)}showText(e){const n=this.current,i=n.font;if(i.isType3Font)return this.showType3Text(e);const r=n.fontSize;if(r===0)return;const s=this.ctx,o=n.fontSizeScale,a=n.charSpacing,l=n.wordSpacing,u=n.fontDirection,c=n.textHScale*u,d=e.length,f=i.vertical,g=f?1:-1,y=i.defaultVMetrics,v=r*n.fontMatrix[0],E=n.textRenderingMode===Zt.FILL&&!i.disableFontFace&&!n.patternFill;s.save(),s.transform(...n.textMatrix),s.translate(n.x,n.y+n.textRise),u>0?s.scale(c,-1):s.scale(c,1);let _,b;if(n.patternFill){s.save();const N=n.fillColor.getPattern(s,this,br(s),on.FILL);_=et(s),s.restore(),s.fillStyle=N}if(n.patternStroke){s.save();const N=n.strokeColor.getPattern(s,this,br(s),on.STROKE);b=et(s),s.restore(),s.strokeStyle=N}let w=n.lineWidth;const A=n.textMatrixScale;if(A===0||w===0){const N=n.textRenderingMode&Zt.FILL_STROKE_MASK;(N===Zt.STROKE||N===Zt.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=A;if(o!==1&&(s.scale(o,o),w/=o),s.lineWidth=w,i.isInvalidPDFjsFont){const N=[];let L=0;for(const F of e)N.push(F.unicode),L+=F.width;s.fillText(N.join(""),0,0),n.x+=L*v*c,s.restore(),this.compose();return}let k=0,T;for(T=0;T<d;++T){const N=e[T];if(typeof N=="number"){k+=g*N*r/1e3;continue}let L=!1;const F=(N.isSpace?l:0)+a,R=N.fontChar,U=N.accent;let H,V,W=N.width;if(f){const D=N.vmetric||y,z=-(N.vmetric?D[1]:W*.5)*v,B=D[2]*v;W=D?-D[0]:W,H=z/o,V=(k+B)/o}else H=k/o,V=0;if(i.remeasure&&W>0){const D=s.measureText(R).width*1e3/r*o;if(W<D&&this.isFontSubpixelAAEnabled){const z=W/D;L=!0,s.save(),s.scale(z,1),H/=z}else W!==D&&(H+=(W-D)/2e3*r/o)}if(this.contentVisible&&(N.isInFont||i.missingFile)){if(E&&!U)s.fillText(R,H,V);else if(this.paintChar(R,H,V,_,b),U){const D=H+r*U.offset.x/o,z=V-r*U.offset.y/o;this.paintChar(U.fontChar,D,z,_,b)}}const X=f?W*v-F*u:W*v+F*u;k+=X,L&&s.restore()}f?n.y-=k:n.x+=k*c,s.restore(),this.compose()}showType3Text(e){const n=this.ctx,i=this.current,r=i.font,s=i.fontSize,o=i.fontDirection,a=r.vertical?1:-1,l=i.charSpacing,u=i.wordSpacing,c=i.textHScale*o,d=i.fontMatrix||hE,f=e.length,g=i.textRenderingMode===Zt.INVISIBLE;let y,v,E,_;if(!(g||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),n.transform(...i.textMatrix),n.translate(i.x,i.y),n.scale(c,o),y=0;y<f;++y){if(v=e[y],typeof v=="number"){_=a*v*s/1e3,this.ctx.translate(_,0),i.x+=_*c;continue}const b=(v.isSpace?u:0)+l,w=r.charProcOperatorList[v.operatorListId];if(!w){Ee(`Type3 character "${v.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=v,this.save(),n.scale(s,s),n.transform(...d),this.executeOperatorList(w),this.restore()),E=ae.applyTransform([v.width,0],d)[0]*s+b,n.translate(E,0),i.x+=E*c}n.restore(),this.processingType3=null}}setCharWidth(e,n){}setCharWidthAndBounds(e,n,i,r,s,o){this.ctx.rect(i,r,s-i,o-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let n;if(e[0]==="TilingPattern"){const i=e[1],r=this.baseTransform||et(this.ctx),s={createCanvasGraphics:o=>new eS(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};n=new UE(e,i,this.ctx,s,r)}else n=this._getPattern(e[1],e[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,n,i){this.ctx.strokeStyle=this.current.strokeColor=ae.makeHexColor(e,n,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,n,i){this.ctx.fillStyle=this.current.fillColor=ae.makeHexColor(e,n,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,n=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=uU(this.getObject(e)),this.cachedPatterns.set(e,i)),n&&(i.matrix=n),i}shadingFill(e){if(!this.contentVisible)return;const n=this.ctx;this.save();const i=this._getPattern(e);n.fillStyle=i.getPattern(n,this,br(n),on.SHADING);const r=br(n);if(r){const{width:s,height:o}=n.canvas,[a,l,u,c]=ae.getAxialAlignedBoundingBox([0,0,s,o],r);this.ctx.fillRect(a,l,u-a,c-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ve("Should not call beginInlineImage")}beginImageData(){Ve("Should not call beginImageData")}paintFormXObjectBegin(e,n){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=et(this.ctx),n)){const i=n[2]-n[0],r=n[3]-n[1];this.ctx.rect(n[0],n[1],i,r),this.current.updateRectMinMax(et(this.ctx),n),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||Ky("TODO: Support non-isolated groups."),e.knockout&&Ee("Knockout groups not supported.");const i=et(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=ae.getAxialAlignedBoundingBox(e.bbox,et(n));const s=[0,0,n.canvas.width,n.canvas.height];r=ae.intersect(r,s)||[0,0,0,0];const o=Math.floor(r[0]),a=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-o,1),u=Math.max(Math.ceil(r[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,u]);let c="groupAt"+this.groupLevel;e.smask&&(c+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(c,l,u),f=d.context;f.translate(-o,-a),f.transform(...i),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(o,a),n.save()),kd(n,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=et(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const s=ae.getAxialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],r);this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,n,i,r,s){if(C(this,vr,BE).call(this),eg(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const o=n[2]-n[0],a=n[3]-n[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=o,n[3]=a;const[l,u]=ae.singularValueDecompose2dScale(et(this.ctx)),{viewportScale:c}=this,d=Math.ceil(o*this.outputScaleX*c),f=Math.ceil(a*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:g,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(e,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(l,0,0,-u,0,a*u),eg(this.ctx)}else eg(this.ctx),this.endPath(),this.ctx.rect(n[0],n[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new UA(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),C(this,vr,zE).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const n=e.count;e=this.getObject(e.data,e),e.count=n;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=pU(e)),r.compiled)){r.compiled(i);return}const s=this._createMaskCanvas(e),o=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,n,i=0,r=0,s,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=et(a);a.transform(n,i,r,s,0,0);const u=this._createMaskCanvas(e);a.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let c=0,d=o.length;c<d;c+=2){const f=ae.transform(l,[n,i,r,s,o[c],o[c+1]]),[g,y]=ae.applyTransform([0,0],f);a.drawImage(u.canvas,g,y)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const s of e){const{data:o,width:a,height:l,transform:u}=s,c=this.cachedCanvases.getCanvas("maskCanvas",a,l),d=c.context;d.save();const f=this.getObject(o,s);zA(d,f),d.globalCompositeOperation="source-in",d.fillStyle=r?i.getPattern(d,this,br(n),on.FILL):i,d.fillRect(0,0,a,l),d.restore(),n.save(),n.transform(...u),n.scale(1,-1),jp(n,c.canvas,0,0,a,l,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const n=this.getObject(e);if(!n){Ee("Dependent image isn't ready yet");return}this.paintInlineImageXObject(n)}paintImageXObjectRepeat(e,n,i,r){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){Ee("Dependent image isn't ready yet");return}const o=s.width,a=s.height,l=[];for(let u=0,c=r.length;u<c;u+=2)l.push({transform:[n,0,0,i,r[u],r[u+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:n,width:i,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",i,r),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(n,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const n=e.width,i=e.height,r=this.ctx;if(this.save(),!ln){const{filter:a}=r;a!=="none"&&a!==""&&(r.filter="none")}r.scale(1/n,-1/i);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",n,i).context;BA(l,e),s=this.applyTransferMapsToCanvas(l)}const o=this._scaleImage(s,br(r));r.imageSmoothingEnabled=HA(et(r),e.interpolate),jp(r,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,n,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,n){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const s=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",s,o).context;BA(l,e),r=this.applyTransferMapsToCanvas(l)}for(const s of n)i.save(),i.transform(...s.transform),i.scale(1,-1),jp(i,r,s.x,s.y,s.w,s.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,n){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,n){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(n||(this.pendingClip===GA?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=et(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:n,b:i,c:r,d:s}=this.ctx.getTransform();let o,a;if(i===0&&r===0){const l=Math.abs(n),u=Math.abs(s);if(l===u)if(e===0)o=a=1/l;else{const c=l*e;o=a=c<1?1/c:1}else if(e===0)o=1/l,a=1/u;else{const c=l*e,d=u*e;o=c<1?1/c:1,a=d<1?1/d:1}}else{const l=Math.abs(n*s-i*r),u=Math.hypot(n,i),c=Math.hypot(r,s);if(e===0)o=c/l,a=u/l;else{const d=e*l;o=c>d?c/d:1,a=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:n}=this,{lineWidth:i}=this.current,[r,s]=this.getScaleForStroking();if(n.lineWidth=i||1,r===1&&s===1){n.stroke();return}const o=n.getLineDash();if(e&&n.save(),n.scale(r,s),o.length>0){const a=Math.max(r,s);n.setLineDash(o.map(l=>l/a)),n.lineDashOffset/=a}n.stroke(),e&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};vr=new WeakSet,BE=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},zE=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const n=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}},HE=function(e,n,i){const r=new Path2D;return r.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(n)),r};let Bu=eS;for(const t in Ki)Bu.prototype[t]!==void 0&&(Bu.prototype[Ki[t]]=Bu.prototype[t]);var wf,Sf;class Rs{static get workerPort(){return h(this,wf)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");S(this,wf,e)}static get workerSrc(){return h(this,Sf)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");S(this,Sf,e)}}wf=new WeakMap,Sf=new WeakMap,x(Rs,wf,null),x(Rs,Sf,"");var Wa,Af;class vU{constructor({parsedData:e,rawData:n}){x(this,Wa);x(this,Af);S(this,Wa,e),S(this,Af,n)}getRaw(){return h(this,Af)}get(e){return h(this,Wa).get(e)??null}getAll(){return iw(h(this,Wa))}has(e){return h(this,Wa).has(e)}}Wa=new WeakMap,Af=new WeakMap;const lu=Symbol("INTERNAL");var xf,Tf,Cf,ac;class _U{constructor(e,{name:n,intent:i,usage:r,rbGroups:s}){x(this,xf,!1);x(this,Tf,!1);x(this,Cf,!1);x(this,ac,!0);S(this,xf,!!(e&li.DISPLAY)),S(this,Tf,!!(e&li.PRINT)),this.name=n,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(h(this,Cf))return h(this,ac);if(!h(this,ac))return!1;const{print:e,view:n}=this.usage;return h(this,xf)?(n==null?void 0:n.viewState)!=="OFF":h(this,Tf)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,n,i=!1){e!==lu&&Ve("Internal method `_setVisible` called."),S(this,Cf,i),S(this,ac,n)}}xf=new WeakMap,Tf=new WeakMap,Cf=new WeakMap,ac=new WeakMap;var mo,Fe,lc,uc,kf,GE;class EU{constructor(e,n=li.DISPLAY){x(this,kf);x(this,mo,null);x(this,Fe,new Map);x(this,lc,null);x(this,uc,null);if(this.renderingIntent=n,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,S(this,uc,e.order);for(const i of e.groups)h(this,Fe).set(i.id,new _U(n,i));if(e.baseState==="OFF")for(const i of h(this,Fe).values())i._setVisible(lu,!1);for(const i of e.on)h(this,Fe).get(i)._setVisible(lu,!0);for(const i of e.off)h(this,Fe).get(i)._setVisible(lu,!1);S(this,lc,this.getHash())}}isVisible(e){if(h(this,Fe).size===0)return!0;if(!e)return Ky("Optional content group not defined."),!0;if(e.type==="OCG")return h(this,Fe).has(e.id)?h(this,Fe).get(e.id).visible:(Ee(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return C(this,kf,GE).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const n of e.ids){if(!h(this,Fe).has(n))return Ee(`Optional content group not found: ${n}`),!0;if(h(this,Fe).get(n).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const n of e.ids){if(!h(this,Fe).has(n))return Ee(`Optional content group not found: ${n}`),!0;if(!h(this,Fe).get(n).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const n of e.ids){if(!h(this,Fe).has(n))return Ee(`Optional content group not found: ${n}`),!0;if(!h(this,Fe).get(n).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const n of e.ids){if(!h(this,Fe).has(n))return Ee(`Optional content group not found: ${n}`),!0;if(h(this,Fe).get(n).visible)return!1}return!0}return Ee(`Unknown optional content policy ${e.policy}.`),!0}return Ee(`Unknown group type ${e.type}.`),!0}setVisibility(e,n=!0,i=!0){var s;const r=h(this,Fe).get(e);if(!r){Ee(`Optional content group not found: ${e}`);return}if(i&&n&&r.rbGroups.length)for(const o of r.rbGroups)for(const a of o)a!==e&&((s=h(this,Fe).get(a))==null||s._setVisible(lu,!1,!0));r._setVisible(lu,!!n,!0),S(this,mo,null)}setOCGState({state:e,preserveRB:n}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const s=h(this,Fe).get(r);if(s)switch(i){case"ON":this.setVisibility(r,!0,n);break;case"OFF":this.setVisibility(r,!1,n);break;case"Toggle":this.setVisibility(r,!s.visible,n);break}}S(this,mo,null)}get hasInitialVisibility(){return h(this,lc)===null||this.getHash()===h(this,lc)}getOrder(){return h(this,Fe).size?h(this,uc)?h(this,uc).slice():[...h(this,Fe).keys()]:null}getGroups(){return h(this,Fe).size>0?iw(h(this,Fe)):null}getGroup(e){return h(this,Fe).get(e)||null}getHash(){if(h(this,mo)!==null)return h(this,mo);const e=new iN;for(const[n,i]of h(this,Fe))e.update(`${n}:${i.visible}`);return S(this,mo,e.hexdigest())}}mo=new WeakMap,Fe=new WeakMap,lc=new WeakMap,uc=new WeakMap,kf=new WeakSet,GE=function(e){const n=e.length;if(n<2)return!0;const i=e[0];for(let r=1;r<n;r++){const s=e[r];let o;if(Array.isArray(s))o=C(this,kf,GE).call(this,s);else if(h(this,Fe).has(s))o=h(this,Fe).get(s).visible;else return Ee(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};class bU{constructor(e,{disableRange:n=!1,disableStream:i=!1}){bt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:n}){const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(i),!0)});bt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var n,i,r,s;e.total===void 0?(i=(n=this._rangeReaders[0])==null?void 0:n.onProgress)==null||i.call(n,{loaded:e.loaded}):(s=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||s.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const n=this._rangeReaders.indexOf(e);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){bt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new wU(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const i=new SU(this,e,n);return this._pdfDataRangeTransport.requestDataRange(e,n),this._rangeReaders.push(i),i}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class wU{constructor(e,n,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=ow(r)?r:null,this._queuedChunks=n||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class SU{constructor(e,n,i){this._stream=e,this._begin=n,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function AU(t){let e=!0,n=i("filename\\*","i").exec(t);if(n){n=n[1];let c=a(n);return c=unescape(c),c=l(c),c=u(c),s(c)}if(n=o(t),n){const c=u(n);return s(c)}if(n=i("filename","i").exec(t),n){n=n[1];let c=a(n);return c=u(c),s(c)}function i(c,d){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function r(c,d){if(c){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(c,{fatal:!0}),g=Yy(d);d=f.decode(g),e=!1}catch{}}return d}function s(c){return e&&/[\x80-\xff]/.test(c)&&(c=r("utf-8",c),e&&(c=r("iso-8859-1",c))),c}function o(c){const d=[];let f;const g=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=g.exec(c))!==null;){let[,v,E,_]=f;if(v=parseInt(v,10),v in d){if(v===0)break;continue}d[v]=[E,_]}const y=[];for(let v=0;v<d.length&&v in d;++v){let[E,_]=d[v];_=a(_),E&&(_=unescape(_),v===0&&(_=l(_))),y.push(_)}return y.join("")}function a(c){if(c.startsWith('"')){const d=c.slice(1).split('\\"');for(let f=0;f<d.length;++f){const g=d[f].indexOf('"');g!==-1&&(d[f]=d[f].slice(0,g),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}c=d.join('"')}return c}function l(c){const d=c.indexOf("'");if(d===-1)return c;const f=c.slice(0,d),y=c.slice(d+1).replace(/^[^']*'/,"");return r(f,y)}function u(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,g,y){if(g==="q"||g==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,E){return String.fromCharCode(parseInt(E,16))}),r(f,y);try{y=atob(y)}catch{}return r(f,y)})}return""}function yN(t,e){const n=new Headers;if(!t||!e||typeof e!="object")return n;for(const i in e){const r=e[i];r!==void 0&&n.append(i,r)}return n}function Qy(t){try{return new URL(t).origin}catch{}return null}function vN({responseHeaders:t,isHttp:e,rangeChunkSize:n,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*n)||i||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function _N(t){const e=t.get("Content-Disposition");if(e){let n=AU(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(ow(n))return n}return null}function Zy(t,e){return t===404||t===0&&e.startsWith("file:")?new Uh('Missing PDF "'+e+'".'):new Bm(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)}function EN(t){return t===200||t===206}function bN(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function wN(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(Ee(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class $A{constructor(e){ce(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=yN(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return bt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new xU(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const i=new TU(this,e,n);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class xU{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const n=e.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const i=new Headers(e.headers),r=n.url;fetch(r,bN(i,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=Qy(s.url),!EN(s.status))throw Zy(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const o=s.headers,{allowRangeRequests:a,suggestedLength:l}=vN({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=_N(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Zo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:wN(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}class TU{constructor(e,n,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${n}-${i-1}`);const o=r.url;fetch(o,bN(s,this._withCredentials,this._abortController)).then(a=>{const l=Qy(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!EN(a.status))throw Zy(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:wN(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}const Wv=200,Kv=206;function CU(t){const e=t.response;return typeof e!="string"?e:Yy(e).buffer}class kU{constructor({url:e,httpHeaders:n,withCredentials:i}){ce(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=yN(this.isHttp,n),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const n=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[s,o]of this.headers)n.setRequestHeader(s,o);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=Kv):r.expectedStatus=Wv,n.responseType="arraybuffer",bt(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{e.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,i),n.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,n.send(null),i}onProgress(e,n){var r;const i=this.pendingRequests[e];i&&((r=i.onProgress)==null||r.call(i,n))}onStateChange(e,n){const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){i.onError(r.status);return}const s=r.status||Wv;if(!(s===Wv&&i.expectedStatus===Kv)&&s!==i.expectedStatus){i.onError(r.status);return}const a=CU(r);if(s===Kv){const l=r.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?i.onDone({begin:parseInt(u[1],10),chunk:a}):(Ee('Missing or invalid "Content-Range" header.'),i.onError(0))}else a?i.onDone({begin:0,chunk:a}):i.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const n=this.pendingRequests[e].xhr;delete this.pendingRequests[e],n.abort()}}class IU{constructor(e){this._source=e,this._manager=new kU(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const n=this._rangeRequestReaders.indexOf(e);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return bt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new RU(this._manager,this._source),this._fullRequestReader}getRangeReader(e,n){const i=new NU(this._manager,e,n);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class RU{constructor(e,n){this._manager=e,this._url=n.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,n=this._manager.getRequestXhr(e);this._manager._responseOrigin=Qy(n.responseURL);const i=n.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...u]=a.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:o}=vN({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=_N(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Zy(e,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var n;(n=this.onProgress)==null||n.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class NU{constructor(e,n,i){this._manager=e,this._url=e.url,this._requestId=e.request({begin:n,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var n;const e=Qy((n=this._manager.getRequestXhr(this._requestId))==null?void 0:n.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const n=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Zy(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var n;this.isStreamingSupported||(n=this.onProgress)==null||n.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const MU=/^[a-z][a-z0-9\-+.]+:/i;function PU(t){if(MU.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}class LU{constructor(e){this.source=e,this.url=PU(e.url),bt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return bt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new DU(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const i=new OU(this,e,n);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class DU{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new Uh(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Zo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class OU{constructor(e,n,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:n,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const FU=1e5,Mn=30,UU=.8;var ZC,yo,Fn,If,Rf,Ka,ps,Nf,Mf,Ya,cc,dc,vo,hc,Pf,fc,Xa,Lf,Df,Ja,Qa,Of,_o,pc,Gs,SN,AN,$E,gi,Gg,VE,xN,TN;const xt=class xt{constructor({textContentSource:e,container:n,viewport:i}){x(this,Gs);x(this,yo,Promise.withResolvers());x(this,Fn,null);x(this,If,!1);x(this,Rf,!!((ZC=globalThis.FontInspector)!=null&&ZC.enabled));x(this,Ka,null);x(this,ps,null);x(this,Nf,0);x(this,Mf,0);x(this,Ya,null);x(this,cc,null);x(this,dc,0);x(this,vo,0);x(this,hc,Object.create(null));x(this,Pf,[]);x(this,fc,null);x(this,Xa,[]);x(this,Lf,new WeakMap);x(this,Df,null);var l;if(e instanceof ReadableStream)S(this,fc,e);else if(typeof e=="object")S(this,fc,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,Fn,S(this,cc,n)),S(this,vo,i.scale*(globalThis.devicePixelRatio||1)),S(this,dc,i.rotation),S(this,ps,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:s,pageX:o,pageY:a}=i.rawDims;S(this,Df,[1,0,0,-1,-o,a+s]),S(this,Mf,r),S(this,Nf,s),C(l=xt,gi,xN).call(l),Ol(n,i),h(this,yo).promise.finally(()=>{h(xt,pc).delete(this),S(this,ps,null),S(this,hc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:n}=Tn.platform;return Ae(this,"fontFamilyMap",new Map([["sans-serif",`${e&&n?"Calibri, ":""}sans-serif`],["monospace",`${e&&n?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{h(this,Ya).read().then(({value:n,done:i})=>{if(i){h(this,yo).resolve();return}h(this,Ka)??S(this,Ka,n.lang),Object.assign(h(this,hc),n.styles),C(this,Gs,SN).call(this,n.items),e()},h(this,yo).reject)};return S(this,Ya,h(this,fc).getReader()),h(xt,pc).add(this),e(),h(this,yo).promise}update({viewport:e,onBefore:n=null}){var s;const i=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==h(this,dc)&&(n==null||n(),S(this,dc,r),Ol(h(this,cc),{rotation:r})),i!==h(this,vo)){n==null||n(),S(this,vo,i);const o={div:null,properties:null,ctx:C(s=xt,gi,Gg).call(s,h(this,Ka))};for(const a of h(this,Xa))o.properties=h(this,Lf).get(a),o.div=a,C(this,Gs,$E).call(this,o)}}cancel(){var n;const e=new Zo("TextLayer task cancelled.");(n=h(this,Ya))==null||n.cancel(e).catch(()=>{}),S(this,Ya,null),h(this,yo).reject(e)}get textDivs(){return h(this,Xa)}get textContentItemsStr(){return h(this,Pf)}static cleanup(){if(!(h(this,pc).size>0)){h(this,Ja).clear();for(const{canvas:e}of h(this,Qa).values())e.remove();h(this,Qa).clear()}}};yo=new WeakMap,Fn=new WeakMap,If=new WeakMap,Rf=new WeakMap,Ka=new WeakMap,ps=new WeakMap,Nf=new WeakMap,Mf=new WeakMap,Ya=new WeakMap,cc=new WeakMap,dc=new WeakMap,vo=new WeakMap,hc=new WeakMap,Pf=new WeakMap,fc=new WeakMap,Xa=new WeakMap,Lf=new WeakMap,Df=new WeakMap,Ja=new WeakMap,Qa=new WeakMap,Of=new WeakMap,_o=new WeakMap,pc=new WeakMap,Gs=new WeakSet,SN=function(e){var r,s;if(h(this,If))return;(s=h(this,ps)).ctx??(s.ctx=C(r=xt,gi,Gg).call(r,h(this,Ka)));const n=h(this,Xa),i=h(this,Pf);for(const o of e){if(n.length>FU){Ee("Ignoring additional textDivs for performance reasons."),S(this,If,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=h(this,Fn);S(this,Fn,document.createElement("span")),h(this,Fn).classList.add("markedContent"),o.id!==null&&h(this,Fn).setAttribute("id",`${o.id}`),a.append(h(this,Fn))}else o.type==="endMarkedContent"&&S(this,Fn,h(this,Fn).parentNode);continue}i.push(o.str),C(this,Gs,AN).call(this,o)}},AN=function(e){var v;const n=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};h(this,Xa).push(n);const r=ae.transform(h(this,Df),e.transform);let s=Math.atan2(r[1],r[0]);const o=h(this,hc)[e.fontName];o.vertical&&(s+=Math.PI/2);let a=h(this,Rf)&&o.fontSubstitution||o.fontFamily;a=xt.fontFamilyMap.get(a)||a;const l=Math.hypot(r[2],r[3]),u=l*C(v=xt,gi,TN).call(v,a,h(this,Ka));let c,d;s===0?(c=r[4],d=r[5]-u):(c=r[4]+u*Math.sin(s),d=r[5]-u*Math.cos(s));const f="calc(var(--scale-factor)*",g=n.style;h(this,Fn)===h(this,cc)?(g.left=`${(100*c/h(this,Mf)).toFixed(2)}%`,g.top=`${(100*d/h(this,Nf)).toFixed(2)}%`):(g.left=`${f}${c.toFixed(2)}px)`,g.top=`${f}${d.toFixed(2)}px)`),g.fontSize=`${f}${(h(xt,_o)*l).toFixed(2)}px)`,g.fontFamily=a,i.fontSize=l,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,h(this,Rf)&&(n.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),s!==0&&(i.angle=s*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const E=Math.abs(e.transform[0]),_=Math.abs(e.transform[3]);E!==_&&Math.max(E,_)/Math.min(E,_)>1.5&&(y=!0)}if(y&&(i.canvasWidth=o.vertical?e.height:e.width),h(this,Lf).set(n,i),h(this,ps).div=n,h(this,ps).properties=i,C(this,Gs,$E).call(this,h(this,ps)),i.hasText&&h(this,Fn).append(n),i.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),h(this,Fn).append(E)}},$E=function(e){var a;const{div:n,properties:i,ctx:r}=e,{style:s}=n;let o="";if(h(xt,_o)>1&&(o=`scale(${1/h(xt,_o)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:l}=s,{canvasWidth:u,fontSize:c}=i;C(a=xt,gi,VE).call(a,r,c*h(this,vo),l);const{width:d}=r.measureText(n.textContent);d>0&&(o=`scaleX(${u*h(this,vo)/d}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(s.transform=o)},gi=new WeakSet,Gg=function(e=null){let n=h(this,Qa).get(e||(e=""));if(!n){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),n=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),h(this,Qa).set(e,n),h(this,Of).set(n,{size:0,family:""})}return n},VE=function(e,n,i){const r=h(this,Of).get(e);n===r.size&&i===r.family||(e.font=`${n}px ${i}`,r.size=n,r.family=i)},xN=function(){if(h(this,_o)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),S(this,_o,e.getBoundingClientRect().height),e.remove()},TN=function(e,n){const i=h(this,Ja).get(e);if(i)return i;const r=C(this,gi,Gg).call(this,n);r.canvas.width=r.canvas.height=Mn,C(this,gi,VE).call(this,r,Mn,e);const s=r.measureText("");let o=s.fontBoundingBoxAscent,a=Math.abs(s.fontBoundingBoxDescent);if(o){const c=o/(o+a);return h(this,Ja).set(e,c),r.canvas.width=r.canvas.height=0,c}r.strokeStyle="red",r.clearRect(0,0,Mn,Mn),r.strokeText("g",0,0);let l=r.getImageData(0,0,Mn,Mn).data;a=0;for(let c=l.length-1-3;c>=0;c-=4)if(l[c]>0){a=Math.ceil(c/4/Mn);break}r.clearRect(0,0,Mn,Mn),r.strokeText("A",0,Mn),l=r.getImageData(0,0,Mn,Mn).data,o=0;for(let c=0,d=l.length;c<d;c+=4)if(l[c]>0){o=Mn-Math.floor(c/4/Mn);break}r.canvas.width=r.canvas.height=0;const u=o?o/(o+a):UU;return h(this,Ja).set(e,u),u},x(xt,gi),x(xt,Ja,new Map),x(xt,Qa,new Map),x(xt,Of,new WeakMap),x(xt,_o,null),x(xt,pc,new Set);let Bh=xt;class zh{static textContent(e){const n=[],i={items:n,styles:Object.create(null)};function r(s){var l;if(!s)return;let o=null;const a=s.name;if(a==="#text")o=s.value;else if(zh.shouldBuildText(a))(l=s==null?void 0:s.attributes)!=null&&l.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&n.push({str:o}),!!s.children)for(const u of s.children)r(u)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const BU=65536,zU=100,HU=5e3,GU=ln?nU:j2,$U=ln?iU:dN,VU=ln?tU:eU,qU=ln?rU:gN;function WU(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new qE,{docId:n}=e,i=t.url?KU(t.url):null,r=t.data?YU(t.data):null,s=t.httpHeaders||null,o=t.withCredentials===!0,a=t.password??null,l=t.range instanceof CN?t.range:null,u=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:BU;let c=t.worker instanceof zu?t.worker:null;const d=t.verbosity,f=typeof t.docBaseUrl=="string"&&!Jy(t.docBaseUrl)?t.docBaseUrl:null,g=typeof t.cMapUrl=="string"?t.cMapUrl:null,y=t.cMapPacked!==!1,v=t.CMapReaderFactory||$U,E=typeof t.standardFontDataUrl=="string"?t.standardFontDataUrl:null,_=t.StandardFontDataFactory||qU,b=t.stopAtErrors!==!0,w=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,A=t.isEvalSupported!==!1,k=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!ln,T=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!ln&&(Tn.platform.isFirefox||!globalThis.chrome),N=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,L=typeof t.disableFontFace=="boolean"?t.disableFontFace:ln,F=t.fontExtraProperties===!0,R=t.enableXfa===!0,U=t.ownerDocument||globalThis.document,H=t.disableRange===!0,V=t.disableStream===!0,W=t.disableAutoFetch===!0,X=t.pdfBug===!0,D=t.CanvasFactory||GU,z=t.FilterFactory||VU,B=t.enableHWA===!0,$=l?l.length:t.length??NaN,I=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!ln&&!L,Z=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:v===dN&&_===gN&&g&&E&&Hd(g,document.baseURI)&&Hd(E,document.baseURI),ee=null;N2(d);const M={canvasFactory:new D({ownerDocument:U,enableHWA:B}),filterFactory:new z({docId:n,ownerDocument:U}),cMapReaderFactory:Z?null:new v({baseUrl:g,isCompressed:y}),standardFontDataFactory:Z?null:new _({baseUrl:E})};if(!c){const he={verbosity:d,port:Rs.workerPort};c=he.port?zu.fromPort(he):new zu(he),e._worker=c}const ge={docId:n,apiVersion:"4.10.38",data:r,password:a,disableAutoFetch:W,rangeChunkSize:u,length:$,docBaseUrl:f,enableXfa:R,evaluatorOptions:{maxImageSize:w,disableFontFace:L,ignoreErrors:b,isEvalSupported:A,isOffscreenCanvasSupported:k,isImageDecoderSupported:T,canvasMaxAreaInBytes:N,fontExtraProperties:F,useSystemFonts:I,cMapUrl:Z?g:null,standardFontDataUrl:Z?E:null}},Pe={disableFontFace:L,fontExtraProperties:F,ownerDocument:U,pdfBug:X,styleElement:ee,loadingParams:{disableAutoFetch:W,enableXfa:R}};return c.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const he=c.messageHandler.sendWithPromise("GetDocRequest",ge,r?[r.buffer]:null);let be;if(l)be=new bU(l,{disableRange:H,disableStream:V});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let dt;if(ln)if(Hd(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");dt=$A}else dt=LU;else dt=Hd(i)?$A:IU;be=new dt({url:i,length:$,httpHeaders:s,withCredentials:o,rangeChunkSize:u,disableRange:H,disableStream:V})}return he.then(dt=>{if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const Kn=new qd(n,dt,c.port),_i=new ZU(Kn,e,be,Pe,M);e._transport=_i,Kn.send("Ready",null)})}).catch(e._capability.reject),e}function KU(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch{if(ln&&typeof t=="string")return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function YU(t){if(ln&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return Yy(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t==null?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function VA(t){return typeof t=="object"&&Number.isInteger(t==null?void 0:t.num)&&t.num>=0&&Number.isInteger(t==null?void 0:t.gen)&&t.gen>=0}var py;const gy=class gy{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${pn(gy,py)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,n,i,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((n=this._transport)==null?void 0:n.destroy())}catch(s){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,s}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}};py=new WeakMap,x(gy,py,0);let qE=gy;class CN{constructor(e,n,i=!1,r=null){this.length=e,this.initialData=n,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,n){for(const i of this._rangeListeners)i(e,n)}onDataProgress(e,n){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,n)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const n of this._progressiveReadListeners)n(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,n){Ve("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class XU{constructor(e,n){this._pdfInfo=e,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ae(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Eo,gs,Mi,uu,$g;class JU{constructor(e,n,i,r=!1){x(this,Mi);x(this,Eo,null);x(this,gs,!1);this._pageIndex=e,this._pageInfo=n,this._transport=i,this._stats=r?new RA:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new kN,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:s=!1}={}){return new Tp({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:n,offsetX:i,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ae(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:n,intent:i="display",annotationMode:r=no.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:c=null,isEditing:d=!1}){var A,k;(A=this._stats)==null||A.time("Overall");const f=this._transport.getRenderingIntent(i,r,c,d),{renderingIntent:g,cacheKey:y}=f;S(this,gs,!1),C(this,Mi,$g).call(this),a||(a=this._transport.getOptionalContentConfig(g));let v=this._intentStates.get(y);v||(v=Object.create(null),this._intentStates.set(y,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const E=!!(g&li.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(k=this._stats)==null||k.time("Page Request"),this._pumpOperatorList(f));const _=T=>{var N;v.renderTasks.delete(b),(this._maybeCleanupAfterRender||E)&&S(this,gs,!0),C(this,Mi,uu).call(this,!E),T?(b.capability.reject(T),this._abortOperatorList({intentState:v,reason:T instanceof Error?T:new Error(T)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(N=globalThis.Stats)!=null&&N.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new KE({callback:_,params:{canvasContext:e,viewport:n,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:u});(v.renderTasks||(v.renderTasks=new Set)).add(b);const w=b.task;return Promise.all([v.displayReadyCapability.promise,a]).then(([T,N])=>{var L;if(this.destroyed){_();return}if((L=this._stats)==null||L.time("Rendering"),!(N.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:T,optionalContentConfig:N}),b.operatorListChanged()}).catch(_),w}getOperatorList({intent:e="display",annotationMode:n=no.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){var u;function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,n,i,r,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:n===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>zh.textContent(i));const n=this.streamTextContent(e);return new Promise(function(i,r){function s(){o.read().then(function({value:l,done:u}){if(u){i(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),s()},r)}const o=n.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const i of n.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),S(this,gs,!1),C(this,Mi,$g).call(this),Promise.all(e)}cleanup(e=!1){S(this,gs,!0);const n=C(this,Mi,uu).call(this,!1);return e&&n&&this._stats&&(this._stats=new RA),n}_startRenderPage(e,n){var r,s;const i=this._intentStates.get(n);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(s=i.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,n){for(let i=0,r=e.length;i<r;i++)n.operatorList.fnArray.push(e.fnArray[i]),n.operatorList.argsArray.push(e.argsArray[i]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(const i of n.renderTasks)i.operatorListChanged();e.lastChunk&&C(this,Mi,uu).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageSerializable:i,modifiedIds:r}){const{map:s,transfer:o}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:s,modifiedIds:r},o).getReader(),u=this._intentStates.get(n);u.streamReader=l;const c=()=>{l.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),c())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();C(this,Mi,uu).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};c()}_abortOperatorList({intentState:e,reason:n,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(n instanceof sw){let r=zU;n.extraDelay>0&&n.extraDelay<1e3&&(r+=n.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},r);return}}if(e.streamReader.cancel(new Zo(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Eo=new WeakMap,gs=new WeakMap,Mi=new WeakSet,uu=function(e=!1){if(C(this,Mi,$g).call(this),!h(this,gs)||this.destroyed)return!1;if(e)return S(this,Eo,setTimeout(()=>{S(this,Eo,null),C(this,Mi,uu).call(this,!1)},HU)),!1;for(const{renderTasks:n,operatorList:i}of this._intentStates.values())if(n.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,gs,!1),!0},$g=function(){h(this,Eo)&&(clearTimeout(h(this,Eo)),S(this,Eo,null))};var ms,my;class QU{constructor(){x(this,ms,new Map);x(this,my,Promise.resolve())}postMessage(e,n){const i={data:structuredClone(e,n?{transfer:n}:null)};h(this,my).then(()=>{for(const[r]of h(this,ms))r.call(this,i)})}addEventListener(e,n,i=null){let r=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:s}=i;if(s.aborted){Ee("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,n);r=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}h(this,ms).set(n,r)}removeEventListener(e,n){const i=h(this,ms).get(n);i==null||i(),h(this,ms).delete(n)}terminate(){for(const[,e]of h(this,ms))e==null||e();h(this,ms).clear()}}ms=new WeakMap,my=new WeakMap;var yy,Za,ja,gc,Vg,mc,qg;const je=class je{constructor({name:e=null,port:n=null,verbosity:i=M2()}={}){x(this,gc);var r;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,n){if((r=h(je,ja))!=null&&r.has(n))throw new Error("Cannot use more than one PDFWorker per port.");(h(je,ja)||S(je,ja,new WeakMap)).set(n,this),this._initializeFromPort(n);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new qd("main","worker",e),this._messageHandler.on("ready",function(){}),C(this,gc,Vg).call(this)}_initialize(){if(h(je,Za)||h(je,mc,qg)){this._setupFakeWorker();return}let{workerSrc:e}=je;try{je._isSameOrigin(window.location.href,e)||(e=je._createCDNWrapper(new URL(e,window.location).href));const n=new Worker(e,{type:"module"}),i=new qd("main","worker",n),r=()=>{s.abort(),i.destroy(),n.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;n.addEventListener("error",()=>{this._webWorker||r()},{signal:s.signal}),i.on("test",a=>{if(s.abort(),this.destroyed||!a){r();return}this._messageHandler=i,this._port=n,this._webWorker=n,C(this,gc,Vg).call(this)}),i.on("ready",a=>{if(s.abort(),this.destroyed){r();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};o();return}catch{Ky("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){h(je,Za)||(Ee("Setting up fake worker."),S(je,Za,!0)),je._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const n=new QU;this._port=n;const i=`fake${pn(je,yy)._++}`,r=new qd(i+"_worker",i,n);e.setup(r,n),this._messageHandler=new qd(i,i+"_worker",n),C(this,gc,Vg).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,n,i;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(n=h(je,ja))==null||n.delete(this._port),this._port=null,(i=this._messageHandler)==null||i.destroy(),this._messageHandler=null}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const n=(i=h(this,ja))==null?void 0:i.get(e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new je(e)}static get workerSrc(){if(Rs.workerSrc)return Rs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ae(this,"_setupFakeWorkerGlobal",(async()=>h(this,mc,qg)?h(this,mc,qg):(await import(this.workerSrc)).WorkerMessageHandler)())}};yy=new WeakMap,Za=new WeakMap,ja=new WeakMap,gc=new WeakSet,Vg=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},mc=new WeakSet,qg=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},x(je,mc),x(je,yy,0),x(je,Za,!1),x(je,ja),ln&&(S(je,Za,!0),Rs.workerSrc||(Rs.workerSrc="./pdf.worker.mjs")),je._isSameOrigin=(e,n)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const r=new URL(n,i);return i.origin===r.origin},je._createCDNWrapper=e=>{const n=`await import("${e}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))};let zu=je;var ys,Or,yc,vc,vs,el,Jd;class ZU{constructor(e,n,i,r,s){x(this,el);x(this,ys,new Map);x(this,Or,new Map);x(this,yc,new Map);x(this,vc,new Map);x(this,vs,null);this.messageHandler=e,this.loadingTask=n,this.commonObjs=new kN,this.fontLoader=new Q2({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Ae(this,"annotationStorage",new uw)}getRenderingIntent(e,n=no.ENABLE,i=null,r=!1,s=!1){let o=li.DISPLAY,a=LE;switch(e){case"any":o=li.ANY;break;case"display":break;case"print":o=li.PRINT;break;default:Ee(`getRenderingIntent - invalid intent: ${e}`)}const l=o&li.PRINT&&i instanceof sN?i:this.annotationStorage;switch(n){case no.DISABLE:o+=li.ANNOTATIONS_DISABLE;break;case no.ENABLE:break;case no.ENABLE_FORMS:o+=li.ANNOTATIONS_FORMS;break;case no.ENABLE_STORAGE:o+=li.ANNOTATIONS_STORAGE,a=l.serializable;break;default:Ee(`getRenderingIntent - invalid annotationMode: ${n}`)}r&&(o+=li.IS_EDITING),s&&(o+=li.OPLIST);const{ids:u,hash:c}=l.modifiedIds,d=[o,a.hash,c];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=h(this,vs))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of h(this,Or).values())e.push(r._destroy());h(this,Or).clear(),h(this,yc).clear(),h(this,vc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{var r,s;this.commonObjs.clear(),this.fontLoader.clear(),h(this,ys).clear(),this.filterFactory.destroy(),Bh.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Zo("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(i,r)=>{bt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){r.close();return}bt(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async i=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:o}=this._fullReader;return(!r||!s)&&(this._lastProgress&&((a=n.onProgress)==null||a.call(n,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=n.onProgress)==null||u.call(n,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:o}}),e.on("GetRangeReader",(i,r)=>{bt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:o,done:a}){if(a){r.close();return}bt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{s.cancel(o),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,n._capability.resolve(new XU(i,this))}),e.on("DocException",i=>{n._capability.reject(Ln(i))}),e.on("PasswordRequest",i=>{S(this,vs,Promise.withResolvers());try{if(!n.onPassword)throw Ln(i);const r=s=>{s instanceof Error?h(this,vs).reject(s):h(this,vs).resolve({password:s})};n.onPassword(r,i.code)}catch(r){h(this,vs).reject(r)}return h(this,vs).promise}),e.on("DataLoaded",i=>{var r;(r=n.onProgress)==null||r.call(n,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;h(this,Or).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,s])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:u}=this._params;if("error"in s){const g=s.error;Ee(`Error during font loading: ${g}`),this.commonObjs.resolve(i,g);break}const c=u&&((o=globalThis.FontInspector)!=null&&o.enabled)?(g,y)=>globalThis.FontInspector.fontAdded(g,y):null,d=new Z2(s,{disableFontFace:a,fontExtraProperties:l,inspectFont:c});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l&&d.data&&(d.data=null),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:f}=s;bt(f,"The imageRef must be defined.");for(const g of h(this,Or).values())for(const[,y]of g.objs)if((y==null?void 0:y.ref)===f)return y.dataLen?(this.commonObjs.resolve(i,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,s,o])=>{var l;if(this.destroyed)return;const a=h(this,Or).get(r);if(!a.objs.has(i)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(s){case"Image":a.objs.resolve(i,o),(o==null?void 0:o.dataLen)>C2&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",i=>{var r;this.destroyed||(r=n.onProgress)==null||r.call(n,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&Ee("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=e-1,i=h(this,yc).get(n);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&h(this,vc).set(s.refStr,e);const o=new JU(n,s,this,this._params.pdfBug);return h(this,Or).set(n,o),o});return h(this,yc).set(n,r),r}getPageIndex(e){return VA(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:n})}getFieldObjects(){return C(this,el,Jd).call(this,"GetFieldObjects")}hasJSActions(){return C(this,el,Jd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return C(this,el,Jd).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return C(this,el,Jd).call(this,"GetOptionalContentConfig").then(n=>new EU(n,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",n=h(this,ys).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,null).then(r=>{var s,o;return{info:r[0],metadata:r[1]?new vU(r[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return h(this,ys).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of h(this,Or).values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),h(this,ys).clear(),this.filterFactory.destroy(!0),Bh.cleanup()}}cachedPageNumber(e){if(!VA(e))return null;const n=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return h(this,vc).get(n)??null}}ys=new WeakMap,Or=new WeakMap,yc=new WeakMap,vc=new WeakMap,vs=new WeakMap,el=new WeakSet,Jd=function(e,n=null){const i=h(this,ys).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,n);return h(this,ys).set(e,r),r};const Id=Symbol("INITIAL_DATA");var jn,Ff,WE;class kN{constructor(){x(this,Ff);x(this,jn,Object.create(null))}get(e,n=null){if(n){const r=C(this,Ff,WE).call(this,e);return r.promise.then(()=>n(r.data)),null}const i=h(this,jn)[e];if(!i||i.data===Id)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const n=h(this,jn)[e];return!!n&&n.data!==Id}delete(e){const n=h(this,jn)[e];return!n||n.data===Id?!1:(delete h(this,jn)[e],!0)}resolve(e,n=null){const i=C(this,Ff,WE).call(this,e);i.data=n,i.resolve()}clear(){var e;for(const n in h(this,jn)){const{data:i}=h(this,jn)[n];(e=i==null?void 0:i.bitmap)==null||e.close()}S(this,jn,Object.create(null))}*[Symbol.iterator](){for(const e in h(this,jn)){const{data:n}=h(this,jn)[e];n!==Id&&(yield[e,n])}}}jn=new WeakMap,Ff=new WeakSet,WE=function(e){var n;return(n=h(this,jn))[e]||(n[e]={...Promise.withResolvers(),data:Id})};var bo;class jU{constructor(e){x(this,bo,null);S(this,bo,e),this.onContinue=null}get promise(){return h(this,bo).capability.promise}cancel(e=0){h(this,bo).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=h(this,bo).operatorList;if(!e)return!1;const{annotationCanvasMap:n}=h(this,bo);return e.form||e.canvas&&(n==null?void 0:n.size)>0}}bo=new WeakMap;var wo,tl;const _a=class _a{constructor({callback:e,params:n,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:c=!1,pdfBug:d=!1,pageColors:f=null}){x(this,wo,null);this.callback=e,this.params=n,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new jU(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){var a,l;if(this.cancelled)return;if(this._canvas){if(h(_a,tl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");h(_a,tl).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:s,background:o}=this.params;this.gfx=new Bu(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,n=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),h(this,wo)&&(window.cancelAnimationFrame(h(this,wo)),S(this,wo,null)),h(_a,tl).delete(this._canvas),this.callback(e||new sw(`Rendering cancelled, page ${this._pageIndex+1}`,n))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,wo,window.requestAnimationFrame(()=>{S(this,wo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),h(_a,tl).delete(this._canvas),this.callback())))}};wo=new WeakMap,tl=new WeakMap,x(_a,tl,new WeakSet);let KE=_a;const eB="4.10.38",tB="f9bea397f";function qA(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function Rd(t){return Math.max(0,Math.min(255,255*t))}class WA{static CMYK_G([e,n,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*n+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Rd(e),[e,e,e]}static G_HTML([e]){const n=qA(e);return`#${n}${n}${n}`}static RGB_G([e,n,i]){return["G",.3*e+.59*n+.11*i]}static RGB_rgb(e){return e.map(Rd)}static RGB_HTML(e){return`#${e.map(qA).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,n,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,n+r)]}static CMYK_rgb([e,n,i,r]){return[Rd(1-Math.min(1,e+r)),Rd(1-Math.min(1,i+r)),Rd(1-Math.min(1,n+r))]}static CMYK_HTML(e){const n=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([e,n,i]){const r=1-e,s=1-n,o=1-i,a=Math.min(r,s,o);return["CMYK",r,s,o,a]}}class nB{create(e,n,i=!1){if(e<=0||n<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${n}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${n}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ve("Abstract method `_createSVG` called.")}}class dw extends nB{_createSVG(e){return document.createElementNS(Zr,e)}}class IN{static setupStorage(e,n,i,r,s){const o=r.getValue(n,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),s==="print")break;e.addEventListener("input",a=>{r.setValue(n,{value:a.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?e.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",a=>{r.setValue(n,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),s==="print")break;e.addEventListener("input",a=>{r.setValue(n,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of i.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(n,{value:u})});break}}static setAttributes({html:e,element:n,storage:i=null,intent:r,linkService:s}){const{attributes:o}=n,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[l,u]of Object.entries(o))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}a&&s.addLinkAttributes(e,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(e,o.dataId,n,i)}static render(e){var d,f;const n=e.annotationStorage,i=e.linkService,r=e.xfaHtml,s=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:s,linkService:i});const a=s!=="richText",l=e.div;if(l.append(o),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=g}a&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(r.children.length===0){if(r.value){const g=document.createTextNode(r.value);o.append(g),a&&zh.shouldBuildText(r.name)&&u.push(g)}return{textDivs:u}}const c=[[r,-1,o]];for(;c.length>0;){const[g,y,v]=c.at(-1);if(y+1===g.children.length){c.pop();continue}const E=g.children[++c.at(-1)[1]];if(E===null)continue;const{name:_}=E;if(_==="#text"){const w=document.createTextNode(E.value);u.push(w),v.append(w);continue}const b=(d=E==null?void 0:E.attributes)!=null&&d.xmlns?document.createElementNS(E.attributes.xmlns,_):document.createElement(_);if(v.append(b),E.attributes&&this.setAttributes({html:b,element:E,storage:n,intent:s,linkService:i}),((f=E.children)==null?void 0:f.length)>0)c.push([E,-1,b]);else if(E.value){const w=document.createTextNode(E.value);a&&zh.shouldBuildText(_)&&u.push(w),b.append(w)}}for(const g of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const n=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=n,e.div.hidden=!1}}const kp=1e3,iB=9,Ul=new WeakSet;function Xo(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class rB{static create(e){switch(e.data.annotationType){case At.LINK:return new RN(e);case At.TEXT:return new sB(e);case At.WIDGET:switch(e.data.fieldType){case"Tx":return new oB(e);case"Btn":return e.data.radioButton?new PN(e):e.data.checkBox?new lB(e):new uB(e);case"Ch":return new cB(e);case"Sig":return new aB(e)}return new Wl(e);case At.POPUP:return new XE(e);case At.FREETEXT:return new UN(e);case At.LINE:return new hB(e);case At.SQUARE:return new fB(e);case At.CIRCLE:return new pB(e);case At.POLYLINE:return new BN(e);case At.CARET:return new mB(e);case At.INK:return new hw(e);case At.POLYGON:return new gB(e);case At.HIGHLIGHT:return new zN(e);case At.UNDERLINE:return new yB(e);case At.SQUIGGLY:return new vB(e);case At.STRIKEOUT:return new _B(e);case At.STAMP:return new HN(e);case At.FILEATTACHMENT:return new EB(e);default:return new mt(e)}}}var nl,_c,Ec,Uf,YE;const tS=class tS{constructor(e,{isRenderable:n=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){x(this,Uf);x(this,nl,null);x(this,_c,!1);x(this,Ec,null);this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,n&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:n,richText:i}){return!!(e!=null&&e.str||n!=null&&n.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return tS._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;h(this,nl)||S(this,nl,{rect:this.data.rect.slice(0)});const{rect:n}=e;n&&C(this,Uf,YE).call(this,n),(i=h(this,Ec))==null||i.popup.updateEdited(e)}resetEdited(){var e;h(this,nl)&&(C(this,Uf,YE).call(this,h(this,nl).rect),(e=h(this,Ec))==null||e.popup.resetEdited(),S(this,nl,null))}_createContainer(e){const{data:n,parent:{page:i,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",n.id),this instanceof Wl||(s.tabIndex=kp);const{style:o}=s;if(o.zIndex=this.parent.zIndex++,n.alternativeText&&(s.title=n.alternativeText),n.noRotate&&s.classList.add("norotate"),!n.rect||this instanceof XE){const{rotation:v}=n;return!n.hasOwnCanvas&&v!==0&&this.setRotation(v,s),s}const{width:a,height:l}=Xo(n.rect);if(!e&&n.borderStyle.width>0){o.borderWidth=`${n.borderStyle.width}px`;const v=n.borderStyle.horizontalCornerRadius,E=n.borderStyle.verticalCornerRadius;if(v>0||E>0){const b=`calc(${v}px * var(--scale-factor)) / calc(${E}px * var(--scale-factor))`;o.borderRadius=b}else if(this instanceof PN){const b=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;o.borderRadius=b}switch(n.borderStyle.style){case Cd.SOLID:o.borderStyle="solid";break;case Cd.DASHED:o.borderStyle="dashed";break;case Cd.BEVELED:Ee("Unimplemented border style: beveled");break;case Cd.INSET:Ee("Unimplemented border style: inset");break;case Cd.UNDERLINE:o.borderBottomStyle="solid";break}const _=n.borderColor||null;_?(S(this,_c,!0),o.borderColor=ae.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):o.borderWidth=0}const u=ae.normalizeRect([n.rect[0],i.view[3]-n.rect[1]+i.view[1],n.rect[2],i.view[3]-n.rect[3]+i.view[1]]),{pageWidth:c,pageHeight:d,pageX:f,pageY:g}=r.rawDims;o.left=`${100*(u[0]-f)/c}%`,o.top=`${100*(u[1]-g)/d}%`;const{rotation:y}=n;return n.hasOwnCanvas||y===0?(o.width=`${100*a/c}%`,o.height=`${100*l/d}%`):this.setRotation(y,s),s}setRotation(e,n=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:s,height:o}=Xo(this.data.rect);let a,l;e%180===0?(a=100*s/i,l=100*o/r):(a=100*o/i,l=100*s/r),n.style.width=`${a}%`,n.style.height=`${l}%`,n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(n,i,r)=>{const s=r.detail[n],o=s[0],a=s.slice(1);r.target.style[i]=WA[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:WA[`${o}_rgb`](a)})};return Ae(this,"_commonActions",{display:n=>{const{display:i}=n.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:i}=n.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{e("bgColor","backgroundColor",n)},fillColor:n=>{e("fillColor","backgroundColor",n)},fgColor:n=>{e("fgColor","color",n)},textColor:n=>{e("textColor","color",n)},borderColor:n=>{e("borderColor","borderColor",n)},strokeColor:n=>{e("strokeColor","borderColor",n)},rotation:n=>{const i=n.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,n){const i=this._commonActions;for(const r of Object.keys(n.detail)){const s=e[r]||i[r];s==null||s(n)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const i=this._commonActions;for(const[r,s]of Object.entries(n)){const o=i[r];if(o){const a={detail:{[r]:s},target:e};o(a),delete n[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[n,i,r,s]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,E,_,b]=e.subarray(2,6);if(r===v&&s===E&&n===_&&i===b)return}const{style:o}=this.container;let a;if(h(this,_c)){const{borderColor:v,borderWidth:E}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const l=r-n,u=s-i,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=c.createElement("defs");d.append(f);const g=c.createElement("clipPath"),y=`clippath_${this.data.id}`;g.setAttribute("id",y),g.setAttribute("clipPathUnits","objectBoundingBox"),f.append(g);for(let v=2,E=e.length;v<E;v+=8){const _=e[v],b=e[v+1],w=e[v+2],A=e[v+3],k=c.createElement("rect"),T=(w-n)/l,N=(s-b)/u,L=(_-w)/l,F=(b-A)/u;k.setAttribute("x",T),k.setAttribute("y",N),k.setAttribute("width",L),k.setAttribute("height",F),g.append(k),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${N}" width="${L}" height="${F}"/>`)}h(this,_c)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${y})`}_createPopup(){const{data:e}=this,n=S(this,Ec,new XE({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){Ve("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,n=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:o,exportValues:a}of r){if(s===-1||o===n)continue;const l=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Ul.has(u)){Ee(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:l,domElement:u})}return i}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,o=r.getAttribute("data-element-id");o!==n&&Ul.has(r)&&i.push({id:o,exportValue:s,domElement:r})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const n of e)n.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:n})})}};nl=new WeakMap,_c=new WeakMap,Ec=new WeakMap,Uf=new WeakSet,YE=function(e){const{container:{style:n},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}}}=this;i==null||i.splice(0,4,...e);const{width:u,height:c}=Xo(e);n.left=`${100*(e[0]-a)/s}%`,n.top=`${100*(o-e[3]+l)/o}%`,r===0?(n.width=`${100*u/s}%`,n.height=`${100*c/o}%`):this.setRotation(r)};let mt=tS;var ci,fa,NN,MN;class RN extends mt{constructor(n,i=null){super(n,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});x(this,ci);this.isTooltipOnly=n.data.isTooltipOnly}render(){const{data:n,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",n.id);let s=!1;return n.url?(i.addLinkAttributes(r,n.url,n.newWindow),s=!0):n.action?(this._bindNamedAction(r,n.action),s=!0):n.attachment?(C(this,ci,NN).call(this,r,n.attachment,n.attachmentDest),s=!0):n.setOCGState?(C(this,ci,MN).call(this,r,n.setOCGState),s=!0):n.dest?(this._bindLink(r,n.dest),s=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,n),s=!0),n.resetForm?(this._bindResetFormAction(r,n.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(r),this.container}_bindLink(n,i){n.href=this.linkService.getDestinationHash(i),n.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&C(this,ci,fa).call(this)}_bindNamedAction(n,i){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(i),!1),C(this,ci,fa).call(this)}_bindJSAction(n,i){n.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(i.actions)){const o=r.get(s);o&&(n[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:s}}),!1})}n.onclick||(n.onclick=()=>!1),C(this,ci,fa).call(this)}_bindResetFormAction(n,i){const r=n.onclick;if(r||(n.href=this.linkService.getAnchorUrl("")),C(this,ci,fa).call(this),!this._fieldObjects){Ee('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(n.onclick=()=>!1);return}n.onclick=()=>{var d;r==null||r();const{fields:s,refs:o,include:a}=i,l=[];if(s.length!==0||o.length!==0){const f=new Set(o);for(const g of s){const y=this._fieldObjects[g]||[];for(const{id:v}of y)f.add(v)}for(const g of Object.values(this._fieldObjects))for(const y of g)f.has(y.id)===a&&l.push(y)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const u=this.annotationStorage,c=[];for(const f of l){const{id:g}=f;switch(c.push(g),f.type){case"text":{const v=f.defaultValue||"";u.setValue(g,{value:v});break}case"checkbox":case"radiobutton":{const v=f.defaultValue===f.exportValues;u.setValue(g,{value:v});break}case"combobox":case"listbox":{const v=f.defaultValue||"";u.setValue(g,{value:v});break}default:continue}const y=document.querySelector(`[data-element-id="${g}"]`);if(y){if(!Ul.has(y)){Ee(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}})),!1}}}ci=new WeakSet,fa=function(){this.container.setAttribute("data-internal-link","")},NN=function(n,i,r=null){n.href=this.linkService.getAnchorUrl(""),i.description&&(n.title=i.description),n.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(i.content,i.filename,r),!1},C(this,ci,fa).call(this)},MN=function(n,i){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeSetOCGState(i),!1),C(this,ci,fa).call(this)};class sB extends mt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Wl extends mt{render(){return this.container}showElementAndHideCanvas(e){var n;this.data.hasOwnCanvas&&(((n=e.previousSibling)==null?void 0:n.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Tn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,n,i,r,s){i.includes("mouse")?e.addEventListener(i,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(i,o=>{var a;if(i==="blur"){if(!n.focused||!o.relatedTarget)return;n.focused=!1}else if(i==="focus"){if(n.focused)return;n.focused=!0}s&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o)}}))})}_setEventListeners(e,n,i,r){var s,o,a;for(const[l,u]of i)(u==="Action"||(s=this.data.actions)!=null&&s[u])&&((u==="Focus"||u==="Blur")&&(n||(n={focused:!1})),this._setEventListener(e,n,l,u,r),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,n,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,n,"focus","Focus",null))}_setBackgroundColor(e){const n=this.data.backgroundColor||null;e.style.backgroundColor=n===null?"transparent":ae.makeHexColor(n[0],n[1],n[2])}_setTextStyle(e){const n=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||iB,s=e.style;let o;const a=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),c=Math.round(u/(Hv*r))||1,d=u/c;o=Math.min(r,l(d/Hv))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(r,l(u/Hv))}s.fontSize=`calc(${o}px * var(--scale-factor))`,s.color=ae.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=n[this.data.textAlignment])}_setRequired(e,n){n?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",n)}}class oB extends Wl{constructor(e){const n=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:n})}setPropertyOnSiblings(e,n,i,r){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[n]=i),s.setValue(o.id,{[r]:i})}render(){var r,s;const e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=e.getValue(n,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let u=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",u??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Ul.add(i),i.setAttribute("data-element-id",n),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=kp,this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",f=>{e.setValue(n,{value:f.target.value}),this.setPropertyOnSiblings(i,"value",f.target.value,"value"),c.formattedValue=null}),i.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue??"";i.value=c.userValue=g,c.formattedValue=null});let d=f=>{const{formattedValue:g}=c;g!=null&&(f.target.value=g),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",g=>{var v;if(c.focused)return;const{target:y}=g;c.userValue&&(y.value=c.userValue),c.lastCommittedValue=y.value,c.commitKey=1,(v=this.data.actions)!=null&&v.Focus||(c.focused=!0)}),i.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const y={value(v){c.userValue=v.detail.value??"",e.setValue(n,{value:c.userValue.toString()}),v.target.value=c.userValue},formattedValue(v){const{formattedValue:E}=v.detail;c.formattedValue=E,E!=null&&v.target!==document.activeElement&&(v.target.value=E),e.setValue(n,{formattedValue:E})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{var w;const{charLimit:E}=v.detail,{target:_}=v;if(E===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",E);let b=c.userValue;!b||b.length<=E||(b=b.slice(0,E),_.value=c.userValue=b,e.setValue(n,{value:b}),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:b,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(y,g)}),i.addEventListener("keydown",g=>{var E;c.commitKey=1;let y=-1;if(g.key==="Escape"?y=0:g.key==="Enter"&&!this.data.multiLine?y=2:g.key==="Tab"&&(c.commitKey=3),y===-1)return;const{value:v}=g.target;c.lastCommittedValue!==v&&(c.lastCommittedValue=v,c.userValue=v,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:v,willCommit:!0,commitKey:y,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const f=d;d=null,i.addEventListener("blur",g=>{var v,E;if(!c.focused||!g.relatedTarget)return;(v=this.data.actions)!=null&&v.Blur||(c.focused=!1);const{value:y}=g.target;c.userValue=y,c.lastCommittedValue!==y&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:y,willCommit:!0,commitKey:c.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),f(g)}),(s=this.data.actions)!=null&&s.Keystroke&&i.addEventListener("beforeinput",g=>{var k;c.lastCommittedValue=null;const{data:y,target:v}=g,{value:E,selectionStart:_,selectionEnd:b}=v;let w=_,A=b;switch(g.inputType){case"deleteWordBackward":{const T=E.substring(0,_).match(/\w*[^\w]*$/);T&&(w-=T[0].length);break}case"deleteWordForward":{const T=E.substring(_).match(/^[^\w]*\w*/);T&&(A+=T[0].length);break}case"deleteContentBackward":_===b&&(w-=1);break;case"deleteContentForward":_===b&&(A+=1);break}g.preventDefault(),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:E,change:y||"",willCommit:!1,selStart:w,selEnd:A}})}),this._setEventListeners(i,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(d&&i.addEventListener("blur",d),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class aB extends Wl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class lB extends Wl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,n=this.data,i=n.id;let r=e.getValue(i,{value:n.exportValue===n.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Ul.add(s),s.setAttribute("data-element-id",i),s.disabled=n.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=n.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",n.exportValue),s.tabIndex=kp,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,i)){const c=l&&u.exportValue===n.exportValue;u.domElement&&(u.domElement.checked=c),e.setValue(u.id,{value:c})}e.setValue(i,{value:l})}),s.addEventListener("resetform",o=>{const a=n.defaultFieldValue||"Off";o.target.checked=a===n.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class PN extends Wl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,n=this.data,i=n.id;let r=e.getValue(i,{value:n.fieldValue===n.buttonValue}).value;if(typeof r=="string"&&(r=r!==n.buttonValue,e.setValue(i,{value:r})),r)for(const o of this._getElementsByName(n.fieldName,i))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(Ul.add(s),s.setAttribute("data-element-id",i),s.disabled=n.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=n.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=kp,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,i))e.setValue(u.id,{value:!1});e.setValue(i,{value:l})}),s.addEventListener("resetform",o=>{const a=n.defaultFieldValue;o.target.checked=a!=null&&a===n.buttonValue}),this.enableScripting&&this.hasJSActions){const o=n.buttonValue;s.addEventListener("updatefromsandbox",a=>{const l={value:u=>{const c=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=c&&d.id===i;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class uB extends RN{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const n=e.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class cB extends Wl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,n=this.data.id,i=e.getValue(n,{value:this.data.fieldValue}),r=document.createElement("select");Ul.add(r),r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=kp;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",c=>{const d=this.data.defaultFieldValue;for(const f of r.options)f.selected=f.value===d});for(const c of this.data.options){const d=document.createElement("option");d.textContent=c.displayValue,d.value=c.exportValue,i.value.includes(c.exportValue)&&(d.setAttribute("selected",!0),s=!1),r.append(d)}let o=null;if(s){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),r.prepend(c),o=()=>{c.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const a=c=>{const d=c?"value":"textContent",{options:f,multiple:g}=r;return g?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=a(!1);const u=c=>{const d=c.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",c=>{const d={value(f){o==null||o();const g=f.detail.value,y=new Set(Array.isArray(g)?g:[g]);for(const v of r.options)v.selected=y.has(v.value);e.setValue(n,{value:a(!0)}),l=a(!1)},multipleSelection(f){r.multiple=!0},remove(f){const g=r.options,y=f.detail.remove;g[y].selected=!1,r.remove(y),g.length>0&&Array.prototype.findIndex.call(g,E=>E.selected)===-1&&(g[0].selected=!0),e.setValue(n,{value:a(!0),items:u(f)}),l=a(!1)},clear(f){for(;r.length!==0;)r.remove(0);e.setValue(n,{value:null,items:[]}),l=a(!1)},insert(f){const{index:g,displayValue:y,exportValue:v}=f.detail.insert,E=r.children[g],_=document.createElement("option");_.textContent=y,_.value=v,E?E.before(_):r.append(_),e.setValue(n,{value:a(!0),items:u(f)}),l=a(!1)},items(f){const{items:g}=f.detail;for(;r.length!==0;)r.remove(0);for(const y of g){const{displayValue:v,exportValue:E}=y,_=document.createElement("option");_.textContent=v,_.value=E,r.append(_)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(n,{value:a(!0),items:u(f)}),l=a(!1)},indices(f){const g=new Set(f.detail.indices);for(const y of f.target.options)y.selected=g.has(y.index);e.setValue(n,{value:a(!0)}),l=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,c)}),r.addEventListener("input",c=>{var g;const d=a(!0),f=a(!1);e.setValue(n,{value:d}),c.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:l,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):r.addEventListener("input",function(c){e.setValue(n,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class XE extends mt{constructor(e){const{data:n,elements:i}=e;super(e,{isRenderable:mt._hasPopupData(n)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new dB({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(i=>`${rw}${i}`).join(",")),this.container}}var bc,vy,_y,wc,il,ut,_s,Sc,Bf,zf,Ac,Es,Zi,bs,Hf,ws,Gf,rl,sl,Ge,Wg,JE,LN,DN,ON,FN,Kg,Yg,QE;class dB{constructor({container:e,color:n,elements:i,titleObj:r,modificationDate:s,contentsObj:o,richText:a,parent:l,rect:u,parentRect:c,open:d}){x(this,Ge);x(this,bc,C(this,Ge,ON).bind(this));x(this,vy,C(this,Ge,QE).bind(this));x(this,_y,C(this,Ge,Yg).bind(this));x(this,wc,C(this,Ge,Kg).bind(this));x(this,il,null);x(this,ut,null);x(this,_s,null);x(this,Sc,null);x(this,Bf,null);x(this,zf,null);x(this,Ac,null);x(this,Es,!1);x(this,Zi,null);x(this,bs,null);x(this,Hf,null);x(this,ws,null);x(this,Gf,null);x(this,rl,null);x(this,sl,!1);var f;S(this,ut,e),S(this,Gf,r),S(this,_s,o),S(this,ws,a),S(this,zf,l),S(this,il,n),S(this,Hf,u),S(this,Ac,c),S(this,Bf,i),S(this,Sc,aw.toDateObject(s)),this.trigger=i.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",h(this,wc)),g.addEventListener("mouseenter",h(this,_y)),g.addEventListener("mouseleave",h(this,vy)),g.classList.add("popupTriggerArea");for(const g of i)(f=g.container)==null||f.addEventListener("keydown",h(this,bc));h(this,ut).hidden=!0,d&&C(this,Ge,Kg).call(this)}render(){if(h(this,Zi))return;const e=S(this,Zi,document.createElement("div"));if(e.className="popup",h(this,il)){const s=e.style.outlineColor=ae.makeHexColor(...h(this,il));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=ae.makeHexColor(...h(this,il).map(a=>Math.floor(.7*(255-a)+a)))}const n=document.createElement("span");n.className="header";const i=document.createElement("h1");if(n.append(i),{dir:i.dir,str:i.textContent}=h(this,Gf),e.append(n),h(this,Sc)){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:h(this,Sc).valueOf()})),n.append(s)}const r=h(this,Ge,Wg);if(r)IN.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(h(this,_s));e.append(s)}h(this,ut).append(e)}_formatContents({str:e,dir:n}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=n;const r=e.split(/(?:\r\n?|\n)/);for(let s=0,o=r.length;s<o;++s){const a=r[s];i.append(document.createTextNode(a)),s<o-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:n}){var i;h(this,rl)||S(this,rl,{contentsObj:h(this,_s),richText:h(this,ws)}),e&&S(this,bs,null),n&&(S(this,ws,C(this,Ge,DN).call(this,n)),S(this,_s,null)),(i=h(this,Zi))==null||i.remove(),S(this,Zi,null)}resetEdited(){var e;h(this,rl)&&({contentsObj:pn(this,_s)._,richText:pn(this,ws)._}=h(this,rl),S(this,rl,null),(e=h(this,Zi))==null||e.remove(),S(this,Zi,null),S(this,bs,null))}forceHide(){S(this,sl,this.isVisible),h(this,sl)&&(h(this,ut).hidden=!0)}maybeShow(){h(this,sl)&&(h(this,Zi)||C(this,Ge,Yg).call(this),S(this,sl,!1),h(this,ut).hidden=!1)}get isVisible(){return h(this,ut).hidden===!1}}bc=new WeakMap,vy=new WeakMap,_y=new WeakMap,wc=new WeakMap,il=new WeakMap,ut=new WeakMap,_s=new WeakMap,Sc=new WeakMap,Bf=new WeakMap,zf=new WeakMap,Ac=new WeakMap,Es=new WeakMap,Zi=new WeakMap,bs=new WeakMap,Hf=new WeakMap,ws=new WeakMap,Gf=new WeakMap,rl=new WeakMap,sl=new WeakMap,Ge=new WeakSet,Wg=function(){const e=h(this,ws),n=h(this,_s);return e!=null&&e.str&&(!(n!=null&&n.str)||n.str===e.str)&&h(this,ws).html||null},JE=function(){var e,n,i;return((i=(n=(e=h(this,Ge,Wg))==null?void 0:e.attributes)==null?void 0:n.style)==null?void 0:i.fontSize)||0},LN=function(){var e,n,i;return((i=(n=(e=h(this,Ge,Wg))==null?void 0:e.attributes)==null?void 0:n.style)==null?void 0:i.color)||null},DN=function(e){const n=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},r={style:{color:h(this,Ge,LN),fontSize:h(this,Ge,JE)?`calc(${h(this,Ge,JE)}px * var(--scale-factor))`:""}};for(const s of e.split(`
`))n.push({name:"span",value:s,attributes:r});return i},ON=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&h(this,Es))&&C(this,Ge,Kg).call(this)},FN=function(){if(h(this,bs)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}}=h(this,zf);let o=!!h(this,Ac),a=o?h(this,Ac):h(this,Hf);for(const y of h(this,Bf))if(!a||ae.intersect(y.data.rect,a)!==null){a=y.data.rect,o=!0;break}const l=ae.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),c=o?a[2]-a[0]+5:0,d=l[0]+c,f=l[1];S(this,bs,[100*(d-r)/n,100*(f-s)/i]);const{style:g}=h(this,ut);g.left=`${h(this,bs)[0]}%`,g.top=`${h(this,bs)[1]}%`},Kg=function(){S(this,Es,!h(this,Es)),h(this,Es)?(C(this,Ge,Yg).call(this),h(this,ut).addEventListener("click",h(this,wc)),h(this,ut).addEventListener("keydown",h(this,bc))):(C(this,Ge,QE).call(this),h(this,ut).removeEventListener("click",h(this,wc)),h(this,ut).removeEventListener("keydown",h(this,bc)))},Yg=function(){h(this,Zi)||this.render(),this.isVisible?h(this,Es)&&h(this,ut).classList.add("focused"):(C(this,Ge,FN).call(this),h(this,ut).hidden=!1,h(this,ut).style.zIndex=parseInt(h(this,ut).style.zIndex)+1e3)},QE=function(){h(this,ut).classList.remove("focused"),!(h(this,Es)||!this.isVisible)&&(h(this,ut).hidden=!0,h(this,ut).style.zIndex=parseInt(h(this,ut).style.zIndex)-1e3)};class UN extends mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=_e.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const n of this.textContent){const i=document.createElement("span");i.textContent=n,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var $f;class hB extends mt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});x(this,$f,null)}render(){this.container.classList.add("lineAnnotation");const n=this.data,{width:i,height:r}=Xo(n.rect),s=this.svgFactory.create(i,r,!0),o=S(this,$f,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),o.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),o.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),o.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),o.setAttribute("stroke-width",n.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,$f)}addHighlightArea(){this.container.classList.add("highlightArea")}}$f=new WeakMap;var Vf;class fB extends mt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});x(this,Vf,null)}render(){this.container.classList.add("squareAnnotation");const n=this.data,{width:i,height:r}=Xo(n.rect),s=this.svgFactory.create(i,r,!0),o=n.borderStyle.width,a=S(this,Vf,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",i-o),a.setAttribute("height",r-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,Vf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vf=new WeakMap;var qf;class pB extends mt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});x(this,qf,null)}render(){this.container.classList.add("circleAnnotation");const n=this.data,{width:i,height:r}=Xo(n.rect),s=this.svgFactory.create(i,r,!0),o=n.borderStyle.width,a=S(this,qf,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",i/2),a.setAttribute("cy",r/2),a.setAttribute("rx",i/2-o/2),a.setAttribute("ry",r/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,qf)}addHighlightArea(){this.container.classList.add("highlightArea")}}qf=new WeakMap;var Wf;class BN extends mt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});x(this,Wf,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,vertices:i,borderStyle:r,popupRef:s}}=this;if(!i)return this.container;const{width:o,height:a}=Xo(n),l=this.svgFactory.create(o,a,!0);let u=[];for(let d=0,f=i.length;d<f;d+=2){const g=i[d]-n[0],y=n[3]-i[d+1];u.push(`${g},${y}`)}u=u.join(" ");const c=S(this,Wf,this.svgFactory.createElement(this.svgElementName));return c.setAttribute("points",u),c.setAttribute("stroke-width",r.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),l.append(c),this.container.append(l),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return h(this,Wf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wf=new WeakMap;class gB extends BN{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class mB extends mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Kf,ol,Yf,ZE;class hw extends mt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});x(this,Yf);x(this,Kf,null);x(this,ol,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?_e.HIGHLIGHT:_e.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,rotation:i,inkLists:r,borderStyle:s,popupRef:o}}=this,{transform:a,width:l,height:u}=C(this,Yf,ZE).call(this,i,n),c=this.svgFactory.create(l,u,!0),d=S(this,Kf,this.svgFactory.createElement("svg:g"));c.append(d),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",a);for(let f=0,g=r.length;f<g;f++){const y=this.svgFactory.createElement(this.svgElementName);h(this,ol).push(y),y.setAttribute("points",r[f].join(",")),d.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(n){super.updateEdited(n);const{thickness:i,points:r,rect:s}=n,o=h(this,Kf);if(i>=0&&o.setAttribute("stroke-width",i||1),r)for(let a=0,l=h(this,ol).length;a<l;a++)h(this,ol)[a].setAttribute("points",r[a].join(","));if(s){const{transform:a,width:l,height:u}=C(this,Yf,ZE).call(this,this.data.rotation,s);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return h(this,ol)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kf=new WeakMap,ol=new WeakMap,Yf=new WeakSet,ZE=function(n,i){switch(n){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class zN extends mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=_e.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class yB extends mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class vB extends mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class _B extends mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class HN extends mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=_e.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Xf,Jf,jE;class EB extends mt{constructor(n){var r;super(n,{isRenderable:!0});x(this,Jf);x(this,Xf,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:n,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",C(this,Jf,jE).bind(this)),S(this,Xf,r);const{isMac:s}=Tn.platform;return n.addEventListener("keydown",o=>{o.key==="Enter"&&(s?o.metaKey:o.ctrlKey)&&C(this,Jf,jE).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),n.append(r),n}getElementsToTriggerPopup(){return h(this,Xf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xf=new WeakMap,Jf=new WeakSet,jE=function(){var n;(n=this.downloadManager)==null||n.openOrDownloadData(this.content,this.filename)};var Qf,al,ll,Zf,Gl,GN,e0;class bB{constructor({div:e,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:o,structTreeLayer:a}){x(this,Gl);x(this,Qf,null);x(this,al,null);x(this,ll,new Map);x(this,Zf,null);this.div=e,S(this,Qf,n),S(this,al,i),S(this,Zf,a||null),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return h(this,ll).size>0}async render(e){var o;const{annotations:n}=e,i=this.div;Ol(i,this.viewport);const r=new Map,s={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new dw,annotationStorage:e.annotationStorage||new uw,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of n){if(a.noHTML)continue;const l=a.annotationType===At.POPUP;if(l){const d=r.get(a.id);if(!d)continue;s.elements=d}else{const{width:d,height:f}=Xo(a.rect);if(d<=0||f<=0)continue}s.data=a;const u=rB.create(s);if(!u.isRenderable)continue;if(!l&&a.popupRef){const d=r.get(a.popupRef);d?d.push(u):r.set(a.popupRef,[u])}const c=u.render();a.hidden&&(c.style.visibility="hidden"),await C(this,Gl,GN).call(this,c,a.id),u._isEditable&&(h(this,ll).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}C(this,Gl,e0).call(this)}update({viewport:e}){const n=this.div;this.viewport=e,Ol(n,{rotation:e.rotation}),C(this,Gl,e0).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(h(this,ll).values())}getEditableAnnotation(e){return h(this,ll).get(e)}}Qf=new WeakMap,al=new WeakMap,ll=new WeakMap,Zf=new WeakMap,Gl=new WeakSet,GN=async function(e,n){var o,a;const i=e.firstChild||e,r=i.id=`${rw}${n}`,s=await((o=h(this,Zf))==null?void 0:o.getAriaAttributes(r));if(s)for(const[l,u]of s)i.setAttribute(l,u);this.div.append(e),(a=h(this,Qf))==null||a.moveElementInDOM(this.div,e,i,!1)},e0=function(){if(!h(this,al))return;const e=this.div;for(const[n,i]of h(this,al)){const r=e.querySelector(`[data-annotation-id="${n}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i)}h(this,al).clear()};const tg=/\r\n?|\n/g;var ji,ei,jf,ul,ti,St,$N,VN,qN,Xg,Ds,Jg,Qg,WN,n0,KN;const We=class We extends ot{constructor(n){super({...n,name:"freeTextEditor"});x(this,St);x(this,ji);x(this,ei,"");x(this,jf,`${this.id}-editor`);x(this,ul,null);x(this,ti);S(this,ji,n.color||We._defaultColor||ot._defaultLineColor),S(this,ti,n.fontSize||We._defaultFontSize)}static get _keyboardManager(){const n=We.prototype,i=o=>o.isEmpty(),r=Fl.TRANSLATE_SMALL,s=Fl.TRANSLATE_BIG;return Ae(this,"_keyboardManager",new Cp([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],n.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],n.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],n._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n._translateEmpty,{args:[-s,0],checker:i}],[["ArrowRight","mac+ArrowRight"],n._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n._translateEmpty,{args:[s,0],checker:i}],[["ArrowUp","mac+ArrowUp"],n._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n._translateEmpty,{args:[0,-s],checker:i}],[["ArrowDown","mac+ArrowDown"],n._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n._translateEmpty,{args:[0,s],checker:i}]]))}static initialize(n,i){ot.initialize(n,i);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(n,i){switch(n){case Ce.FREETEXT_SIZE:We._defaultFontSize=i;break;case Ce.FREETEXT_COLOR:We._defaultColor=i;break}}updateParams(n,i){switch(n){case Ce.FREETEXT_SIZE:C(this,St,$N).call(this,i);break;case Ce.FREETEXT_COLOR:C(this,St,VN).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ce.FREETEXT_SIZE,We._defaultFontSize],[Ce.FREETEXT_COLOR,We._defaultColor||ot._defaultLineColor]]}get propertiesToUpdate(){return[[Ce.FREETEXT_SIZE,h(this,ti)],[Ce.FREETEXT_COLOR,h(this,ji)]]}_translateEmpty(n,i){this._uiManager.translateSelectedEditors(n,i,!0)}getInitialTranslation(){const n=this.parentScale;return[-We._internalPadding*n,-(We._internalPadding+h(this,ti))*n]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(_e.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,ul,new AbortController);const n=this._uiManager.combinedSignal(h(this,ul));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:n}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:n}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:n}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:n}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:n})}disableEditMode(){var n;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",h(this,jf)),this._isDraggable=!0,(n=h(this,ul))==null||n.abort(),S(this,ul,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(n){this._focusEventsAllowed&&(super.focusin(n),n.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(n){var i;this.width||(this.enableEditMode(),n&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const n=h(this,ei),i=S(this,ei,C(this,St,qN).call(this).trimEnd());if(n===i)return;const r=s=>{if(S(this,ei,s),!s){this.remove();return}C(this,St,Qg).call(this),this._uiManager.rebuild(this),C(this,St,Xg).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(n)},mustExec:!1}),C(this,St,Xg).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(n){this.enterInEditMode()}keydown(n){n.target===this.div&&n.key==="Enter"&&(this.enterInEditMode(),n.preventDefault())}editorDivKeydown(n){We._keyboardManager.exec(this,n)}editorDivFocus(n){this.isEditing=!0}editorDivBlur(n){this.isEditing=!1}editorDivInput(n){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let n,i;this.width&&(n=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",h(this,jf)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${h(this,ti)}px * var(--scale-factor))`,r.color=h(this,ji),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),zm(this,this.div,["dblclick","keydown"]),this.width){const[s,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[c,d]=this.pageDimensions,[f,g]=this.pageTranslation;let y,v;switch(this.rotation){case 0:y=n+(a[0]-f)/c,v=i+this.height-(a[1]-g)/d;break;case 90:y=n+(a[0]-f)/c,v=i-(a[1]-g)/d,[l,u]=[u,-l];break;case 180:y=n-this.width+(a[0]-f)/c,v=i-(a[1]-g)/d,[l,u]=[-l,-u];break;case 270:y=n+(a[0]-f-this.height*d)/c,v=i+(a[1]-g-this.width*c)/d,[l,u]=[-u,l];break}this.setAt(y*s,v*o,l,u)}else this.setAt(n*s,i*o,this.width*s,this.height*o);C(this,St,Qg).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(n){var y,v,E;const i=n.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;n.preventDefault();const s=C(y=We,Ds,n0).call(y,i.getData("text")||"").replaceAll(tg,`
`);if(!s)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:u}=a,c=[],d=[];if(l.nodeType===Node.TEXT_NODE){const _=l.parentElement;if(d.push(l.nodeValue.slice(u).replaceAll(tg,"")),_!==this.editorDiv){let b=c;for(const w of this.editorDiv.childNodes){if(w===_){b=d;continue}b.push(C(v=We,Ds,Jg).call(v,w))}}c.push(l.nodeValue.slice(0,u).replaceAll(tg,""))}else if(l===this.editorDiv){let _=c,b=0;for(const w of this.editorDiv.childNodes)b++===u&&(_=d),_.push(C(E=We,Ds,Jg).call(E,w))}S(this,ei,`${c.join(`
`)}${s}${d.join(`
`)}`),C(this,St,Qg).call(this);const f=new Range;let g=c.reduce((_,b)=>_+b.length,0);for(const{firstChild:_}of this.editorDiv.childNodes)if(_.nodeType===Node.TEXT_NODE){const b=_.nodeValue.length;if(g<=b){f.setStart(_,g),f.setEnd(_,g);break}g-=b}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(n,i,r){var a;let s=null;if(n instanceof UN){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:c,rotation:d,id:f,popupRef:g},textContent:y,textPosition:v,parent:{page:{pageNumber:E}}}=n;if(!y||y.length===0)return null;s=n={annotationType:_e.FREETEXT,color:Array.from(u),fontSize:l,value:y.join(`
`),position:v,pageIndex:E-1,rect:c.slice(0),rotation:d,id:f,deleted:!1,popupRef:g}}const o=await super.deserialize(n,i,r);return S(o,ti,n.fontSize),S(o,ji,ae.makeHexColor(...n.color)),S(o,ei,C(a=We,Ds,n0).call(a,n.value)),o.annotationElementId=n.id||null,o._initialData=s,o}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=We._internalPadding*this.parentScale,r=this.getRect(i,i),s=ot._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:h(this,ji)),o={annotationType:_e.FREETEXT,color:s,fontSize:h(this,ti),value:C(this,St,WN).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?o:this.annotationElementId&&!C(this,St,KN).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(n){const i=super.renderAnnotationElement(n);if(this.deleted)return i;const{style:r}=i;r.fontSize=`calc(${h(this,ti)}px * var(--scale-factor))`,r.color=h(this,ji),i.replaceChildren();for(const o of h(this,ei).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),i.append(a)}const s=We._internalPadding*this.parentScale;return n.updateEdited({rect:this.getRect(s,s),popupContent:h(this,ei)}),i}resetAnnotationElement(n){super.resetAnnotationElement(n),n.resetEdited()}};ji=new WeakMap,ei=new WeakMap,jf=new WeakMap,ul=new WeakMap,ti=new WeakMap,St=new WeakSet,$N=function(n){const i=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-h(this,ti))*this.parentScale),S(this,ti,s),C(this,St,Xg).call(this)},r=h(this,ti);this.addCommands({cmd:i.bind(this,n),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},VN=function(n){const i=s=>{S(this,ji,this.editorDiv.style.color=s)},r=h(this,ji);this.addCommands({cmd:i.bind(this,n),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},qN=function(){var r;const n=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(n.push(C(r=We,Ds,Jg).call(r,s)),i=s);return n.join(`
`)},Xg=function(){const[n,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",s.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/n,this.height=r.height/i):(this.width=r.height/n,this.height=r.width/i),this.fixAndSetPosition()},Ds=new WeakSet,Jg=function(n){return(n.nodeType===Node.TEXT_NODE?n.nodeValue:n.innerText).replaceAll(tg,"")},Qg=function(){if(this.editorDiv.replaceChildren(),!!h(this,ei))for(const n of h(this,ei).split(`
`)){const i=document.createElement("div");i.append(n?document.createTextNode(n):document.createElement("br")),this.editorDiv.append(i)}},WN=function(){return h(this,ei).replaceAll(""," ")},n0=function(n){return n.replaceAll(" ","")},KN=function(n){const{value:i,fontSize:r,color:s,pageIndex:o}=this._initialData;return this._hasBeenMoved||n.value!==i||n.fontSize!==r||n.color.some((a,l)=>a!==s[l])||n.pageIndex!==o},x(We,Ds),ce(We,"_freeTextDefaultContent",""),ce(We,"_internalPadding",0),ce(We,"_defaultColor",null),ce(We,"_defaultFontSize",10),ce(We,"_type","freetext"),ce(We,"_editorType",_e.FREETEXT);let t0=We;class ne{toSVGPath(){Ve("Abstract method `toSVGPath` must be implemented.")}get box(){Ve("Abstract getter `box` must be implemented.")}serialize(e,n){Ve("Abstract method `serialize` must be implemented.")}static _rescale(e,n,i,r,s,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=n+e[a]*r,o[a+1]=i+e[a+1]*s;return o}static _rescaleAndSwap(e,n,i,r,s,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=n+e[a+1]*r,o[a+1]=i+e[a]*s;return o}static _translate(e,n,i,r){r||(r=new Float32Array(e.length));for(let s=0,o=e.length;s<o;s+=2)r[s]=n+e[s],r[s+1]=i+e[s+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,n,i,r,s){switch(s){case 90:return[1-n/i,e/r];case 180:return[1-e/i,1-n/r];case 270:return[n/i,1-e/r];default:return[e/i,n/r]}}static _normalizePagePoint(e,n,i){switch(i){case 90:return[1-n,e];case 180:return[1-e,1-n];case 270:return[n,1-e];default:return[e,n]}}static createBezierPoints(e,n,i,r,s,o){return[(e+5*i)/6,(n+5*r)/6,(5*i+s)/6,(5*r+o)/6,(i+s)/2,(r+o)/2]}}ce(ne,"PRECISION",1e-4);var ni,er,xc,Tc,Fr,Se,cl,dl,ep,tp,Cc,kc,So,np,Ey,by,Rt,Qd,YN,XN,JN,QN,ZN,jN;const is=class is{constructor({x:e,y:n},i,r,s,o,a=0){x(this,Rt);x(this,ni);x(this,er,[]);x(this,xc);x(this,Tc);x(this,Fr,[]);x(this,Se,new Float32Array(18));x(this,cl);x(this,dl);x(this,ep);x(this,tp);x(this,Cc);x(this,kc);x(this,So,[]);S(this,ni,i),S(this,kc,s*r),S(this,Tc,o),h(this,Se).set([NaN,NaN,NaN,NaN,e,n],6),S(this,xc,a),S(this,tp,h(is,np)*r),S(this,ep,h(is,by)*r),S(this,Cc,r),h(this,So).push(e,n)}isEmpty(){return isNaN(h(this,Se)[8])}add({x:e,y:n}){var F;S(this,cl,e),S(this,dl,n);const[i,r,s,o]=h(this,ni);let[a,l,u,c]=h(this,Se).subarray(8,12);const d=e-u,f=n-c,g=Math.hypot(d,f);if(g<h(this,ep))return!1;const y=g-h(this,tp),v=y/g,E=v*d,_=v*f;let b=a,w=l;a=u,l=c,u+=E,c+=_,(F=h(this,So))==null||F.push(e,n);const A=-_/y,k=E/y,T=A*h(this,kc),N=k*h(this,kc);return h(this,Se).set(h(this,Se).subarray(2,8),0),h(this,Se).set([u+T,c+N],4),h(this,Se).set(h(this,Se).subarray(14,18),12),h(this,Se).set([u-T,c-N],16),isNaN(h(this,Se)[6])?(h(this,Fr).length===0&&(h(this,Se).set([a+T,l+N],2),h(this,Fr).push(NaN,NaN,NaN,NaN,(a+T-i)/s,(l+N-r)/o),h(this,Se).set([a-T,l-N],14),h(this,er).push(NaN,NaN,NaN,NaN,(a-T-i)/s,(l-N-r)/o)),h(this,Se).set([b,w,a,l,u,c],6),!this.isEmpty()):(h(this,Se).set([b,w,a,l,u,c],6),Math.abs(Math.atan2(w-l,b-a)-Math.atan2(_,E))<Math.PI/2?([a,l,u,c]=h(this,Se).subarray(2,6),h(this,Fr).push(NaN,NaN,NaN,NaN,((a+u)/2-i)/s,((l+c)/2-r)/o),[a,l,b,w]=h(this,Se).subarray(14,18),h(this,er).push(NaN,NaN,NaN,NaN,((b+a)/2-i)/s,((w+l)/2-r)/o),!0):([b,w,a,l,u,c]=h(this,Se).subarray(0,6),h(this,Fr).push(((b+5*a)/6-i)/s,((w+5*l)/6-r)/o,((5*a+u)/6-i)/s,((5*l+c)/6-r)/o,((a+u)/2-i)/s,((l+c)/2-r)/o),[u,c,a,l,b,w]=h(this,Se).subarray(12,18),h(this,er).push(((b+5*a)/6-i)/s,((w+5*l)/6-r)/o,((5*a+u)/6-i)/s,((5*l+c)/6-r)/o,((a+u)/2-i)/s,((l+c)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=h(this,Fr),n=h(this,er);if(isNaN(h(this,Se)[6])&&!this.isEmpty())return C(this,Rt,YN).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);C(this,Rt,JN).call(this,i);for(let r=n.length-6;r>=6;r-=6)isNaN(n[r])?i.push(`L${n[r+4]} ${n[r+5]}`):i.push(`C${n[r]} ${n[r+1]} ${n[r+2]} ${n[r+3]} ${n[r+4]} ${n[r+5]}`);return C(this,Rt,XN).call(this,i),i.join(" ")}newFreeDrawOutline(e,n,i,r,s,o){return new e1(e,n,i,r,s,o)}getOutlines(){var d;const e=h(this,Fr),n=h(this,er),i=h(this,Se),[r,s,o,a]=h(this,ni),l=new Float32Array((((d=h(this,So))==null?void 0:d.length)??0)+2);for(let f=0,g=l.length-2;f<g;f+=2)l[f]=(h(this,So)[f]-r)/o,l[f+1]=(h(this,So)[f+1]-s)/a;if(l[l.length-2]=(h(this,cl)-r)/o,l[l.length-1]=(h(this,dl)-s)/a,isNaN(i[6])&&!this.isEmpty())return C(this,Rt,QN).call(this,l);const u=new Float32Array(h(this,Fr).length+24+h(this,er).length);let c=e.length;for(let f=0;f<c;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}c=C(this,Rt,jN).call(this,u,c);for(let f=n.length-6;f>=6;f-=6)for(let g=0;g<6;g+=2){if(isNaN(n[f+g])){u[c]=u[c+1]=NaN,c+=2;continue}u[c]=n[f+g],u[c+1]=n[f+g+1],c+=2}return C(this,Rt,ZN).call(this,u,c),this.newFreeDrawOutline(u,l,h(this,ni),h(this,Cc),h(this,xc),h(this,Tc))}};ni=new WeakMap,er=new WeakMap,xc=new WeakMap,Tc=new WeakMap,Fr=new WeakMap,Se=new WeakMap,cl=new WeakMap,dl=new WeakMap,ep=new WeakMap,tp=new WeakMap,Cc=new WeakMap,kc=new WeakMap,So=new WeakMap,np=new WeakMap,Ey=new WeakMap,by=new WeakMap,Rt=new WeakSet,Qd=function(){const e=h(this,Se).subarray(4,6),n=h(this,Se).subarray(16,18),[i,r,s,o]=h(this,ni);return[(h(this,cl)+(e[0]-n[0])/2-i)/s,(h(this,dl)+(e[1]-n[1])/2-r)/o,(h(this,cl)+(n[0]-e[0])/2-i)/s,(h(this,dl)+(n[1]-e[1])/2-r)/o]},YN=function(){const[e,n,i,r]=h(this,ni),[s,o,a,l]=C(this,Rt,Qd).call(this);return`M${(h(this,Se)[2]-e)/i} ${(h(this,Se)[3]-n)/r} L${(h(this,Se)[4]-e)/i} ${(h(this,Se)[5]-n)/r} L${s} ${o} L${a} ${l} L${(h(this,Se)[16]-e)/i} ${(h(this,Se)[17]-n)/r} L${(h(this,Se)[14]-e)/i} ${(h(this,Se)[15]-n)/r} Z`},XN=function(e){const n=h(this,er);e.push(`L${n[4]} ${n[5]} Z`)},JN=function(e){const[n,i,r,s]=h(this,ni),o=h(this,Se).subarray(4,6),a=h(this,Se).subarray(16,18),[l,u,c,d]=C(this,Rt,Qd).call(this);e.push(`L${(o[0]-n)/r} ${(o[1]-i)/s} L${l} ${u} L${c} ${d} L${(a[0]-n)/r} ${(a[1]-i)/s}`)},QN=function(e){const n=h(this,Se),[i,r,s,o]=h(this,ni),[a,l,u,c]=C(this,Rt,Qd).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(n[2]-i)/s,(n[3]-r)/o,NaN,NaN,NaN,NaN,(n[4]-i)/s,(n[5]-r)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,(n[16]-i)/s,(n[17]-r)/o,NaN,NaN,NaN,NaN,(n[14]-i)/s,(n[15]-r)/o],0),this.newFreeDrawOutline(d,e,h(this,ni),h(this,Cc),h(this,xc),h(this,Tc))},ZN=function(e,n){const i=h(this,er);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],n),n+=6},jN=function(e,n){const i=h(this,Se).subarray(4,6),r=h(this,Se).subarray(16,18),[s,o,a,l]=h(this,ni),[u,c,d,f]=C(this,Rt,Qd).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-o)/l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(r[0]-s)/a,(r[1]-o)/l],n),n+=24},x(is,np,8),x(is,Ey,2),x(is,by,h(is,np)+h(is,Ey));let $m=is;var Ic,hl,Ss,ip,ii,rp,pt,wy,t1;class e1 extends ne{constructor(n,i,r,s,o,a){super();x(this,wy);x(this,Ic);x(this,hl,new Float32Array(4));x(this,Ss);x(this,ip);x(this,ii);x(this,rp);x(this,pt);S(this,pt,n),S(this,ii,i),S(this,Ic,r),S(this,rp,s),S(this,Ss,o),S(this,ip,a),this.lastPoint=[NaN,NaN],C(this,wy,t1).call(this,a);const[l,u,c,d]=h(this,hl);for(let f=0,g=n.length;f<g;f+=2)n[f]=(n[f]-l)/c,n[f+1]=(n[f+1]-u)/d;for(let f=0,g=i.length;f<g;f+=2)i[f]=(i[f]-l)/c,i[f+1]=(i[f+1]-u)/d}toSVGPath(){const n=[`M${h(this,pt)[4]} ${h(this,pt)[5]}`];for(let i=6,r=h(this,pt).length;i<r;i+=6){if(isNaN(h(this,pt)[i])){n.push(`L${h(this,pt)[i+4]} ${h(this,pt)[i+5]}`);continue}n.push(`C${h(this,pt)[i]} ${h(this,pt)[i+1]} ${h(this,pt)[i+2]} ${h(this,pt)[i+3]} ${h(this,pt)[i+4]} ${h(this,pt)[i+5]}`)}return n.push("Z"),n.join(" ")}serialize([n,i,r,s],o){const a=r-n,l=s-i;let u,c;switch(o){case 0:u=ne._rescale(h(this,pt),n,s,a,-l),c=ne._rescale(h(this,ii),n,s,a,-l);break;case 90:u=ne._rescaleAndSwap(h(this,pt),n,i,a,l),c=ne._rescaleAndSwap(h(this,ii),n,i,a,l);break;case 180:u=ne._rescale(h(this,pt),r,i,-a,l),c=ne._rescale(h(this,ii),r,i,-a,l);break;case 270:u=ne._rescaleAndSwap(h(this,pt),r,s,-a,-l),c=ne._rescaleAndSwap(h(this,ii),r,s,-a,-l);break}return{outline:Array.from(u),points:[Array.from(c)]}}get box(){return h(this,hl)}newOutliner(n,i,r,s,o,a=0){return new $m(n,i,r,s,o,a)}getNewOutline(n,i){const[r,s,o,a]=h(this,hl),[l,u,c,d]=h(this,Ic),f=o*c,g=a*d,y=r*c+l,v=s*d+u,E=this.newOutliner({x:h(this,ii)[0]*f+y,y:h(this,ii)[1]*g+v},h(this,Ic),h(this,rp),n,h(this,ip),i??h(this,Ss));for(let _=2;_<h(this,ii).length;_+=2)E.add({x:h(this,ii)[_]*f+y,y:h(this,ii)[_+1]*g+v});return E.getOutlines()}}Ic=new WeakMap,hl=new WeakMap,Ss=new WeakMap,ip=new WeakMap,ii=new WeakMap,rp=new WeakMap,pt=new WeakMap,wy=new WeakSet,t1=function(n){const i=h(this,pt);let r=i[4],s=i[5],o=r,a=s,l=r,u=s,c=r,d=s;const f=n?Math.max:Math.min;for(let y=6,v=i.length;y<v;y+=6){if(isNaN(i[y]))o=Math.min(o,i[y+4]),a=Math.min(a,i[y+5]),l=Math.max(l,i[y+4]),u=Math.max(u,i[y+5]),d<i[y+5]?(c=i[y+4],d=i[y+5]):d===i[y+5]&&(c=f(c,i[y+4]));else{const E=ae.bezierBoundingBox(r,s,...i.slice(y,y+6));o=Math.min(o,E[0]),a=Math.min(a,E[1]),l=Math.max(l,E[2]),u=Math.max(u,E[3]),d<E[3]?(c=E[2],d=E[3]):d===E[3]&&(c=f(c,E[2]))}r=i[y+4],s=i[y+5]}const g=h(this,hl);g[0]=o-h(this,Ss),g[1]=a-h(this,Ss),g[2]=l-o+2*h(this,Ss),g[3]=u-a+2*h(this,Ss),this.lastPoint=[c,d]};var sp,op,Ao,tr,kn,n1,Zg,i1,r1,r0;class i0{constructor(e,n=0,i=0,r=!0){x(this,kn);x(this,sp);x(this,op);x(this,Ao,[]);x(this,tr,[]);let s=1/0,o=-1/0,a=1/0,l=-1/0;const u=10**-4;for(const{x:E,y:_,width:b,height:w}of e){const A=Math.floor((E-n)/u)*u,k=Math.ceil((E+b+n)/u)*u,T=Math.floor((_-n)/u)*u,N=Math.ceil((_+w+n)/u)*u,L=[A,T,N,!0],F=[k,T,N,!1];h(this,Ao).push(L,F),s=Math.min(s,A),o=Math.max(o,k),a=Math.min(a,T),l=Math.max(l,N)}const c=o-s+2*i,d=l-a+2*i,f=s-i,g=a-i,y=h(this,Ao).at(r?-1:-2),v=[y[0],y[2]];for(const E of h(this,Ao)){const[_,b,w]=E;E[0]=(_-f)/c,E[1]=(b-g)/d,E[2]=(w-g)/d}S(this,sp,new Float32Array([f,g,c,d])),S(this,op,v)}getOutlines(){h(this,Ao).sort((n,i)=>n[0]-i[0]||n[1]-i[1]||n[2]-i[2]);const e=[];for(const n of h(this,Ao))n[3]?(e.push(...C(this,kn,r0).call(this,n)),C(this,kn,i1).call(this,n)):(C(this,kn,r1).call(this,n),e.push(...C(this,kn,r0).call(this,n)));return C(this,kn,n1).call(this,e)}}sp=new WeakMap,op=new WeakMap,Ao=new WeakMap,tr=new WeakMap,kn=new WeakSet,n1=function(e){const n=[],i=new Set;for(const o of e){const[a,l,u]=o;n.push([a,l,o],[a,u,o])}n.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=n.length;o<a;o+=2){const l=n[o][2],u=n[o+1][2];l.push(u),u.push(l),i.add(l),i.add(u)}const r=[];let s;for(;i.size>0;){const o=i.values().next().value;let[a,l,u,c,d]=o;i.delete(o);let f=a,g=l;for(s=[a,u],r.push(s);;){let y;if(i.has(c))y=c;else if(i.has(d))y=d;else break;i.delete(y),[a,l,u,c,d]=y,f!==a&&(s.push(f,g,a,g===l?l:u),f=a),g=g===l?u:l}s.push(f,g)}return new wB(r,h(this,sp),h(this,op))},Zg=function(e){const n=h(this,tr);let i=0,r=n.length-1;for(;i<=r;){const s=i+r>>1,o=n[s][0];if(o===e)return s;o<e?i=s+1:r=s-1}return r+1},i1=function([,e,n]){const i=C(this,kn,Zg).call(this,e);h(this,tr).splice(i,0,[e,n])},r1=function([,e,n]){const i=C(this,kn,Zg).call(this,e);for(let r=i;r<h(this,tr).length;r++){const[s,o]=h(this,tr)[r];if(s!==e)break;if(s===e&&o===n){h(this,tr).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[s,o]=h(this,tr)[r];if(s!==e)break;if(s===e&&o===n){h(this,tr).splice(r,1);return}}},r0=function(e){const[n,i,r]=e,s=[[n,i,r]],o=C(this,kn,Zg).call(this,r);for(let a=0;a<o;a++){const[l,u]=h(this,tr)[a];for(let c=0,d=s.length;c<d;c++){const[,f,g]=s[c];if(!(u<=f||g<=l)){if(f>=l){if(g>u)s[c][1]=u;else{if(d===1)return[];s.splice(c,1),c--,d--}continue}s[c][2]=l,g>u&&s.push([n,u,g])}}}return s};var ap,Rc;class wB extends ne{constructor(n,i,r){super();x(this,ap);x(this,Rc);S(this,Rc,n),S(this,ap,i),this.lastPoint=r}toSVGPath(){const n=[];for(const i of h(this,Rc)){let[r,s]=i;n.push(`M${r} ${s}`);for(let o=2;o<i.length;o+=2){const a=i[o],l=i[o+1];a===r?(n.push(`V${l}`),s=l):l===s&&(n.push(`H${a}`),r=a)}n.push("Z")}return n.join(" ")}serialize([n,i,r,s],o){const a=[],l=r-n,u=s-i;for(const c of h(this,Rc)){const d=new Array(c.length);for(let f=0;f<c.length;f+=2)d[f]=n+c[f]*l,d[f+1]=s-c[f+1]*u;a.push(d)}return a}get box(){return h(this,ap)}get classNamesForOutlining(){return["highlightOutline"]}}ap=new WeakMap,Rc=new WeakMap;class s0 extends $m{newFreeDrawOutline(e,n,i,r,s,o){return new SB(e,n,i,r,s,o)}}class SB extends e1{newOutliner(e,n,i,r,s,o=0){return new s0(e,n,i,r,s,o)}}var nr,fl,Nc,Ct,lp,Mc,up,cp,xo,ir,Pc,dp,He,o0,a0,l0,pa,s1,Qs;const Dn=class Dn{constructor({editor:e=null,uiManager:n=null}){x(this,He);x(this,nr,null);x(this,fl,null);x(this,Nc);x(this,Ct,null);x(this,lp,!1);x(this,Mc,!1);x(this,up,null);x(this,cp);x(this,xo,null);x(this,ir,null);x(this,Pc);var i;e?(S(this,Mc,!1),S(this,Pc,Ce.HIGHLIGHT_COLOR),S(this,up,e)):(S(this,Mc,!0),S(this,Pc,Ce.HIGHLIGHT_DEFAULT_COLOR)),S(this,ir,(e==null?void 0:e._uiManager)||n),S(this,cp,h(this,ir)._eventBus),S(this,Nc,(e==null?void 0:e.color)||((i=h(this,ir))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),h(Dn,dp)||S(Dn,dp,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ae(this,"_keyboardManager",new Cp([[["Escape","mac+Escape"],Dn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Dn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Dn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Dn.prototype._moveToPrevious],[["Home","mac+Home"],Dn.prototype._moveToBeginning],[["End","mac+End"],Dn.prototype._moveToEnd]]))}renderButton(){const e=S(this,nr,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const n=h(this,ir)._signal;e.addEventListener("click",C(this,He,pa).bind(this),{signal:n}),e.addEventListener("keydown",C(this,He,l0).bind(this),{signal:n});const i=S(this,fl,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=h(this,Nc),e.append(i),e}renderMainDropdown(){const e=S(this,Ct,C(this,He,o0).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===h(this,nr)){C(this,He,pa).call(this,e);return}const n=e.target.getAttribute("data-color");n&&C(this,He,a0).call(this,n,e)}_moveToNext(e){var n,i;if(!h(this,He,Qs)){C(this,He,pa).call(this,e);return}if(e.target===h(this,nr)){(n=h(this,Ct).firstChild)==null||n.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var n,i;if(e.target===((n=h(this,Ct))==null?void 0:n.firstChild)||e.target===h(this,nr)){h(this,He,Qs)&&this._hideDropdownFromKeyboard();return}h(this,He,Qs)||C(this,He,pa).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var n;if(!h(this,He,Qs)){C(this,He,pa).call(this,e);return}(n=h(this,Ct).firstChild)==null||n.focus()}_moveToEnd(e){var n;if(!h(this,He,Qs)){C(this,He,pa).call(this,e);return}(n=h(this,Ct).lastChild)==null||n.focus()}hideDropdown(){var e,n;(e=h(this,Ct))==null||e.classList.add("hidden"),(n=h(this,xo))==null||n.abort(),S(this,xo,null)}_hideDropdownFromKeyboard(){var e;if(!h(this,Mc)){if(!h(this,He,Qs)){(e=h(this,up))==null||e.unselect();return}this.hideDropdown(),h(this,nr).focus({preventScroll:!0,focusVisible:h(this,lp)})}}updateColor(e){if(h(this,fl)&&(h(this,fl).style.backgroundColor=e),!h(this,Ct))return;const n=h(this,ir).highlightColors.values();for(const i of h(this,Ct).children)i.setAttribute("aria-selected",n.next().value===e)}destroy(){var e,n;(e=h(this,nr))==null||e.remove(),S(this,nr,null),S(this,fl,null),(n=h(this,Ct))==null||n.remove(),S(this,Ct,null)}};nr=new WeakMap,fl=new WeakMap,Nc=new WeakMap,Ct=new WeakMap,lp=new WeakMap,Mc=new WeakMap,up=new WeakMap,cp=new WeakMap,xo=new WeakMap,ir=new WeakMap,Pc=new WeakMap,dp=new WeakMap,He=new WeakSet,o0=function(){const e=document.createElement("div"),n=h(this,ir)._signal;e.addEventListener("contextmenu",mr,{signal:n}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of h(this,ir).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=i,s.setAttribute("data-l10n-id",h(Dn,dp)[i]);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=r,s.setAttribute("aria-selected",r===h(this,Nc)),s.addEventListener("click",C(this,He,a0).bind(this,r),{signal:n}),e.append(s)}return e.addEventListener("keydown",C(this,He,l0).bind(this),{signal:n}),e},a0=function(e,n){n.stopPropagation(),h(this,cp).dispatch("switchannotationeditorparams",{source:this,type:h(this,Pc),value:e})},l0=function(e){Dn._keyboardManager.exec(this,e)},pa=function(e){if(h(this,He,Qs)){this.hideDropdown();return}if(S(this,lp,e.detail===0),h(this,xo)||(S(this,xo,new AbortController),window.addEventListener("pointerdown",C(this,He,s1).bind(this),{signal:h(this,ir).combinedSignal(h(this,xo))})),h(this,Ct)){h(this,Ct).classList.remove("hidden");return}const n=S(this,Ct,C(this,He,o0).call(this));h(this,nr).append(n)},s1=function(e){var n;(n=h(this,Ct))!=null&&n.contains(e.target)||this.hideDropdown()},Qs=function(){return h(this,Ct)&&!h(this,Ct).classList.contains("hidden")},x(Dn,dp,null);let Vm=Dn;var Lc,hp,As,pl,Dc,Un,fp,pp,gl,xi,ri,$t,Oc,xs,rn,Fc,Ti,gp,ye,u0,jg,o1,a1,l1,c0,ga,Pi,cu,u1,em,Zd,c1,d1,h1,f1,p1;const De=class De extends ot{constructor(n){super({...n,name:"highlightEditor"});x(this,ye);x(this,Lc,null);x(this,hp,0);x(this,As);x(this,pl,null);x(this,Dc,null);x(this,Un,null);x(this,fp,null);x(this,pp,0);x(this,gl,null);x(this,xi,null);x(this,ri,null);x(this,$t,!1);x(this,Oc,null);x(this,xs);x(this,rn,null);x(this,Fc,"");x(this,Ti);x(this,gp,"");this.color=n.color||De._defaultColor,S(this,Ti,n.thickness||De._defaultThickness),S(this,xs,n.opacity||De._defaultOpacity),S(this,As,n.boxes||null),S(this,gp,n.methodOfCreation||""),S(this,Fc,n.text||""),this._isDraggable=!1,n.highlightId>-1?(S(this,$t,!0),C(this,ye,jg).call(this,n),C(this,ye,ga).call(this)):h(this,As)&&(S(this,Lc,n.anchorNode),S(this,hp,n.anchorOffset),S(this,fp,n.focusNode),S(this,pp,n.focusOffset),C(this,ye,u0).call(this),C(this,ye,ga).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const n=De.prototype;return Ae(this,"_keyboardManager",new Cp([[["ArrowLeft","mac+ArrowLeft"],n._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],n._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],n._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],n._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:h(this,$t)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:h(this,Ti),methodOfCreation:h(this,gp)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(n){return{numberOfColors:n.get("color").size}}static initialize(n,i){var r;ot.initialize(n,i),De._defaultColor||(De._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(n,i){switch(n){case Ce.HIGHLIGHT_DEFAULT_COLOR:De._defaultColor=i;break;case Ce.HIGHLIGHT_THICKNESS:De._defaultThickness=i;break}}translateInPage(n,i){}get toolbarPosition(){return h(this,Oc)}updateParams(n,i){switch(n){case Ce.HIGHLIGHT_COLOR:C(this,ye,o1).call(this,i);break;case Ce.HIGHLIGHT_THICKNESS:C(this,ye,a1).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ce.HIGHLIGHT_DEFAULT_COLOR,De._defaultColor],[Ce.HIGHLIGHT_THICKNESS,De._defaultThickness]]}get propertiesToUpdate(){return[[Ce.HIGHLIGHT_COLOR,this.color||De._defaultColor],[Ce.HIGHLIGHT_THICKNESS,h(this,Ti)||De._defaultThickness],[Ce.HIGHLIGHT_FREE,h(this,$t)]]}async addEditToolbar(){const n=await super.addEditToolbar();return n?(this._uiManager.highlightColors&&(S(this,Dc,new Vm({editor:this})),n.addColorPicker(h(this,Dc))),n):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,ye,Zd).call(this))}getBaseTranslation(){return[0,0]}getRect(n,i){return super.getRect(n,i,C(this,ye,Zd).call(this))}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),n&&this.div.focus()}remove(){C(this,ye,c0).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,ye,ga).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var r;let i=!1;this.parent&&!n?C(this,ye,c0).call(this):n&&(C(this,ye,ga).call(this,n),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(n),this.show(this._isVisible),i&&this.select()}rotate(n){var s,o,a;const{drawLayer:i}=this.parent;let r;h(this,$t)?(n=(n-this.rotation+360)%360,r=C(s=De,Pi,cu).call(s,h(this,xi).box,n)):r=C(o=De,Pi,cu).call(o,[this.x,this.y,this.width,this.height],n),i.updateProperties(h(this,ri),{bbox:r,root:{"data-main-rotation":n}}),i.updateProperties(h(this,rn),{bbox:C(a=De,Pi,cu).call(a,h(this,Un).box,n),root:{"data-main-rotation":n}})}render(){if(this.div)return this.div;const n=super.render();h(this,Fc)&&(n.setAttribute("aria-label",h(this,Fc)),n.setAttribute("role","mark")),h(this,$t)?n.classList.add("free"):this.div.addEventListener("keydown",C(this,ye,u1).bind(this),{signal:this._uiManager._signal});const i=S(this,gl,document.createElement("div"));n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=h(this,pl);const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),zm(this,h(this,gl),["pointerover","pointerleave"]),this.enableEditing(),n}pointerover(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(h(this,rn),{rootClass:{hovered:!0}})}pointerleave(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(h(this,rn),{rootClass:{hovered:!1}})}_moveCaret(n){switch(this.parent.unselect(this),n){case 0:case 2:C(this,ye,em).call(this,!0);break;case 1:case 3:C(this,ye,em).call(this,!1);break}}select(){var n;super.select(),h(this,rn)&&((n=this.parent)==null||n.drawLayer.updateProperties(h(this,rn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var n;super.unselect(),h(this,rn)&&((n=this.parent)==null||n.drawLayer.updateProperties(h(this,rn),{rootClass:{selected:!1}}),h(this,$t)||C(this,ye,em).call(this,!1))}get _mustFixPosition(){return!h(this,$t)}show(n=this._isVisible){super.show(n),this.parent&&(this.parent.drawLayer.updateProperties(h(this,ri),{rootClass:{hidden:!n}}),this.parent.drawLayer.updateProperties(h(this,rn),{rootClass:{hidden:!n}}))}static startHighlighting(n,i,{target:r,x:s,y:o}){const{x:a,y:l,width:u,height:c}=r.getBoundingClientRect(),d=new AbortController,f=n.combinedSignal(d),g=y=>{d.abort(),C(this,Pi,f1).call(this,n,y)};window.addEventListener("blur",g,{signal:f}),window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("pointerdown",di,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",mr,{signal:f}),r.addEventListener("pointermove",C(this,Pi,h1).bind(this,n),{signal:f}),this._freeHighlight=new s0({x:s,y:o},[a,l,u,c],n.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(n,i,r){var v,E,_,b;let s=null;if(n instanceof zN){const{data:{quadPoints:w,rect:A,rotation:k,id:T,color:N,opacity:L,popupRef:F},parent:{page:{pageNumber:R}}}=n;s=n={annotationType:_e.HIGHLIGHT,color:Array.from(N),opacity:L,quadPoints:w,boxes:null,pageIndex:R-1,rect:A.slice(0),rotation:k,id:T,deleted:!1,popupRef:F}}else if(n instanceof hw){const{data:{inkLists:w,rect:A,rotation:k,id:T,color:N,borderStyle:{rawWidth:L},popupRef:F},parent:{page:{pageNumber:R}}}=n;s=n={annotationType:_e.HIGHLIGHT,color:Array.from(N),thickness:L,inkLists:w,boxes:null,pageIndex:R-1,rect:A.slice(0),rotation:k,id:T,deleted:!1,popupRef:F}}const{color:o,quadPoints:a,inkLists:l,opacity:u}=n,c=await super.deserialize(n,i,r);c.color=ae.makeHexColor(...o),S(c,xs,u||1),l&&S(c,Ti,n.thickness),c.annotationElementId=n.id||null,c._initialData=s;const[d,f]=c.pageDimensions,[g,y]=c.pageTranslation;if(a){const w=S(c,As,[]);for(let A=0;A<a.length;A+=8)w.push({x:(a[A]-g)/d,y:1-(a[A+1]-y)/f,width:(a[A+2]-a[A])/d,height:(a[A+1]-a[A+5])/f});C(v=c,ye,u0).call(v),C(E=c,ye,ga).call(E),c.rotate(c.rotation)}else if(l){S(c,$t,!0);const w=l[0],A={x:w[0]-g,y:f-(w[1]-y)},k=new s0(A,[0,0,d,f],1,h(c,Ti)/2,!0,.001);for(let L=0,F=w.length;L<F;L+=2)A.x=w[L]-g,A.y=f-(w[L+1]-y),k.add(A);const{id:T,clipPathId:N}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:k.toSVGPath()}},!0,!0);C(_=c,ye,jg).call(_,{highlightOutlines:k.getOutlines(),highlightId:T,clipPathId:N}),C(b=c,ye,ga).call(b)}return c}serialize(n=!1){if(this.isEmpty()||n)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),r=ot._colorManager.convert(this.color),s={annotationType:_e.HIGHLIGHT,color:r,opacity:h(this,xs),thickness:h(this,Ti),quadPoints:C(this,ye,c1).call(this),outlines:C(this,ye,d1).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:C(this,ye,Zd).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!C(this,ye,p1).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Lc=new WeakMap,hp=new WeakMap,As=new WeakMap,pl=new WeakMap,Dc=new WeakMap,Un=new WeakMap,fp=new WeakMap,pp=new WeakMap,gl=new WeakMap,xi=new WeakMap,ri=new WeakMap,$t=new WeakMap,Oc=new WeakMap,xs=new WeakMap,rn=new WeakMap,Fc=new WeakMap,Ti=new WeakMap,gp=new WeakMap,ye=new WeakSet,u0=function(){const n=new i0(h(this,As),.001);S(this,xi,n.getOutlines()),[this.x,this.y,this.width,this.height]=h(this,xi).box;const i=new i0(h(this,As),.0025,.001,this._uiManager.direction==="ltr");S(this,Un,i.getOutlines());const{lastPoint:r}=h(this,Un);S(this,Oc,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},jg=function({highlightOutlines:n,highlightId:i,clipPathId:r}){var d,f;if(S(this,xi,n),S(this,Un,n.getNewOutline(h(this,Ti)/2+1.5,.0025)),i>=0)S(this,ri,i),S(this,pl,r),this.parent.drawLayer.finalizeDraw(i,{bbox:n.box,path:{d:n.toSVGPath()}}),S(this,rn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:h(this,Un).box,path:{d:h(this,Un).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(h(this,ri),{bbox:C(d=De,Pi,cu).call(d,h(this,xi).box,(g-this.rotation+360)%360),path:{d:n.toSVGPath()}}),this.parent.drawLayer.updateProperties(h(this,rn),{bbox:C(f=De,Pi,cu).call(f,h(this,Un).box,g),path:{d:h(this,Un).toSVGPath()}})}const[o,a,l,u]=n.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=u;break;case 90:{const[g,y]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*y/g,this.height=u*g/y;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=u;break;case 270:{const[g,y]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*y/g,this.height=u*g/y;break}}const{lastPoint:c}=h(this,Un);S(this,Oc,[(c[0]-o)/l,(c[1]-a)/u])},o1=function(n){const i=(o,a)=>{var l,u;this.color=o,S(this,xs,a),(l=this.parent)==null||l.drawLayer.updateProperties(h(this,ri),{root:{fill:o,"fill-opacity":a}}),(u=h(this,Dc))==null||u.updateColor(o)},r=this.color,s=h(this,xs);this.addCommands({cmd:i.bind(this,n,De._defaultOpacity),undo:i.bind(this,r,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(n)},!0)},a1=function(n){const i=h(this,Ti),r=s=>{S(this,Ti,s),C(this,ye,l1).call(this,s)};this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:n},!0)},l1=function(n){if(!h(this,$t))return;C(this,ye,jg).call(this,{highlightOutlines:h(this,xi).getNewOutline(n/2)}),this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)},c0=function(){h(this,ri)===null||!this.parent||(this.parent.drawLayer.remove(h(this,ri)),S(this,ri,null),this.parent.drawLayer.remove(h(this,rn)),S(this,rn,null))},ga=function(n=this.parent){h(this,ri)===null&&({id:pn(this,ri)._,clipPathId:pn(this,pl)._}=n.drawLayer.draw({bbox:h(this,xi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":h(this,xs)},rootClass:{highlight:!0,free:h(this,$t)},path:{d:h(this,xi).toSVGPath()}},!1,!0),S(this,rn,n.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:h(this,$t)},bbox:h(this,Un).box,path:{d:h(this,Un).toSVGPath()}},h(this,$t))),h(this,gl)&&(h(this,gl).style.clipPath=h(this,pl)))},Pi=new WeakSet,cu=function([n,i,r,s],o){switch(o){case 90:return[1-i-s,n,s,r];case 180:return[1-n-r,1-i-s,r,s];case 270:return[i,1-n-r,s,r]}return[n,i,r,s]},u1=function(n){De._keyboardManager.exec(this,n)},em=function(n){if(!h(this,Lc))return;const i=window.getSelection();n?i.setPosition(h(this,Lc),h(this,hp)):i.setPosition(h(this,fp),h(this,pp))},Zd=function(){return h(this,$t)?this.rotation:0},c1=function(){if(h(this,$t))return null;const[n,i]=this.pageDimensions,[r,s]=this.pageTranslation,o=h(this,As),a=new Float32Array(o.length*8);let l=0;for(const{x:u,y:c,width:d,height:f}of o){const g=u*n+r,y=(1-c)*i+s;a[l]=a[l+4]=g,a[l+1]=a[l+3]=y,a[l+2]=a[l+6]=g+d*n,a[l+5]=a[l+7]=y-f*i,l+=8}return a},d1=function(n){return h(this,xi).serialize(n,C(this,ye,Zd).call(this))},h1=function(n,i){this._freeHighlight.add(i)&&n.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},f1=function(n,i){this._freeHighlight.isEmpty()?n.drawLayer.remove(this._freeHighlightId):n.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},p1=function(n){const{color:i}=this._initialData;return n.color.some((r,s)=>r!==i[s])},x(De,Pi),ce(De,"_defaultColor",null),ce(De,"_defaultOpacity",1),ce(De,"_defaultThickness",12),ce(De,"_type","highlight"),ce(De,"_editorType",_e.HIGHLIGHT),ce(De,"_freeHighlightId",-1),ce(De,"_freeHighlight",null),ce(De,"_freeHighlightClipId","");let qm=De;var ml;class AB{constructor(){x(this,ml,Object.create(null))}updateProperty(e,n){this[e]=n,this.updateSVGProperty(e,n)}updateProperties(e){if(e)for(const[n,i]of Object.entries(e))this.updateProperty(n,i)}updateSVGProperty(e,n){h(this,ml)[e]=n}toSVGProperties(){const e=h(this,ml);return S(this,ml,Object.create(null)),{root:e}}reset(){S(this,ml,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Ve("Not implemented")}}ml=new WeakMap;var si,Uc,Lt,yl,vl,To,Co,ko,_l,Re,h0,f0,p0,jd,g1,tm,eh,du;const se=class se extends ot{constructor(n){super(n);x(this,Re);x(this,si,null);x(this,Uc);ce(this,"_drawId",null);S(this,Uc,n.mustBeCommitted||!1),n.drawOutlines&&(C(this,Re,h0).call(this,n),C(this,Re,jd).call(this))}static _mergeSVGProperties(n,i){const r=new Set(Object.keys(n));for(const[s,o]of Object.entries(i))r.has(s)?Object.assign(n[s],o):n[s]=o;return n}static getDefaultDrawingOptions(n){Ve("Not implemented")}static get typesMap(){Ve("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(n,i){const r=this.typesMap.get(n);r&&this._defaultDrawingOptions.updateProperty(r,i),this._currentParent&&(h(se,Lt).updateProperty(r,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(n,i){const r=this.constructor.typesMap.get(n);r&&this._updateProperty(n,r,i)}static get defaultPropertiesToUpdate(){const n=[],i=this._defaultDrawingOptions;for(const[r,s]of this.typesMap)n.push([r,i[s]]);return n}get propertiesToUpdate(){const n=[],{_drawingOptions:i}=this;for(const[r,s]of this.constructor.typesMap)n.push([r,i[s]]);return n}_updateProperty(n,i,r){const s=this._drawingOptions,o=s[i],a=l=>{var c;s.updateProperty(i,l);const u=h(this,si).updateProperty(i,l);u&&C(this,Re,eh).call(this,u),(c=this.parent)==null||c.drawLayer.updateProperties(this._drawId,s.toSVGProperties())};this.addCommands({cmd:a.bind(this,r),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,se._mergeSVGProperties(h(this,si).getPathResizingSVGProperties(C(this,Re,tm).call(this)),{bbox:C(this,Re,du).call(this)}))}_onResized(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,se._mergeSVGProperties(h(this,si).getPathResizedSVGProperties(C(this,Re,tm).call(this)),{bbox:C(this,Re,du).call(this)}))}_onTranslating(n,i){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:C(this,Re,du).call(this,n,i)})}_onTranslated(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,se._mergeSVGProperties(h(this,si).getPathTranslatedSVGProperties(C(this,Re,tm).call(this),this.parentDimensions),{bbox:C(this,Re,du).call(this)}))}_onStartDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,h(this,Uc)&&(S(this,Uc,!1),this.commit(),this.parent.setSelected(this),n&&this.isOnScreen&&this.div.focus())}remove(){C(this,Re,p0).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Re,jd).call(this),C(this,Re,eh).call(this,h(this,si).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var r;let i=!1;this.parent&&!n?(this._uiManager.removeShouldRescale(this),C(this,Re,p0).call(this)):n&&(this._uiManager.addShouldRescale(this),C(this,Re,jd).call(this,n),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(n),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,se._mergeSVGProperties({bbox:C(this,Re,du).call(this)},h(this,si).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&C(this,Re,eh).call(this,h(this,si).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const n=super.render();n.classList.add("draw");const i=document.createElement("div");n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),this._uiManager.addShouldRescale(this),this.disableEditing(),n}static createDrawerInstance(n,i,r,s,o){Ve("Not implemented")}static startDrawing(n,i,r,s){var E;const{target:o,offsetX:a,offsetY:l,pointerId:u,pointerType:c}=s;if(h(se,Co)&&h(se,Co)!==c)return;const{viewport:{rotation:d}}=n,{width:f,height:g}=o.getBoundingClientRect(),y=S(se,yl,new AbortController),v=n.combinedSignal(y);if(h(se,To)||S(se,To,u),h(se,Co)??S(se,Co,c),window.addEventListener("pointerup",_=>{var b;h(se,To)===_.pointerId?this._endDraw(_):(b=h(se,ko))==null||b.delete(_.pointerId)},{signal:v}),window.addEventListener("pointercancel",_=>{var b;h(se,To)===_.pointerId?this._currentParent.endDrawingSession():(b=h(se,ko))==null||b.delete(_.pointerId)},{signal:v}),window.addEventListener("pointerdown",_=>{h(se,Co)===_.pointerType&&((h(se,ko)||S(se,ko,new Set)).add(_.pointerId),h(se,Lt).isCancellable()&&(h(se,Lt).removeLastElement(),h(se,Lt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",mr,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",_=>{_.timeStamp===h(se,_l)&&di(_)},{signal:v}),n.toggleDrawing(),(E=i._editorUndoBar)==null||E.hide(),h(se,Lt)){n.drawLayer.updateProperties(this._currentDrawId,h(se,Lt).startNew(a,l,f,g,d));return}i.updateUIForDefaultProperties(this),S(se,Lt,this.createDrawerInstance(a,l,f,g,d)),S(se,vl,this.getDefaultDrawingOptions()),this._currentParent=n,{id:this._currentDrawId}=n.drawLayer.draw(this._mergeSVGProperties(h(se,vl).toSVGProperties(),h(se,Lt).defaultSVGProperties),!0,!1)}static _drawMove(n){var o;if(S(se,_l,-1),!h(se,Lt))return;const{offsetX:i,offsetY:r,pointerId:s}=n;if(h(se,To)===s){if(((o=h(se,ko))==null?void 0:o.size)>=1){this._endDraw(n);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,h(se,Lt).add(i,r)),S(se,_l,n.timeStamp),di(n)}}static _cleanup(n){n&&(this._currentDrawId=-1,this._currentParent=null,S(se,Lt,null),S(se,vl,null),S(se,Co,null),S(se,_l,NaN)),h(se,yl)&&(h(se,yl).abort(),S(se,yl,null),S(se,To,NaN),S(se,ko,null))}static _endDraw(n){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),n&&i.drawLayer.updateProperties(this._currentDrawId,h(se,Lt).end(n.offsetX,n.offsetY)),this.supportMultipleDrawings){const r=h(se,Lt),s=this._currentDrawId,o=r.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(s,r.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(s,r.removeLastElement())},mustExec:!1,type:Ce.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(n){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Ce.DRAW_STEP),!h(se,Lt).isEmpty()){const{pageDimensions:[r,s],scale:o}=i,a=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:h(se,Lt).getOutlines(r*o,s*o,o,this._INNER_MARGIN),drawingOptions:h(se,vl),mustBeCommitted:!n});return this._cleanup(!0),a}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(n){}static deserializeDraw(n,i,r,s,o,a){Ve("Not implemented")}static async deserialize(n,i,r){var d,f;const{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}=i.viewport,u=this.deserializeDraw(a,l,s,o,this._INNER_MARGIN,n),c=await super.deserialize(n,i,r);return c.createDrawingOptions(n),C(d=c,Re,h0).call(d,{drawOutlines:u}),C(f=c,Re,jd).call(f),c.onScaleChanging(),c.rotate(),c}serializeDraw(n){const[i,r]=this.pageTranslation,[s,o]=this.pageDimensions;return h(this,si).serialize([i,r,s,o],n)}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};si=new WeakMap,Uc=new WeakMap,Lt=new WeakMap,yl=new WeakMap,vl=new WeakMap,To=new WeakMap,Co=new WeakMap,ko=new WeakMap,_l=new WeakMap,Re=new WeakSet,h0=function({drawOutlines:n,drawId:i,drawingOptions:r}){S(this,si,n),this._drawingOptions||(this._drawingOptions=r),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,n.defaultProperties)):this._drawId=C(this,Re,f0).call(this,n,this.parent),C(this,Re,eh).call(this,n.box)},f0=function(n,i){const{id:r}=i.drawLayer.draw(se._mergeSVGProperties(this._drawingOptions.toSVGProperties(),n.defaultSVGProperties),!1,!1);return r},p0=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},jd=function(n=this.parent){if(!(this._drawId!==null&&this.parent===n)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,n.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=C(this,Re,f0).call(this,h(this,si),n)}},g1=function([n,i,r,s]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[i,1-n,r*(a/o),s*(o/a)];case 180:return[1-n,1-i,r,s];case 270:return[1-i,n,r*(a/o),s*(o/a)];default:return[n,i,r,s]}},tm=function(){const{x:n,y:i,width:r,height:s,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-i,n,r*(o/a),s*(a/o)];case 180:return[1-n,1-i,r,s];case 270:return[i,1-n,r*(o/a),s*(a/o)];default:return[n,i,r,s]}},eh=function(n){if([this.x,this.y,this.width,this.height]=C(this,Re,g1).call(this,n),this.div){this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)}this._onResized()},du=function(){const{x:n,y:i,width:r,height:s,rotation:o,parentRotation:a,parentDimensions:[l,u]}=this;switch((o*4+a)/90){case 1:return[1-i-s,n,s,r];case 2:return[1-n-r,1-i-s,r,s];case 3:return[i,1-n-r,s,r];case 4:return[n,i-r*(l/u),s*(u/l),r*(l/u)];case 5:return[1-i,n,r*(l/u),s*(u/l)];case 6:return[1-n-s*(u/l),1-i,s*(u/l),r*(l/u)];case 7:return[i-r*(l/u),1-n-s*(u/l),r*(l/u),s*(u/l)];case 8:return[n-r,i-s,r,s];case 9:return[1-i,n-r,s,r];case 10:return[1-n,1-i,r,s];case 11:return[i-s,1-n,s,r];case 12:return[n-s*(u/l),i,s*(u/l),r*(l/u)];case 13:return[1-i-r*(l/u),n-s*(u/l),r*(l/u),s*(u/l)];case 14:return[1-n,1-i-r*(l/u),s*(u/l),r*(l/u)];case 15:return[i,1-n,r*(l/u),s*(u/l)];default:return[n,i,r,s]}},ce(se,"_currentDrawId",-1),ce(se,"_currentParent",null),x(se,Lt,null),x(se,yl,null),x(se,vl,null),x(se,To,NaN),x(se,Co,null),x(se,ko,null),x(se,_l,NaN),ce(se,"_INNER_MARGIN",3);let d0=se;var Ur,Dt,Ot,El,Bc,yn,Vt,Ci,bl,wl,Sl,zc,nm;class xB{constructor(e,n,i,r,s,o){x(this,zc);x(this,Ur,new Float64Array(6));x(this,Dt);x(this,Ot);x(this,El);x(this,Bc);x(this,yn);x(this,Vt,"");x(this,Ci,0);x(this,bl,new Wm);x(this,wl);x(this,Sl);S(this,wl,i),S(this,Sl,r),S(this,El,s),S(this,Bc,o),[e,n]=C(this,zc,nm).call(this,e,n);const a=S(this,Dt,[NaN,NaN,NaN,NaN,e,n]);S(this,yn,[e,n]),S(this,Ot,[{line:a,points:h(this,yn)}]),h(this,Ur).set(a,0)}updateProperty(e,n){e==="stroke-width"&&S(this,Bc,n)}isEmpty(){return!h(this,Ot)||h(this,Ot).length===0}isCancellable(){return h(this,yn).length<=10}add(e,n){[e,n]=C(this,zc,nm).call(this,e,n);const[i,r,s,o]=h(this,Ur).subarray(2,6),a=e-s,l=n-o;return Math.hypot(h(this,wl)*a,h(this,Sl)*l)<=2?null:(h(this,yn).push(e,n),isNaN(i)?(h(this,Ur).set([s,o,e,n],2),h(this,Dt).push(NaN,NaN,NaN,NaN,e,n),{path:{d:this.toSVGPath()}}):(isNaN(h(this,Ur)[0])&&h(this,Dt).splice(6,6),h(this,Ur).set([i,r,s,o,e,n],0),h(this,Dt).push(...ne.createBezierPoints(i,r,s,o,e,n)),{path:{d:this.toSVGPath()}}))}end(e,n){const i=this.add(e,n);return i||(h(this,yn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,n,i,r,s){S(this,wl,i),S(this,Sl,r),S(this,El,s),[e,n]=C(this,zc,nm).call(this,e,n);const o=S(this,Dt,[NaN,NaN,NaN,NaN,e,n]);S(this,yn,[e,n]);const a=h(this,Ot).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),h(this,Ot).push({line:o,points:h(this,yn)}),h(this,Ur).set(o,0),S(this,Ci,0),this.toSVGPath(),null}getLastElement(){return h(this,Ot).at(-1)}setLastElement(e){return h(this,Ot)?(h(this,Ot).push(e),S(this,Dt,e.line),S(this,yn,e.points),S(this,Ci,0),{path:{d:this.toSVGPath()}}):h(this,bl).setLastElement(e)}removeLastElement(){if(!h(this,Ot))return h(this,bl).removeLastElement();h(this,Ot).pop(),S(this,Vt,"");for(let e=0,n=h(this,Ot).length;e<n;e++){const{line:i,points:r}=h(this,Ot)[e];S(this,Dt,i),S(this,yn,r),S(this,Ci,0),this.toSVGPath()}return{path:{d:h(this,Vt)}}}toSVGPath(){const e=ne.svgRound(h(this,Dt)[4]),n=ne.svgRound(h(this,Dt)[5]);if(h(this,yn).length===2)return S(this,Vt,`${h(this,Vt)} M ${e} ${n} Z`),h(this,Vt);if(h(this,yn).length<=6){const r=h(this,Vt).lastIndexOf("M");S(this,Vt,`${h(this,Vt).slice(0,r)} M ${e} ${n}`),S(this,Ci,6)}if(h(this,yn).length===4){const r=ne.svgRound(h(this,Dt)[10]),s=ne.svgRound(h(this,Dt)[11]);return S(this,Vt,`${h(this,Vt)} L ${r} ${s}`),S(this,Ci,12),h(this,Vt)}const i=[];h(this,Ci)===0&&(i.push(`M ${e} ${n}`),S(this,Ci,6));for(let r=h(this,Ci),s=h(this,Dt).length;r<s;r+=6){const[o,a,l,u,c,d]=h(this,Dt).slice(r,r+6).map(ne.svgRound);i.push(`C${o} ${a} ${l} ${u} ${c} ${d}`)}return S(this,Vt,h(this,Vt)+i.join(" ")),S(this,Ci,h(this,Dt).length),h(this,Vt)}getOutlines(e,n,i,r){const s=h(this,Ot).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),h(this,bl).build(h(this,Ot),e,n,i,h(this,El),h(this,Bc),r),S(this,Ur,null),S(this,Dt,null),S(this,Ot,null),S(this,Vt,null),h(this,bl)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ur=new WeakMap,Dt=new WeakMap,Ot=new WeakMap,El=new WeakMap,Bc=new WeakMap,yn=new WeakMap,Vt=new WeakMap,Ci=new WeakMap,bl=new WeakMap,wl=new WeakMap,Sl=new WeakMap,zc=new WeakSet,nm=function(e,n){return ne._normalizePoint(e,n,h(this,wl),h(this,Sl),h(this,El))};var vn,mp,yp,oi,Br,zr,Hc,Gc,$c,Kt,es,m1,y1,v1;const nS=class nS extends ne{constructor(){super(...arguments);x(this,Kt);x(this,vn);x(this,mp,0);x(this,yp);x(this,oi);x(this,Br);x(this,zr);x(this,Hc);x(this,Gc);x(this,$c)}build(n,i,r,s,o,a,l){S(this,Br,i),S(this,zr,r),S(this,Hc,s),S(this,Gc,o),S(this,$c,a),S(this,yp,l??0),S(this,oi,n),C(this,Kt,y1).call(this)}setLastElement(n){return h(this,oi).push(n),{path:{d:this.toSVGPath()}}}removeLastElement(){return h(this,oi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const n=[];for(const{line:i}of h(this,oi)){if(n.push(`M${ne.svgRound(i[4])} ${ne.svgRound(i[5])}`),i.length===6){n.push("Z");continue}if(i.length===12){n.push(`L${ne.svgRound(i[10])} ${ne.svgRound(i[11])}`);continue}for(let r=6,s=i.length;r<s;r+=6){const[o,a,l,u,c,d]=i.subarray(r,r+6).map(ne.svgRound);n.push(`C${o} ${a} ${l} ${u} ${c} ${d}`)}}return n.join("")}serialize([n,i,r,s],o){const a=[],l=[],[u,c,d,f]=C(this,Kt,m1).call(this);let g,y,v,E,_,b,w,A,k;switch(h(this,Gc)){case 0:k=ne._rescale,g=n,y=i+s,v=r,E=-s,_=n+u*r,b=i+(1-c-f)*s,w=n+(u+d)*r,A=i+(1-c)*s;break;case 90:k=ne._rescaleAndSwap,g=n,y=i,v=r,E=s,_=n+c*r,b=i+u*s,w=n+(c+f)*r,A=i+(u+d)*s;break;case 180:k=ne._rescale,g=n+r,y=i,v=-r,E=s,_=n+(1-u-d)*r,b=i+c*s,w=n+(1-u)*r,A=i+(c+f)*s;break;case 270:k=ne._rescaleAndSwap,g=n+r,y=i+s,v=-r,E=-s,_=n+(1-c-f)*r,b=i+(1-u-d)*s,w=n+(1-c)*r,A=i+(1-u)*s;break}for(const{line:T,points:N}of h(this,oi))a.push(k(T,g,y,v,E,o?new Array(T.length):null)),l.push(k(N,g,y,v,E,o?new Array(N.length):null));return{lines:a,points:l,rect:[_,b,w,A]}}static deserialize(n,i,r,s,o,{paths:{lines:a,points:l},rotation:u,thickness:c}){const d=[];let f,g,y,v,E;switch(u){case 0:E=ne._rescale,f=-n/r,g=i/s+1,y=1/r,v=-1/s;break;case 90:E=ne._rescaleAndSwap,f=-i/s,g=-n/r,y=1/s,v=1/r;break;case 180:E=ne._rescale,f=n/r+1,g=-i/s,y=-1/r,v=1/s;break;case 270:E=ne._rescaleAndSwap,f=i/s+1,g=n/r+1,y=-1/s,v=-1/r;break}if(!a){a=[];for(const b of l){const w=b.length;if(w===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(w===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const A=new Float32Array(3*(w-2));a.push(A);let[k,T,N,L]=b.subarray(0,4);A.set([NaN,NaN,NaN,NaN,k,T],0);for(let F=4;F<w;F+=2){const R=b[F],U=b[F+1];A.set(ne.createBezierPoints(k,T,N,L,R,U),(F-2)*3),[k,T,N,L]=[N,L,R,U]}}}for(let b=0,w=a.length;b<w;b++)d.push({line:E(a[b].map(A=>A??NaN),f,g,y,v),points:E(l[b].map(A=>A??NaN),f,g,y,v)});const _=new nS;return _.build(d,r,s,1,u,c,o),_}get box(){return h(this,vn)}updateProperty(n,i){return n==="stroke-width"?C(this,Kt,v1).call(this,i):null}updateParentDimensions([n,i],r){const[s,o]=C(this,Kt,es).call(this);S(this,Br,n),S(this,zr,i),S(this,Hc,r);const[a,l]=C(this,Kt,es).call(this),u=a-s,c=l-o,d=h(this,vn);return d[0]-=u,d[1]-=c,d[2]+=2*u,d[3]+=2*c,d}updateRotation(n){return S(this,mp,n),{path:{transform:this.rotationTransform}}}get viewBox(){return h(this,vn).map(ne.svgRound).join(" ")}get defaultProperties(){const[n,i]=h(this,vn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(n)} ${ne.svgRound(i)}`}}}get rotationTransform(){const[,,n,i]=h(this,vn);let r=0,s=0,o=0,a=0,l=0,u=0;switch(h(this,mp)){case 90:s=i/n,o=-n/i,l=n;break;case 180:r=-1,a=-1,l=n,u=i;break;case 270:s=-i/n,o=n/i,u=i;break;default:return""}return`matrix(${r} ${s} ${o} ${a} ${ne.svgRound(l)} ${ne.svgRound(u)})`}getPathResizingSVGProperties([n,i,r,s]){const[o,a]=C(this,Kt,es).call(this),[l,u,c,d]=h(this,vn);if(Math.abs(c-o)<=ne.PRECISION||Math.abs(d-a)<=ne.PRECISION){const E=n+r/2-(l+c/2),_=i+s/2-(u+d/2);return{path:{"transform-origin":`${ne.svgRound(n)} ${ne.svgRound(i)}`,transform:`${this.rotationTransform} translate(${E} ${_})`}}}const f=(r-2*o)/(c-2*o),g=(s-2*a)/(d-2*a),y=c/r,v=d/s;return{path:{"transform-origin":`${ne.svgRound(l)} ${ne.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${v}) translate(${ne.svgRound(o)} ${ne.svgRound(a)}) scale(${f} ${g}) translate(${ne.svgRound(-o)} ${ne.svgRound(-a)})`}}}getPathResizedSVGProperties([n,i,r,s]){const[o,a]=C(this,Kt,es).call(this),l=h(this,vn),[u,c,d,f]=l;if(l[0]=n,l[1]=i,l[2]=r,l[3]=s,Math.abs(d-o)<=ne.PRECISION||Math.abs(f-a)<=ne.PRECISION){const _=n+r/2-(u+d/2),b=i+s/2-(c+f/2);for(const{line:w,points:A}of h(this,oi))ne._translate(w,_,b,w),ne._translate(A,_,b,A);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(n)} ${ne.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(r-2*o)/(d-2*o),y=(s-2*a)/(f-2*a),v=-g*(u+o)+n+o,E=-y*(c+a)+i+a;if(g!==1||y!==1||v!==0||E!==0)for(const{line:_,points:b}of h(this,oi))ne._rescale(_,v,E,g,y,_),ne._rescale(b,v,E,g,y,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(n)} ${ne.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([n,i],r){const[s,o]=r,a=h(this,vn),l=n-a[0],u=i-a[1];if(h(this,Br)===s&&h(this,zr)===o)for(const{line:c,points:d}of h(this,oi))ne._translate(c,l,u,c),ne._translate(d,l,u,d);else{const c=h(this,Br)/s,d=h(this,zr)/o;S(this,Br,s),S(this,zr,o);for(const{line:f,points:g}of h(this,oi))ne._rescale(f,l,u,c,d,f),ne._rescale(g,l,u,c,d,g);a[2]*=c,a[3]*=d}return a[0]=n,a[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ne.svgRound(n)} ${ne.svgRound(i)}`}}}get defaultSVGProperties(){const n=h(this,vn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ne.svgRound(n[0])} ${ne.svgRound(n[1])}`,transform:this.rotationTransform||null},bbox:n}}};vn=new WeakMap,mp=new WeakMap,yp=new WeakMap,oi=new WeakMap,Br=new WeakMap,zr=new WeakMap,Hc=new WeakMap,Gc=new WeakMap,$c=new WeakMap,Kt=new WeakSet,es=function(n=h(this,$c)){const i=h(this,yp)+n/2*h(this,Hc);return h(this,Gc)%180===0?[i/h(this,Br),i/h(this,zr)]:[i/h(this,zr),i/h(this,Br)]},m1=function(){const[n,i,r,s]=h(this,vn),[o,a]=C(this,Kt,es).call(this,0);return[n+o,i+a,r-2*o,s-2*a]},y1=function(){const n=S(this,vn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of h(this,oi)){if(s.length<=12){for(let l=4,u=s.length;l<u;l+=6){const[c,d]=s.subarray(l,l+2);n[0]=Math.min(n[0],c),n[1]=Math.min(n[1],d),n[2]=Math.max(n[2],c),n[3]=Math.max(n[3],d)}continue}let o=s[4],a=s[5];for(let l=6,u=s.length;l<u;l+=6){const[c,d,f,g,y,v]=s.subarray(l,l+6);ae.bezierBoundingBox(o,a,c,d,f,g,y,v,n),o=y,a=v}}const[i,r]=C(this,Kt,es).call(this);n[0]=Math.min(1,Math.max(0,n[0]-i)),n[1]=Math.min(1,Math.max(0,n[1]-r)),n[2]=Math.min(1,Math.max(0,n[2]+i)),n[3]=Math.min(1,Math.max(0,n[3]+r)),n[2]-=n[0],n[3]-=n[1]},v1=function(n){const[i,r]=C(this,Kt,es).call(this);S(this,$c,n);const[s,o]=C(this,Kt,es).call(this),[a,l]=[s-i,o-r],u=h(this,vn);return u[0]-=a,u[1]-=l,u[2]+=2*a,u[3]+=2*l,u};let Wm=nS;var Vc;const iS=class iS extends AB{constructor(n){super();x(this,Vc);S(this,Vc,n),super.updateProperties({fill:"none",stroke:ot._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(n,i){n==="stroke-width"&&(i??(i=this["stroke-width"]),i*=h(this,Vc).realScale),super.updateSVGProperty(n,i)}clone(){const n=new iS(h(this,Vc));return n.updateAll(this),n}};Vc=new WeakMap;let g0=iS;var Sy,_1;const Mu=class Mu extends d0{constructor(n){super({...n,name:"inkEditor"});x(this,Sy);this._willKeepAspectRatio=!0}static initialize(n,i){ot.initialize(n,i),this._defaultDrawingOptions=new g0(i.viewParameters)}static getDefaultDrawingOptions(n){const i=this._defaultDrawingOptions.clone();return i.updateProperties(n),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ae(this,"typesMap",new Map([[Ce.INK_THICKNESS,"stroke-width"],[Ce.INK_COLOR,"stroke"],[Ce.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(n,i,r,s,o){return new xB(n,i,r,s,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(n,i,r,s,o,a){return Wm.deserialize(n,i,r,s,o,a)}static async deserialize(n,i,r){let s=null;if(n instanceof hw){const{data:{inkLists:a,rect:l,rotation:u,id:c,color:d,opacity:f,borderStyle:{rawWidth:g},popupRef:y},parent:{page:{pageNumber:v}}}=n;s=n={annotationType:_e.INK,color:Array.from(d),thickness:g,opacity:f,paths:{points:a},boxes:null,pageIndex:v-1,rect:l.slice(0),rotation:u,id:c,deleted:!1,popupRef:y}}const o=await super.deserialize(n,i,r);return o.annotationElementId=n.id||null,o._initialData=s,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:n,_drawingOptions:i,parent:r}=this;i.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(n,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const n=this._currentParent;n&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:n,thickness:i,opacity:r}){this._drawingOptions=Mu.getDefaultDrawingOptions({stroke:ae.makeHexColor(...n),"stroke-width":i,"stroke-opacity":r})}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:r,rect:s}=this.serializeDraw(n),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":l}}=this,u={annotationType:_e.INK,color:ot._colorManager.convert(o),opacity:a,thickness:l,paths:{lines:i,points:r},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?u:this.annotationElementId&&!C(this,Sy,_1).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(n){const{points:i,rect:r}=this.serializeDraw(!1);return n.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:i}),null}};Sy=new WeakSet,_1=function(n){const{color:i,thickness:r,opacity:s,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||n.color.some((a,l)=>a!==i[l])||n.thickness!==r||n.opacity!==s||n.pageIndex!==o},ce(Mu,"_type","ink"),ce(Mu,"_editorType",_e.INK),ce(Mu,"_defaultDrawingOptions",null);let m0=Mu;var rt,qt,Io,Ts,Ro,qc,Hr,Gr,ai,Wc,Ne,th,nh,im,v0,rm,_0,sm,E1;const vh=class vh extends ot{constructor(n){super({...n,name:"stampEditor"});x(this,Ne);x(this,rt,null);x(this,qt,null);x(this,Io,null);x(this,Ts,null);x(this,Ro,null);x(this,qc,"");x(this,Hr,null);x(this,Gr,null);x(this,ai,!1);x(this,Wc,!1);S(this,Ts,n.bitmapUrl),S(this,Ro,n.bitmapFile)}static initialize(n,i){ot.initialize(n,i)}static get supportedTypes(){return Ae(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return Ae(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(n){return this.supportedTypes.includes(n)}static paste(n,i){i.pasteEditor(_e.STAMP,{bitmapFile:n.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var n;return{type:"stamp",hasAltText:!!((n=this.altTextData)!=null&&n.altText)}}static computeTelemetryFinalData(n){const i=n.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(n=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:o,height:a}=n||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:s,width:o,height:a,channels:s.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var n;h(this,qt)&&(S(this,rt,null),this._uiManager.imageManager.deleteId(h(this,qt)),(n=h(this,Hr))==null||n.remove(),S(this,Hr,null),h(this,Gr)&&(clearTimeout(h(this,Gr)),S(this,Gr,null))),super.remove()}rebuild(){if(!this.parent){h(this,qt)&&C(this,Ne,im).call(this);return}super.rebuild(),this.div!==null&&(h(this,qt)&&h(this,Hr)===null&&C(this,Ne,im).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(n){this._isDraggable=!0,n&&this.div.focus()}isEmpty(){return!(h(this,Io)||h(this,rt)||h(this,Ts)||h(this,Ro)||h(this,qt))}get isResizable(){return!0}render(){if(this.div)return this.div;let n,i;if(this.width&&(n=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),h(this,rt)?C(this,Ne,v0).call(this):C(this,Ne,im).call(this),this.width&&!this.annotationElementId){const[r,s]=this.parentDimensions;this.setAt(n*r,i*s,this.width*r,this.height*s)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;h(this,Gr)!==null&&clearTimeout(h(this,Gr)),S(this,Gr,setTimeout(()=>{S(this,Gr,null),C(this,Ne,_0).call(this)},200))}copyCanvas(n,i,r=!1){var g;n||(n=224);const{width:s,height:o}=h(this,rt),a=new gE;let l=h(this,rt),u=s,c=o,d=null;if(i){if(s>i||o>i){const L=Math.min(i/s,i/o);u=Math.floor(s*L),c=Math.floor(o*L)}d=document.createElement("canvas");const y=d.width=Math.ceil(u*a.sx),v=d.height=Math.ceil(c*a.sy);h(this,ai)||(l=C(this,Ne,rm).call(this,y,v));const E=d.getContext("2d");E.filter=this._uiManager.hcmFilter;let _="white",b="#cfcfd8";this._uiManager.hcmFilter!=="none"?b="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(_="#8f8f9d",b="#42414d");const w=15,A=w*a.sx,k=w*a.sy,T=new OffscreenCanvas(A*2,k*2),N=T.getContext("2d");N.fillStyle=_,N.fillRect(0,0,A*2,k*2),N.fillStyle=b,N.fillRect(0,0,A,k),N.fillRect(A,k,A,k),E.fillStyle=E.createPattern(T,"repeat"),E.fillRect(0,0,y,v),E.drawImage(l,0,0,l.width,l.height,0,0,y,v)}let f=null;if(r){let y,v;if(a.symmetric&&l.width<n&&l.height<n)y=l.width,v=l.height;else if(l=h(this,rt),s>n||o>n){const b=Math.min(n/s,n/o);y=Math.floor(s*b),v=Math.floor(o*b),h(this,ai)||(l=C(this,Ne,rm).call(this,y,v))}const _=new OffscreenCanvas(y,v).getContext("2d",{willReadFrequently:!0});_.drawImage(l,0,0,l.width,l.height,0,0,y,v),f={width:y,height:v,data:_.getImageData(0,0,y,v).data}}return{canvas:d,width:u,height:c,imageData:f}}getImageForAltText(){return h(this,Hr)}static async deserialize(n,i,r){var v;let s=null;if(n instanceof HN){const{data:{rect:E,rotation:_,id:b,structParent:w,popupRef:A},container:k,parent:{page:{pageNumber:T}}}=n,N=k.querySelector("canvas"),L=r.imageManager.getFromCanvas(k.id,N);N.remove();const F=((v=await i._structTree.getAriaAttributes(`${rw}${b}`))==null?void 0:v.get("aria-label"))||"";s=n={annotationType:_e.STAMP,bitmapId:L.id,bitmap:L.bitmap,pageIndex:T-1,rect:E.slice(0),rotation:_,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:F},isSvg:!1,structParent:w,popupRef:A}}const o=await super.deserialize(n,i,r),{rect:a,bitmap:l,bitmapUrl:u,bitmapId:c,isSvg:d,accessibilityData:f}=n;c&&r.imageManager.isValidId(c)?(S(o,qt,c),l&&S(o,rt,l)):S(o,Ts,u),S(o,ai,d);const[g,y]=o.pageDimensions;return o.width=(a[2]-a[0])/g,o.height=(a[3]-a[1])/y,o.annotationElementId=n.id||null,f&&(o.altTextData=f),o._initialData=s,S(o,Wc,!!s),o}serialize(n=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:_e.STAMP,bitmapId:h(this,qt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:h(this,ai),structTreeParentId:this._structTreeParentId};if(n)return r.bitmapUrl=C(this,Ne,sm).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:s,altText:o}=this.serializeAltText(!1);if(!s&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=C(this,Ne,E1).call(this,r);if(l.isSame)return null;l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,i===null)return r;i.stamps||(i.stamps=new Map);const a=h(this,ai)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(h(this,qt)))i.stamps.set(h(this,qt),{area:a,serialized:r}),r.bitmap=C(this,Ne,sm).call(this,!1);else if(h(this,ai)){const l=i.stamps.get(h(this,qt));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=C(this,Ne,sm).call(this,!1))}return r}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}};rt=new WeakMap,qt=new WeakMap,Io=new WeakMap,Ts=new WeakMap,Ro=new WeakMap,qc=new WeakMap,Hr=new WeakMap,Gr=new WeakMap,ai=new WeakMap,Wc=new WeakMap,Ne=new WeakSet,th=function(n,i=!1){if(!n){this.remove();return}S(this,rt,n.bitmap),i||(S(this,qt,n.id),S(this,ai,n.isSvg)),n.file&&S(this,qc,n.file.name),C(this,Ne,v0).call(this)},nh=function(){if(S(this,Io,null),this._uiManager.enableWaiting(!1),!!h(this,Hr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&h(this,rt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&h(this,rt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},im=function(){if(h(this,qt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(h(this,qt)).then(r=>C(this,Ne,th).call(this,r,!0)).finally(()=>C(this,Ne,nh).call(this));return}if(h(this,Ts)){const r=h(this,Ts);S(this,Ts,null),this._uiManager.enableWaiting(!0),S(this,Io,this._uiManager.imageManager.getFromUrl(r).then(s=>C(this,Ne,th).call(this,s)).finally(()=>C(this,Ne,nh).call(this)));return}if(h(this,Ro)){const r=h(this,Ro);S(this,Ro,null),this._uiManager.enableWaiting(!0),S(this,Io,this._uiManager.imageManager.getFromFile(r).then(s=>C(this,Ne,th).call(this,s)).finally(()=>C(this,Ne,nh).call(this)));return}const n=document.createElement("input");n.type="file",n.accept=vh.supportedTypesStr;const i=this._uiManager._signal;S(this,Io,new Promise(r=>{n.addEventListener("change",async()=>{if(!n.files||n.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(n.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),C(this,Ne,th).call(this,s)}r()},{signal:i}),n.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>C(this,Ne,nh).call(this))),n.click()},v0=function(){var d;const{div:n}=this;let{width:i,height:r}=h(this,rt);const[s,o]=this.pageDimensions,a=.75;if(this.width)i=this.width*s,r=this.height*o;else if(i>a*s||r>a*o){const f=Math.min(a*s/i,a*o/r);i*=f,r*=f}const[l,u]=this.parentDimensions;this.setDims(i*l/s,r*u/o),this._uiManager.enableWaiting(!1);const c=S(this,Hr,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=i/s,this.height=r/o,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(n.hidden=!1),C(this,Ne,_0).call(this),h(this,Wc)||(this.parent.addUndoableEditor(this),S(this,Wc,!0)),this._reportTelemetry({action:"inserted_image"}),h(this,qc)&&c.setAttribute("aria-label",h(this,qc))},rm=function(n,i){const{width:r,height:s}=h(this,rt);let o=r,a=s,l=h(this,rt);for(;o>2*n||a>2*i;){const u=o,c=a;o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*i&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(l,0,0,u,c,0,0,o,a),l=d.transferToImageBitmap()}return l},_0=function(){const[n,i]=this.parentDimensions,{width:r,height:s}=this,o=new gE,a=Math.ceil(r*n*o.sx),l=Math.ceil(s*i*o.sy),u=h(this,Hr);if(!u||u.width===a&&u.height===l)return;u.width=a,u.height=l;const c=h(this,ai)?h(this,rt):C(this,Ne,rm).call(this,a,l),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(c,0,0,c.width,c.height,0,0,a,l)},sm=function(n){if(n){if(h(this,ai)){const s=this._uiManager.imageManager.getSvgUrl(h(this,qt));if(s)return s}const i=document.createElement("canvas");return{width:i.width,height:i.height}=h(this,rt),i.getContext("2d").drawImage(h(this,rt),0,0),i.toDataURL()}if(h(this,ai)){const[i,r]=this.pageDimensions,s=Math.round(this.width*i*jo.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*jo.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,o);return a.getContext("2d").drawImage(h(this,rt),0,0,h(this,rt).width,h(this,rt).height,0,0,s,o),a.transferToImageBitmap()}return structuredClone(h(this,rt))},E1=function(n){var a;const{pageIndex:i,accessibilityData:{altText:r}}=this._initialData,s=n.pageIndex===i,o=(((a=n.accessibilityData)==null?void 0:a.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&s&&o,isSameAltText:o}},ce(vh,"_type","stamp"),ce(vh,"_editorType",_e.STAMP);let y0=vh;var Al,Kc,$r,No,Cs,ki,Mo,Yc,xl,rr,ks,sn,Is,oe,Po,tt,b1,Sr,b0,w0,om;const qi=class qi{constructor({uiManager:e,pageIndex:n,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:o,drawLayer:a,textLayer:l,viewport:u,l10n:c}){x(this,tt);x(this,Al);x(this,Kc,!1);x(this,$r,null);x(this,No,null);x(this,Cs,null);x(this,ki,new Map);x(this,Mo,!1);x(this,Yc,!1);x(this,xl,!1);x(this,rr,null);x(this,ks,null);x(this,sn,null);x(this,Is,null);x(this,oe);const d=[...h(qi,Po).values()];if(!qi._initialized){qi._initialized=!0;for(const f of d)f.initialize(c,e)}e.registerEditorTypes(d),S(this,oe,e),this.pageIndex=n,this.div=i,S(this,Al,s),S(this,$r,o),this.viewport=u,S(this,sn,l),this.drawLayer=a,this._structTree=r,h(this,oe).addLayer(this)}get isEmpty(){return h(this,ki).size===0}get isInvisible(){return this.isEmpty&&h(this,oe).getMode()===_e.NONE}updateToolbar(e){h(this,oe).updateToolbar(e)}updateMode(e=h(this,oe).getMode()){switch(C(this,tt,om).call(this),e){case _e.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case _e.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case _e.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;for(const i of h(qi,Po).values())n.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var n;return e===((n=h(this,sn))==null?void 0:n.div)}setEditingState(e){h(this,oe).setEditingState(e)}addCommands(e){h(this,oe).addCommands(e)}cleanUndoStack(e){h(this,oe).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var n;(n=h(this,$r))==null||n.div.classList.toggle("disabled",!e)}async enable(){S(this,xl,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of h(this,ki).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(h(this,oe).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!h(this,$r)){S(this,xl,!1);return}const n=h(this,$r).getEditableAnnotations();for(const i of n){if(i.hide(),h(this,oe).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}S(this,xl,!1)}disable(){var r;S(this,Yc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,n=new Map;for(const s of h(this,ki).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else n.set(s.annotationElementId,s);(r=this.getEditableAnnotation(s.annotationElementId))==null||r.show(),s.remove()}if(h(this,$r)){const s=h(this,$r).getEditableAnnotations();for(const o of s){const{id:a}=o.data;if(h(this,oe).isDeletedAnnotationElement(a))continue;let l=n.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(h(this,oe).addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}C(this,tt,om).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of h(qi,Po).values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),S(this,Yc,!1)}getEditableAnnotation(e){var n;return((n=h(this,$r))==null?void 0:n.getEditableAnnotation(e))||null}setActiveEditor(e){h(this,oe).getActive()!==e&&h(this,oe).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=h(this,sn))!=null&&e.div&&!h(this,Is)){S(this,Is,new AbortController);const n=h(this,oe).combinedSignal(h(this,Is));h(this,sn).div.addEventListener("pointerdown",C(this,tt,b1).bind(this),{signal:n}),h(this,sn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=h(this,sn))!=null&&e.div&&h(this,Is)&&(h(this,Is).abort(),S(this,Is,null),h(this,sn).div.classList.remove("highlighting"))}enableClick(){if(h(this,No))return;S(this,No,new AbortController);const e=h(this,oe).combinedSignal(h(this,No));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:e}),this.div.addEventListener("pointercancel",n,{signal:e})}disableClick(){var e;(e=h(this,No))==null||e.abort(),S(this,No,null)}attach(e){h(this,ki).set(e.id,e);const{annotationElementId:n}=e;n&&h(this,oe).isDeletedAnnotationElement(n)&&h(this,oe).removeDeletedAnnotationElement(e)}detach(e){var n;h(this,ki).delete(e.id),(n=h(this,Al))==null||n.removePointerInTextLayer(e.contentDiv),!h(this,Yc)&&e.annotationElementId&&h(this,oe).addDeletedAnnotationElement(e)}remove(e){this.detach(e),h(this,oe).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var n;e.parent!==this&&(e.parent&&e.annotationElementId&&(h(this,oe).addDeletedAnnotationElement(e.annotationElementId),ot.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(n=e.parent)==null||n.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),h(this,oe).addEditor(e),this.attach(e),!e.isAttachedToDOM){const n=e.render();this.div.append(n),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!h(this,xl)),h(this,oe).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!h(this,Cs)&&(e._focusEventsAllowed=!1,S(this,Cs,setTimeout(()=>{S(this,Cs,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:h(this,oe)._signal}),n.focus())},0))),e._structTreeParentId=(i=h(this,Al))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const n=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:n,undo:i,mustExec:!1})}getNextId(){return h(this,oe).getId()}combinedSignal(e){return h(this,oe).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=h(this,tt,Sr))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,n){h(this,oe).updateToolbar(e),h(this,oe).updateMode(e);const{offsetX:i,offsetY:r}=C(this,tt,w0).call(this),s=this.getNextId(),o=C(this,tt,b0).call(this,{parent:this,id:s,x:i,y:r,uiManager:h(this,oe),isCentered:!0,...n});o&&this.add(o)}async deserialize(e){var n;return await((n=h(qi,Po).get(e.annotationType??e.annotationEditorType))==null?void 0:n.deserialize(e,this,h(this,oe)))||null}createAndAddNewEditor(e,n,i={}){const r=this.getNextId(),s=C(this,tt,b0).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:h(this,oe),isCentered:n,...i});return s&&this.add(s),s}addNewEditor(){this.createAndAddNewEditor(C(this,tt,w0).call(this),!0)}setSelected(e){h(this,oe).setSelected(e)}toggleSelected(e){h(this,oe).toggleSelected(e)}unselect(e){h(this,oe).unselect(e)}pointerup(e){var i;const{isMac:n}=Tn.platform;if(!(e.button!==0||e.ctrlKey&&n)&&e.target===this.div&&h(this,Mo)&&(S(this,Mo,!1),!((i=h(this,tt,Sr))!=null&&i.isDrawer&&h(this,tt,Sr).supportMultipleDrawings))){if(!h(this,Kc)){S(this,Kc,!0);return}if(h(this,oe).getMode()===_e.STAMP){h(this,oe).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var r;if(h(this,oe).getMode()===_e.HIGHLIGHT&&this.enableTextSelection(),h(this,Mo)){S(this,Mo,!1);return}const{isMac:n}=Tn.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div)return;if(S(this,Mo,!0),(r=h(this,tt,Sr))!=null&&r.isDrawer){this.startDrawingSession(e);return}const i=h(this,oe).getActive();S(this,Kc,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus(),h(this,rr)){h(this,tt,Sr).startDrawing(this,h(this,oe),!1,e);return}h(this,oe).setCurrentDrawingSession(this),S(this,rr,new AbortController);const n=h(this,oe).combinedSignal(h(this,rr));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(S(this,ks,null),this.commitOrRemove())},{signal:n}),h(this,tt,Sr).startDrawing(this,h(this,oe),!1,e)}pause(e){if(e){const{activeElement:n}=document;this.div.contains(n)&&S(this,ks,n);return}h(this,ks)&&setTimeout(()=>{var n;(n=h(this,ks))==null||n.focus(),S(this,ks,null)},0)}endDrawingSession(e=!1){return h(this,rr)?(h(this,oe).setCurrentDrawingSession(null),h(this,rr).abort(),S(this,rr,null),S(this,ks,null),h(this,tt,Sr).endDrawing(e)):null}findNewParent(e,n,i){const r=h(this,oe).findParent(n,i);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return h(this,rr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){h(this,rr)&&h(this,tt,Sr).onScaleChangingWhenDrawing(this)}destroy(){var e,n;this.commitOrRemove(),((e=h(this,oe).getActive())==null?void 0:e.parent)===this&&(h(this,oe).commitOrRemove(),h(this,oe).setActiveEditor(null)),h(this,Cs)&&(clearTimeout(h(this,Cs)),S(this,Cs,null));for(const i of h(this,ki).values())(n=h(this,Al))==null||n.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,h(this,ki).clear(),h(this,oe).removeLayer(this)}render({viewport:e}){this.viewport=e,Ol(this.div,e);for(const n of h(this,oe).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:e}){h(this,oe).commitOrRemove(),C(this,tt,om).call(this);const n=this.viewport.rotation,i=e.rotation;if(this.viewport=e,Ol(this.div,{rotation:i}),n!==i)for(const r of h(this,ki).values())r.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:n}=this.viewport.rawDims;return[e,n]}get scale(){return h(this,oe).viewParameters.realScale}};Al=new WeakMap,Kc=new WeakMap,$r=new WeakMap,No=new WeakMap,Cs=new WeakMap,ki=new WeakMap,Mo=new WeakMap,Yc=new WeakMap,xl=new WeakMap,rr=new WeakMap,ks=new WeakMap,sn=new WeakMap,Is=new WeakMap,oe=new WeakMap,Po=new WeakMap,tt=new WeakSet,b1=function(e){h(this,oe).unselectAll();const{target:n}=e;if(n===h(this,sn).div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&h(this,sn).div.contains(n)){const{isMac:i}=Tn.platform;if(e.button!==0||e.ctrlKey&&i)return;h(this,oe).showAllEditors("highlight",!0,!0),h(this,sn).div.classList.add("free"),this.toggleDrawing(),qm.startHighlighting(this,h(this,oe).direction==="ltr",{target:h(this,sn).div,x:e.x,y:e.y}),h(this,sn).div.addEventListener("pointerup",()=>{h(this,sn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:h(this,oe)._signal}),e.preventDefault()}},Sr=function(){return h(qi,Po).get(h(this,oe).getMode())},b0=function(e){const n=h(this,tt,Sr);return n?new n.prototype.constructor(e):null},w0=function(){const{x:e,y:n,width:i,height:r}=this.div.getBoundingClientRect(),s=Math.max(0,e),o=Math.max(0,n),a=Math.min(window.innerWidth,e+i),l=Math.min(window.innerHeight,n+r),u=(s+a)/2-e,c=(o+l)/2-n,[d,f]=this.viewport.rotation%180===0?[u,c]:[c,u];return{offsetX:d,offsetY:f}},om=function(){for(const e of h(this,ki).values())e.isEmpty()&&e.remove()},ce(qi,"_initialized",!1),x(qi,Po,new Map([t0,m0,y0,qm].map(e=>[e._editorType,e])));let E0=qi;var sr,vp,_n,Tl,Ay,w1,Kr,A0,S1,x0;const en=class en{constructor({pageIndex:e}){x(this,Kr);x(this,sr,null);x(this,vp,0);x(this,_n,new Map);x(this,Tl,new Map);this.pageIndex=e}setParent(e){if(!h(this,sr)){S(this,sr,e);return}if(h(this,sr)!==e){if(h(this,_n).size>0)for(const n of h(this,_n).values())n.remove(),e.append(n);S(this,sr,e)}}static get _svgFactory(){return Ae(this,"_svgFactory",new dw)}draw(e,n=!1,i=!1){const r=pn(this,vp)._++,s=C(this,Kr,A0).call(this),o=en._svgFactory.createElement("defs");s.append(o);const a=en._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),n&&h(this,Tl).set(r,a);const u=i?C(this,Kr,S1).call(this,o,l):null,c=en._svgFactory.createElement("use");return s.append(c),c.setAttribute("href",`#${l}`),this.updateProperties(s,e),h(this,_n).set(r,s),{id:r,clipPathId:`url(#${u})`}}drawOutline(e,n){const i=pn(this,vp)._++,r=C(this,Kr,A0).call(this),s=en._svgFactory.createElement("defs");r.append(s);const o=en._svgFactory.createElement("path");s.append(o);const a=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(n){const d=en._svgFactory.createElement("mask");s.append(d),l=`mask_p${this.pageIndex}_${i}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const f=en._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const g=en._svgFactory.createElement("use");d.append(g),g.setAttribute("href",`#${a}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const u=en._svgFactory.createElement("use");r.append(u),u.setAttribute("href",`#${a}`),l&&u.setAttribute("mask",`url(#${l})`);const c=u.cloneNode();return r.append(c),u.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.updateProperties(r,e),h(this,_n).set(i,r),i}finalizeDraw(e,n){h(this,Tl).delete(e),this.updateProperties(e,n)}updateProperties(e,n){var l;if(!n)return;const{root:i,bbox:r,rootClass:s,path:o}=n,a=typeof e=="number"?h(this,_n).get(e):e;if(a){if(i&&C(this,Kr,x0).call(this,a,i),r&&C(l=en,Ay,w1).call(l,a,r),s){const{classList:u}=a;for(const[c,d]of Object.entries(s))u.toggle(c,d)}if(o){const c=a.firstChild.firstChild;C(this,Kr,x0).call(this,c,o)}}}updateParent(e,n){if(n===this)return;const i=h(this,_n).get(e);i&&(h(n,sr).append(i),h(this,_n).delete(e),h(n,_n).set(e,i))}remove(e){h(this,Tl).delete(e),h(this,sr)!==null&&(h(this,_n).get(e).remove(),h(this,_n).delete(e))}destroy(){S(this,sr,null);for(const e of h(this,_n).values())e.remove();h(this,_n).clear(),h(this,Tl).clear()}};sr=new WeakMap,vp=new WeakMap,_n=new WeakMap,Tl=new WeakMap,Ay=new WeakSet,w1=function(e,[n,i,r,s]){const{style:o}=e;o.top=`${100*i}%`,o.left=`${100*n}%`,o.width=`${100*r}%`,o.height=`${100*s}%`},Kr=new WeakSet,A0=function(){const e=en._svgFactory.create(1,1,!0);return h(this,sr).append(e),e.setAttribute("aria-hidden",!0),e},S1=function(e,n){const i=en._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${n}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const s=en._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${n}`),s.classList.add("clip"),r},x0=function(e,n){for(const[i,r]of Object.entries(n))r===null?e.removeAttribute(i):e.setAttribute(i,r)},x(en,Ay);let S0=en;globalThis.pdfjsTestingUtils={HighlightOutliner:i0};fe.AbortException;fe.AnnotationEditorLayer;fe.AnnotationEditorParamsType;fe.AnnotationEditorType;fe.AnnotationEditorUIManager;fe.AnnotationLayer;fe.AnnotationMode;fe.ColorPicker;fe.DOMSVGFactory;fe.DrawLayer;fe.FeatureTest;var TB=fe.GlobalWorkerOptions;fe.ImageKind;fe.InvalidPDFException;fe.MissingPDFException;fe.OPS;fe.OutputScale;fe.PDFDataRangeTransport;fe.PDFDateString;fe.PDFWorker;fe.PasswordResponses;fe.PermissionFlag;fe.PixelsPerInch;fe.RenderingCancelledException;fe.TextLayer;fe.TouchManager;fe.UnexpectedResponseException;fe.Util;fe.VerbosityLevel;fe.XfaLayer;fe.build;fe.createValidAbsoluteUrl;fe.fetchData;var CB=fe.getDocument;fe.getFilenameFromUrl;fe.getPdfFilenameFromUrl;fe.getXfaPageViewport;fe.isDataScheme;fe.isPdfFile;fe.noContextMenu;fe.normalizeUnicode;fe.setLayerDimensions;fe.shadow;fe.stopEvent;var kB=fe.version;TB.workerSrc=`https://unpkg.com/pdfjs-dist@${kB}/build/pdf.worker.min.mjs`;const IB=async t=>{const e=t.type;if(e==="application/pdf")return await NB(t);if(e==="application/vnd.openxmlformats-officedocument.wordprocessingml.document")return await KA(t);if(e==="application/vnd.openxmlformats-officedocument.presentationml.presentation")return await YA(t);if(e==="text/plain"||e==="text/markdown"||t.name.endsWith(".md"))return await RB(t);if(e.startsWith("image/"))return await MB(t);if(t.name.endsWith(".docx"))return await KA(t);if(t.name.endsWith(".pptx"))return await YA(t);throw new Error("Unsupported file type")},RB=t=>new Promise((e,n)=>{const i=new FileReader;i.onload=r=>e({name:t.name,content:r.target.result,type:"text"}),i.onerror=r=>n(r),i.readAsText(t)}),NB=async t=>{const e=await t.arrayBuffer(),n=await CB({data:e}).promise;let i="";for(let r=1;r<=n.numPages;r++){const a=(await(await n.getPage(r)).getTextContent()).items.map(l=>l.str).join(" ");i+=`[Page ${r}] ${a}

`}return{name:t.name,content:i,type:"pdf"}},MB=t=>new Promise((e,n)=>{const i=new FileReader;i.onload=r=>{const s=r.target.result.split(",")[1];e({name:t.name,content:s,type:"image",mimeType:t.type})},i.onerror=r=>n(r),i.readAsDataURL(t)}),KA=async t=>{const e=await t.arrayBuffer(),i=await(await nw(()=>import("./index-C-biJheu.js").then(r=>r.i),__vite__mapDeps([0,1]))).extractRawText({arrayBuffer:e});return{name:t.name,content:i.value,type:"docx"}},YA=async t=>{const e=(await nw(async()=>{const{default:o}=await import("./jszip.min-BiKqZY1f.js").then(a=>a.j);return{default:o}},[])).default,n=await t.arrayBuffer(),i=await e.loadAsync(n);let r="";const s=Object.keys(i.files).filter(o=>o.startsWith("ppt/slides/slide")&&o.endsWith(".xml"));s.sort((o,a)=>{const l=parseInt(o.match(/slide(\d+)\.xml/)[1]),u=parseInt(a.match(/slide(\d+)\.xml/)[1]);return l-u});for(let o=0;o<s.length;o++){const a=s[o],u=(await i.files[a].async("text")).match(/<a:t>([^<]*)<\/a:t>/g);if(u){const c=u.map(d=>d.replace(/<\/?a:t>/g,"")).join(" ");r+=`[Slide ${o+1}] ${c}

`}}return{name:t.name,content:r||"No text content found in presentation.",type:"pptx"}},PB=({sources:t,setSources:e,onSourceClick:n})=>{const i=q.useRef(null),r=async o=>{const a=Array.from(o.target.files);for(const l of a)try{const u=await IB(l);e(c=>[...c,{id:Date.now()+Math.random(),title:l.name,type:u.type,content:u.content,createdAt:new Date().toISOString()}])}catch(u){console.error("Error processing file:",u),alert(`Failed to process ${l.name}: ${u.message}`)}},s=(o,a)=>{o.stopPropagation(),e(t.filter(l=>l.id!==a))};return P.jsxs("div",{className:"h-full flex flex-col glass-panel rounded-2xl overflow-hidden",children:[P.jsxs("div",{className:"p-4 border-b border-border/50 flex justify-between items-center bg-muted/30",children:[P.jsx("h2",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground",children:"Sources"}),P.jsx("span",{className:"bg-primary/10 text-primary text-xs px-2 py-1 rounded-full font-medium",children:t.length})]}),P.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar",children:[P.jsxs("div",{onClick:()=>{var o;return(o=i.current)==null?void 0:o.click()},className:"border-2 border-dashed border-border rounded-xl p-6 flex flex-col items-center justify-center text-center cursor-pointer hover:bg-muted/50 transition-colors group",children:[P.jsx("div",{className:"bg-primary/10 text-primary p-3 rounded-full mb-3 group-hover:scale-110 transition-transform",children:P.jsx(SR,{size:24})}),P.jsx("p",{className:"text-sm font-medium mb-1",children:"Add Source"}),P.jsx("p",{className:"text-xs text-muted-foreground",children:"Docs or Images"}),P.jsx("input",{type:"file",ref:i,onChange:r,multiple:!0,accept:".txt,.md,.pdf,.docx,.pptx,.png,.jpg,.jpeg,.webp,.heic",className:"hidden"})]}),t.map(o=>P.jsxs("div",{onClick:()=>n(o),className:"group flex items-start gap-3 p-3 rounded-xl hover:bg-muted/50 cursor-pointer border border-transparent hover:border-border transition-all",children:[P.jsx("div",{className:"mt-1 p-2 bg-white dark:bg-slate-800 rounded-lg shadow-sm text-primary",children:o.type==="image"?P.jsx(a2,{size:18}):P.jsx(Vy,{size:18})}),P.jsxs("div",{className:"flex-1 min-w-0",children:[P.jsx("h4",{className:"font-medium text-sm truncate pr-2",children:o.title}),P.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[o.type.toUpperCase(),"  ",o.content.length>1e3?Math.round(o.content.length/1e3)+"k":o.content.length," chars"]})]}),P.jsx("button",{onClick:a=>s(a,o.id),className:"p-1.5 text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-lg opacity-0 group-hover:opacity-100 transition-all",children:P.jsx(AR,{size:16})})]},o.id))]})]})};function LB(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const DB=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,OB=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,FB={};function XA(t,e){return(FB.jsx?OB:DB).test(t)}const UB=/[ \t\n\f\r]/g;function BB(t){return typeof t=="object"?t.type==="text"?JA(t.value):!1:JA(t)}function JA(t){return t.replace(UB,"")===""}class Ip{constructor(e,n,i){this.normal=n,this.property=e,i&&(this.space=i)}}Ip.prototype.normal={};Ip.prototype.property={};Ip.prototype.space=void 0;function A1(t,e){const n={},i={};for(const r of t)Object.assign(n,r.property),Object.assign(i,r.normal);return new Ip(n,i,e)}function T0(t){return t.toLowerCase()}class Wn{constructor(e,n){this.attribute=n,this.property=e}}Wn.prototype.attribute="";Wn.prototype.booleanish=!1;Wn.prototype.boolean=!1;Wn.prototype.commaOrSpaceSeparated=!1;Wn.prototype.commaSeparated=!1;Wn.prototype.defined=!1;Wn.prototype.mustUseProperty=!1;Wn.prototype.number=!1;Wn.prototype.overloadedBoolean=!1;Wn.prototype.property="";Wn.prototype.spaceSeparated=!1;Wn.prototype.space=void 0;let zB=0;const ve=Kl(),_t=Kl(),C0=Kl(),Y=Kl(),Ke=Kl(),Hu=Kl(),Xn=Kl();function Kl(){return 2**++zB}const k0=Object.freeze(Object.defineProperty({__proto__:null,boolean:ve,booleanish:_t,commaOrSpaceSeparated:Xn,commaSeparated:Hu,number:Y,overloadedBoolean:C0,spaceSeparated:Ke},Symbol.toStringTag,{value:"Module"})),Yv=Object.keys(k0);class fw extends Wn{constructor(e,n,i,r){let s=-1;if(super(e,n),QA(this,"space",r),typeof i=="number")for(;++s<Yv.length;){const o=Yv[s];QA(this,Yv[s],(i&k0[o])===k0[o])}}}fw.prototype.defined=!0;function QA(t,e,n){n&&(t[e]=n)}function ud(t){const e={},n={};for(const[i,r]of Object.entries(t.properties)){const s=new fw(i,t.transform(t.attributes||{},i),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),e[i]=s,n[T0(i)]=i,n[T0(s.attribute)]=i}return new Ip(e,n,t.space)}const x1=ud({properties:{ariaActiveDescendant:null,ariaAtomic:_t,ariaAutoComplete:null,ariaBusy:_t,ariaChecked:_t,ariaColCount:Y,ariaColIndex:Y,ariaColSpan:Y,ariaControls:Ke,ariaCurrent:null,ariaDescribedBy:Ke,ariaDetails:null,ariaDisabled:_t,ariaDropEffect:Ke,ariaErrorMessage:null,ariaExpanded:_t,ariaFlowTo:Ke,ariaGrabbed:_t,ariaHasPopup:null,ariaHidden:_t,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ke,ariaLevel:Y,ariaLive:null,ariaModal:_t,ariaMultiLine:_t,ariaMultiSelectable:_t,ariaOrientation:null,ariaOwns:Ke,ariaPlaceholder:null,ariaPosInSet:Y,ariaPressed:_t,ariaReadOnly:_t,ariaRelevant:null,ariaRequired:_t,ariaRoleDescription:Ke,ariaRowCount:Y,ariaRowIndex:Y,ariaRowSpan:Y,ariaSelected:_t,ariaSetSize:Y,ariaSort:null,ariaValueMax:Y,ariaValueMin:Y,ariaValueNow:Y,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function T1(t,e){return e in t?t[e]:e}function C1(t,e){return T1(t,e.toLowerCase())}const HB=ud({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Hu,acceptCharset:Ke,accessKey:Ke,action:null,allow:null,allowFullScreen:ve,allowPaymentRequest:ve,allowUserMedia:ve,alt:null,as:null,async:ve,autoCapitalize:null,autoComplete:Ke,autoFocus:ve,autoPlay:ve,blocking:Ke,capture:null,charSet:null,checked:ve,cite:null,className:Ke,cols:Y,colSpan:null,content:null,contentEditable:_t,controls:ve,controlsList:Ke,coords:Y|Hu,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ve,defer:ve,dir:null,dirName:null,disabled:ve,download:C0,draggable:_t,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ve,formTarget:null,headers:Ke,height:Y,hidden:C0,high:Y,href:null,hrefLang:null,htmlFor:Ke,httpEquiv:Ke,id:null,imageSizes:null,imageSrcSet:null,inert:ve,inputMode:null,integrity:null,is:null,isMap:ve,itemId:null,itemProp:Ke,itemRef:Ke,itemScope:ve,itemType:Ke,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ve,low:Y,manifest:null,max:null,maxLength:Y,media:null,method:null,min:null,minLength:Y,multiple:ve,muted:ve,name:null,nonce:null,noModule:ve,noValidate:ve,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ve,optimum:Y,pattern:null,ping:Ke,placeholder:null,playsInline:ve,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ve,referrerPolicy:null,rel:Ke,required:ve,reversed:ve,rows:Y,rowSpan:Y,sandbox:Ke,scope:null,scoped:ve,seamless:ve,selected:ve,shadowRootClonable:ve,shadowRootDelegatesFocus:ve,shadowRootMode:null,shape:null,size:Y,sizes:null,slot:null,span:Y,spellCheck:_t,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Y,step:null,style:null,tabIndex:Y,target:null,title:null,translate:null,type:null,typeMustMatch:ve,useMap:null,value:_t,width:Y,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ke,axis:null,background:null,bgColor:null,border:Y,borderColor:null,bottomMargin:Y,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ve,declare:ve,event:null,face:null,frame:null,frameBorder:null,hSpace:Y,leftMargin:Y,link:null,longDesc:null,lowSrc:null,marginHeight:Y,marginWidth:Y,noResize:ve,noHref:ve,noShade:ve,noWrap:ve,object:null,profile:null,prompt:null,rev:null,rightMargin:Y,rules:null,scheme:null,scrolling:_t,standby:null,summary:null,text:null,topMargin:Y,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Y,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ve,disableRemotePlayback:ve,prefix:null,property:null,results:Y,security:null,unselectable:null},space:"html",transform:C1}),GB=ud({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Xn,accentHeight:Y,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Y,amplitude:Y,arabicForm:null,ascent:Y,attributeName:null,attributeType:null,azimuth:Y,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Y,by:null,calcMode:null,capHeight:Y,className:Ke,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Y,diffuseConstant:Y,direction:null,display:null,dur:null,divisor:Y,dominantBaseline:null,download:ve,dx:null,dy:null,edgeMode:null,editable:null,elevation:Y,enableBackground:null,end:null,event:null,exponent:Y,externalResourcesRequired:null,fill:null,fillOpacity:Y,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Hu,g2:Hu,glyphName:Hu,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Y,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Y,horizOriginX:Y,horizOriginY:Y,id:null,ideographic:Y,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Y,k:Y,k1:Y,k2:Y,k3:Y,k4:Y,kernelMatrix:Xn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Y,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Y,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Y,overlineThickness:Y,paintOrder:null,panose1:null,path:null,pathLength:Y,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ke,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Y,pointsAtY:Y,pointsAtZ:Y,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Xn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Xn,rev:Xn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Xn,requiredFeatures:Xn,requiredFonts:Xn,requiredFormats:Xn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Y,specularExponent:Y,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Y,strikethroughThickness:Y,string:null,stroke:null,strokeDashArray:Xn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Y,strokeOpacity:Y,strokeWidth:null,style:null,surfaceScale:Y,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Xn,tabIndex:Y,tableValues:null,target:null,targetX:Y,targetY:Y,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Xn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Y,underlineThickness:Y,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Y,values:null,vAlphabetic:Y,vMathematical:Y,vectorEffect:null,vHanging:Y,vIdeographic:Y,version:null,vertAdvY:Y,vertOriginX:Y,vertOriginY:Y,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Y,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:T1}),k1=ud({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),I1=ud({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:C1}),R1=ud({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),$B={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},VB=/[A-Z]/g,ZA=/-[a-z]/g,qB=/^data[-\w.:]+$/i;function WB(t,e){const n=T0(e);let i=e,r=Wn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&qB.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(ZA,YB);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!ZA.test(s)){let o=s.replace(VB,KB);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}r=fw}return new r(i,e)}function KB(t){return"-"+t.toLowerCase()}function YB(t){return t.charAt(1).toUpperCase()}const XB=A1([x1,HB,k1,I1,R1],"html"),pw=A1([x1,GB,k1,I1,R1],"svg");function JB(t){return t.join(" ").trim()}var gw={},jA=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,QB=/\n/g,ZB=/^\s*/,jB=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,ez=/^:\s*/,tz=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,nz=/^[;\s]*/,iz=/^\s+|\s+$/g,rz=`
`,ex="/",tx="*",ya="",sz="comment",oz="declaration";function az(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,i=1;function r(y){var v=y.match(QB);v&&(n+=v.length);var E=y.lastIndexOf(rz);i=~E?y.length-E:i+y.length}function s(){var y={line:n,column:i};return function(v){return v.position=new o(y),u(),v}}function o(y){this.start=y,this.end={line:n,column:i},this.source=e.source}o.prototype.content=t;function a(y){var v=new Error(e.source+":"+n+":"+i+": "+y);if(v.reason=y,v.filename=e.source,v.line=n,v.column=i,v.source=t,!e.silent)throw v}function l(y){var v=y.exec(t);if(v){var E=v[0];return r(E),t=t.slice(E.length),v}}function u(){l(ZB)}function c(y){var v;for(y=y||[];v=d();)v!==!1&&y.push(v);return y}function d(){var y=s();if(!(ex!=t.charAt(0)||tx!=t.charAt(1))){for(var v=2;ya!=t.charAt(v)&&(tx!=t.charAt(v)||ex!=t.charAt(v+1));)++v;if(v+=2,ya===t.charAt(v-1))return a("End of comment missing");var E=t.slice(2,v-2);return i+=2,r(E),t=t.slice(v),i+=2,y({type:sz,comment:E})}}function f(){var y=s(),v=l(jB);if(v){if(d(),!l(ez))return a("property missing ':'");var E=l(tz),_=y({type:oz,property:nx(v[0].replace(jA,ya)),value:E?nx(E[0].replace(jA,ya)):ya});return l(nz),_}}function g(){var y=[];c(y);for(var v;v=f();)v!==!1&&(y.push(v),c(y));return y}return u(),g()}function nx(t){return t?t.replace(iz,ya):ya}var lz=az,uz=fm&&fm.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gw,"__esModule",{value:!0});gw.default=dz;const cz=uz(lz);function dz(t,e){let n=null;if(!t||typeof t!="string")return n;const i=(0,cz.default)(t),r=typeof e=="function";return i.forEach(s=>{if(s.type!=="declaration")return;const{property:o,value:a}=s;r?e(o,a,s):a&&(n=n||{},n[o]=a)}),n}var jy={};Object.defineProperty(jy,"__esModule",{value:!0});jy.camelCase=void 0;var hz=/^--[a-zA-Z0-9_-]+$/,fz=/-([a-z])/g,pz=/^[^-]+$/,gz=/^-(webkit|moz|ms|o|khtml)-/,mz=/^-(ms)-/,yz=function(t){return!t||pz.test(t)||hz.test(t)},vz=function(t,e){return e.toUpperCase()},ix=function(t,e){return"".concat(e,"-")},_z=function(t,e){return e===void 0&&(e={}),yz(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(mz,ix):t=t.replace(gz,ix),t.replace(fz,vz))};jy.camelCase=_z;var Ez=fm&&fm.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},bz=Ez(gw),wz=jy;function I0(t,e){var n={};return!t||typeof t!="string"||(0,bz.default)(t,function(i,r){i&&r&&(n[(0,wz.camelCase)(i,e)]=r)}),n}I0.default=I0;var Sz=I0;const Az=xy(Sz),N1=M1("end"),mw=M1("start");function M1(t){return e;function e(n){const i=n&&n.position&&n.position[t]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function xz(t){const e=mw(t),n=N1(t);if(e&&n)return{start:e,end:n}}function ph(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?rx(t.position):"start"in t||"end"in t?rx(t):"line"in t||"column"in t?R0(t):""}function R0(t){return sx(t&&t.line)+":"+sx(t&&t.column)}function rx(t){return R0(t&&t.start)+"-"+R0(t&&t.end)}function sx(t){return t&&typeof t=="number"?t:1}class hn extends Error{constructor(e,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let r="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?r=e:!s.cause&&e&&(o=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof i=="string"){const l=i.indexOf(":");l===-1?s.ruleId=i:(s.source=i.slice(0,l),s.ruleId=i.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=a?a.line:void 0,this.name=ph(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}hn.prototype.file="";hn.prototype.name="";hn.prototype.reason="";hn.prototype.message="";hn.prototype.stack="";hn.prototype.column=void 0;hn.prototype.line=void 0;hn.prototype.ancestors=void 0;hn.prototype.cause=void 0;hn.prototype.fatal=void 0;hn.prototype.place=void 0;hn.prototype.ruleId=void 0;hn.prototype.source=void 0;const yw={}.hasOwnProperty,Tz=new Map,Cz=/[A-Z]/g,kz=new Set(["table","tbody","thead","tfoot","tr"]),Iz=new Set(["td","th"]),P1="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Rz(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=Uz(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=Fz(n,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?pw:XB,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=L1(r,t,void 0);return s&&typeof s!="string"?s:r.create(t,r.Fragment,{children:s||void 0},void 0)}function L1(t,e,n){if(e.type==="element")return Nz(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Mz(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Lz(t,e,n);if(e.type==="mdxjsEsm")return Pz(t,e);if(e.type==="root")return Dz(t,e,n);if(e.type==="text")return Oz(t,e)}function Nz(t,e,n){const i=t.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=pw,t.schema=r),t.ancestors.push(e);const s=O1(t,e.tagName,!1),o=Bz(t,e);let a=_w(t,e);return kz.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!BB(l):!0})),D1(t,o,s,e),vw(o,a),t.ancestors.pop(),t.schema=i,t.create(e,s,o,n)}function Mz(t,e){if(e.data&&e.data.estree&&t.evaluater){const i=e.data.estree.body[0];return i.type,t.evaluater.evaluateExpression(i.expression)}Hh(t,e.position)}function Pz(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Hh(t,e.position)}function Lz(t,e,n){const i=t.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=pw,t.schema=r),t.ancestors.push(e);const s=e.name===null?t.Fragment:O1(t,e.name,!0),o=zz(t,e),a=_w(t,e);return D1(t,o,s,e),vw(o,a),t.ancestors.pop(),t.schema=i,t.create(e,s,o,n)}function Dz(t,e,n){const i={};return vw(i,_w(t,e)),t.create(e,t.Fragment,i,n)}function Oz(t,e){return e.value}function D1(t,e,n,i){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=i)}function vw(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function Fz(t,e,n){return i;function i(r,s,o,a){const u=Array.isArray(o.children)?n:e;return a?u(s,o,a):u(s,o)}}function Uz(t,e){return n;function n(i,r,s,o){const a=Array.isArray(s.children),l=mw(i);return e(r,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function Bz(t,e){const n={};let i,r;for(r in e.properties)if(r!=="children"&&yw.call(e.properties,r)){const s=Hz(t,r,e.properties[r]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Iz.has(e.tagName)?i=a:n[o]=a}}if(i){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function zz(t,e){const n={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&t.evaluater){const s=i.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else Hh(t,e.position);else{const r=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&t.evaluater){const a=i.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else Hh(t,e.position);else s=i.value===null?!0:i.value;n[r]=s}return n}function _w(t,e){const n=[];let i=-1;const r=t.passKeys?new Map:Tz;for(;++i<e.children.length;){const s=e.children[i];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=r.get(l)||0;o=l+"-"+u,r.set(l,u+1)}}const a=L1(t,s,o);a!==void 0&&n.push(a)}return n}function Hz(t,e,n){const i=WB(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?LB(n):JB(n)),i.property==="style"){let r=typeof n=="object"?n:Gz(t,String(n));return t.stylePropertyNameCase==="css"&&(r=$z(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&i.space?$B[i.property]||i.property:i.attribute,n]}}function Gz(t,e){try{return Az(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const i=n,r=new hn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=P1+"#cannot-parse-style-attribute",r}}function O1(t,e,n){let i;if(!n)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let s=-1,o;for(;++s<r.length;){const a=XA(r[s])?{type:"Identifier",name:r[s]}:{type:"Literal",value:r[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}i=o}else i=XA(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return yw.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(i);Hh(t)}function Hh(t,e){const n=new hn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=P1+"#cannot-handle-mdx-estrees-without-createevaluater",n}function $z(t){const e={};let n;for(n in t)yw.call(t,n)&&(e[Vz(n)]=t[n]);return e}function Vz(t){let e=t.replace(Cz,qz);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function qz(t){return"-"+t.toLowerCase()}const Xv={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Wz={};function Ew(t,e){const n=Wz,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return F1(t,i,r)}function F1(t,e,n){if(Kz(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return ox(t.children,e,n)}return Array.isArray(t)?ox(t,e,n):""}function ox(t,e,n){const i=[];let r=-1;for(;++r<t.length;)i[r]=F1(t[r],e,n);return i.join("")}function Kz(t){return!!(t&&typeof t=="object")}const ax=document.createElement("i");function bw(t){const e="&"+t+";";ax.innerHTML=e;const n=ax.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function pi(t,e,n,i){const r=t.length;let s=0,o;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,n=n>0?n:0,i.length<1e4)o=Array.from(i),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<i.length;)o=i.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Ni(t,e){return t.length>0?(pi(t,t.length,0,e),t):e}const lx={}.hasOwnProperty;function U1(t){const e={};let n=-1;for(;++n<t.length;)Yz(e,t[n]);return e}function Yz(t,e){let n;for(n in e){const r=(lx.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){lx.call(r,o)||(r[o]=[]);const a=s[o];Xz(r[o],Array.isArray(a)?a:a?[a]:[])}}}function Xz(t,e){let n=-1;const i=[];for(;++n<e.length;)(e[n].add==="after"?t:i).push(e[n]);pi(t,0,0,i)}function B1(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function hr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const An=oa(/[A-Za-z]/),un=oa(/[\dA-Za-z]/),Jz=oa(/[#-'*+\--9=?A-Z^-~]/);function Km(t){return t!==null&&(t<32||t===127)}const N0=oa(/\d/),Qz=oa(/[\dA-Fa-f]/),Zz=oa(/[!-/:-@[-`{-~]/);function le(t){return t!==null&&t<-2}function qe(t){return t!==null&&(t<0||t===32)}function xe(t){return t===-2||t===-1||t===32}const ev=oa(new RegExp("\\p{P}|\\p{S}","u")),Bl=oa(/\s/);function oa(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function cd(t){const e=[];let n=-1,i=0,r=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&un(t.charCodeAt(n+1))&&un(t.charCodeAt(n+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),r=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(i,n),encodeURIComponent(o)),i=n+r+1,o=""),r&&(n+=r,r=0)}return e.join("")+t.slice(i)}function ke(t,e,n,i){const r=i?i-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return xe(l)?(t.enter(n),a(l)):e(l)}function a(l){return xe(l)&&s++<r?(t.consume(l),a):(t.exit(n),e(l))}}const jz={tokenize:eH};function eH(t){const e=t.attempt(this.parser.constructs.contentInitial,i,r);let n;return e;function i(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),ke(t,e,"linePrefix")}function r(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return le(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const tH={tokenize:nH},ux={tokenize:iH};function nH(t){const e=this,n=[];let i=0,r,s,o;return a;function a(w){if(i<n.length){const A=n[i];return e.containerState=A[1],t.attempt(A[0].continuation,l,u)(w)}return u(w)}function l(w){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&b();const A=e.events.length;let k=A,T;for(;k--;)if(e.events[k][0]==="exit"&&e.events[k][1].type==="chunkFlow"){T=e.events[k][1].end;break}_(i);let N=A;for(;N<e.events.length;)e.events[N][1].end={...T},N++;return pi(e.events,k+1,0,e.events.slice(A)),e.events.length=N,u(w)}return a(w)}function u(w){if(i===n.length){if(!r)return f(w);if(r.currentConstruct&&r.currentConstruct.concrete)return y(w);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(ux,c,d)(w)}function c(w){return r&&b(),_(i),f(w)}function d(w){return e.parser.lazy[e.now().line]=i!==n.length,o=e.now().offset,y(w)}function f(w){return e.containerState={},t.attempt(ux,g,y)(w)}function g(w){return i++,n.push([e.currentConstruct,e.containerState]),f(w)}function y(w){if(w===null){r&&b(),_(0),t.consume(w);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),v(w)}function v(w){if(w===null){E(t.exit("chunkFlow"),!0),_(0),t.consume(w);return}return le(w)?(t.consume(w),E(t.exit("chunkFlow")),i=0,e.interrupt=void 0,a):(t.consume(w),v)}function E(w,A){const k=e.sliceStream(w);if(A&&k.push(null),w.previous=s,s&&(s.next=w),s=w,r.defineSkip(w.start),r.write(k),e.parser.lazy[w.start.line]){let T=r.events.length;for(;T--;)if(r.events[T][1].start.offset<o&&(!r.events[T][1].end||r.events[T][1].end.offset>o))return;const N=e.events.length;let L=N,F,R;for(;L--;)if(e.events[L][0]==="exit"&&e.events[L][1].type==="chunkFlow"){if(F){R=e.events[L][1].end;break}F=!0}for(_(i),T=N;T<e.events.length;)e.events[T][1].end={...R},T++;pi(e.events,L+1,0,e.events.slice(N)),e.events.length=T}}function _(w){let A=n.length;for(;A-- >w;){const k=n[A];e.containerState=k[1],k[0].exit.call(e,t)}n.length=w}function b(){r.write([null]),s=void 0,r=void 0,e.containerState._closeFlow=void 0}}function iH(t,e,n){return ke(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function nd(t){if(t===null||qe(t)||Bl(t))return 1;if(ev(t))return 2}function tv(t,e,n){const i=[];let r=-1;for(;++r<t.length;){const s=t[r].resolveAll;s&&!i.includes(s)&&(e=s(e,n),i.push(s))}return e}const M0={name:"attention",resolveAll:rH,tokenize:sH};function rH(t,e){let n=-1,i,r,s,o,a,l,u,c;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(i=n;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&e.sliceSerialize(t[i][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[i][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[i][1].end.offset-t[i][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d={...t[i][1].end},f={...t[n][1].start};cx(d,-l),cx(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...t[i][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:f},s={type:l>1?"strongText":"emphasisText",start:{...t[i][1].end},end:{...t[n][1].start}},r={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[i][1].end={...o.start},t[n][1].start={...a.end},u=[],t[i][1].end.offset-t[i][1].start.offset&&(u=Ni(u,[["enter",t[i][1],e],["exit",t[i][1],e]])),u=Ni(u,[["enter",r,e],["enter",o,e],["exit",o,e],["enter",s,e]]),u=Ni(u,tv(e.parser.constructs.insideSpan.null,t.slice(i+1,n),e)),u=Ni(u,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",r,e]]),t[n][1].end.offset-t[n][1].start.offset?(c=2,u=Ni(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):c=0,pi(t,i-1,n-i+3,u),n=i+u.length-c-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function sH(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,r=nd(i);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const u=t.exit("attentionSequence"),c=nd(l),d=!c||c===2&&r||n.includes(l),f=!r||r===2&&c||n.includes(i);return u._open=!!(s===42?d:d&&(r||!f)),u._close=!!(s===42?f:f&&(c||!d)),e(l)}}function cx(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const oH={name:"autolink",tokenize:aH};function aH(t,e,n){let i=0;return r;function r(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(g){return An(g)?(t.consume(g),o):g===64?n(g):u(g)}function o(g){return g===43||g===45||g===46||un(g)?(i=1,a(g)):u(g)}function a(g){return g===58?(t.consume(g),i=0,l):(g===43||g===45||g===46||un(g))&&i++<32?(t.consume(g),a):(i=0,u(g))}function l(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||Km(g)?n(g):(t.consume(g),l)}function u(g){return g===64?(t.consume(g),c):Jz(g)?(t.consume(g),u):n(g)}function c(g){return un(g)?d(g):n(g)}function d(g){return g===46?(t.consume(g),i=0,c):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):f(g)}function f(g){if((g===45||un(g))&&i++<63){const y=g===45?f:d;return t.consume(g),y}return n(g)}}const Rp={partial:!0,tokenize:lH};function lH(t,e,n){return i;function i(s){return xe(s)?ke(t,r,"linePrefix")(s):r(s)}function r(s){return s===null||le(s)?e(s):n(s)}}const z1={continuation:{tokenize:cH},exit:dH,name:"blockQuote",tokenize:uH};function uH(t,e,n){const i=this;return r;function r(o){if(o===62){const a=i.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return xe(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function cH(t,e,n){const i=this;return r;function r(o){return xe(o)?ke(t,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(z1,e,n)(o)}}function dH(t){t.exit("blockQuote")}const H1={name:"characterEscape",tokenize:hH};function hH(t,e,n){return i;function i(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),r}function r(s){return Zz(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const G1={name:"characterReference",tokenize:fH};function fH(t,e,n){const i=this;let r=0,s,o;return a;function a(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),l}function l(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),s=31,o=un,c(d))}function u(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=Qz,c):(t.enter("characterReferenceValue"),s=7,o=N0,c(d))}function c(d){if(d===59&&r){const f=t.exit("characterReferenceValue");return o===un&&!bw(i.sliceSerialize(f))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(d)&&r++<s?(t.consume(d),c):n(d)}}const dx={partial:!0,tokenize:gH},hx={concrete:!0,name:"codeFenced",tokenize:pH};function pH(t,e,n){const i=this,r={partial:!0,tokenize:k};let s=0,o=0,a;return l;function l(T){return u(T)}function u(T){const N=i.events[i.events.length-1];return s=N&&N[1].type==="linePrefix"?N[2].sliceSerialize(N[1],!0).length:0,a=T,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),c(T)}function c(T){return T===a?(o++,t.consume(T),c):o<3?n(T):(t.exit("codeFencedFenceSequence"),xe(T)?ke(t,d,"whitespace")(T):d(T))}function d(T){return T===null||le(T)?(t.exit("codeFencedFence"),i.interrupt?e(T):t.check(dx,v,A)(T)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(T))}function f(T){return T===null||le(T)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(T)):xe(T)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),ke(t,g,"whitespace")(T)):T===96&&T===a?n(T):(t.consume(T),f)}function g(T){return T===null||le(T)?d(T):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),y(T))}function y(T){return T===null||le(T)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(T)):T===96&&T===a?n(T):(t.consume(T),y)}function v(T){return t.attempt(r,A,E)(T)}function E(T){return t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),_}function _(T){return s>0&&xe(T)?ke(t,b,"linePrefix",s+1)(T):b(T)}function b(T){return T===null||le(T)?t.check(dx,v,A)(T):(t.enter("codeFlowValue"),w(T))}function w(T){return T===null||le(T)?(t.exit("codeFlowValue"),b(T)):(t.consume(T),w)}function A(T){return t.exit("codeFenced"),e(T)}function k(T,N,L){let F=0;return R;function R(X){return T.enter("lineEnding"),T.consume(X),T.exit("lineEnding"),U}function U(X){return T.enter("codeFencedFence"),xe(X)?ke(T,H,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):H(X)}function H(X){return X===a?(T.enter("codeFencedFenceSequence"),V(X)):L(X)}function V(X){return X===a?(F++,T.consume(X),V):F>=o?(T.exit("codeFencedFenceSequence"),xe(X)?ke(T,W,"whitespace")(X):W(X)):L(X)}function W(X){return X===null||le(X)?(T.exit("codeFencedFence"),N(X)):L(X)}}}function gH(t,e,n){const i=this;return r;function r(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return i.parser.lazy[i.now().line]?n(o):e(o)}}const Jv={name:"codeIndented",tokenize:yH},mH={partial:!0,tokenize:vH};function yH(t,e,n){const i=this;return r;function r(u){return t.enter("codeIndented"),ke(t,s,"linePrefix",5)(u)}function s(u){const c=i.events[i.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):le(u)?t.attempt(mH,o,l)(u):(t.enter("codeFlowValue"),a(u))}function a(u){return u===null||le(u)?(t.exit("codeFlowValue"),o(u)):(t.consume(u),a)}function l(u){return t.exit("codeIndented"),e(u)}}function vH(t,e,n){const i=this;return r;function r(o){return i.parser.lazy[i.now().line]?n(o):le(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),r):ke(t,s,"linePrefix",5)(o)}function s(o){const a=i.events[i.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):le(o)?r(o):n(o)}}const _H={name:"codeText",previous:bH,resolve:EH,tokenize:wH};function EH(t){let e=t.length-4,n=3,i,r;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(i=n;++i<e;)if(t[i][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(i=n-1,e++;++i<=e;)r===void 0?i!==e&&t[i][1].type!=="lineEnding"&&(r=i):(i===e||t[i][1].type==="lineEnding")&&(t[r][1].type="codeTextData",i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return t}function bH(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function wH(t,e,n){let i=0,r,s;return o;function o(d){return t.enter("codeText"),t.enter("codeTextSequence"),a(d)}function a(d){return d===96?(t.consume(d),i++,a):(t.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),l):d===96?(s=t.enter("codeTextSequence"),r=0,c(d)):le(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),l):(t.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||le(d)?(t.exit("codeTextData"),l(d)):(t.consume(d),u)}function c(d){return d===96?(t.consume(d),r++,c):r===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(s.type="codeTextData",u(d))}}class SH{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,n,i){const r=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&Nd(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Nd(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Nd(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Nd(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Nd(this.left,n.reverse())}}}function Nd(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function $1(t){const e={};let n=-1,i,r,s,o,a,l,u;const c=new SH(t);for(;++n<c.length;){for(;n in e;)n=e[n];if(i=c.get(n),n&&i[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=i[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,AH(c,n)),n=e[n],u=!0);else if(i[1]._container){for(s=n,r=void 0;s--;)if(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(r&&(c.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;r&&(i[1].end={...c.get(r)[1].start},a=c.slice(r,n),a.unshift(i),c.splice(r,n-r+1,a))}}return pi(t,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function AH(t,e){const n=t.get(e)[1],i=t.get(e)[2];let r=e-1;const s=[];let o=n._tokenizer;o||(o=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],u={};let c,d,f=-1,g=n,y=0,v=0;const E=[v];for(;g;){for(;t.get(++r)[1]!==g;);s.push(r),g._tokenizer||(c=i.sliceStream(g),g.next||c.push(null),d&&o.defineSkip(g.start),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=g,g=g.next}for(g=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(v=f+1,E.push(v),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(o.events=[],g?(g._tokenizer=void 0,g.previous=void 0):E.pop(),f=E.length;f--;){const _=a.slice(E[f],E[f+1]),b=s.pop();l.push([b,b+_.length-1]),t.splice(b,2,_)}for(l.reverse(),f=-1;++f<l.length;)u[y+l[f][0]]=y+l[f][1],y+=l[f][1]-l[f][0]-1;return u}const xH={resolve:CH,tokenize:kH},TH={partial:!0,tokenize:IH};function CH(t){return $1(t),t}function kH(t,e){let n;return i;function i(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(a)}function r(a){return a===null?s(a):le(a)?t.check(TH,o,s)(a):(t.consume(a),r)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function IH(t,e,n){const i=this;return r;function r(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),ke(t,s,"linePrefix")}function s(o){if(o===null||le(o))return n(o);const a=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(i.parser.constructs.flow,n,e)(o)}}function V1(t,e,n,i,r,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return d;function d(_){return _===60?(t.enter(i),t.enter(r),t.enter(s),t.consume(_),t.exit(s),f):_===null||_===32||_===41||Km(_)?n(_):(t.enter(i),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),v(_))}function f(_){return _===62?(t.enter(s),t.consume(_),t.exit(s),t.exit(r),t.exit(i),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),g(_))}function g(_){return _===62?(t.exit("chunkString"),t.exit(a),f(_)):_===null||_===60||le(_)?n(_):(t.consume(_),_===92?y:g)}function y(_){return _===60||_===62||_===92?(t.consume(_),g):g(_)}function v(_){return!c&&(_===null||_===41||qe(_))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(i),e(_)):c<u&&_===40?(t.consume(_),c++,v):_===41?(t.consume(_),c--,v):_===null||_===32||_===40||Km(_)?n(_):(t.consume(_),_===92?E:v)}function E(_){return _===40||_===41||_===92?(t.consume(_),v):v(_)}}function q1(t,e,n,i,r,s){const o=this;let a=0,l;return u;function u(g){return t.enter(i),t.enter(r),t.consume(g),t.exit(r),t.enter(s),c}function c(g){return a>999||g===null||g===91||g===93&&!l||g===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(g):g===93?(t.exit(s),t.enter(r),t.consume(g),t.exit(r),t.exit(i),e):le(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),c):(t.enter("chunkString",{contentType:"string"}),d(g))}function d(g){return g===null||g===91||g===93||le(g)||a++>999?(t.exit("chunkString"),c(g)):(t.consume(g),l||(l=!xe(g)),g===92?f:d)}function f(g){return g===91||g===92||g===93?(t.consume(g),a++,d):d(g)}}function W1(t,e,n,i,r,s){let o;return a;function a(f){return f===34||f===39||f===40?(t.enter(i),t.enter(r),t.consume(f),t.exit(r),o=f===40?41:f,l):n(f)}function l(f){return f===o?(t.enter(r),t.consume(f),t.exit(r),t.exit(i),e):(t.enter(s),u(f))}function u(f){return f===o?(t.exit(s),l(o)):f===null?n(f):le(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),ke(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===o||f===null||le(f)?(t.exit("chunkString"),u(f)):(t.consume(f),f===92?d:c)}function d(f){return f===o||f===92?(t.consume(f),c):c(f)}}function gh(t,e){let n;return i;function i(r){return le(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,i):xe(r)?ke(t,i,n?"linePrefix":"lineSuffix")(r):e(r)}}const RH={name:"definition",tokenize:MH},NH={partial:!0,tokenize:PH};function MH(t,e,n){const i=this;let r;return s;function s(g){return t.enter("definition"),o(g)}function o(g){return q1.call(i,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function a(g){return r=hr(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),l):n(g)}function l(g){return qe(g)?gh(t,u)(g):u(g)}function u(g){return V1(t,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function c(g){return t.attempt(NH,d,d)(g)}function d(g){return xe(g)?ke(t,f,"whitespace")(g):f(g)}function f(g){return g===null||le(g)?(t.exit("definition"),i.parser.defined.push(r),e(g)):n(g)}}function PH(t,e,n){return i;function i(a){return qe(a)?gh(t,r)(a):n(a)}function r(a){return W1(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return xe(a)?ke(t,o,"whitespace")(a):o(a)}function o(a){return a===null||le(a)?e(a):n(a)}}const LH={name:"hardBreakEscape",tokenize:DH};function DH(t,e,n){return i;function i(s){return t.enter("hardBreakEscape"),t.consume(s),r}function r(s){return le(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const OH={name:"headingAtx",resolve:FH,tokenize:UH};function FH(t,e){let n=t.length-2,i=3,r,s;return t[i][1].type==="whitespace"&&(i+=2),n-2>i&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&t[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(r={type:"atxHeadingText",start:t[i][1].start,end:t[n][1].end},s={type:"chunkText",start:t[i][1].start,end:t[n][1].end,contentType:"text"},pi(t,i,n-i+1,[["enter",r,e],["enter",s,e],["exit",s,e],["exit",r,e]])),t}function UH(t,e,n){let i=0;return r;function r(c){return t.enter("atxHeading"),s(c)}function s(c){return t.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&i++<6?(t.consume(c),o):c===null||qe(c)?(t.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(t.enter("atxHeadingSequence"),l(c)):c===null||le(c)?(t.exit("atxHeading"),e(c)):xe(c)?ke(t,a,"whitespace")(c):(t.enter("atxHeadingText"),u(c))}function l(c){return c===35?(t.consume(c),l):(t.exit("atxHeadingSequence"),a(c))}function u(c){return c===null||c===35||qe(c)?(t.exit("atxHeadingText"),a(c)):(t.consume(c),u)}}const BH=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],fx=["pre","script","style","textarea"],zH={concrete:!0,name:"htmlFlow",resolveTo:$H,tokenize:VH},HH={partial:!0,tokenize:WH},GH={partial:!0,tokenize:qH};function $H(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function VH(t,e,n){const i=this;let r,s,o,a,l;return u;function u(M){return c(M)}function c(M){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(M),d}function d(M){return M===33?(t.consume(M),f):M===47?(t.consume(M),s=!0,v):M===63?(t.consume(M),r=3,i.interrupt?e:I):An(M)?(t.consume(M),o=String.fromCharCode(M),E):n(M)}function f(M){return M===45?(t.consume(M),r=2,g):M===91?(t.consume(M),r=5,a=0,y):An(M)?(t.consume(M),r=4,i.interrupt?e:I):n(M)}function g(M){return M===45?(t.consume(M),i.interrupt?e:I):n(M)}function y(M){const ge="CDATA[";return M===ge.charCodeAt(a++)?(t.consume(M),a===ge.length?i.interrupt?e:H:y):n(M)}function v(M){return An(M)?(t.consume(M),o=String.fromCharCode(M),E):n(M)}function E(M){if(M===null||M===47||M===62||qe(M)){const ge=M===47,Pe=o.toLowerCase();return!ge&&!s&&fx.includes(Pe)?(r=1,i.interrupt?e(M):H(M)):BH.includes(o.toLowerCase())?(r=6,ge?(t.consume(M),_):i.interrupt?e(M):H(M)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(M):s?b(M):w(M))}return M===45||un(M)?(t.consume(M),o+=String.fromCharCode(M),E):n(M)}function _(M){return M===62?(t.consume(M),i.interrupt?e:H):n(M)}function b(M){return xe(M)?(t.consume(M),b):R(M)}function w(M){return M===47?(t.consume(M),R):M===58||M===95||An(M)?(t.consume(M),A):xe(M)?(t.consume(M),w):R(M)}function A(M){return M===45||M===46||M===58||M===95||un(M)?(t.consume(M),A):k(M)}function k(M){return M===61?(t.consume(M),T):xe(M)?(t.consume(M),k):w(M)}function T(M){return M===null||M===60||M===61||M===62||M===96?n(M):M===34||M===39?(t.consume(M),l=M,N):xe(M)?(t.consume(M),T):L(M)}function N(M){return M===l?(t.consume(M),l=null,F):M===null||le(M)?n(M):(t.consume(M),N)}function L(M){return M===null||M===34||M===39||M===47||M===60||M===61||M===62||M===96||qe(M)?k(M):(t.consume(M),L)}function F(M){return M===47||M===62||xe(M)?w(M):n(M)}function R(M){return M===62?(t.consume(M),U):n(M)}function U(M){return M===null||le(M)?H(M):xe(M)?(t.consume(M),U):n(M)}function H(M){return M===45&&r===2?(t.consume(M),D):M===60&&r===1?(t.consume(M),z):M===62&&r===4?(t.consume(M),Z):M===63&&r===3?(t.consume(M),I):M===93&&r===5?(t.consume(M),$):le(M)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(HH,ee,V)(M)):M===null||le(M)?(t.exit("htmlFlowData"),V(M)):(t.consume(M),H)}function V(M){return t.check(GH,W,ee)(M)}function W(M){return t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),X}function X(M){return M===null||le(M)?V(M):(t.enter("htmlFlowData"),H(M))}function D(M){return M===45?(t.consume(M),I):H(M)}function z(M){return M===47?(t.consume(M),o="",B):H(M)}function B(M){if(M===62){const ge=o.toLowerCase();return fx.includes(ge)?(t.consume(M),Z):H(M)}return An(M)&&o.length<8?(t.consume(M),o+=String.fromCharCode(M),B):H(M)}function $(M){return M===93?(t.consume(M),I):H(M)}function I(M){return M===62?(t.consume(M),Z):M===45&&r===2?(t.consume(M),I):H(M)}function Z(M){return M===null||le(M)?(t.exit("htmlFlowData"),ee(M)):(t.consume(M),Z)}function ee(M){return t.exit("htmlFlow"),e(M)}}function qH(t,e,n){const i=this;return r;function r(o){return le(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return i.parser.lazy[i.now().line]?n(o):e(o)}}function WH(t,e,n){return i;function i(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(Rp,e,n)}}const KH={name:"htmlText",tokenize:YH};function YH(t,e,n){const i=this;let r,s,o;return a;function a(I){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(I),l}function l(I){return I===33?(t.consume(I),u):I===47?(t.consume(I),k):I===63?(t.consume(I),w):An(I)?(t.consume(I),L):n(I)}function u(I){return I===45?(t.consume(I),c):I===91?(t.consume(I),s=0,y):An(I)?(t.consume(I),b):n(I)}function c(I){return I===45?(t.consume(I),g):n(I)}function d(I){return I===null?n(I):I===45?(t.consume(I),f):le(I)?(o=d,z(I)):(t.consume(I),d)}function f(I){return I===45?(t.consume(I),g):d(I)}function g(I){return I===62?D(I):I===45?f(I):d(I)}function y(I){const Z="CDATA[";return I===Z.charCodeAt(s++)?(t.consume(I),s===Z.length?v:y):n(I)}function v(I){return I===null?n(I):I===93?(t.consume(I),E):le(I)?(o=v,z(I)):(t.consume(I),v)}function E(I){return I===93?(t.consume(I),_):v(I)}function _(I){return I===62?D(I):I===93?(t.consume(I),_):v(I)}function b(I){return I===null||I===62?D(I):le(I)?(o=b,z(I)):(t.consume(I),b)}function w(I){return I===null?n(I):I===63?(t.consume(I),A):le(I)?(o=w,z(I)):(t.consume(I),w)}function A(I){return I===62?D(I):w(I)}function k(I){return An(I)?(t.consume(I),T):n(I)}function T(I){return I===45||un(I)?(t.consume(I),T):N(I)}function N(I){return le(I)?(o=N,z(I)):xe(I)?(t.consume(I),N):D(I)}function L(I){return I===45||un(I)?(t.consume(I),L):I===47||I===62||qe(I)?F(I):n(I)}function F(I){return I===47?(t.consume(I),D):I===58||I===95||An(I)?(t.consume(I),R):le(I)?(o=F,z(I)):xe(I)?(t.consume(I),F):D(I)}function R(I){return I===45||I===46||I===58||I===95||un(I)?(t.consume(I),R):U(I)}function U(I){return I===61?(t.consume(I),H):le(I)?(o=U,z(I)):xe(I)?(t.consume(I),U):F(I)}function H(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(t.consume(I),r=I,V):le(I)?(o=H,z(I)):xe(I)?(t.consume(I),H):(t.consume(I),W)}function V(I){return I===r?(t.consume(I),r=void 0,X):I===null?n(I):le(I)?(o=V,z(I)):(t.consume(I),V)}function W(I){return I===null||I===34||I===39||I===60||I===61||I===96?n(I):I===47||I===62||qe(I)?F(I):(t.consume(I),W)}function X(I){return I===47||I===62||qe(I)?F(I):n(I)}function D(I){return I===62?(t.consume(I),t.exit("htmlTextData"),t.exit("htmlText"),e):n(I)}function z(I){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),B}function B(I){return xe(I)?ke(t,$,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):$(I)}function $(I){return t.enter("htmlTextData"),o(I)}}const ww={name:"labelEnd",resolveAll:ZH,resolveTo:jH,tokenize:eG},XH={tokenize:tG},JH={tokenize:nG},QH={tokenize:iG};function ZH(t){let e=-1;const n=[];for(;++e<t.length;){const i=t[e][1];if(n.push(t[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return t.length!==n.length&&pi(t,0,t.length,n),t}function jH(t,e){let n=t.length,i=0,r,s,o,a;for(;n--;)if(r=t[n][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=n,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},c={type:"labelText",start:{...t[s+i+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",u,e]],a=Ni(a,t.slice(s+1,s+i+3)),a=Ni(a,[["enter",c,e]]),a=Ni(a,tv(e.parser.constructs.insideSpan.null,t.slice(s+i+4,o-3),e)),a=Ni(a,[["exit",c,e],t[o-2],t[o-1],["exit",u,e]]),a=Ni(a,t.slice(o+1)),a=Ni(a,[["exit",l,e]]),pi(t,s,t.length,a),t}function eG(t,e,n){const i=this;let r=i.events.length,s,o;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){s=i.events[r][1];break}return a;function a(f){return s?s._inactive?d(f):(o=i.parser.defined.includes(hr(i.sliceSerialize({start:s.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),l):n(f)}function l(f){return f===40?t.attempt(XH,c,o?c:d)(f):f===91?t.attempt(JH,c,o?u:d)(f):o?c(f):d(f)}function u(f){return t.attempt(QH,c,d)(f)}function c(f){return e(f)}function d(f){return s._balanced=!0,n(f)}}function tG(t,e,n){return i;function i(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),r}function r(d){return qe(d)?gh(t,s)(d):s(d)}function s(d){return d===41?c(d):V1(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return qe(d)?gh(t,l)(d):c(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?W1(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function u(d){return qe(d)?gh(t,c)(d):c(d)}function c(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function nG(t,e,n){const i=this;return r;function r(a){return q1.call(i,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return i.parser.defined.includes(hr(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function iG(t,e,n){return i;function i(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),r}function r(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const rG={name:"labelStartImage",resolveAll:ww.resolveAll,tokenize:sG};function sG(t,e,n){const i=this;return r;function r(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(a):e(a)}}const oG={name:"labelStartLink",resolveAll:ww.resolveAll,tokenize:aG};function aG(t,e,n){const i=this;return r;function r(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(o):e(o)}}const Qv={name:"lineEnding",tokenize:lG};function lG(t,e){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),ke(t,e,"linePrefix")}}const am={name:"thematicBreak",tokenize:uG};function uG(t,e,n){let i=0,r;return s;function s(u){return t.enter("thematicBreak"),o(u)}function o(u){return r=u,a(u)}function a(u){return u===r?(t.enter("thematicBreakSequence"),l(u)):i>=3&&(u===null||le(u))?(t.exit("thematicBreak"),e(u)):n(u)}function l(u){return u===r?(t.consume(u),i++,l):(t.exit("thematicBreakSequence"),xe(u)?ke(t,a,"whitespace")(u):a(u))}}const Pn={continuation:{tokenize:fG},exit:gG,name:"list",tokenize:hG},cG={partial:!0,tokenize:mG},dG={partial:!0,tokenize:pG};function hG(t,e,n){const i=this,r=i.events[i.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return a;function a(g){const y=i.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!i.containerState.marker||g===i.containerState.marker:N0(g)){if(i.containerState.type||(i.containerState.type=y,t.enter(y,{_container:!0})),y==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(am,n,u)(g):u(g);if(!i.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(g)}return n(g)}function l(g){return N0(g)&&++o<10?(t.consume(g),l):(!i.interrupt||o<2)&&(i.containerState.marker?g===i.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),u(g)):n(g)}function u(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||g,t.check(Rp,i.interrupt?n:c,t.attempt(cG,f,d))}function c(g){return i.containerState.initialBlankLine=!0,s++,f(g)}function d(g){return xe(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),f):n(g)}function f(g){return i.containerState.size=s+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function fG(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(Rp,r,s);function r(a){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,ke(t,e,"listItemIndent",i.containerState.size+1)(a)}function s(a){return i.containerState.furtherBlankLines||!xe(a)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,o(a)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(dG,e,o)(a))}function o(a){return i.containerState._closeFlow=!0,i.interrupt=void 0,ke(t,t.attempt(Pn,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function pG(t,e,n){const i=this;return ke(t,r,"listItemIndent",i.containerState.size+1);function r(s){const o=i.events[i.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===i.containerState.size?e(s):n(s)}}function gG(t){t.exit(this.containerState.type)}function mG(t,e,n){const i=this;return ke(t,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(s){const o=i.events[i.events.length-1];return!xe(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const px={name:"setextUnderline",resolveTo:yG,tokenize:vG};function yG(t,e){let n=t.length,i,r,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){i=n;break}t[n][1].type==="paragraph"&&(r=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[r][1].type="setextHeadingText",s?(t.splice(r,0,["enter",o,e]),t.splice(s+1,0,["exit",t[i][1],e]),t[i][1].end={...t[s][1].end}):t[i][1]=o,t.push(["exit",o,e]),t}function vG(t,e,n){const i=this;let r;return s;function s(u){let c=i.events.length,d;for(;c--;)if(i.events[c][1].type!=="lineEnding"&&i.events[c][1].type!=="linePrefix"&&i.events[c][1].type!=="content"){d=i.events[c][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||d)?(t.enter("setextHeadingLine"),r=u,o(u)):n(u)}function o(u){return t.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===r?(t.consume(u),a):(t.exit("setextHeadingLineSequence"),xe(u)?ke(t,l,"lineSuffix")(u):l(u))}function l(u){return u===null||le(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const _G={tokenize:EG};function EG(t){const e=this,n=t.attempt(Rp,i,t.attempt(this.parser.constructs.flowInitial,r,ke(t,t.attempt(this.parser.constructs.flow,r,t.attempt(xH,r)),"linePrefix")));return n;function i(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function r(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const bG={resolveAll:Y1()},wG=K1("string"),SG=K1("text");function K1(t){return{resolveAll:Y1(t==="text"?AG:void 0),tokenize:e};function e(n){const i=this,r=this.parser.constructs[t],s=n.attempt(r,o,a);return o;function o(c){return u(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const d=r[c];let f=-1;if(d)for(;++f<d.length;){const g=d[f];if(!g.previous||g.previous.call(i,i.previous))return!0}return!1}}}function Y1(t){return e;function e(n,i){let r=-1,s;for(;++r<=n.length;)s===void 0?n[r]&&n[r][1].type==="data"&&(s=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==s+2&&(n[s][1].end=n[r-1][1].end,n.splice(s+2,r-s-2),r=s+2),s=void 0);return t?t(n,i):n}}function AG(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const i=t[n-1][1],r=e.sliceStream(i);let s=r.length,o=-1,a=0,l;for(;s--;){const u=r[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const u={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:i.start._bufferIndex+o,_index:i.start._index+s,line:i.end.line,column:i.end.column-a,offset:i.end.offset-a},end:{...i.end}};i.end={...u.start},i.start.offset===i.end.offset?Object.assign(i,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const xG={42:Pn,43:Pn,45:Pn,48:Pn,49:Pn,50:Pn,51:Pn,52:Pn,53:Pn,54:Pn,55:Pn,56:Pn,57:Pn,62:z1},TG={91:RH},CG={[-2]:Jv,[-1]:Jv,32:Jv},kG={35:OH,42:am,45:[px,am],60:zH,61:px,95:am,96:hx,126:hx},IG={38:G1,92:H1},RG={[-5]:Qv,[-4]:Qv,[-3]:Qv,33:rG,38:G1,42:M0,60:[oH,KH],91:oG,92:[LH,H1],93:ww,95:M0,96:_H},NG={null:[M0,bG]},MG={null:[42,95]},PG={null:[]},LG=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:MG,contentInitial:TG,disable:PG,document:xG,flow:kG,flowInitial:CG,insideSpan:NG,string:IG,text:RG},Symbol.toStringTag,{value:"Module"}));function DG(t,e,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},s=[];let o=[],a=[];const l={attempt:N(k),check:N(T),consume:b,enter:w,exit:A,interrupt:N(T,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:y,parser:t,previous:null,sliceSerialize:f,sliceStream:g,write:d};let c=e.tokenize.call(u,l);return e.resolveAll&&s.push(e),u;function d(U){return o=Ni(o,U),E(),o[o.length-1]!==null?[]:(L(e,0),u.events=tv(s,u.events,u),u.events)}function f(U,H){return FG(g(U),H)}function g(U){return OG(o,U)}function y(){const{_bufferIndex:U,_index:H,line:V,column:W,offset:X}=i;return{_bufferIndex:U,_index:H,line:V,column:W,offset:X}}function v(U){r[U.line]=U.column,R()}function E(){let U;for(;i._index<o.length;){const H=o[i._index];if(typeof H=="string")for(U=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===U&&i._bufferIndex<H.length;)_(H.charCodeAt(i._bufferIndex));else _(H)}}function _(U){c=c(U)}function b(U){le(U)?(i.line++,i.column=1,i.offset+=U===-3?2:1,R()):U!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===o[i._index].length&&(i._bufferIndex=-1,i._index++)),u.previous=U}function w(U,H){const V=H||{};return V.type=U,V.start=y(),u.events.push(["enter",V,u]),a.push(V),V}function A(U){const H=a.pop();return H.end=y(),u.events.push(["exit",H,u]),H}function k(U,H){L(U,H.from)}function T(U,H){H.restore()}function N(U,H){return V;function V(W,X,D){let z,B,$,I;return Array.isArray(W)?ee(W):"tokenize"in W?ee([W]):Z(W);function Z(he){return be;function be(dt){const Kn=dt!==null&&he[dt],_i=dt!==null&&he.null,Ks=[...Array.isArray(Kn)?Kn:Kn?[Kn]:[],...Array.isArray(_i)?_i:_i?[_i]:[]];return ee(Ks)(dt)}}function ee(he){return z=he,B=0,he.length===0?D:M(he[B])}function M(he){return be;function be(dt){return I=F(),$=he,he.partial||(u.currentConstruct=he),he.name&&u.parser.constructs.disable.null.includes(he.name)?Pe():he.tokenize.call(H?Object.assign(Object.create(u),H):u,l,ge,Pe)(dt)}}function ge(he){return U($,I),X}function Pe(he){return I.restore(),++B<z.length?M(z[B]):D}}}function L(U,H){U.resolveAll&&!s.includes(U)&&s.push(U),U.resolve&&pi(u.events,H,u.events.length-H,U.resolve(u.events.slice(H),u)),U.resolveTo&&(u.events=U.resolveTo(u.events,u))}function F(){const U=y(),H=u.previous,V=u.currentConstruct,W=u.events.length,X=Array.from(a);return{from:W,restore:D};function D(){i=U,u.previous=H,u.currentConstruct=V,u.events.length=W,a=X,R()}}function R(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function OG(t,e){const n=e.start._index,i=e.start._bufferIndex,r=e.end._index,s=e.end._bufferIndex;let o;if(n===r)o=[t[n].slice(i,s)];else{if(o=t.slice(n,r),i>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(i):o.shift()}s>0&&o.push(t[r].slice(0,s))}return o}function FG(t,e){let n=-1;const i=[];let r;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&r)continue;o=" ";break}default:o=String.fromCharCode(s)}r=s===-2,i.push(o)}return i.join("")}function UG(t){const i={constructs:U1([LG,...(t||{}).extensions||[]]),content:r(jz),defined:[],document:r(tH),flow:r(_G),lazy:{},string:r(wG),text:r(SG)};return i;function r(s){return o;function o(a){return DG(i,s,a)}}}function BG(t){for(;!$1(t););return t}const gx=/[\0\t\n\r]/g;function zG(){let t=1,e="",n=!0,i;return r;function r(s,o,a){const l=[];let u,c,d,f,g;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,e="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(gx.lastIndex=d,u=gx.exec(s),f=u&&u.index!==void 0?u.index:s.length,g=s.charCodeAt(f),!u){e=s.slice(d);break}if(g===10&&d===f&&i)l.push(-3),i=void 0;else switch(i&&(l.push(-5),i=void 0),d<f&&(l.push(s.slice(d,f)),t+=f-d),g){case 0:{l.push(65533),t++;break}case 9:{for(c=Math.ceil(t/4)*4,l.push(-2);t++<c;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:i=!0,t=1}d=f+1}return a&&(i&&l.push(-5),e&&l.push(e),l.push(null)),l}}const HG=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function GG(t){return t.replace(HG,$G)}function $G(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),s=r===120||r===88;return B1(n.slice(s?2:1),s?16:10)}return bw(n)||t}const X1={}.hasOwnProperty;function VG(t,e,n){return typeof e!="string"&&(n=e,e=void 0),qG(n)(BG(UG(n).document().write(zG()(t,e,!0))))}function qG(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(la),autolinkProtocol:F,autolinkEmail:F,atxHeading:s(fn),blockQuote:s(_i),characterEscape:F,characterReference:F,codeFenced:s(Ks),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ks,o),codeText:s(pd,o),codeTextData:F,data:F,codeFlowValue:F,definition:s(Ys),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Zl),hardBreakEscape:s(Le),hardBreakTrailing:s(Le),htmlFlow:s(Gi,o),htmlFlowData:F,htmlText:s(Gi,o),htmlTextData:F,image:s(ue),label:o,link:s(la),listItem:s(Be),listItemValue:f,listOrdered:s(yt,d),listUnordered:s(yt),paragraph:s(jl),reference:M,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(fn),strong:s(Xr),thematicBreak:s(md)},exit:{atxHeading:l(),atxHeadingSequence:k,autolink:l(),autolinkEmail:Kn,autolinkProtocol:dt,blockQuote:l(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:Pe,characterReferenceMarkerNumeric:Pe,characterReferenceValue:he,characterReference:be,codeFenced:l(E),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:R,codeIndented:l(_),codeText:l(X),codeTextData:R,data:R,definition:l(),definitionDestinationString:A,definitionLabelString:b,definitionTitleString:w,emphasis:l(),hardBreakEscape:l(H),hardBreakTrailing:l(H),htmlFlow:l(V),htmlFlowData:R,htmlText:l(W),htmlTextData:R,image:l(z),label:$,labelText:B,lineEnding:U,link:l(D),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:ge,resourceDestinationString:I,resourceTitleString:Z,resource:ee,setextHeading:l(L),setextHeadingLineSequence:N,setextHeadingText:T,strong:l(),thematicBreak:l()}};J1(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(O){let G={type:"root",children:[]};const J={stack:[G],tokenStack:[],config:e,enter:a,exit:u,buffer:o,resume:c,data:n},re=[];let me=-1;for(;++me<O.length;)if(O[me][1].type==="listOrdered"||O[me][1].type==="listUnordered")if(O[me][0]==="enter")re.push(me);else{const ht=re.pop();me=r(O,ht,me)}for(me=-1;++me<O.length;){const ht=e[O[me][0]];X1.call(ht,O[me][1].type)&&ht[O[me][1].type].call(Object.assign({sliceSerialize:O[me][2].sliceSerialize},J),O[me][1])}if(J.tokenStack.length>0){const ht=J.tokenStack[J.tokenStack.length-1];(ht[1]||mx).call(J,void 0,ht[0])}for(G.position={start:Js(O.length>0?O[0][1].start:{line:1,column:1,offset:0}),end:Js(O.length>0?O[O.length-2][1].end:{line:1,column:1,offset:0})},me=-1;++me<e.transforms.length;)G=e.transforms[me](G)||G;return G}function r(O,G,J){let re=G-1,me=-1,ht=!1,Jr,$i,yd,vd;for(;++re<=J;){const Yn=O[re];switch(Yn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Yn[0]==="enter"?me++:me--,vd=void 0;break}case"lineEndingBlank":{Yn[0]==="enter"&&(Jr&&!vd&&!me&&!yd&&(yd=re),vd=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:vd=void 0}if(!me&&Yn[0]==="enter"&&Yn[1].type==="listItemPrefix"||me===-1&&Yn[0]==="exit"&&(Yn[1].type==="listUnordered"||Yn[1].type==="listOrdered")){if(Jr){let eu=re;for($i=void 0;eu--;){const Qr=O[eu];if(Qr[1].type==="lineEnding"||Qr[1].type==="lineEndingBlank"){if(Qr[0]==="exit")continue;$i&&(O[$i][1].type="lineEndingBlank",ht=!0),Qr[1].type="lineEnding",$i=eu}else if(!(Qr[1].type==="linePrefix"||Qr[1].type==="blockQuotePrefix"||Qr[1].type==="blockQuotePrefixWhitespace"||Qr[1].type==="blockQuoteMarker"||Qr[1].type==="listItemIndent"))break}yd&&(!$i||yd<$i)&&(Jr._spread=!0),Jr.end=Object.assign({},$i?O[$i][1].start:Yn[1].end),O.splice($i||re,0,["exit",Jr,Yn[2]]),re++,J++}if(Yn[1].type==="listItemPrefix"){const eu={type:"listItem",_spread:!1,start:Object.assign({},Yn[1].start),end:void 0};Jr=eu,O.splice(re,0,["enter",eu,Yn[2]]),re++,J++,yd=void 0,vd=!0}}}return O[G][1]._spread=ht,J}function s(O,G){return J;function J(re){a.call(this,O(re),re),G&&G.call(this,re)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(O,G,J){this.stack[this.stack.length-1].children.push(O),this.stack.push(O),this.tokenStack.push([G,J||void 0]),O.position={start:Js(G.start),end:void 0}}function l(O){return G;function G(J){O&&O.call(this,J),u.call(this,J)}}function u(O,G){const J=this.stack.pop(),re=this.tokenStack.pop();if(re)re[0].type!==O.type&&(G?G.call(this,O,re[0]):(re[1]||mx).call(this,O,re[0]));else throw new Error("Cannot close `"+O.type+"` ("+ph({start:O.start,end:O.end})+"): its not open");J.position.end=Js(O.end)}function c(){return Ew(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(O){if(this.data.expectingFirstListItemValue){const G=this.stack[this.stack.length-2];G.start=Number.parseInt(this.sliceSerialize(O),10),this.data.expectingFirstListItemValue=void 0}}function g(){const O=this.resume(),G=this.stack[this.stack.length-1];G.lang=O}function y(){const O=this.resume(),G=this.stack[this.stack.length-1];G.meta=O}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const O=this.resume(),G=this.stack[this.stack.length-1];G.value=O.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const O=this.resume(),G=this.stack[this.stack.length-1];G.value=O.replace(/(\r?\n|\r)$/g,"")}function b(O){const G=this.resume(),J=this.stack[this.stack.length-1];J.label=G,J.identifier=hr(this.sliceSerialize(O)).toLowerCase()}function w(){const O=this.resume(),G=this.stack[this.stack.length-1];G.title=O}function A(){const O=this.resume(),G=this.stack[this.stack.length-1];G.url=O}function k(O){const G=this.stack[this.stack.length-1];if(!G.depth){const J=this.sliceSerialize(O).length;G.depth=J}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function N(O){const G=this.stack[this.stack.length-1];G.depth=this.sliceSerialize(O).codePointAt(0)===61?1:2}function L(){this.data.setextHeadingSlurpLineEnding=void 0}function F(O){const J=this.stack[this.stack.length-1].children;let re=J[J.length-1];(!re||re.type!=="text")&&(re=gd(),re.position={start:Js(O.start),end:void 0},J.push(re)),this.stack.push(re)}function R(O){const G=this.stack.pop();G.value+=this.sliceSerialize(O),G.position.end=Js(O.end)}function U(O){const G=this.stack[this.stack.length-1];if(this.data.atHardBreak){const J=G.children[G.children.length-1];J.position.end=Js(O.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(G.type)&&(F.call(this,O),R.call(this,O))}function H(){this.data.atHardBreak=!0}function V(){const O=this.resume(),G=this.stack[this.stack.length-1];G.value=O}function W(){const O=this.resume(),G=this.stack[this.stack.length-1];G.value=O}function X(){const O=this.resume(),G=this.stack[this.stack.length-1];G.value=O}function D(){const O=this.stack[this.stack.length-1];if(this.data.inReference){const G=this.data.referenceType||"shortcut";O.type+="Reference",O.referenceType=G,delete O.url,delete O.title}else delete O.identifier,delete O.label;this.data.referenceType=void 0}function z(){const O=this.stack[this.stack.length-1];if(this.data.inReference){const G=this.data.referenceType||"shortcut";O.type+="Reference",O.referenceType=G,delete O.url,delete O.title}else delete O.identifier,delete O.label;this.data.referenceType=void 0}function B(O){const G=this.sliceSerialize(O),J=this.stack[this.stack.length-2];J.label=GG(G),J.identifier=hr(G).toLowerCase()}function $(){const O=this.stack[this.stack.length-1],G=this.resume(),J=this.stack[this.stack.length-1];if(this.data.inReference=!0,J.type==="link"){const re=O.children;J.children=re}else J.alt=G}function I(){const O=this.resume(),G=this.stack[this.stack.length-1];G.url=O}function Z(){const O=this.resume(),G=this.stack[this.stack.length-1];G.title=O}function ee(){this.data.inReference=void 0}function M(){this.data.referenceType="collapsed"}function ge(O){const G=this.resume(),J=this.stack[this.stack.length-1];J.label=G,J.identifier=hr(this.sliceSerialize(O)).toLowerCase(),this.data.referenceType="full"}function Pe(O){this.data.characterReferenceType=O.type}function he(O){const G=this.sliceSerialize(O),J=this.data.characterReferenceType;let re;J?(re=B1(G,J==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):re=bw(G);const me=this.stack[this.stack.length-1];me.value+=re}function be(O){const G=this.stack.pop();G.position.end=Js(O.end)}function dt(O){R.call(this,O);const G=this.stack[this.stack.length-1];G.url=this.sliceSerialize(O)}function Kn(O){R.call(this,O);const G=this.stack[this.stack.length-1];G.url="mailto:"+this.sliceSerialize(O)}function _i(){return{type:"blockquote",children:[]}}function Ks(){return{type:"code",lang:null,meta:null,value:""}}function pd(){return{type:"inlineCode",value:""}}function Ys(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Zl(){return{type:"emphasis",children:[]}}function fn(){return{type:"heading",depth:0,children:[]}}function Le(){return{type:"break"}}function Gi(){return{type:"html",value:""}}function ue(){return{type:"image",title:null,url:"",alt:null}}function la(){return{type:"link",title:null,url:"",children:[]}}function yt(O){return{type:"list",ordered:O.type==="listOrdered",start:null,spread:O._spread,children:[]}}function Be(O){return{type:"listItem",spread:O._spread,checked:null,children:[]}}function jl(){return{type:"paragraph",children:[]}}function Xr(){return{type:"strong",children:[]}}function gd(){return{type:"text",value:""}}function md(){return{type:"thematicBreak"}}}function Js(t){return{line:t.line,column:t.column,offset:t.offset}}function J1(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?J1(t,i):WG(t,i)}}function WG(t,e){let n;for(n in e)if(X1.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function mx(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+ph({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+ph({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+ph({start:e.start,end:e.end})+") is still open")}function KG(t){const e=this;e.parser=n;function n(i){return VG(i,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function YG(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function XG(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function JG(t,e){const n=e.value?e.value+`
`:"",i={},r=e.lang?e.lang.split(/\s+/):[];r.length>0&&(i.className=["language-"+r[0]]);let s={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function QG(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function ZG(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function jG(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=cd(i.toLowerCase()),s=t.footnoteOrder.indexOf(i);let o,a=t.footnoteCounts.get(i);a===void 0?(a=0,t.footnoteOrder.push(i),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(i,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,u),t.applyData(e,u)}function e$(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function t$(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function Q1(t,e){const n=e.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=t.all(e),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const o=r[r.length-1];return o&&o.type==="text"?o.value+=i:r.push({type:"text",value:i}),r}function n$(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return Q1(t,e);const r={src:cd(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,s),t.applyData(e,s)}function i$(t,e){const n={src:cd(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,i),t.applyData(e,i)}function r$(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,i),t.applyData(e,i)}function s$(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return Q1(t,e);const r={href:cd(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function o$(t,e){const n={href:cd(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function a$(t,e,n){const i=t.all(e),r=n?l$(n):Z1(e),s={},o=[];if(typeof e.checked=="boolean"){const c=i[0];let d;c&&c.type==="element"&&c.tagName==="p"?d=c:(d={type:"element",tagName:"p",properties:{},children:[]},i.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<i.length;){const c=i[a];(r||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!r?o.push(...c.children):o.push(c)}const l=i[i.length-1];l&&(r||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,u),t.applyData(e,u)}function l$(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let i=-1;for(;!e&&++i<n.length;)e=Z1(n[i])}return e}function Z1(t){const e=t.spread;return e??t.children.length>1}function u$(t,e){const n={},i=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<i.length;){const o=i[r];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function c$(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function d$(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function h$(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function f$(t,e){const n=t.all(e),i=n.shift(),r=[];if(i){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(e.children[0],o),r.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=mw(e.children[1]),l=N1(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),r.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function p$(t,e,n){const i=n?n.children:void 0,s=(i?i.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const u=[];for(;++l<a;){const d=e.children[l],f={},g=o?o[l]:void 0;g&&(f.align=g);let y={type:"element",tagName:s,properties:f,children:[]};d&&(y.children=t.all(d),t.patch(d,y),y=t.applyData(d,y)),u.push(y)}const c={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,c),t.applyData(e,c)}function g$(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const yx=9,vx=32;function m$(t){const e=String(t),n=/\r?\n|\r/g;let i=n.exec(e),r=0;const s=[];for(;i;)s.push(_x(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=n.exec(e);return s.push(_x(e.slice(r),r>0,!1)),s.join("")}function _x(t,e,n){let i=0,r=t.length;if(e){let s=t.codePointAt(i);for(;s===yx||s===vx;)i++,s=t.codePointAt(i)}if(n){let s=t.codePointAt(r-1);for(;s===yx||s===vx;)r--,s=t.codePointAt(r-1)}return r>i?t.slice(i,r):""}function y$(t,e){const n={type:"text",value:m$(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function v$(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const _$={blockquote:YG,break:XG,code:JG,delete:QG,emphasis:ZG,footnoteReference:jG,heading:e$,html:t$,imageReference:n$,image:i$,inlineCode:r$,linkReference:s$,link:o$,listItem:a$,list:u$,paragraph:c$,root:d$,strong:h$,table:f$,tableCell:g$,tableRow:p$,text:y$,thematicBreak:v$,toml:ng,yaml:ng,definition:ng,footnoteDefinition:ng};function ng(){}const j1=-1,nv=0,mh=1,Ym=2,Sw=3,Aw=4,xw=5,Tw=6,eM=7,tM=8,Ex=typeof self=="object"?self:globalThis,E$=(t,e)=>{const n=(r,s)=>(t.set(s,r),r),i=r=>{if(t.has(r))return t.get(r);const[s,o]=e[r];switch(s){case nv:case j1:return n(o,r);case mh:{const a=n([],r);for(const l of o)a.push(i(l));return a}case Ym:{const a=n({},r);for(const[l,u]of o)a[i(l)]=i(u);return a}case Sw:return n(new Date(o),r);case Aw:{const{source:a,flags:l}=o;return n(new RegExp(a,l),r)}case xw:{const a=n(new Map,r);for(const[l,u]of o)a.set(i(l),i(u));return a}case Tw:{const a=n(new Set,r);for(const l of o)a.add(i(l));return a}case eM:{const{name:a,message:l}=o;return n(new Ex[a](l),r)}case tM:return n(BigInt(o),r);case"BigInt":return n(Object(BigInt(o)),r);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new Ex[s](o),r)};return i},bx=t=>E$(new Map,t)(0),nu="",{toString:b$}={},{keys:w$}=Object,Md=t=>{const e=typeof t;if(e!=="object"||!t)return[nv,e];const n=b$.call(t).slice(8,-1);switch(n){case"Array":return[mh,nu];case"Object":return[Ym,nu];case"Date":return[Sw,nu];case"RegExp":return[Aw,nu];case"Map":return[xw,nu];case"Set":return[Tw,nu];case"DataView":return[mh,n]}return n.includes("Array")?[mh,n]:n.includes("Error")?[eM,n]:[Ym,n]},ig=([t,e])=>t===nv&&(e==="function"||e==="symbol"),S$=(t,e,n,i)=>{const r=(o,a)=>{const l=i.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=Md(o);switch(a){case nv:{let c=o;switch(l){case"bigint":a=tM,c=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return r([j1],o)}return r([a,c],o)}case mh:{if(l){let f=o;return l==="DataView"?f=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(f=new Uint8Array(o)),r([l,[...f]],o)}const c=[],d=r([a,c],o);for(const f of o)c.push(s(f));return d}case Ym:{if(l)switch(l){case"BigInt":return r([l,o.toString()],o);case"Boolean":case"Number":case"String":return r([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const c=[],d=r([a,c],o);for(const f of w$(o))(t||!ig(Md(o[f])))&&c.push([s(f),s(o[f])]);return d}case Sw:return r([a,o.toISOString()],o);case Aw:{const{source:c,flags:d}=o;return r([a,{source:c,flags:d}],o)}case xw:{const c=[],d=r([a,c],o);for(const[f,g]of o)(t||!(ig(Md(f))||ig(Md(g))))&&c.push([s(f),s(g)]);return d}case Tw:{const c=[],d=r([a,c],o);for(const f of o)(t||!ig(Md(f)))&&c.push(s(f));return d}}const{message:u}=o;return r([a,{name:l,message:u}],o)};return s},wx=(t,{json:e,lossy:n}={})=>{const i=[];return S$(!(e||n),!!e,new Map,i)(t),i},Xm=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?bx(wx(t,e)):structuredClone(t):(t,e)=>bx(wx(t,e));function A$(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function x$(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function T$(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||A$,i=t.options.footnoteBackLabel||x$,r=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[l]);if(!u)continue;const c=t.all(u),d=String(u.identifier).toUpperCase(),f=cd(d.toLowerCase());let g=0;const y=[],v=t.footnoteCounts.get(d);for(;v!==void 0&&++g<=v;){y.length>0&&y.push({type:"text",value:" "});let b=typeof n=="string"?n:n(l,g);typeof b=="string"&&(b={type:"text",value:b}),y.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+f+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(l,g),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const E=c[c.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const b=E.children[E.children.length-1];b&&b.type==="text"?b.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...y)}else c.push(...y);const _={type:"element",tagName:"li",properties:{id:e+"fn-"+f},children:t.wrap(c,!0)};t.patch(u,_),a.push(_)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Xm(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const Np=function(t){if(t==null)return R$;if(typeof t=="function")return iv(t);if(typeof t=="object")return Array.isArray(t)?C$(t):k$(t);if(typeof t=="string")return I$(t);throw new Error("Expected function, string, or object as test")};function C$(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Np(t[n]);return iv(i);function i(...r){let s=-1;for(;++s<e.length;)if(e[s].apply(this,r))return!0;return!1}}function k$(t){const e=t;return iv(n);function n(i){const r=i;let s;for(s in t)if(r[s]!==e[s])return!1;return!0}}function I$(t){return iv(e);function e(n){return n&&n.type===t}}function iv(t){return e;function e(n,i,r){return!!(N$(n)&&t.call(this,n,typeof i=="number"?i:void 0,r||void 0))}}function R$(){return!0}function N$(t){return t!==null&&typeof t=="object"&&"type"in t}const nM=[],M$=!0,P0=!1,P$="skip";function iM(t,e,n,i){let r;typeof e=="function"&&typeof n!="function"?(i=n,n=e):r=e;const s=Np(r),o=i?-1:1;a(t,void 0,[])();function a(l,u,c){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const g=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(g?"<"+g+">":""))+")"})}return f;function f(){let g=nM,y,v,E;if((!e||s(l,u,c[c.length-1]||void 0))&&(g=L$(n(l,c)),g[0]===P0))return g;if("children"in l&&l.children){const _=l;if(_.children&&g[0]!==P$)for(v=(i?_.children.length:-1)+o,E=c.concat(_);v>-1&&v<_.children.length;){const b=_.children[v];if(y=a(b,v,E)(),y[0]===P0)return y;v=typeof y[1]=="number"?y[1]:v+o}}return g}}}function L$(t){return Array.isArray(t)?t:typeof t=="number"?[M$,t]:t==null?nM:[t]}function rv(t,e,n,i){let r,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,r=n):(s=e,o=n,r=i),iM(t,s,a,r);function a(l,u){const c=u[u.length-1],d=c?c.children.indexOf(l):void 0;return o(l,d,c)}}const L0={}.hasOwnProperty,D$={};function O$(t,e){const n=e||D$,i=new Map,r=new Map,s=new Map,o={..._$,...n.handlers},a={all:u,applyData:U$,definitionById:i,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:F$,wrap:z$};return rv(t,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const d=c.type==="definition"?i:r,f=String(c.identifier).toUpperCase();d.has(f)||d.set(f,c)}}),a;function l(c,d){const f=c.type,g=a.handlers[f];if(L0.call(a.handlers,f)&&g)return g(a,c,d);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in c){const{children:v,...E}=c,_=Xm(E);return _.children=a.all(c),_}return Xm(c)}return(a.options.unknownHandler||B$)(a,c,d)}function u(c){const d=[];if("children"in c){const f=c.children;let g=-1;for(;++g<f.length;){const y=a.one(f[g],c);if(y){if(g&&f[g-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=Sx(y.value)),!Array.isArray(y)&&y.type==="element")){const v=y.children[0];v&&v.type==="text"&&(v.value=Sx(v.value))}Array.isArray(y)?d.push(...y):d.push(y)}}}return d}}function F$(t,e){t.position&&(e.position=xz(t))}function U$(t,e){let n=e;if(t&&t.data){const i=t.data.hName,r=t.data.hChildren,s=t.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const o="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Xm(s)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function B$(t,e){const n=e.data||{},i="value"in e&&!(L0.call(n,"hProperties")||L0.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function z$(t,e){const n=[];let i=-1;for(e&&n.push({type:"text",value:`
`});++i<t.length;)i&&n.push({type:"text",value:`
`}),n.push(t[i]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function Sx(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function Ax(t,e){const n=O$(t,e),i=n.one(t,void 0),r=T$(n),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function H$(t,e){return t&&"run"in t?async function(n,i){const r=Ax(n,{file:i,...e});await t.run(r,i)}:function(n,i){return Ax(n,{file:i,...t||e})}}function xx(t){if(t)throw t}var lm=Object.prototype.hasOwnProperty,rM=Object.prototype.toString,Tx=Object.defineProperty,Cx=Object.getOwnPropertyDescriptor,kx=function(e){return typeof Array.isArray=="function"?Array.isArray(e):rM.call(e)==="[object Array]"},Ix=function(e){if(!e||rM.call(e)!=="[object Object]")return!1;var n=lm.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&lm.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!i)return!1;var r;for(r in e);return typeof r>"u"||lm.call(e,r)},Rx=function(e,n){Tx&&n.name==="__proto__"?Tx(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},Nx=function(e,n){if(n==="__proto__")if(lm.call(e,n)){if(Cx)return Cx(e,n).value}else return;return e[n]},G$=function t(){var e,n,i,r,s,o,a=arguments[0],l=1,u=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(e=arguments[l],e!=null)for(n in e)i=Nx(a,n),r=Nx(e,n),a!==r&&(c&&r&&(Ix(r)||(s=kx(r)))?(s?(s=!1,o=i&&kx(i)?i:[]):o=i&&Ix(i)?i:{},Rx(a,{name:n,newValue:t(c,o,r)})):typeof r<"u"&&Rx(a,{name:n,newValue:r}));return a};const Zv=xy(G$);function D0(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function $$(){const t=[],e={run:n,use:i};return e;function n(...r){let s=-1;const o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...r);function a(l,...u){const c=t[++s];let d=-1;if(l){o(l);return}for(;++d<r.length;)(u[d]===null||u[d]===void 0)&&(u[d]=r[d]);r=u,c?V$(c,a)(...u):o(null,...u)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function V$(t,e){let n;return i;function i(...o){const a=t.length>o.length;let l;a&&o.push(r);try{l=t.apply(this,o)}catch(u){const c=u;if(a&&n)throw c;return r(c)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,r):l instanceof Error?r(l):s(l))}function r(o,...a){n||(n=!0,e(o,...a))}function s(o){r(null,o)}}const Tr={basename:q$,dirname:W$,extname:K$,join:Y$,sep:"/"};function q$(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Mp(t);let n=0,i=-1,r=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else i<0&&(s=!0,i=r+1);return i<0?"":t.slice(n,i)}if(e===t)return"";let o=-1,a=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else o<0&&(s=!0,o=r+1),a>-1&&(t.codePointAt(r)===e.codePointAt(a--)?a<0&&(i=r):(a=-1,i=o));return n===i?i=o:i<0&&(i=t.length),t.slice(n,i)}function W$(t){if(Mp(t),t.length===0)return".";let e=-1,n=t.length,i;for(;--n;)if(t.codePointAt(n)===47){if(i){e=n;break}}else i||(i=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function K$(t){Mp(t);let e=t.length,n=-1,i=0,r=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){i=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?r<0?r=e:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||n<0||s===0||s===1&&r===n-1&&r===i+1?"":t.slice(r,n)}function Y$(...t){let e=-1,n;for(;++e<t.length;)Mp(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":X$(n)}function X$(t){Mp(t);const e=t.codePointAt(0)===47;let n=J$(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function J$(t,e){let n="",i=0,r=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(r===o-1||s===1))if(r!==o-1&&s===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",i=0):(n=n.slice(0,l),i=n.length-1-n.lastIndexOf("/")),r=o,s=0;continue}}else if(n.length>0){n="",i=0,r=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+t.slice(r+1,o):n=t.slice(r+1,o),i=o-r-1;r=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Mp(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Q$={cwd:Z$};function Z$(){return"/"}function O0(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function j$(t){if(typeof t=="string")t=new URL(t);else if(!O0(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return eV(t)}function eV(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const i=e.codePointAt(n+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const jv=["history","path","basename","stem","extname","dirname"];class sM{constructor(e){let n;e?O0(e)?n={path:e}:typeof e=="string"||tV(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Q$.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<jv.length;){const s=jv[i];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let r;for(r in n)jv.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?Tr.basename(this.path):void 0}set basename(e){t_(e,"basename"),e_(e,"basename"),this.path=Tr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Tr.dirname(this.path):void 0}set dirname(e){Mx(this.basename,"dirname"),this.path=Tr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Tr.extname(this.path):void 0}set extname(e){if(e_(e,"extname"),Mx(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Tr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){O0(e)&&(e=j$(e)),t_(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Tr.basename(this.path,this.extname):void 0}set stem(e){t_(e,"stem"),e_(e,"stem"),this.path=Tr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,i){const r=this.message(e,n,i);throw r.fatal=!0,r}info(e,n,i){const r=this.message(e,n,i);return r.fatal=void 0,r}message(e,n,i){const r=new hn(e,n,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function e_(t,e){if(t&&t.includes(Tr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Tr.sep+"`")}function t_(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Mx(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function tV(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const nV=function(t){const i=this.constructor.prototype,r=i[t],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,i),s},iV={}.hasOwnProperty;class Cw extends nV{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=$$()}copy(){const e=new Cw;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];e.use(...i)}return e.data(Zv(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(r_("data",this.frozen),this.namespace[e]=n,this):iV.call(this.namespace,e)&&this.namespace[e]||void 0:e?(r_("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=n.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=rg(e),i=this.parser||this.Parser;return n_("parse",i),i(String(n),n)}process(e,n){const i=this;return this.freeze(),n_("process",this.parser||this.Parser),i_("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(s,o){const a=rg(e),l=i.parse(a);i.run(l,a,function(c,d,f){if(c||!d||!f)return u(c);const g=d,y=i.stringify(g,f);oV(y)?f.value=y:f.result=y,u(c,f)});function u(c,d){c||!d?o(c):s?s(d):n(void 0,d)}}}processSync(e){let n=!1,i;return this.freeze(),n_("processSync",this.parser||this.Parser),i_("processSync",this.compiler||this.Compiler),this.process(e,r),Lx("processSync","process",n),i;function r(s,o){n=!0,xx(s),i=o}}run(e,n,i){Px(e),this.freeze();const r=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?s(void 0,i):new Promise(s);function s(o,a){const l=rg(n);r.run(e,l,u);function u(c,d,f){const g=d||e;c?a(c):o?o(g):i(void 0,g,f)}}}runSync(e,n){let i=!1,r;return this.run(e,n,s),Lx("runSync","run",i),r;function s(o,a){xx(o),r=a,i=!0}}stringify(e,n){this.freeze();const i=rg(n),r=this.compiler||this.Compiler;return i_("stringify",r),Px(e),r(e,i)}use(e,...n){const i=this.attachers,r=this.namespace;if(r_("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...d]=u;l(c,d)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(r.settings=Zv(!0,r.settings,u.settings))}function a(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const d=u[c];s(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let d=-1,f=-1;for(;++d<i.length;)if(i[d][0]===u){f=d;break}if(f===-1)i.push([u,...c]);else if(c.length>0){let[g,...y]=c;const v=i[f][1];D0(v)&&D0(g)&&(g=Zv(!0,v,g)),i[f]=[u,g,...y]}}}}const rV=new Cw().freeze();function n_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function i_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function r_(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Px(t){if(!D0(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function Lx(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function rg(t){return sV(t)?t:new sM(t)}function sV(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function oV(t){return typeof t=="string"||aV(t)}function aV(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const lV="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Dx=[],Ox={allowDangerousHtml:!0},uV=/^(https?|ircs?|mailto|xmpp)$/i,cV=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function kw(t){const e=dV(t),n=hV(t);return fV(e.runSync(e.parse(n),n),t)}function dV(t){const e=t.rehypePlugins||Dx,n=t.remarkPlugins||Dx,i=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...Ox}:Ox;return rV().use(KG).use(n).use(H$,i).use(e)}function hV(t){const e=t.children||"",n=new sM;return typeof e=="string"&&(n.value=e),n}function fV(t,e){const n=e.allowedElements,i=e.allowElement,r=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||pV;for(const c of cV)Object.hasOwn(e,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+lV+c.id,void 0);return e.className&&(t={type:"element",tagName:"div",properties:{className:e.className},children:t.type==="root"?t.children:[t]}),rv(t,u),Rz(t,{Fragment:P.Fragment,components:r,ignoreInvalidStyle:!0,jsx:P.jsx,jsxs:P.jsxs,passKeys:!0,passNode:!0});function u(c,d,f){if(c.type==="raw"&&f&&typeof d=="number")return o?f.children.splice(d,1):f.children[d]={type:"text",value:c.value},d;if(c.type==="element"){let g;for(g in Xv)if(Object.hasOwn(Xv,g)&&Object.hasOwn(c.properties,g)){const y=c.properties[g],v=Xv[g];(v===null||v.includes(c.tagName))&&(c.properties[g]=l(String(y||""),g,c))}}if(c.type==="element"){let g=n?!n.includes(c.tagName):s?s.includes(c.tagName):!1;if(!g&&i&&typeof d=="number"&&(g=!i(c,d,f)),g&&f&&typeof d=="number")return a&&c.children?f.children.splice(d,1,...c.children):f.children.splice(d,1),d}}}function pV(t){const e=t.indexOf(":"),n=t.indexOf("?"),i=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||n!==-1&&e>n||i!==-1&&e>i||uV.test(t.slice(0,e))?t:""}function Fx(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let i=0,r=n.indexOf(e);for(;r!==-1;)i++,r=n.indexOf(e,r+e.length);return i}function gV(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function mV(t,e,n){const r=Np((n||{}).ignore||[]),s=yV(e);let o=-1;for(;++o<s.length;)iM(t,"text",a);function a(u,c){let d=-1,f;for(;++d<c.length;){const g=c[d],y=f?f.children:void 0;if(r(g,y?y.indexOf(g):void 0,f))return;f=g}if(f)return l(u,c)}function l(u,c){const d=c[c.length-1],f=s[o][0],g=s[o][1];let y=0;const E=d.children.indexOf(u);let _=!1,b=[];f.lastIndex=0;let w=f.exec(u.value);for(;w;){const A=w.index,k={index:w.index,input:w.input,stack:[...c,u]};let T=g(...w,k);if(typeof T=="string"&&(T=T.length>0?{type:"text",value:T}:void 0),T===!1?f.lastIndex=A+1:(y!==A&&b.push({type:"text",value:u.value.slice(y,A)}),Array.isArray(T)?b.push(...T):T&&b.push(T),y=A+w[0].length,_=!0),!f.global)break;w=f.exec(u.value)}return _?(y<u.value.length&&b.push({type:"text",value:u.value.slice(y)}),d.children.splice(E,1,...b)):b=[u],E+b.length}}function yV(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let i=-1;for(;++i<n.length;){const r=n[i];e.push([vV(r[0]),_V(r[1])])}return e}function vV(t){return typeof t=="string"?new RegExp(gV(t),"g"):t}function _V(t){return typeof t=="function"?t:function(){return t}}const s_="phrasing",o_=["autolink","link","image","label"];function EV(){return{transforms:[CV],enter:{literalAutolink:wV,literalAutolinkEmail:a_,literalAutolinkHttp:a_,literalAutolinkWww:a_},exit:{literalAutolink:TV,literalAutolinkEmail:xV,literalAutolinkHttp:SV,literalAutolinkWww:AV}}}function bV(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:s_,notInConstruct:o_},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:s_,notInConstruct:o_},{character:":",before:"[ps]",after:"\\/",inConstruct:s_,notInConstruct:o_}]}}function wV(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function a_(t){this.config.enter.autolinkProtocol.call(this,t)}function SV(t){this.config.exit.autolinkProtocol.call(this,t)}function AV(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function xV(t){this.config.exit.autolinkEmail.call(this,t)}function TV(t){this.exit(t)}function CV(t){mV(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,kV],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),IV]],{ignore:["link","linkReference"]})}function kV(t,e,n,i,r){let s="";if(!oM(r)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!RV(n)))return!1;const o=NV(n+i);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function IV(t,e,n,i){return!oM(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function RV(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function NV(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],i=n.indexOf(")");const r=Fx(t,"(");let s=Fx(t,")");for(;i!==-1&&r>s;)t+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),s++;return[t,n]}function oM(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Bl(n)||ev(n))&&(!e||n!==47)}aM.peek=zV;function MV(){this.buffer()}function PV(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function LV(){this.buffer()}function DV(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function OV(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=hr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function FV(t){this.exit(t)}function UV(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=hr(this.sliceSerialize(t)).toLowerCase(),n.label=e}function BV(t){this.exit(t)}function zV(){return"["}function aM(t,e,n,i){const r=n.createTracker(i);let s=r.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=r.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=r.move("]"),s}function HV(){return{enter:{gfmFootnoteCallString:MV,gfmFootnoteCall:PV,gfmFootnoteDefinitionLabelString:LV,gfmFootnoteDefinition:DV},exit:{gfmFootnoteCallString:OV,gfmFootnoteCall:FV,gfmFootnoteDefinitionLabelString:UV,gfmFootnoteDefinition:BV}}}function GV(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:aM},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,r,s,o){const a=s.createTracker(o);let l=a.move("[^");const u=s.enter("footnoteDefinition"),c=s.enter("label");return l+=a.move(s.safe(s.associationId(i),{before:l,after:"]"})),c(),l+=a.move("]:"),i.children&&i.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(i,a.current()),e?lM:$V))),u(),l}}function $V(t,e,n){return e===0?t:lM(t,e,n)}function lM(t,e,n){return(n?"":"    ")+t}const VV=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];uM.peek=XV;function qV(){return{canContainEols:["delete"],enter:{strikethrough:KV},exit:{strikethrough:YV}}}function WV(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:VV}],handlers:{delete:uM}}}function KV(t){this.enter({type:"delete",children:[]},t)}function YV(t){this.exit(t)}function uM(t,e,n,i){const r=n.createTracker(i),s=n.enter("strikethrough");let o=r.move("~~");return o+=n.containerPhrasing(t,{...r.current(),before:o,after:"~"}),o+=r.move("~~"),s(),o}function XV(){return"~"}function JV(t){return t.length}function QV(t,e){const n=e||{},i=(n.align||[]).concat(),r=n.stringLength||JV,s=[],o=[],a=[],l=[];let u=0,c=-1;for(;++c<t.length;){const v=[],E=[];let _=-1;for(t[c].length>u&&(u=t[c].length);++_<t[c].length;){const b=ZV(t[c][_]);if(n.alignDelimiters!==!1){const w=r(b);E[_]=w,(l[_]===void 0||w>l[_])&&(l[_]=w)}v.push(b)}o[c]=v,a[c]=E}let d=-1;if(typeof i=="object"&&"length"in i)for(;++d<u;)s[d]=Ux(i[d]);else{const v=Ux(i);for(;++d<u;)s[d]=v}d=-1;const f=[],g=[];for(;++d<u;){const v=s[d];let E="",_="";v===99?(E=":",_=":"):v===108?E=":":v===114&&(_=":");let b=n.alignDelimiters===!1?1:Math.max(1,l[d]-E.length-_.length);const w=E+"-".repeat(b)+_;n.alignDelimiters!==!1&&(b=E.length+b+_.length,b>l[d]&&(l[d]=b),g[d]=b),f[d]=w}o.splice(1,0,f),a.splice(1,0,g),c=-1;const y=[];for(;++c<o.length;){const v=o[c],E=a[c];d=-1;const _=[];for(;++d<u;){const b=v[d]||"";let w="",A="";if(n.alignDelimiters!==!1){const k=l[d]-(E[d]||0),T=s[d];T===114?w=" ".repeat(k):T===99?k%2?(w=" ".repeat(k/2+.5),A=" ".repeat(k/2-.5)):(w=" ".repeat(k/2),A=w):A=" ".repeat(k)}n.delimiterStart!==!1&&!d&&_.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&b==="")&&(n.delimiterStart!==!1||d)&&_.push(" "),n.alignDelimiters!==!1&&_.push(w),_.push(b),n.alignDelimiters!==!1&&_.push(A),n.padding!==!1&&_.push(" "),(n.delimiterEnd!==!1||d!==u-1)&&_.push("|")}y.push(n.delimiterEnd===!1?_.join("").replace(/ +$/,""):_.join(""))}return y.join(`
`)}function ZV(t){return t==null?"":String(t)}function Ux(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function jV(t,e,n,i){const r=n.enter("blockquote"),s=n.createTracker(i);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),e3);return r(),o}function e3(t,e,n){return">"+(n?"":" ")+t}function t3(t,e){return Bx(t,e.inConstruct,!0)&&!Bx(t,e.notInConstruct,!1)}function Bx(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let i=-1;for(;++i<e.length;)if(t.includes(e[i]))return!0;return!1}function zx(t,e,n,i){let r=-1;for(;++r<n.unsafe.length;)if(n.unsafe[r].character===`
`&&t3(n.stack,n.unsafe[r]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function n3(t,e){const n=String(t);let i=n.indexOf(e),r=i,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===r?++s>o&&(o=s):s=1,r=i+e.length,i=n.indexOf(e,r);return o}function i3(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function r3(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function s3(t,e,n,i){const r=r3(n),s=t.value||"",o=r==="`"?"GraveAccent":"Tilde";if(i3(t,n)){const d=n.enter("codeIndented"),f=n.indentLines(s,o3);return d(),f}const a=n.createTracker(i),l=r.repeat(Math.max(n3(s,r)+1,3)),u=n.enter("codeFenced");let c=a.move(l);if(t.lang){const d=n.enter(`codeFencedLang${o}`);c+=a.move(n.safe(t.lang,{before:c,after:" ",encode:["`"],...a.current()})),d()}if(t.lang&&t.meta){const d=n.enter(`codeFencedMeta${o}`);c+=a.move(" "),c+=a.move(n.safe(t.meta,{before:c,after:`
`,encode:["`"],...a.current()})),d()}return c+=a.move(`
`),s&&(c+=a.move(s+`
`)),c+=a.move(l),u(),c}function o3(t,e,n){return(n?"":"    ")+t}function Iw(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function a3(t,e,n,i){const r=Iw(n),s=r==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(i);let u=l.move("[");return u+=l.move(n.safe(n.associationId(t),{before:u,after:"]",...l.current()})),u+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),u+=l.move(" "+r),u+=l.move(n.safe(t.title,{before:u,after:r,...l.current()})),u+=l.move(r),a()),o(),u}function l3(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Gh(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Jm(t,e,n){const i=nd(t),r=nd(e);return i===void 0?r===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}cM.peek=u3;function cM(t,e,n,i){const r=l3(n),s=n.enter("emphasis"),o=n.createTracker(i),a=o.move(r);let l=o.move(n.containerPhrasing(t,{after:r,before:a,...o.current()}));const u=l.charCodeAt(0),c=Jm(i.before.charCodeAt(i.before.length-1),u,r);c.inside&&(l=Gh(u)+l.slice(1));const d=l.charCodeAt(l.length-1),f=Jm(i.after.charCodeAt(0),d,r);f.inside&&(l=l.slice(0,-1)+Gh(d));const g=o.move(r);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},a+l+g}function u3(t,e,n){return n.options.emphasis||"*"}function c3(t,e){let n=!1;return rv(t,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,P0}),!!((!t.depth||t.depth<3)&&Ew(t)&&(e.options.setext||n))}function d3(t,e,n,i){const r=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(i);if(c3(t,n)){const c=n.enter("headingSetext"),d=n.enter("phrasing"),f=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return d(),c(),f+`
`+(r===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(r),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Gh(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),l(),a(),u}dM.peek=h3;function dM(t){return t.value||""}function h3(){return"<"}hM.peek=f3;function hM(t,e,n,i){const r=Iw(n),s=r==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(i);let u=l.move("![");return u+=l.move(n.safe(t.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(t.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=n.enter("destinationRaw"),u+=l.move(n.safe(t.url,{before:u,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),u+=l.move(" "+r),u+=l.move(n.safe(t.title,{before:u,after:r,...l.current()})),u+=l.move(r),a()),u+=l.move(")"),o(),u}function f3(){return"!"}fM.peek=p3;function fM(t,e,n,i){const r=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(i);let l=a.move("![");const u=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const c=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=c,s(),r==="full"||!u||u!==d?l+=a.move(d+"]"):r==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function p3(){return"!"}pM.peek=g3;function pM(t,e,n){let i=t.value||"",r="`",s=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(i);)r+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(i);){let u=l.index;i.charCodeAt(u)===10&&i.charCodeAt(u-1)===13&&u--,i=i.slice(0,u)+" "+i.slice(l.index+1)}}return r+i+r}function g3(){return"`"}function gM(t,e){const n=Ew(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}mM.peek=m3;function mM(t,e,n,i){const r=Iw(n),s=r==='"'?"Quote":"Apostrophe",o=n.createTracker(i);let a,l;if(gM(t,n)){const c=n.stack;n.stack=[],a=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(t,{before:d,after:">",...o.current()})),d+=o.move(">"),a(),n.stack=c,d}a=n.enter("link"),l=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(t,{before:u,after:"](",...o.current()})),u+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(t.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(l=n.enter("destinationRaw"),u+=o.move(n.safe(t.url,{before:u,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),u+=o.move(" "+r),u+=o.move(n.safe(t.title,{before:u,after:r,...o.current()})),u+=o.move(r),l()),u+=o.move(")"),a(),u}function m3(t,e,n){return gM(t,n)?"<":"["}yM.peek=y3;function yM(t,e,n,i){const r=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(i);let l=a.move("[");const u=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const c=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=c,s(),r==="full"||!u||u!==d?l+=a.move(d+"]"):r==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function y3(){return"["}function Rw(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function v3(t){const e=Rw(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function _3(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function vM(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function E3(t,e,n,i){const r=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?_3(n):Rw(n);const a=t.ordered?o==="."?")":".":v3(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const c=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&c&&(!c.children||!c.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),vM(n)===o&&c){let d=-1;for(;++d<t.children.length;){const f=t.children[d];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const u=n.containerFlow(t,i);return n.bulletLastUsed=o,n.bulletCurrent=s,r(),u}function b3(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function w3(t,e,n,i){const r=b3(n);let s=n.bulletCurrent||Rw(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(i);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,a.current()),c);return l(),u;function c(d,f,g){return f?(g?"":" ".repeat(o))+d:(g?s:s+" ".repeat(o-s.length))+d}}function S3(t,e,n,i){const r=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,i);return s(),r(),o}const A3=Np(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function x3(t,e,n,i){return(t.children.some(function(o){return A3(o)})?n.containerPhrasing:n.containerFlow).call(n,t,i)}function T3(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}_M.peek=C3;function _M(t,e,n,i){const r=T3(n),s=n.enter("strong"),o=n.createTracker(i),a=o.move(r+r);let l=o.move(n.containerPhrasing(t,{after:r,before:a,...o.current()}));const u=l.charCodeAt(0),c=Jm(i.before.charCodeAt(i.before.length-1),u,r);c.inside&&(l=Gh(u)+l.slice(1));const d=l.charCodeAt(l.length-1),f=Jm(i.after.charCodeAt(0),d,r);f.inside&&(l=l.slice(0,-1)+Gh(d));const g=o.move(r+r);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},a+l+g}function C3(t,e,n){return n.options.strong||"*"}function k3(t,e,n,i){return n.safe(t.value,i)}function I3(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function R3(t,e,n){const i=(vM(n)+(n.options.ruleSpaces?" ":"")).repeat(I3(n));return n.options.ruleSpaces?i.slice(0,-1):i}const EM={blockquote:jV,break:zx,code:s3,definition:a3,emphasis:cM,hardBreak:zx,heading:d3,html:dM,image:hM,imageReference:fM,inlineCode:pM,link:mM,linkReference:yM,list:E3,listItem:w3,paragraph:S3,root:x3,strong:_M,text:k3,thematicBreak:R3};function N3(){return{enter:{table:M3,tableData:Hx,tableHeader:Hx,tableRow:L3},exit:{codeText:D3,table:P3,tableData:l_,tableHeader:l_,tableRow:l_}}}function M3(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function P3(t){this.exit(t),this.data.inTable=void 0}function L3(t){this.enter({type:"tableRow",children:[]},t)}function l_(t){this.exit(t)}function Hx(t){this.enter({type:"tableCell",children:[]},t)}function D3(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,O3));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function O3(t,e){return e==="|"?e:t}function F3(t){const e=t||{},n=e.tableCellPadding,i=e.tablePipeAlign,r=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:l,tableRow:a}};function o(g,y,v,E){return u(c(g,v,E),g.align)}function a(g,y,v,E){const _=d(g,v,E),b=u([_]);return b.slice(0,b.indexOf(`
`))}function l(g,y,v,E){const _=v.enter("tableCell"),b=v.enter("phrasing"),w=v.containerPhrasing(g,{...E,before:s,after:s});return b(),_(),w}function u(g,y){return QV(g,{align:y,alignDelimiters:i,padding:n,stringLength:r})}function c(g,y,v){const E=g.children;let _=-1;const b=[],w=y.enter("table");for(;++_<E.length;)b[_]=d(E[_],y,v);return w(),b}function d(g,y,v){const E=g.children;let _=-1;const b=[],w=y.enter("tableRow");for(;++_<E.length;)b[_]=l(E[_],g,y,v);return w(),b}function f(g,y,v){let E=EM.inlineCode(g,y,v);return v.stack.includes("tableCell")&&(E=E.replace(/\|/g,"\\$&")),E}}function U3(){return{exit:{taskListCheckValueChecked:Gx,taskListCheckValueUnchecked:Gx,paragraph:z3}}}function B3(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:H3}}}function Gx(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function z3(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const r=e.children;let s=-1,o;for(;++s<r.length;){const a=r[s];if(a.type==="paragraph"){o=a;break}}o===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(t)}function H3(t,e,n,i){const r=t.children[0],s=typeof t.checked=="boolean"&&r&&r.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(i);s&&a.move(o);let l=EM.listItem(t,e,n,{...i,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(c){return c+o}}function G3(){return[EV(),HV(),qV(),N3(),U3()]}function $3(t){return{extensions:[bV(),GV(t),WV(),F3(t),B3()]}}const V3={tokenize:J3,partial:!0},bM={tokenize:Q3,partial:!0},wM={tokenize:Z3,partial:!0},SM={tokenize:j3,partial:!0},q3={tokenize:e4,partial:!0},AM={name:"wwwAutolink",tokenize:Y3,previous:TM},xM={name:"protocolAutolink",tokenize:X3,previous:CM},Vs={name:"emailAutolink",tokenize:K3,previous:kM},Yr={};function W3(){return{text:Yr}}let ua=48;for(;ua<123;)Yr[ua]=Vs,ua++,ua===58?ua=65:ua===91&&(ua=97);Yr[43]=Vs;Yr[45]=Vs;Yr[46]=Vs;Yr[95]=Vs;Yr[72]=[Vs,xM];Yr[104]=[Vs,xM];Yr[87]=[Vs,AM];Yr[119]=[Vs,AM];function K3(t,e,n){const i=this;let r,s;return o;function o(d){return!F0(d)||!kM.call(i,i.previous)||Nw(i.events)?n(d):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(d))}function a(d){return F0(d)?(t.consume(d),a):d===64?(t.consume(d),l):n(d)}function l(d){return d===46?t.check(q3,c,u)(d):d===45||d===95||un(d)?(s=!0,t.consume(d),l):c(d)}function u(d){return t.consume(d),r=!0,l}function c(d){return s&&r&&An(i.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(d)):n(d)}}function Y3(t,e,n){const i=this;return r;function r(o){return o!==87&&o!==119||!TM.call(i,i.previous)||Nw(i.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(V3,t.attempt(bM,t.attempt(wM,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function X3(t,e,n){const i=this;let r="",s=!1;return o;function o(d){return(d===72||d===104)&&CM.call(i,i.previous)&&!Nw(i.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),r+=String.fromCodePoint(d),t.consume(d),a):n(d)}function a(d){if(An(d)&&r.length<5)return r+=String.fromCodePoint(d),t.consume(d),a;if(d===58){const f=r.toLowerCase();if(f==="http"||f==="https")return t.consume(d),l}return n(d)}function l(d){return d===47?(t.consume(d),s?u:(s=!0,l)):n(d)}function u(d){return d===null||Km(d)||qe(d)||Bl(d)||ev(d)?n(d):t.attempt(bM,t.attempt(wM,c),n)(d)}function c(d){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(d)}}function J3(t,e,n){let i=0;return r;function r(o){return(o===87||o===119)&&i<3?(i++,t.consume(o),r):o===46&&i===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function Q3(t,e,n){let i,r,s;return o;function o(u){return u===46||u===95?t.check(SM,l,a)(u):u===null||qe(u)||Bl(u)||u!==45&&ev(u)?l(u):(s=!0,t.consume(u),o)}function a(u){return u===95?i=!0:(r=i,i=void 0),t.consume(u),o}function l(u){return r||i||!s?n(u):e(u)}}function Z3(t,e){let n=0,i=0;return r;function r(o){return o===40?(n++,t.consume(o),r):o===41&&i<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(SM,e,s)(o):o===null||qe(o)||Bl(o)?e(o):(t.consume(o),r)}function s(o){return o===41&&i++,t.consume(o),r}}function j3(t,e,n){return i;function i(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),i):a===38?(t.consume(a),s):a===93?(t.consume(a),r):a===60||a===null||qe(a)||Bl(a)?e(a):n(a)}function r(a){return a===null||a===40||a===91||qe(a)||Bl(a)?e(a):i(a)}function s(a){return An(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),i):An(a)?(t.consume(a),o):n(a)}}function e4(t,e,n){return i;function i(s){return t.consume(s),r}function r(s){return un(s)?n(s):e(s)}}function TM(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||qe(t)}function CM(t){return!An(t)}function kM(t){return!(t===47||F0(t))}function F0(t){return t===43||t===45||t===46||t===95||un(t)}function Nw(t){let e=t.length,n=!1;for(;e--;){const i=t[e][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const t4={tokenize:u4,partial:!0};function n4(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:o4,continuation:{tokenize:a4},exit:l4}},text:{91:{name:"gfmFootnoteCall",tokenize:s4},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:i4,resolveTo:r4}}}}function i4(t,e,n){const i=this;let r=i.events.length;const s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let o;for(;r--;){const l=i.events[r][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const u=hr(i.sliceSerialize({start:o.end,end:i.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function r4(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",i,e],t[n+3],t[n+4],["enter",r,e],["exit",r,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",i,e]];return t.splice(n,t.length-n+1,...a),t}function s4(t,e,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s=0,o;return a;function a(d){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),l}function l(d){return d!==94?n(d):(t.enter("gfmFootnoteCallMarker"),t.consume(d),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",u)}function u(d){if(s>999||d===93&&!o||d===null||d===91||qe(d))return n(d);if(d===93){t.exit("chunkString");const f=t.exit("gfmFootnoteCallString");return r.includes(hr(i.sliceSerialize(f)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(d)}return qe(d)||(o=!0),s++,t.consume(d),d===92?c:u}function c(d){return d===91||d===92||d===93?(t.consume(d),s++,u):u(d)}}function o4(t,e,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(y){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(y){return y===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",c):n(y)}function c(y){if(o>999||y===93&&!a||y===null||y===91||qe(y))return n(y);if(y===93){t.exit("chunkString");const v=t.exit("gfmFootnoteDefinitionLabelString");return s=hr(i.sliceSerialize(v)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(y),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),f}return qe(y)||(a=!0),o++,t.consume(y),y===92?d:c}function d(y){return y===91||y===92||y===93?(t.consume(y),o++,c):c(y)}function f(y){return y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),r.includes(s)||r.push(s),ke(t,g,"gfmFootnoteDefinitionWhitespace")):n(y)}function g(y){return e(y)}}function a4(t,e,n){return t.check(Rp,e,t.attempt(t4,e,n))}function l4(t){t.exit("gfmFootnoteDefinition")}function u4(t,e,n){const i=this;return ke(t,r,"gfmFootnoteDefinitionIndent",5);function r(s){const o=i.events[i.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function c4(t){let n=(t||{}).singleTilde;const i={name:"strikethrough",tokenize:s,resolveAll:r};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function r(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let u=l;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[l][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const c={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[l][1].end)},d={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[l][1].start)},f=[["enter",c,a],["enter",o[u][1],a],["exit",o[u][1],a],["enter",d,a]],g=a.parser.constructs.insideSpan.null;g&&pi(f,f.length,0,tv(g,o.slice(u+1,l),a)),pi(f,f.length,0,[["exit",d,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",c,a]]),pi(o,u-1,l-u+3,f),l=u+f.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const u=this.previous,c=this.events;let d=0;return f;function f(y){return u===126&&c[c.length-1][1].type!=="characterEscape"?l(y):(o.enter("strikethroughSequenceTemporary"),g(y))}function g(y){const v=nd(u);if(y===126)return d>1?l(y):(o.consume(y),d++,g);if(d<2&&!n)return l(y);const E=o.exit("strikethroughSequenceTemporary"),_=nd(y);return E._open=!_||_===2&&!!v,E._close=!v||v===2&&!!_,a(y)}}}class d4{constructor(){this.map=[]}add(e,n,i){h4(this,e,n,i)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];i.push(e.slice()),e.length=0;let r=i.pop();for(;r;){for(const s of r)e.push(s);r=i.pop()}this.map.length=0}}function h4(t,e,n,i){let r=0;if(!(n===0&&i.length===0)){for(;r<t.map.length;){if(t.map[r][0]===e){t.map[r][1]+=n,t.map[r][2].push(...i);return}r+=1}t.map.push([e,n,i])}}function f4(t,e){let n=!1;const i=[];for(;e<t.length;){const r=t[e];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&i.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=i.length-1;i[s]=i[s]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return i}function p4(){return{flow:{null:{name:"table",tokenize:g4,resolveAll:m4}}}}function g4(t,e,n){const i=this;let r=0,s=0,o;return a;function a(R){let U=i.events.length-1;for(;U>-1;){const W=i.events[U][1].type;if(W==="lineEnding"||W==="linePrefix")U--;else break}const H=U>-1?i.events[U][1].type:null,V=H==="tableHead"||H==="tableRow"?T:l;return V===T&&i.parser.lazy[i.now().line]?n(R):V(R)}function l(R){return t.enter("tableHead"),t.enter("tableRow"),u(R)}function u(R){return R===124||(o=!0,s+=1),c(R)}function c(R){return R===null?n(R):le(R)?s>1?(s=0,i.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),g):n(R):xe(R)?ke(t,c,"whitespace")(R):(s+=1,o&&(o=!1,r+=1),R===124?(t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),o=!0,c):(t.enter("data"),d(R)))}function d(R){return R===null||R===124||qe(R)?(t.exit("data"),c(R)):(t.consume(R),R===92?f:d)}function f(R){return R===92||R===124?(t.consume(R),d):d(R)}function g(R){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(R):(t.enter("tableDelimiterRow"),o=!1,xe(R)?ke(t,y,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):y(R))}function y(R){return R===45||R===58?E(R):R===124?(o=!0,t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),v):k(R)}function v(R){return xe(R)?ke(t,E,"whitespace")(R):E(R)}function E(R){return R===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(R),t.exit("tableDelimiterMarker"),_):R===45?(s+=1,_(R)):R===null||le(R)?A(R):k(R)}function _(R){return R===45?(t.enter("tableDelimiterFiller"),b(R)):k(R)}function b(R){return R===45?(t.consume(R),b):R===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(R),t.exit("tableDelimiterMarker"),w):(t.exit("tableDelimiterFiller"),w(R))}function w(R){return xe(R)?ke(t,A,"whitespace")(R):A(R)}function A(R){return R===124?y(R):R===null||le(R)?!o||r!==s?k(R):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(R)):k(R)}function k(R){return n(R)}function T(R){return t.enter("tableRow"),N(R)}function N(R){return R===124?(t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),N):R===null||le(R)?(t.exit("tableRow"),e(R)):xe(R)?ke(t,N,"whitespace")(R):(t.enter("data"),L(R))}function L(R){return R===null||R===124||qe(R)?(t.exit("data"),N(R)):(t.consume(R),R===92?F:L)}function F(R){return R===92||R===124?(t.consume(R),L):L(R)}}function m4(t,e){let n=-1,i=!0,r=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,u,c,d;const f=new d4;for(;++n<t.length;){const g=t[n],y=g[1];g[0]==="enter"?y.type==="tableHead"?(a=!1,l!==0&&($x(f,e,l,u,c),c=void 0,l=0),u={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},f.add(n,0,[["enter",u,e]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(i=!0,d=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,c={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},f.add(n,0,[["enter",c,e]])),r=y.type==="tableDelimiterRow"?2:c?3:1):r&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(i=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],d=sg(f,e,s,r,void 0,d),s=[0,0,0,0]),o[2]=n)):y.type==="tableCellDivider"&&(i?i=!1:(s[1]!==0&&(o[0]=o[1],d=sg(f,e,s,r,void 0,d)),s=o,o=[s[1],n,0,0])):y.type==="tableHead"?(a=!0,l=n):y.type==="tableRow"||y.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],d=sg(f,e,s,r,n,d)):o[1]!==0&&(d=sg(f,e,o,r,n,d)),r=0):r&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&$x(f,e,l,u,c),f.consume(e.events),n=-1;++n<e.events.length;){const g=e.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=f4(e.events,n))}return t}function sg(t,e,n,i,r,s){const o=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},hu(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=hu(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const u=hu(e.events,n[2]),c=hu(e.events,n[3]),d={type:a,start:Object.assign({},u),end:Object.assign({},c)};if(t.add(n[2],0,[["enter",d,e]]),i!==2){const f=e.events[n[2]],g=e.events[n[3]];if(f[1].end=Object.assign({},g[1].end),f[1].type="chunkText",f[1].contentType="text",n[3]>n[2]+1){const y=n[2]+1,v=n[3]-n[2]-1;t.add(y,v,[])}}t.add(n[3]+1,0,[["exit",d,e]])}return r!==void 0&&(s.end=Object.assign({},hu(e.events,r)),t.add(r,0,[["exit",s,e]]),s=void 0),s}function $x(t,e,n,i,r){const s=[],o=hu(e.events,n);r&&(r.end=Object.assign({},o),s.push(["exit",r,e])),i.end=Object.assign({},o),s.push(["exit",i,e]),t.add(n+1,0,s)}function hu(t,e){const n=t[e],i=n[0]==="enter"?"start":"end";return n[1][i]}const y4={name:"tasklistCheck",tokenize:_4};function v4(){return{text:{91:y4}}}function _4(t,e,n){const i=this;return r;function r(l){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return qe(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return le(l)?e(l):xe(l)?t.check({tokenize:E4},e,n)(l):n(l)}}function E4(t,e,n){return ke(t,i,"whitespace");function i(r){return r===null?n(r):e(r)}}function b4(t){return U1([W3(),n4(),c4(t),p4(),v4()])}const w4={};function S4(t){const e=this,n=t||w4,i=e.data(),r=i.micromarkExtensions||(i.micromarkExtensions=[]),s=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),o=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);r.push(b4(n)),s.push(G3()),o.push($3(n))}const Vx=function(t,e,n){const i=Np(n);if(!t||!t.type||!t.children)throw new Error("Expected parent node");if(typeof e=="number"){if(e<0||e===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(e=t.children.indexOf(e),e<0)throw new Error("Expected child node or index");for(;++e<t.children.length;)if(i(t.children[e],e,t))return t.children[e]},Yl=function(t){if(t==null)return T4;if(typeof t=="string")return x4(t);if(typeof t=="object")return A4(t);if(typeof t=="function")return Mw(t);throw new Error("Expected function, string, or array as `test`")};function A4(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Yl(t[n]);return Mw(i);function i(...r){let s=-1;for(;++s<e.length;)if(e[s].apply(this,r))return!0;return!1}}function x4(t){return Mw(e);function e(n){return n.tagName===t}}function Mw(t){return e;function e(n,i,r){return!!(C4(n)&&t.call(this,n,typeof i=="number"?i:void 0,r||void 0))}}function T4(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="element"&&"tagName"in t&&typeof t.tagName=="string")}function C4(t){return t!==null&&typeof t=="object"&&"type"in t&&"tagName"in t}const qx=/\n/g,Wx=/[\t ]+/g,U0=Yl("br"),Kx=Yl(D4),k4=Yl("p"),Yx=Yl("tr"),I4=Yl(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",L4,O4]),IM=Yl(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function R4(t,e){const n=e||{},i="children"in t?t.children:[],r=IM(t),s=MM(t,{whitespace:n.whitespace||"normal"}),o=[];(t.type==="text"||t.type==="comment")&&o.push(...NM(t,{breakBefore:!0,breakAfter:!0}));let a=-1;for(;++a<i.length;)o.push(...RM(i[a],t,{whitespace:s,breakBefore:a?void 0:r,breakAfter:a<i.length-1?U0(i[a+1]):r}));const l=[];let u;for(a=-1;++a<o.length;){const c=o[a];typeof c=="number"?u!==void 0&&c>u&&(u=c):c&&(u!==void 0&&u>-1&&l.push(`
`.repeat(u)||" "),u=-1,l.push(c))}return l.join("")}function RM(t,e,n){return t.type==="element"?N4(t,e,n):t.type==="text"?n.whitespace==="normal"?NM(t,n):M4(t):[]}function N4(t,e,n){const i=MM(t,n),r=t.children||[];let s=-1,o=[];if(I4(t))return o;let a,l;for(U0(t)||Yx(t)&&Vx(e,t,Yx)?l=`
`:k4(t)?(a=2,l=2):IM(t)&&(a=1,l=1);++s<r.length;)o=o.concat(RM(r[s],t,{whitespace:i,breakBefore:s?void 0:a,breakAfter:s<r.length-1?U0(r[s+1]):l}));return Kx(t)&&Vx(e,t,Kx)&&o.push("	"),a&&o.unshift(a),l&&o.push(l),o}function NM(t,e){const n=String(t.value),i=[],r=[];let s=0;for(;s<=n.length;){qx.lastIndex=s;const l=qx.exec(n),u=l&&"index"in l?l.index:n.length;i.push(P4(n.slice(s,u).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),s===0?e.breakBefore:!0,u===n.length?e.breakAfter:!0)),s=u+1}let o=-1,a;for(;++o<i.length;)i[o].charCodeAt(i[o].length-1)===8203||o<i.length-1&&i[o+1].charCodeAt(0)===8203?(r.push(i[o]),a=void 0):i[o]?(typeof a=="number"&&r.push(a),r.push(i[o]),a=0):(o===0||o===i.length-1)&&r.push(0);return r}function M4(t){return[String(t.value)]}function P4(t,e,n){const i=[];let r=0,s;for(;r<t.length;){Wx.lastIndex=r;const o=Wx.exec(t);s=o?o.index:t.length,!r&&!s&&o&&!e&&i.push(""),r!==s&&i.push(t.slice(r,s)),r=o?s+o[0].length:s}return r!==s&&!n&&i.push(""),i.join(" ")}function MM(t,e){if(t.type==="element"){const n=t.properties||{};switch(t.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":e.whitespace;case"textarea":return"pre-wrap"}}return e.whitespace}function L4(t){return!!(t.properties||{}).hidden}function D4(t){return t.tagName==="td"||t.tagName==="th"}function O4(t){return t.tagName==="dialog"&&!(t.properties||{}).open}function F4(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),i="decltype\\(auto\\)",r="[a-zA-Z_]\\w*::",o="(?!struct)("+i+"|"+e.optional(r)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},c={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},d={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},f={className:"title",begin:e.optional(r)+t.IDENT_RE,relevance:0},g=e.optional(r)+t.IDENT_RE+"\\s*\\(",y=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],v=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],E=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],_=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],A={type:v,keyword:y,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:E},k={className:"function.dispatch",relevance:0,keywords:{_hint:_},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},T=[k,d,a,n,t.C_BLOCK_COMMENT_MODE,c,u],N={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:A,contains:T.concat([{begin:/\(/,end:/\)/,keywords:A,contains:T.concat(["self"]),relevance:0}]),relevance:0},L={className:"function",begin:"("+o+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:A,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:i,keywords:A,relevance:0},{begin:g,returnBegin:!0,contains:[f],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[u,c]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:A,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,u,c,a,{begin:/\(/,end:/\)/,keywords:A,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,u,c,a]}]},a,n,t.C_BLOCK_COMMENT_MODE,d]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:A,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(N,L,k,T,[d,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:A,contains:["self",a]},{begin:t.IDENT_RE+"::",keywords:A},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function U4(t){const e={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=F4(t),i=n.keywords;return i.type=[...i.type,...e.type],i.literal=[...i.literal,...e.literal],i.built_in=[...i.built_in,...e.built_in],i._hints=e._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n}function B4(t){const e=t.regex,n={},i={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:e.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},i]});const r={className:"subst",begin:/\$\(/,end:/\)/,contains:[t.BACKSLASH_ESCAPE]},s=t.inherit(t.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),o={begin:/<<-?\s*(?=\w+)/,starts:{contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},a={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,n,r]};r.contains.push(a);const l={match:/\\"/},u={className:"string",begin:/'/,end:/'/},c={match:/\\'/},d={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},t.NUMBER_MODE,n]},f=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],g=t.SHEBANG({binary:`(${f.join("|")})`,relevance:10}),y={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[t.inherit(t.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},v=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],E=["true","false"],_={match:/(\/[a-z._-]+)+/},b=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],w=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],A=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],k=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:v,literal:E,built_in:[...b,...w,"set","shopt",...A,...k]},contains:[g,t.SHEBANG(),y,d,s,o,_,a,l,u,c,n]}}function z4(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),i="decltype\\(auto\\)",r="[a-zA-Z_]\\w*::",o="("+i+"|"+e.optional(r)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",a={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},c={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},d={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},f={className:"title",begin:e.optional(r)+t.IDENT_RE,relevance:0},g=e.optional(r)+t.IDENT_RE+"\\s*\\(",E={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},_=[d,a,n,t.C_BLOCK_COMMENT_MODE,c,u],b={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:E,contains:_.concat([{begin:/\(/,end:/\)/,keywords:E,contains:_.concat(["self"]),relevance:0}]),relevance:0},w={begin:"("+o+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:E,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:i,keywords:E,relevance:0},{begin:g,returnBegin:!0,contains:[t.inherit(f,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:E,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,u,c,a,{begin:/\(/,end:/\)/,keywords:E,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,u,c,a]}]},a,n,t.C_BLOCK_COMMENT_MODE,d]};return{name:"C",aliases:["h"],keywords:E,disableAutodetect:!0,illegal:"</",contains:[].concat(b,w,_,[d,{begin:t.IDENT_RE+"::",keywords:E},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},t.TITLE_MODE]}]),exports:{preprocessor:d,strings:u,keywords:E}}}function H4(t){const e=t.regex,n=t.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),i="decltype\\(auto\\)",r="[a-zA-Z_]\\w*::",o="(?!struct)("+i+"|"+e.optional(r)+"[a-zA-Z_]\\w*"+e.optional("<[^<>]+>")+")",a={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},u={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},t.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},c={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},d={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(u,{className:"string"}),{className:"string",begin:/<.*?>/},n,t.C_BLOCK_COMMENT_MODE]},f={className:"title",begin:e.optional(r)+t.IDENT_RE,relevance:0},g=e.optional(r)+t.IDENT_RE+"\\s*\\(",y=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],v=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],E=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],_=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],A={type:v,keyword:y,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:E},k={className:"function.dispatch",relevance:0,keywords:{_hint:_},begin:e.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,t.IDENT_RE,e.lookahead(/(<[^<>]+>|)\s*\(/))},T=[k,d,a,n,t.C_BLOCK_COMMENT_MODE,c,u],N={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:A,contains:T.concat([{begin:/\(/,end:/\)/,keywords:A,contains:T.concat(["self"]),relevance:0}]),relevance:0},L={className:"function",begin:"("+o+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:A,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:i,keywords:A,relevance:0},{begin:g,returnBegin:!0,contains:[f],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[u,c]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:A,relevance:0,contains:[n,t.C_BLOCK_COMMENT_MODE,u,c,a,{begin:/\(/,end:/\)/,keywords:A,relevance:0,contains:["self",n,t.C_BLOCK_COMMENT_MODE,u,c,a]}]},a,n,t.C_BLOCK_COMMENT_MODE,d]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:A,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(N,L,k,T,[d,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:A,contains:["self",a]},{begin:t.IDENT_RE+"::",keywords:A},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function G4(t){const e=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],i=["default","false","null","true"],r=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],s=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],o={keyword:r.concat(s),built_in:e,literal:i},a=t.inherit(t.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},u={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},c={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},d=t.inherit(c,{illegal:/\n/}),f={className:"subst",begin:/\{/,end:/\}/,keywords:o},g=t.inherit(f,{illegal:/\n/}),y={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},t.BACKSLASH_ESCAPE,g]},v={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},f]},E=t.inherit(v,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},g]});f.contains=[v,y,c,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,l,t.C_BLOCK_COMMENT_MODE],g.contains=[E,y,d,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,l,t.inherit(t.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const _={variants:[u,v,y,c,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},b={begin:"<",end:">",contains:[{beginKeywords:"in out"},a]},w=t.IDENT_RE+"(<"+t.IDENT_RE+"(\\s*,\\s*"+t.IDENT_RE+")*>)?(\\[\\])?",A={begin:"@"+t.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:o,illegal:/::/,contains:[t.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},_,l,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},a,b,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,b,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+w+"\\s+)+"+t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:o,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:t.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[t.TITLE_MODE,b],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,relevance:0,contains:[_,l,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},A]}}const $4=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),V4=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],q4=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],W4=[...V4,...q4],K4=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Y4=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),X4=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),J4=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function Q4(t){const e=t.regex,n=$4(t),i={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},r="and or not only",s=/@-?\w[\w]*(-\w+)*/,o="[a-zA-Z-][a-zA-Z0-9_-]*",a=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,i,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+o,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+Y4.join("|")+")"},{begin:":(:)?("+X4.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+J4.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...a,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...a,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:s},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:r,attribute:K4.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...a,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+W4.join("|")+")\\b"}]}}function Z4(t){const e=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function j4(t){const s={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:s,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:s,illegal:/["']/}]}]}}function eq(t){const e=t.regex,n=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[t.HASH_COMMENT_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:e.concat(n,e.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function tq(t){const e=t.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:t.NUMBER_RE}]},i=t.COMMENT();i.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const r={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},s={className:"literal",begin:/\bon|off|true|false|yes|no\b/},o={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},a={begin:/\[/,end:/\]/,contains:[i,s,r,o,n,"self"],relevance:0},l=/[A-Za-z0-9_-]+/,u=/"(\\"|[^"])*"/,c=/'[^']*'/,d=e.either(l,u,c),f=e.concat(d,"(\\s*\\.\\s*",d,")*",e.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[i,{className:"section",begin:/\[+/,end:/\]+/},{begin:f,className:"attr",starts:{end:/$/,contains:[i,a,s,r,o,n]}}]}}var fu="[0-9](_*[0-9])*",og=`\\.(${fu})`,ag="[0-9a-fA-F](_*[0-9a-fA-F])*",Xx={className:"number",variants:[{begin:`(\\b(${fu})((${og})|\\.)?|(${og}))[eE][+-]?(${fu})[fFdD]?\\b`},{begin:`\\b(${fu})((${og})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${og})[fFdD]?\\b`},{begin:`\\b(${fu})[fFdD]\\b`},{begin:`\\b0[xX]((${ag})\\.?|(${ag})?\\.(${ag}))[pP][+-]?(${fu})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${ag})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function PM(t,e,n){return n===-1?"":t.replace(e,i=>PM(t,e,n-1))}function nq(t){const e=t.regex,n="[-a-zA-Z_$][-a-zA-Z_$0-9]*",i=n+PM("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),l={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},u={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},c={className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[t.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:l,illegal:/<\/|#/,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[t.BACKSLASH_ESCAPE]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[e.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[c,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+i+"\\s+)",t.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:l,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:l,relevance:0,contains:[u,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,Xx,t.C_BLOCK_COMMENT_MODE]},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},Xx,u]}}const Jx="[A-Za-z$_][0-9A-Za-z$_]*",iq=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],rq=["true","false","null","undefined","NaN","Infinity"],LM=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],DM=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],OM=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],sq=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],oq=[].concat(OM,LM,DM);function aq(t){const e=t.regex,n=(B,{after:$})=>{const I="</"+B[0].slice(1);return B.input.indexOf(I,$)!==-1},i=Jx,r={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(B,$)=>{const I=B[0].length+B.index,Z=B.input[I];if(Z==="<"||Z===","){$.ignoreMatch();return}Z===">"&&(n(B,{after:I})||$.ignoreMatch());let ee;const M=B.input.substring(I);if(ee=M.match(/^\s*=/)){$.ignoreMatch();return}if((ee=M.match(/^\s+extends\s+/))&&ee.index===0){$.ignoreMatch();return}}},a={$pattern:Jx,keyword:iq,literal:rq,built_in:oq,"variable.language":sq},l="[0-9](_?[0-9])*",u=`\\.(${l})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${c})((${u})|\\.)?|(${u}))[eE][+-]?(${l})\\b`},{begin:`\\b(${c})\\b((${u})\\b|\\.)?|(${u})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},f={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},g={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"xml"}},y={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"graphql"}},E={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,f]},b={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:i+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},w=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,g,y,v,E,{match:/\$\d+/},d];f.contains=w.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(w)});const A=[].concat(b,f.contains),k=A.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(A)}]),T={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:k},N={variants:[{match:[/class/,/\s+/,i,/\s+/,/extends/,/\s+/,e.concat(i,"(",e.concat(/\./,i),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,i],scope:{1:"keyword",3:"title.class"}}]},L={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...LM,...DM]}},F={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},R={variants:[{match:[/function/,/\s+/,i,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[T],illegal:/%/},U={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function H(B){return e.concat("(?!",B.join("|"),")")}const V={match:e.concat(/\b/,H([...OM,"super","import"].map(B=>`${B}\\s*\\(`)),i,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},W={begin:e.concat(/\./,e.lookahead(e.concat(i,/(?![0-9A-Za-z$_(])/))),end:i,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},X={match:[/get|set/,/\s+/,i,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},T]},D="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",z={match:[/const|var|let/,/\s+/,i,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(D)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[T]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:k,CLASS_REFERENCE:L},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),F,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,g,y,v,E,b,{match:/\$\d+/},d,L,{scope:"attr",match:i+e.lookahead(":"),relevance:0},z,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[b,t.REGEXP_MODE,{className:"function",begin:D,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:k}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:r.begin,end:r.end},{match:s},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},R,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[T,t.inherit(t.TITLE_MODE,{begin:i,className:"title.function"})]},{match:/\.\.\./,relevance:0},W,{match:"\\$"+i,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[T]},V,U,N,X,{match:/\$[(.]/}]}}function lq(t){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},i=["true","false","null"],r={scope:"literal",beginKeywords:i.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:i},contains:[e,n,t.QUOTE_STRING_MODE,r,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var pu="[0-9](_*[0-9])*",lg=`\\.(${pu})`,ug="[0-9a-fA-F](_*[0-9a-fA-F])*",uq={className:"number",variants:[{begin:`(\\b(${pu})((${lg})|\\.)?|(${lg}))[eE][+-]?(${pu})[fFdD]?\\b`},{begin:`\\b(${pu})((${lg})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${lg})[fFdD]?\\b`},{begin:`\\b(${pu})[fFdD]\\b`},{begin:`\\b0[xX]((${ug})\\.?|(${ug})?\\.(${ug}))[pP][+-]?(${pu})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${ug})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function cq(t){const e={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},i={className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"@"},r={className:"subst",begin:/\$\{/,end:/\}/,contains:[t.C_NUMBER_MODE]},s={className:"variable",begin:"\\$"+t.UNDERSCORE_IDENT_RE},o={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[s,r]},{begin:"'",end:"'",illegal:/\n/,contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[t.BACKSLASH_ESCAPE,s,r]}]};r.contains.push(o);const a={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+t.UNDERSCORE_IDENT_RE+")?"},l={className:"meta",begin:"@"+t.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[t.inherit(o,{className:"string"}),"self"]}]},u=uq,c=t.COMMENT("/\\*","\\*/",{contains:[t.C_BLOCK_COMMENT_MODE]}),d={variants:[{className:"type",begin:t.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},f=d;return f.variants[1].contains=[d],d.variants[1].contains=[f],{name:"Kotlin",aliases:["kt","kts"],keywords:e,contains:[t.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),t.C_LINE_COMMENT_MODE,c,n,i,a,l,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:e,relevance:5,contains:[{begin:t.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[t.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:e,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[d,t.C_LINE_COMMENT_MODE,c],relevance:0},t.C_LINE_COMMENT_MODE,c,a,l,o,t.C_NUMBER_MODE]},c]},{begin:[/class|interface|trait/,/\s+/,t.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},t.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},a,l]},o,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},u]}}const dq=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),hq=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],fq=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],pq=[...hq,...fq],gq=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),FM=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),UM=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),mq=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),yq=FM.concat(UM).sort().reverse();function vq(t){const e=dq(t),n=yq,i="and or not only",r="[\\w-]+",s="("+r+"|@\\{"+r+"\\})",o=[],a=[],l=function(w){return{className:"string",begin:"~?"+w+".*?"+w}},u=function(w,A,k){return{className:w,begin:A,relevance:k}},c={$pattern:/[a-z-]+/,keyword:i,attribute:gq.join(" ")},d={begin:"\\(",end:"\\)",contains:a,keywords:c,relevance:0};a.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,l("'"),l('"'),e.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},e.HEXCOLOR,d,u("variable","@@?"+r,10),u("variable","@\\{"+r+"\\}"),u("built_in","~?`[^`]*?`"),{className:"attribute",begin:r+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},e.IMPORTANT,{beginKeywords:"and not"},e.FUNCTION_DISPATCH);const f=a.concat({begin:/\{/,end:/\}/,contains:o}),g={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(a)},y={begin:s+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+mq.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:a}}]},v={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:c,returnEnd:!0,contains:a,relevance:0}},E={className:"variable",variants:[{begin:"@"+r+"\\s*:",relevance:15},{begin:"@"+r}],starts:{end:"[;}]",returnEnd:!0,contains:f}},_={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:s,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,g,u("keyword","all\\b"),u("variable","@\\{"+r+"\\}"),{begin:"\\b("+pq.join("|")+")\\b",className:"selector-tag"},e.CSS_NUMBER_MODE,u("selector-tag",s,0),u("selector-id","#"+s),u("selector-class","\\."+s,0),u("selector-tag","&",0),e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+FM.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+UM.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:f},{begin:"!important"},e.FUNCTION_DISPATCH]},b={begin:r+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[_]};return o.push(t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,v,E,b,y,_,g,e.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:o}}function _q(t){const e="\\[=*\\[",n="\\]=*\\]",i={begin:e,end:n,contains:["self"]},r=[t.COMMENT("--(?!"+e+")","$"),t.COMMENT("--"+e,n,{contains:[i],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:t.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:r.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[t.inherit(t.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:r}].concat(r)},t.C_NUMBER_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,{className:"string",begin:e,end:n,contains:[i],relevance:5}])}}function Eq(t){const e={className:"variable",variants:[{begin:"\\$\\("+t.UNDERSCORE_IDENT_RE+"\\)",contains:[t.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,e]},i={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[e,n]},r={begin:"^"+t.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},s={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},o={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[e]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[t.HASH_COMMENT_MODE,e,n,i,r,s,o]}}function bq(t){const e=t.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},i={begin:"^[-\\*]{3,}",end:"$"},r={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},s={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},o={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},a=/[A-Za-z][A-Za-z0-9+.-]*/,l={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,a,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},u={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},c={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},d=t.inherit(u,{contains:[]}),f=t.inherit(c,{contains:[]});u.contains.push(f),c.contains.push(d);let g=[n,l];return[u,c,d,f].forEach(_=>{_.contains=_.contains.concat(g)}),g=g.concat(u,c),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:g},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:g}]}]},n,s,u,c,{className:"quote",begin:"^>\\s+",contains:g,end:"$"},r,i,l,o,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function wq(t){const e={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,a={"variable.language":["this","super"],$pattern:n,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},l={$pattern:n,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:a,illegal:"</",contains:[e,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,t.C_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+l.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:l,contains:[t.UNDERSCORE_TITLE_MODE]},{begin:"\\."+t.UNDERSCORE_IDENT_RE,relevance:0}]}}function Sq(t){const e=t.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],i=/[dualxmsipngr]{0,12}/,r={$pattern:/[\w.]+/,keyword:n.join(" ")},s={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:r},o={begin:/->\{/,end:/\}/},a={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},l={scope:"variable",variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[a]},u={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},c=[t.BACKSLASH_ESCAPE,s,l],d=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],f=(v,E,_="\\1")=>{const b=_==="\\1"?_:e.concat(_,E);return e.concat(e.concat("(?:",v,")"),E,/(?:\\.|[^\\\/])*?/,b,/(?:\\.|[^\\\/])*?/,_,i)},g=(v,E,_)=>e.concat(e.concat("(?:",v,")"),E,/(?:\\.|[^\\\/])*?/,_,i),y=[l,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),o,{className:"string",contains:c,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},u,{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:f("s|tr|y",e.either(...d,{capture:!0}))},{begin:f("s|tr|y","\\(","\\)")},{begin:f("s|tr|y","\\[","\\]")},{begin:f("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:g("(?:m|qr)?",/\//,/\//)},{begin:g("m|qr",e.either(...d,{capture:!0}),/\1/)},{begin:g("m|qr",/\(/,/\)/)},{begin:g("m|qr",/\[/,/\]/)},{begin:g("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,a]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE,a,u]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return s.contains=y,o.contains=y,{name:"Perl",aliases:["pl","pm"],keywords:r,contains:y}}function Aq(t){const e=t.regex,n=/(?![A-Za-z0-9])(?![$])/,i=e.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),r=e.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),s=e.concat(/[A-Z]+/,n),o={scope:"variable",match:"\\$+"+i},a={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},l={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},u=t.inherit(t.APOS_STRING_MODE,{illegal:null}),c=t.inherit(t.QUOTE_STRING_MODE,{illegal:null,contains:t.QUOTE_STRING_MODE.contains.concat(l)}),d={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:t.QUOTE_STRING_MODE.contains.concat(l),"on:begin":(W,X)=>{X.data._beginMatch=W[1]||W[2]},"on:end":(W,X)=>{X.data._beginMatch!==W[1]&&X.ignoreMatch()}},f=t.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),g=`[ 	
]`,y={scope:"string",variants:[c,u,d,f]},v={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},E=["false","null","true"],_=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],b=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],A={keyword:_,literal:(W=>{const X=[];return W.forEach(D=>{X.push(D),D.toLowerCase()===D?X.push(D.toUpperCase()):X.push(D.toLowerCase())}),X})(E),built_in:b},k=W=>W.map(X=>X.replace(/\|\d+$/,"")),T={variants:[{match:[/new/,e.concat(g,"+"),e.concat("(?!",k(b).join("\\b|"),"\\b)"),r],scope:{1:"keyword",4:"title.class"}}]},N=e.concat(i,"\\b(?!\\()"),L={variants:[{match:[e.concat(/::/,e.lookahead(/(?!class\b)/)),N],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[r,e.concat(/::/,e.lookahead(/(?!class\b)/)),N],scope:{1:"title.class",3:"variable.constant"}},{match:[r,e.concat("::",e.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[r,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},F={scope:"attr",match:e.concat(i,e.lookahead(":"),e.lookahead(/(?!::)/))},R={relevance:0,begin:/\(/,end:/\)/,keywords:A,contains:[F,o,L,t.C_BLOCK_COMMENT_MODE,y,v,T]},U={relevance:0,match:[/\b/,e.concat("(?!fn\\b|function\\b|",k(_).join("\\b|"),"|",k(b).join("\\b|"),"\\b)"),i,e.concat(g,"*"),e.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[R]};R.contains.push(U);const H=[F,L,t.C_BLOCK_COMMENT_MODE,y,v,T],V={begin:e.concat(/#\[\s*\\?/,e.either(r,s)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:E,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:E,keyword:["new","array"]},contains:["self",...H]},...H,{scope:"meta",variants:[{match:r},{match:s}]}]};return{case_insensitive:!1,keywords:A,contains:[V,t.HASH_COMMENT_MODE,t.COMMENT("//","$"),t.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:t.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},a,{scope:"variable.language",match:/\$this\b/},o,U,L,{match:[/const/,/\s/,i],scope:{1:"keyword",3:"variable.constant"}},T,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},t.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:A,contains:["self",V,o,L,t.C_BLOCK_COMMENT_MODE,y,v]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},t.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[t.inherit(t.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},t.UNDERSCORE_TITLE_MODE]},y,v]}}function xq(t){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},t.inherit(t.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),t.inherit(t.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function Tq(t){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function Cq(t){const e=t.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),i=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],a={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:i,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},l={className:"meta",begin:/^(>>>|\.\.\.) /},u={className:"subst",begin:/\{/,end:/\}/,keywords:a,illegal:/#/},c={begin:/\{\{/,relevance:0},d={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,l],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,l,c,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,l,c,u]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,c,u]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,c,u]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},f="[0-9](_?[0-9])*",g=`(\\b(${f}))?\\.(${f})|\\b(${f})\\.`,y=`\\b|${i.join("|")}`,v={className:"number",relevance:0,variants:[{begin:`(\\b(${f})|(${g}))[eE][+-]?(${f})[jJ]?(?=${y})`},{begin:`(${g})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${y})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${y})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${y})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${y})`},{begin:`\\b(${f})[jJ](?=${y})`}]},E={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:a,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},_={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:["self",l,v,d,t.HASH_COMMENT_MODE]}]};return u.contains=[d,v,l],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:a,illegal:/(<\/|\?)|=>/,contains:[l,v,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},d,E,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[_]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[v,_,d]}]}}function kq(t){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function Iq(t){const e=t.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,i=e.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),r=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,s=e.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[t.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:e.lookahead(e.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),t.HASH_COMMENT_MODE,{scope:"string",contains:[t.BACKSLASH_ESCAPE],variants:[t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),t.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[r,i]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,i]},{scope:{1:"punctuation",2:"number"},match:[s,i]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,i]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:r},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:s},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function Rq(t){const e=t.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",i=e.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),r=e.concat(i,/(::\w+)*/),o={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},a={className:"doctag",begin:"@[A-Za-z]+"},l={begin:"#<",end:">"},u=[t.COMMENT("#","$",{contains:[a]}),t.COMMENT("^=begin","^=end",{contains:[a],relevance:10}),t.COMMENT("^__END__",t.MATCH_NOTHING_RE)],c={className:"subst",begin:/#\{/,end:/\}/,keywords:o},d={className:"string",contains:[t.BACKSLASH_ESCAPE,c],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:e.concat(/<<[-~]?'?/,e.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[t.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[t.BACKSLASH_ESCAPE,c]})]}]},f="[1-9](_?[0-9])*|0",g="[0-9](_?[0-9])*",y={className:"number",relevance:0,variants:[{begin:`\\b(${f})(\\.(${g}))?([eE][+-]?(${g})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},v={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:o}]},T=[d,{variants:[{match:[/class\s+/,r,/\s+<\s+/,r]},{match:[/\b(class|module)\s+/,r]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:o},{match:[/(include|extend)\s+/,r],scope:{2:"title.class"},keywords:o},{relevance:0,match:[r,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:i,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[v]},{begin:t.IDENT_RE+"::"},{className:"symbol",begin:t.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[d,{begin:n}],relevance:0},y,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:o},{begin:"("+t.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[t.BACKSLASH_ESCAPE,c],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(l,u),relevance:0}].concat(l,u);c.contains=T,v.contains=T;const R=[{begin:/^\s*=>/,starts:{end:"$",contains:T}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:o,contains:T}}];return u.unshift(l),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:o,illegal:/\/\*/,contains:[t.SHEBANG({binary:"ruby"})].concat(R).concat(u).concat(T)}}function Nq(t){const e=t.regex,n=/(r#)?/,i=e.concat(n,t.UNDERSCORE_IDENT_RE),r=e.concat(n,t.IDENT_RE),s={className:"title.function.invoke",relevance:0,begin:e.concat(/\b/,/(?!let|for|while|if|else|match\b)/,r,e.lookahead(/\s*\(/))},o="([ui](8|16|32|64|128|size)|f(32|64))?",a=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],l=["true","false","Some","None","Ok","Err"],u=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],c=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:t.IDENT_RE+"!?",type:c,keyword:a,literal:l,built_in:u},illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.COMMENT("/\\*","\\*/",{contains:["self"]}),t.inherit(t.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+o},{begin:"\\b0o([0-7_]+)"+o},{begin:"\\b0x([A-Fa-f0-9_]+)"+o},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+o}],relevance:0},{begin:[/fn/,/\s+/,i],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,i],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,i,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,i],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,i],className:{1:"keyword",3:"title.class"}},{begin:t.IDENT_RE+"::",keywords:{keyword:"Self",built_in:u,type:c}},{className:"punctuation",begin:"->"},s]}}const Mq=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),Pq=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Lq=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],Dq=[...Pq,...Lq],Oq=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Fq=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Uq=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),Bq=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function zq(t){const e=Mq(t),n=Uq,i=Fq,r="@[a-z-]+",s="and or not only",a={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+Dq.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+i.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},a,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Bq.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,a,e.HEXCOLOR,e.CSS_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:r,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:Oq.join(" ")},contains:[{begin:r,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},a,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function Hq(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function Gq(t){const e=t.regex,n=t.COMMENT("--","$"),i={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},r={begin:/"/,end:/"/,contains:[{match:/""/}]},s=["true","false","unknown"],o=["double precision","large object","with timezone","without timezone"],a=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],l=["add","asc","collation","desc","final","first","last","view"],u=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],c=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],d=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],f=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],g=c,y=[...u,...l].filter(k=>!c.includes(k)),v={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},E={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},_={match:e.concat(/\b/,e.either(...g),/\s*\(/),relevance:0,keywords:{built_in:g}};function b(k){return e.concat(/\b/,e.either(...k.map(T=>T.replace(/\s+/,"\\s+"))),/\b/)}const w={scope:"keyword",match:b(f),relevance:0};function A(k,{exceptions:T,when:N}={}){const L=N;return T=T||[],k.map(F=>F.match(/\|\d+$/)||T.includes(F)?F:L(F)?`${F}|0`:F)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:A(y,{when:k=>k.length<3}),literal:s,type:a,built_in:d},contains:[{scope:"type",match:b(o)},w,_,v,i,r,t.C_NUMBER_MODE,t.C_BLOCK_COMMENT_MODE,n,E]}}function BM(t){return t?typeof t=="string"?t:t.source:null}function Pd(t){return ze("(?=",t,")")}function ze(...t){return t.map(n=>BM(n)).join("")}function $q(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function bn(...t){return"("+($q(t).capture?"":"?:")+t.map(i=>BM(i)).join("|")+")"}const Pw=t=>ze(/\b/,t,/\w$/.test(t)?/\b/:/\B/),Vq=["Protocol","Type"].map(Pw),Qx=["init","self"].map(Pw),qq=["Any","Self"],u_=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],Zx=["false","nil","true"],Wq=["assignment","associativity","higherThan","left","lowerThan","none","right"],Kq=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],jx=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],zM=bn(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),HM=bn(zM,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),c_=ze(zM,HM,"*"),GM=bn(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),Qm=bn(GM,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Ar=ze(GM,Qm,"*"),cg=ze(/[A-Z]/,Qm,"*"),Yq=["attached","autoclosure",ze(/convention\(/,bn("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",ze(/objc\(/,Ar,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],Xq=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function Jq(t){const e={match:/\s+/,relevance:0},n=t.COMMENT("/\\*","\\*/",{contains:["self"]}),i=[t.C_LINE_COMMENT_MODE,n],r={match:[/\./,bn(...Vq,...Qx)],className:{2:"keyword"}},s={match:ze(/\./,bn(...u_)),relevance:0},o=u_.filter(Le=>typeof Le=="string").concat(["_|0"]),a=u_.filter(Le=>typeof Le!="string").concat(qq).map(Pw),l={variants:[{className:"keyword",match:bn(...a,...Qx)}]},u={$pattern:bn(/\b\w+/,/#\w+/),keyword:o.concat(Kq),literal:Zx},c=[r,s,l],d={match:ze(/\./,bn(...jx)),relevance:0},f={className:"built_in",match:ze(/\b/,bn(...jx),/(?=\()/)},g=[d,f],y={match:/->/,relevance:0},v={className:"operator",relevance:0,variants:[{match:c_},{match:`\\.(\\.|${HM})+`}]},E=[y,v],_="([0-9]_*)+",b="([0-9a-fA-F]_*)+",w={className:"number",relevance:0,variants:[{match:`\\b(${_})(\\.(${_}))?([eE][+-]?(${_}))?\\b`},{match:`\\b0x(${b})(\\.(${b}))?([pP][+-]?(${_}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},A=(Le="")=>({className:"subst",variants:[{match:ze(/\\/,Le,/[0\\tnr"']/)},{match:ze(/\\/,Le,/u\{[0-9a-fA-F]{1,8}\}/)}]}),k=(Le="")=>({className:"subst",match:ze(/\\/,Le,/[\t ]*(?:[\r\n]|\r\n)/)}),T=(Le="")=>({className:"subst",label:"interpol",begin:ze(/\\/,Le,/\(/),end:/\)/}),N=(Le="")=>({begin:ze(Le,/"""/),end:ze(/"""/,Le),contains:[A(Le),k(Le),T(Le)]}),L=(Le="")=>({begin:ze(Le,/"/),end:ze(/"/,Le),contains:[A(Le),T(Le)]}),F={className:"string",variants:[N(),N("#"),N("##"),N("###"),L(),L("#"),L("##"),L("###")]},R=[t.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[t.BACKSLASH_ESCAPE]}],U={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:R},H=Le=>{const Gi=ze(Le,/\//),ue=ze(/\//,Le);return{begin:Gi,end:ue,contains:[...R,{scope:"comment",begin:`#(?!.*${ue})`,end:/$/}]}},V={scope:"regexp",variants:[H("###"),H("##"),H("#"),U]},W={match:ze(/`/,Ar,/`/)},X={className:"variable",match:/\$\d+/},D={className:"variable",match:`\\$${Qm}+`},z=[W,X,D],B={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:Xq,contains:[...E,w,F]}]}},$={scope:"keyword",match:ze(/@/,bn(...Yq),Pd(bn(/\(/,/\s+/)))},I={scope:"meta",match:ze(/@/,Ar)},Z=[B,$,I],ee={match:Pd(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:ze(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,Qm,"+")},{className:"type",match:cg,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:ze(/\s+&\s+/,Pd(cg)),relevance:0}]},M={begin:/</,end:/>/,keywords:u,contains:[...i,...c,...Z,y,ee]};ee.contains.push(M);const ge={match:ze(Ar,/\s*:/),keywords:"_|0",relevance:0},Pe={begin:/\(/,end:/\)/,relevance:0,keywords:u,contains:["self",ge,...i,V,...c,...g,...E,w,F,...z,...Z,ee]},he={begin:/</,end:/>/,keywords:"repeat each",contains:[...i,ee]},be={begin:bn(Pd(ze(Ar,/\s*:/)),Pd(ze(Ar,/\s+/,Ar,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Ar}]},dt={begin:/\(/,end:/\)/,keywords:u,contains:[be,...i,...c,...E,w,F,...Z,ee,Pe],endsParent:!0,illegal:/["']/},Kn={match:[/(func|macro)/,/\s+/,bn(W.match,Ar,c_)],className:{1:"keyword",3:"title.function"},contains:[he,dt,e],illegal:[/\[/,/%/]},_i={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[he,dt,e],illegal:/\[|%/},Ks={match:[/operator/,/\s+/,c_],className:{1:"keyword",3:"title"}},pd={begin:[/precedencegroup/,/\s+/,cg],className:{1:"keyword",3:"title"},contains:[ee],keywords:[...Wq,...Zx],end:/}/},Ys={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},Zl={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},fn={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,Ar,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:u,contains:[he,...c,{begin:/:/,end:/\{/,keywords:u,contains:[{scope:"title.class.inherited",match:cg},...c],relevance:0}]};for(const Le of F.variants){const Gi=Le.contains.find(la=>la.label==="interpol");Gi.keywords=u;const ue=[...c,...g,...E,w,F,...z];Gi.contains=[...ue,{begin:/\(/,end:/\)/,contains:["self",...ue]}]}return{name:"Swift",keywords:u,contains:[...i,Kn,_i,Ys,Zl,fn,Ks,pd,{beginKeywords:"import",end:/$/,contains:[...i],relevance:0},V,...c,...g,...E,w,F,...z,...Z,ee,Pe]}}const Zm="[A-Za-z$_][0-9A-Za-z$_]*",$M=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],VM=["true","false","null","undefined","NaN","Infinity"],qM=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],WM=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],KM=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],YM=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],XM=[].concat(KM,qM,WM);function Qq(t){const e=t.regex,n=(B,{after:$})=>{const I="</"+B[0].slice(1);return B.input.indexOf(I,$)!==-1},i=Zm,r={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(B,$)=>{const I=B[0].length+B.index,Z=B.input[I];if(Z==="<"||Z===","){$.ignoreMatch();return}Z===">"&&(n(B,{after:I})||$.ignoreMatch());let ee;const M=B.input.substring(I);if(ee=M.match(/^\s*=/)){$.ignoreMatch();return}if((ee=M.match(/^\s+extends\s+/))&&ee.index===0){$.ignoreMatch();return}}},a={$pattern:Zm,keyword:$M,literal:VM,built_in:XM,"variable.language":YM},l="[0-9](_?[0-9])*",u=`\\.(${l})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${c})((${u})|\\.)?|(${u}))[eE][+-]?(${l})\\b`},{begin:`\\b(${c})\\b((${u})\\b|\\.)?|(${u})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},f={className:"subst",begin:"\\$\\{",end:"\\}",keywords:a,contains:[]},g={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"xml"}},y={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,f],subLanguage:"graphql"}},E={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,f]},b={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:i+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},w=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,g,y,v,E,{match:/\$\d+/},d];f.contains=w.concat({begin:/\{/,end:/\}/,keywords:a,contains:["self"].concat(w)});const A=[].concat(b,f.contains),k=A.concat([{begin:/(\s*)\(/,end:/\)/,keywords:a,contains:["self"].concat(A)}]),T={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:k},N={variants:[{match:[/class/,/\s+/,i,/\s+/,/extends/,/\s+/,e.concat(i,"(",e.concat(/\./,i),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,i],scope:{1:"keyword",3:"title.class"}}]},L={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...qM,...WM]}},F={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},R={variants:[{match:[/function/,/\s+/,i,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[T],illegal:/%/},U={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function H(B){return e.concat("(?!",B.join("|"),")")}const V={match:e.concat(/\b/,H([...KM,"super","import"].map(B=>`${B}\\s*\\(`)),i,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},W={begin:e.concat(/\./,e.lookahead(e.concat(i,/(?![0-9A-Za-z$_(])/))),end:i,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},X={match:[/get|set/,/\s+/,i,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},T]},D="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",z={match:[/const|var|let/,/\s+/,i,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(D)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[T]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:a,exports:{PARAMS_CONTAINS:k,CLASS_REFERENCE:L},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),F,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,g,y,v,E,b,{match:/\$\d+/},d,L,{scope:"attr",match:i+e.lookahead(":"),relevance:0},z,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[b,t.REGEXP_MODE,{className:"function",begin:D,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:a,contains:k}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:r.begin,end:r.end},{match:s},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},R,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[T,t.inherit(t.TITLE_MODE,{begin:i,className:"title.function"})]},{match:/\.\.\./,relevance:0},W,{match:"\\$"+i,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[T]},V,U,N,X,{match:/\$[(.]/}]}}function Zq(t){const e=t.regex,n=Qq(t),i=Zm,r=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],s={begin:[/namespace/,/\s+/,t.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},o={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:r},contains:[n.exports.CLASS_REFERENCE]},a={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},l=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],u={$pattern:Zm,keyword:$M.concat(l),literal:VM,built_in:XM.concat(r),"variable.language":YM},c={className:"meta",begin:"@"+i},d=(v,E,_)=>{const b=v.contains.findIndex(w=>w.label===E);if(b===-1)throw new Error("can not find mode to replace");v.contains.splice(b,1,_)};Object.assign(n.keywords,u),n.exports.PARAMS_CONTAINS.push(c);const f=n.contains.find(v=>v.scope==="attr"),g=Object.assign({},f,{match:e.concat(i,e.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,f,g]),n.contains=n.contains.concat([c,s,o,g]),d(n,"shebang",t.SHEBANG()),d(n,"use_strict",a);const y=n.contains.find(v=>v.label==="func.def");return y.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function jq(t){const e=t.regex,n={className:"string",begin:/"(""|[^/n])"C\b/},i={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},r=/\d{1,2}\/\d{1,2}\/\d{4}/,s=/\d{4}-\d{1,2}-\d{1,2}/,o=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,a=/\d{1,2}(:\d{1,2}){1,2}/,l={className:"literal",variants:[{begin:e.concat(/# */,e.either(s,r),/ *#/)},{begin:e.concat(/# */,a,/ *#/)},{begin:e.concat(/# */,o,/ *#/)},{begin:e.concat(/# */,e.either(s,r),/ +/,e.either(o,a),/ *#/)}]},u={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},c={className:"label",begin:/^\w+:/},d=t.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),f=t.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[n,i,l,u,c,d,f,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[f]}]}}function eW(t){t.regex;const e=t.COMMENT(/\(;/,/;\)/);e.contains.push("self");const n=t.COMMENT(/;;/,/$/),i=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],r={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},s={className:"variable",begin:/\$[\w_]+/},o={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},a={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},l={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},u={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:i},contains:[n,e,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},s,o,r,t.QUOTE_STRING_MODE,l,u,a]}}function tW(t){const e=t.regex,n=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),i=/[\p{L}0-9._:-]+/u,r={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},s={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},o=t.inherit(s,{begin:/\(/,end:/\)/}),a=t.inherit(t.APOS_STRING_MODE,{className:"string"}),l=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),u={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:i,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[r]},{begin:/'/,end:/'/,contains:[r]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[s,l,a,o,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[s,o,l,a]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},r,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[u],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[u],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(n,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:u}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function nW(t){const e="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",i={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},r={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},s={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},o={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,r]},a=t.inherit(o,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),f={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},g={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},y={begin:/\{/,end:/\}/,contains:[g],illegal:"\\n",relevance:0},v={begin:"\\[",end:"\\]",contains:[g],illegal:"\\n",relevance:0},E=[i,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},f,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},y,v,s,o],_=[...E];return _.pop(),_.push(a),g.contains=_,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:E}}const iW={arduino:U4,bash:B4,c:z4,cpp:H4,csharp:G4,css:Q4,diff:Z4,go:j4,graphql:eq,ini:tq,java:nq,javascript:aq,json:lq,kotlin:cq,less:vq,lua:_q,makefile:Eq,markdown:bq,objectivec:wq,perl:Sq,php:Aq,"php-template":xq,plaintext:Tq,python:Cq,"python-repl":kq,r:Iq,ruby:Rq,rust:Nq,scss:zq,shell:Hq,sql:Gq,swift:Jq,typescript:Zq,vbnet:jq,wasm:eW,xml:tW,yaml:nW};function JM(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(e=>{const n=t[e],i=typeof n;(i==="object"||i==="function")&&!Object.isFrozen(n)&&JM(n)}),t}let eT=class{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}};function QM(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Uo(t,...e){const n=Object.create(null);for(const i in t)n[i]=t[i];return e.forEach(function(i){for(const r in i)n[r]=i[r]}),n}const rW="</span>",tT=t=>!!t.scope,sW=(t,{prefix:e})=>{if(t.startsWith("language:"))return t.replace("language:","language-");if(t.includes(".")){const n=t.split(".");return[`${e}${n.shift()}`,...n.map((i,r)=>`${i}${"_".repeat(r+1)}`)].join(" ")}return`${e}${t}`};class oW{constructor(e,n){this.buffer="",this.classPrefix=n.classPrefix,e.walk(this)}addText(e){this.buffer+=QM(e)}openNode(e){if(!tT(e))return;const n=sW(e.scope,{prefix:this.classPrefix});this.span(n)}closeNode(e){tT(e)&&(this.buffer+=rW)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const nT=(t={})=>{const e={children:[]};return Object.assign(e,t),e};class Lw{constructor(){this.rootNode=nT(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const n=nT({scope:e});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,n){return typeof n=="string"?e.addText(n):n.children&&(e.openNode(n),n.children.forEach(i=>this._walk(e,i)),e.closeNode(n)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(n=>typeof n=="string")?e.children=[e.children.join("")]:e.children.forEach(n=>{Lw._collapse(n)}))}}class aW extends Lw{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,n){const i=e.root;n&&(i.scope=`language:${n}`),this.add(i)}toHTML(){return new oW(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function $h(t){return t?typeof t=="string"?t:t.source:null}function ZM(t){return Xl("(?=",t,")")}function lW(t){return Xl("(?:",t,")*")}function uW(t){return Xl("(?:",t,")?")}function Xl(...t){return t.map(n=>$h(n)).join("")}function cW(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function Dw(...t){return"("+(cW(t).capture?"":"?:")+t.map(i=>$h(i)).join("|")+")"}function jM(t){return new RegExp(t.toString()+"|").exec("").length-1}function dW(t,e){const n=t&&t.exec(e);return n&&n.index===0}const hW=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Ow(t,{joinWith:e}){let n=0;return t.map(i=>{n+=1;const r=n;let s=$h(i),o="";for(;s.length>0;){const a=hW.exec(s);if(!a){o+=s;break}o+=s.substring(0,a.index),s=s.substring(a.index+a[0].length),a[0][0]==="\\"&&a[1]?o+="\\"+String(Number(a[1])+r):(o+=a[0],a[0]==="("&&n++)}return o}).map(i=>`(${i})`).join(e)}const fW=/\b\B/,eP="[a-zA-Z]\\w*",Fw="[a-zA-Z_]\\w*",tP="\\b\\d+(\\.\\d+)?",nP="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",iP="\\b(0b[01]+)",pW="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",gW=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=Xl(e,/.*\b/,t.binary,/\b.*/)),Uo({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(n,i)=>{n.index!==0&&i.ignoreMatch()}},t)},Vh={begin:"\\\\[\\s\\S]",relevance:0},mW={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Vh]},yW={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Vh]},vW={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},sv=function(t,e,n={}){const i=Uo({scope:"comment",begin:t,end:e,contains:[]},n);i.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const r=Dw("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return i.contains.push({begin:Xl(/[ ]+/,"(",r,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),i},_W=sv("//","$"),EW=sv("/\\*","\\*/"),bW=sv("#","$"),wW={scope:"number",begin:tP,relevance:0},SW={scope:"number",begin:nP,relevance:0},AW={scope:"number",begin:iP,relevance:0},xW={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[Vh,{begin:/\[/,end:/\]/,relevance:0,contains:[Vh]}]},TW={scope:"title",begin:eP,relevance:0},CW={scope:"title",begin:Fw,relevance:0},kW={begin:"\\.\\s*"+Fw,relevance:0},IW=function(t){return Object.assign(t,{"on:begin":(e,n)=>{n.data._beginMatch=e[1]},"on:end":(e,n)=>{n.data._beginMatch!==e[1]&&n.ignoreMatch()}})};var dg=Object.freeze({__proto__:null,APOS_STRING_MODE:mW,BACKSLASH_ESCAPE:Vh,BINARY_NUMBER_MODE:AW,BINARY_NUMBER_RE:iP,COMMENT:sv,C_BLOCK_COMMENT_MODE:EW,C_LINE_COMMENT_MODE:_W,C_NUMBER_MODE:SW,C_NUMBER_RE:nP,END_SAME_AS_BEGIN:IW,HASH_COMMENT_MODE:bW,IDENT_RE:eP,MATCH_NOTHING_RE:fW,METHOD_GUARD:kW,NUMBER_MODE:wW,NUMBER_RE:tP,PHRASAL_WORDS_MODE:vW,QUOTE_STRING_MODE:yW,REGEXP_MODE:xW,RE_STARTERS_RE:pW,SHEBANG:gW,TITLE_MODE:TW,UNDERSCORE_IDENT_RE:Fw,UNDERSCORE_TITLE_MODE:CW});function RW(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function NW(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function MW(t,e){e&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=RW,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function PW(t,e){Array.isArray(t.illegal)&&(t.illegal=Dw(...t.illegal))}function LW(t,e){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function DW(t,e){t.relevance===void 0&&(t.relevance=1)}const OW=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},t);Object.keys(t).forEach(i=>{delete t[i]}),t.keywords=n.keywords,t.begin=Xl(n.beforeMatch,ZM(n.begin)),t.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},t.relevance=0,delete n.beforeMatch},FW=["of","and","for","in","not","or","if","then","parent","list","value"],UW="keyword";function rP(t,e,n=UW){const i=Object.create(null);return typeof t=="string"?r(n,t.split(" ")):Array.isArray(t)?r(n,t):Object.keys(t).forEach(function(s){Object.assign(i,rP(t[s],e,s))}),i;function r(s,o){e&&(o=o.map(a=>a.toLowerCase())),o.forEach(function(a){const l=a.split("|");i[l[0]]=[s,BW(l[0],l[1])]})}}function BW(t,e){return e?Number(e):zW(t)?0:1}function zW(t){return FW.includes(t.toLowerCase())}const iT={},Il=t=>{console.error(t)},rT=(t,...e)=>{console.log(`WARN: ${t}`,...e)},iu=(t,e)=>{iT[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),iT[`${t}/${e}`]=!0)},jm=new Error;function sP(t,e,{key:n}){let i=0;const r=t[n],s={},o={};for(let a=1;a<=e.length;a++)o[a+i]=r[a],s[a+i]=!0,i+=jM(e[a-1]);t[n]=o,t[n]._emit=s,t[n]._multi=!0}function HW(t){if(Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw Il("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),jm;if(typeof t.beginScope!="object"||t.beginScope===null)throw Il("beginScope must be object"),jm;sP(t,t.begin,{key:"beginScope"}),t.begin=Ow(t.begin,{joinWith:""})}}function GW(t){if(Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw Il("skip, excludeEnd, returnEnd not compatible with endScope: {}"),jm;if(typeof t.endScope!="object"||t.endScope===null)throw Il("endScope must be object"),jm;sP(t,t.end,{key:"endScope"}),t.end=Ow(t.end,{joinWith:""})}}function $W(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function VW(t){$W(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),HW(t),GW(t)}function qW(t){function e(o,a){return new RegExp($h(o),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(a?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(a,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,a]),this.matchAt+=jM(a)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const a=this.regexes.map(l=>l[1]);this.matcherRe=e(Ow(a,{joinWith:"|"}),!0),this.lastIndex=0}exec(a){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(a);if(!l)return null;const u=l.findIndex((d,f)=>f>0&&d!==void 0),c=this.matchIndexes[u];return l.splice(0,u),Object.assign(l,c)}}class i{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(a){if(this.multiRegexes[a])return this.multiRegexes[a];const l=new n;return this.rules.slice(a).forEach(([u,c])=>l.addRule(u,c)),l.compile(),this.multiRegexes[a]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(a,l){this.rules.push([a,l]),l.type==="begin"&&this.count++}exec(a){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let u=l.exec(a);if(this.resumingScanAtSamePosition()&&!(u&&u.index===this.lastIndex)){const c=this.getMatcher(0);c.lastIndex=this.lastIndex+1,u=c.exec(a)}return u&&(this.regexIndex+=u.position+1,this.regexIndex===this.count&&this.considerAll()),u}}function r(o){const a=new i;return o.contains.forEach(l=>a.addRule(l.begin,{rule:l,type:"begin"})),o.terminatorEnd&&a.addRule(o.terminatorEnd,{type:"end"}),o.illegal&&a.addRule(o.illegal,{type:"illegal"}),a}function s(o,a){const l=o;if(o.isCompiled)return l;[NW,LW,VW,OW].forEach(c=>c(o,a)),t.compilerExtensions.forEach(c=>c(o,a)),o.__beforeBegin=null,[MW,PW,DW].forEach(c=>c(o,a)),o.isCompiled=!0;let u=null;return typeof o.keywords=="object"&&o.keywords.$pattern&&(o.keywords=Object.assign({},o.keywords),u=o.keywords.$pattern,delete o.keywords.$pattern),u=u||/\w+/,o.keywords&&(o.keywords=rP(o.keywords,t.case_insensitive)),l.keywordPatternRe=e(u,!0),a&&(o.begin||(o.begin=/\B|\b/),l.beginRe=e(l.begin),!o.end&&!o.endsWithParent&&(o.end=/\B|\b/),o.end&&(l.endRe=e(l.end)),l.terminatorEnd=$h(l.end)||"",o.endsWithParent&&a.terminatorEnd&&(l.terminatorEnd+=(o.end?"|":"")+a.terminatorEnd)),o.illegal&&(l.illegalRe=e(o.illegal)),o.contains||(o.contains=[]),o.contains=[].concat(...o.contains.map(function(c){return WW(c==="self"?o:c)})),o.contains.forEach(function(c){s(c,l)}),o.starts&&s(o.starts,a),l.matcher=r(l),l}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=Uo(t.classNameAliases||{}),s(t)}function oP(t){return t?t.endsWithParent||oP(t.starts):!1}function WW(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return Uo(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:oP(t)?Uo(t,{starts:t.starts?Uo(t.starts):null}):Object.isFrozen(t)?Uo(t):t}var KW="11.11.1";class YW extends Error{constructor(e,n){super(e),this.name="HTMLInjectionError",this.html=n}}const d_=QM,sT=Uo,oT=Symbol("nomatch"),XW=7,aP=function(t){const e=Object.create(null),n=Object.create(null),i=[];let r=!0;const s="Could not find the language '{}', did you forget to load/include a language module?",o={disableAutodetect:!0,name:"Plain text",contains:[]};let a={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:aW};function l(D){return a.noHighlightRe.test(D)}function u(D){let z=D.className+" ";z+=D.parentNode?D.parentNode.className:"";const B=a.languageDetectRe.exec(z);if(B){const $=L(B[1]);return $||(rT(s.replace("{}",B[1])),rT("Falling back to no-highlight mode for this block.",D)),$?B[1]:"no-highlight"}return z.split(/\s+/).find($=>l($)||L($))}function c(D,z,B){let $="",I="";typeof z=="object"?($=D,B=z.ignoreIllegals,I=z.language):(iu("10.7.0","highlight(lang, code, ...args) has been deprecated."),iu("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),I=D,$=z),B===void 0&&(B=!0);const Z={code:$,language:I};W("before:highlight",Z);const ee=Z.result?Z.result:d(Z.language,Z.code,B);return ee.code=Z.code,W("after:highlight",ee),ee}function d(D,z,B,$){const I=Object.create(null);function Z(O,G){return O.keywords[G]}function ee(){if(!ue.keywords){yt.addText(Be);return}let O=0;ue.keywordPatternRe.lastIndex=0;let G=ue.keywordPatternRe.exec(Be),J="";for(;G;){J+=Be.substring(O,G.index);const re=fn.case_insensitive?G[0].toLowerCase():G[0],me=Z(ue,re);if(me){const[ht,Jr]=me;if(yt.addText(J),J="",I[re]=(I[re]||0)+1,I[re]<=XW&&(jl+=Jr),ht.startsWith("_"))J+=G[0];else{const $i=fn.classNameAliases[ht]||ht;Pe(G[0],$i)}}else J+=G[0];O=ue.keywordPatternRe.lastIndex,G=ue.keywordPatternRe.exec(Be)}J+=Be.substring(O),yt.addText(J)}function M(){if(Be==="")return;let O=null;if(typeof ue.subLanguage=="string"){if(!e[ue.subLanguage]){yt.addText(Be);return}O=d(ue.subLanguage,Be,!0,la[ue.subLanguage]),la[ue.subLanguage]=O._top}else O=g(Be,ue.subLanguage.length?ue.subLanguage:null);ue.relevance>0&&(jl+=O.relevance),yt.__addSublanguage(O._emitter,O.language)}function ge(){ue.subLanguage!=null?M():ee(),Be=""}function Pe(O,G){O!==""&&(yt.startScope(G),yt.addText(O),yt.endScope())}function he(O,G){let J=1;const re=G.length-1;for(;J<=re;){if(!O._emit[J]){J++;continue}const me=fn.classNameAliases[O[J]]||O[J],ht=G[J];me?Pe(ht,me):(Be=ht,ee(),Be=""),J++}}function be(O,G){return O.scope&&typeof O.scope=="string"&&yt.openNode(fn.classNameAliases[O.scope]||O.scope),O.beginScope&&(O.beginScope._wrap?(Pe(Be,fn.classNameAliases[O.beginScope._wrap]||O.beginScope._wrap),Be=""):O.beginScope._multi&&(he(O.beginScope,G),Be="")),ue=Object.create(O,{parent:{value:ue}}),ue}function dt(O,G,J){let re=dW(O.endRe,J);if(re){if(O["on:end"]){const me=new eT(O);O["on:end"](G,me),me.isMatchIgnored&&(re=!1)}if(re){for(;O.endsParent&&O.parent;)O=O.parent;return O}}if(O.endsWithParent)return dt(O.parent,G,J)}function Kn(O){return ue.matcher.regexIndex===0?(Be+=O[0],1):(md=!0,0)}function _i(O){const G=O[0],J=O.rule,re=new eT(J),me=[J.__beforeBegin,J["on:begin"]];for(const ht of me)if(ht&&(ht(O,re),re.isMatchIgnored))return Kn(G);return J.skip?Be+=G:(J.excludeBegin&&(Be+=G),ge(),!J.returnBegin&&!J.excludeBegin&&(Be=G)),be(J,O),J.returnBegin?0:G.length}function Ks(O){const G=O[0],J=z.substring(O.index),re=dt(ue,O,J);if(!re)return oT;const me=ue;ue.endScope&&ue.endScope._wrap?(ge(),Pe(G,ue.endScope._wrap)):ue.endScope&&ue.endScope._multi?(ge(),he(ue.endScope,O)):me.skip?Be+=G:(me.returnEnd||me.excludeEnd||(Be+=G),ge(),me.excludeEnd&&(Be=G));do ue.scope&&yt.closeNode(),!ue.skip&&!ue.subLanguage&&(jl+=ue.relevance),ue=ue.parent;while(ue!==re.parent);return re.starts&&be(re.starts,O),me.returnEnd?0:G.length}function pd(){const O=[];for(let G=ue;G!==fn;G=G.parent)G.scope&&O.unshift(G.scope);O.forEach(G=>yt.openNode(G))}let Ys={};function Zl(O,G){const J=G&&G[0];if(Be+=O,J==null)return ge(),0;if(Ys.type==="begin"&&G.type==="end"&&Ys.index===G.index&&J===""){if(Be+=z.slice(G.index,G.index+1),!r){const re=new Error(`0 width match regex (${D})`);throw re.languageName=D,re.badRule=Ys.rule,re}return 1}if(Ys=G,G.type==="begin")return _i(G);if(G.type==="illegal"&&!B){const re=new Error('Illegal lexeme "'+J+'" for mode "'+(ue.scope||"<unnamed>")+'"');throw re.mode=ue,re}else if(G.type==="end"){const re=Ks(G);if(re!==oT)return re}if(G.type==="illegal"&&J==="")return Be+=`
`,1;if(gd>1e5&&gd>G.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Be+=J,J.length}const fn=L(D);if(!fn)throw Il(s.replace("{}",D)),new Error('Unknown language: "'+D+'"');const Le=qW(fn);let Gi="",ue=$||Le;const la={},yt=new a.__emitter(a);pd();let Be="",jl=0,Xr=0,gd=0,md=!1;try{if(fn.__emitTokens)fn.__emitTokens(z,yt);else{for(ue.matcher.considerAll();;){gd++,md?md=!1:ue.matcher.considerAll(),ue.matcher.lastIndex=Xr;const O=ue.matcher.exec(z);if(!O)break;const G=z.substring(Xr,O.index),J=Zl(G,O);Xr=O.index+J}Zl(z.substring(Xr))}return yt.finalize(),Gi=yt.toHTML(),{language:D,value:Gi,relevance:jl,illegal:!1,_emitter:yt,_top:ue}}catch(O){if(O.message&&O.message.includes("Illegal"))return{language:D,value:d_(z),illegal:!0,relevance:0,_illegalBy:{message:O.message,index:Xr,context:z.slice(Xr-100,Xr+100),mode:O.mode,resultSoFar:Gi},_emitter:yt};if(r)return{language:D,value:d_(z),illegal:!1,relevance:0,errorRaised:O,_emitter:yt,_top:ue};throw O}}function f(D){const z={value:d_(D),illegal:!1,relevance:0,_top:o,_emitter:new a.__emitter(a)};return z._emitter.addText(D),z}function g(D,z){z=z||a.languages||Object.keys(e);const B=f(D),$=z.filter(L).filter(R).map(ge=>d(ge,D,!1));$.unshift(B);const I=$.sort((ge,Pe)=>{if(ge.relevance!==Pe.relevance)return Pe.relevance-ge.relevance;if(ge.language&&Pe.language){if(L(ge.language).supersetOf===Pe.language)return 1;if(L(Pe.language).supersetOf===ge.language)return-1}return 0}),[Z,ee]=I,M=Z;return M.secondBest=ee,M}function y(D,z,B){const $=z&&n[z]||B;D.classList.add("hljs"),D.classList.add(`language-${$}`)}function v(D){let z=null;const B=u(D);if(l(B))return;if(W("before:highlightElement",{el:D,language:B}),D.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",D);return}if(D.children.length>0&&(a.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(D)),a.throwUnescapedHTML))throw new YW("One of your code blocks includes unescaped HTML.",D.innerHTML);z=D;const $=z.textContent,I=B?c($,{language:B,ignoreIllegals:!0}):g($);D.innerHTML=I.value,D.dataset.highlighted="yes",y(D,B,I.language),D.result={language:I.language,re:I.relevance,relevance:I.relevance},I.secondBest&&(D.secondBest={language:I.secondBest.language,relevance:I.secondBest.relevance}),W("after:highlightElement",{el:D,result:I,text:$})}function E(D){a=sT(a,D)}const _=()=>{A(),iu("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function b(){A(),iu("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let w=!1;function A(){function D(){A()}if(document.readyState==="loading"){w||window.addEventListener("DOMContentLoaded",D,!1),w=!0;return}document.querySelectorAll(a.cssSelector).forEach(v)}function k(D,z){let B=null;try{B=z(t)}catch($){if(Il("Language definition for '{}' could not be registered.".replace("{}",D)),r)Il($);else throw $;B=o}B.name||(B.name=D),e[D]=B,B.rawDefinition=z.bind(null,t),B.aliases&&F(B.aliases,{languageName:D})}function T(D){delete e[D];for(const z of Object.keys(n))n[z]===D&&delete n[z]}function N(){return Object.keys(e)}function L(D){return D=(D||"").toLowerCase(),e[D]||e[n[D]]}function F(D,{languageName:z}){typeof D=="string"&&(D=[D]),D.forEach(B=>{n[B.toLowerCase()]=z})}function R(D){const z=L(D);return z&&!z.disableAutodetect}function U(D){D["before:highlightBlock"]&&!D["before:highlightElement"]&&(D["before:highlightElement"]=z=>{D["before:highlightBlock"](Object.assign({block:z.el},z))}),D["after:highlightBlock"]&&!D["after:highlightElement"]&&(D["after:highlightElement"]=z=>{D["after:highlightBlock"](Object.assign({block:z.el},z))})}function H(D){U(D),i.push(D)}function V(D){const z=i.indexOf(D);z!==-1&&i.splice(z,1)}function W(D,z){const B=D;i.forEach(function($){$[B]&&$[B](z)})}function X(D){return iu("10.7.0","highlightBlock will be removed entirely in v12.0"),iu("10.7.0","Please use highlightElement now."),v(D)}Object.assign(t,{highlight:c,highlightAuto:g,highlightAll:A,highlightElement:v,highlightBlock:X,configure:E,initHighlighting:_,initHighlightingOnLoad:b,registerLanguage:k,unregisterLanguage:T,listLanguages:N,getLanguage:L,registerAliases:F,autoDetection:R,inherit:sT,addPlugin:H,removePlugin:V}),t.debugMode=function(){r=!1},t.safeMode=function(){r=!0},t.versionString=KW,t.regex={concat:Xl,lookahead:ZM,either:Dw,optional:uW,anyNumberOfTimes:lW};for(const D in dg)typeof dg[D]=="object"&&JM(dg[D]);return Object.assign(t,dg),t},id=aP({});id.newInstance=()=>aP({});var JW=id;id.HighlightJS=id;id.default=id;const QW=xy(JW),aT={},ZW="hljs-";function jW(t){const e=QW.newInstance();return t&&s(t),{highlight:n,highlightAuto:i,listLanguages:r,register:s,registerAlias:o,registered:a};function n(l,u,c){const d=c||aT,f=typeof d.prefix=="string"?d.prefix:ZW;if(!e.getLanguage(l))throw new Error("Unknown language: `"+l+"` is not registered");e.configure({__emitter:e5,classPrefix:f});const g=e.highlight(u,{ignoreIllegals:!0,language:l});if(g.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:g.errorRaised});const y=g._emitter.root,v=y.data;return v.language=g.language,v.relevance=g.relevance,y}function i(l,u){const d=(u||aT).subset||r();let f=-1,g=0,y;for(;++f<d.length;){const v=d[f];if(!e.getLanguage(v))continue;const E=n(v,l,u);E.data&&E.data.relevance!==void 0&&E.data.relevance>g&&(g=E.data.relevance,y=E)}return y||{type:"root",children:[],data:{language:void 0,relevance:g}}}function r(){return e.listLanguages()}function s(l,u){if(typeof l=="string")e.registerLanguage(l,u);else{let c;for(c in l)Object.hasOwn(l,c)&&e.registerLanguage(c,l[c])}}function o(l,u){if(typeof l=="string")e.registerAliases(typeof u=="string"?u:[...u],{languageName:l});else{let c;for(c in l)if(Object.hasOwn(l,c)){const d=l[c];e.registerAliases(typeof d=="string"?d:[...d],{languageName:c})}}}function a(l){return!!e.getLanguage(l)}}class e5{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const n=this.stack[this.stack.length-1],i=n.children[n.children.length-1];i&&i.type==="text"?i.value+=e:n.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,n){const i=this.stack[this.stack.length-1],r=e.root.children;n?i.children.push({type:"element",tagName:"span",properties:{className:[n]},children:r}):i.children.push(...r)}openNode(e){const n=this,i=e.split(".").map(function(o,a){return a?o+"_".repeat(a):n.options.classPrefix+o}),r=this.stack[this.stack.length-1],s={type:"element",tagName:"span",properties:{className:i},children:[]};r.children.push(s),this.stack.push(s)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const t5={};function n5(t){const e=t||t5,n=e.aliases,i=e.detect||!1,r=e.languages||iW,s=e.plainText,o=e.prefix,a=e.subset;let l="hljs";const u=jW(r);if(n&&u.registerAlias(n),o){const c=o.indexOf("-");l=c===-1?o:o.slice(0,c)}return function(c,d){rv(c,"element",function(f,g,y){if(f.tagName!=="code"||!y||y.type!=="element"||y.tagName!=="pre")return;const v=i5(f);if(v===!1||!v&&!i||v&&s&&s.includes(v))return;Array.isArray(f.properties.className)||(f.properties.className=[]),f.properties.className.includes(l)||f.properties.className.unshift(l);const E=R4(f,{whitespace:"pre"});let _;try{_=v?u.highlight(v,E,{prefix:o}):u.highlightAuto(E,{prefix:o,subset:a})}catch(b){const w=b;if(v&&/Unknown language/.test(w.message)){d.message("Cannot highlight as `"+v+"`, its not registered",{ancestors:[y,f],cause:w,place:f.position,ruleId:"missing-language",source:"rehype-highlight"});return}throw w}!v&&_.data&&_.data.language&&f.properties.className.push("language-"+_.data.language),_.children.length>0&&(f.children=_.children)})}}function i5(t){const e=t.properties.className;let n=-1;if(!Array.isArray(e))return;let i;for(;++n<e.length;){const r=String(e[n]);if(r==="no-highlight"||r==="nohighlight")return!1;!i&&r.slice(0,5)==="lang-"&&(i=r.slice(5)),!i&&r.slice(0,9)==="language-"&&(i=r.slice(9))}return i}const r5=({onSend:t,disabled:e,placeholder:n})=>{const[i,r]=Cy.useState(""),s=q.useRef(null),o=u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),a())},a=()=>{i.trim()&&!e&&(t(i),r(""),s.current&&(s.current.style.height="auto"))},l=u=>{r(u.target.value),u.target.style.height="auto",u.target.style.height=`${u.target.scrollHeight}px`};return P.jsxs("div",{className:"relative",children:[P.jsxs("div",{className:"bg-muted/50 border border-border rounded-3xl p-2 flex items-end gap-2 focus-within:ring-2 focus-within:ring-primary/20 focus-within:border-primary transition-all",children:[P.jsx("textarea",{ref:s,value:i,onChange:l,onKeyDown:o,placeholder:n||"Ask questions about your sources...",disabled:e,className:"w-full bg-transparent border-none focus:ring-0 resize-none max-h-32 min-h-[44px] py-2.5 px-4 text-sm md:text-base custom-scrollbar",rows:1}),P.jsx("button",{onClick:a,disabled:!i.trim()||e,className:"p-2.5 bg-primary text-primary-foreground rounded-full hover:bg-opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-all mb-0.5",children:P.jsx(f2,{size:18})})]}),P.jsx("div",{className:"text-[10px] text-muted-foreground text-center mt-2 opacity-60",children:"NotebookLM may display inaccurate info, including about people, so double-check its responses."})]})},s5=({messages:t,onSendMessage:e,isLoading:n,suggestedQuestions:i})=>{const r=q.useRef(null),s=()=>{var o;(o=r.current)==null||o.scrollIntoView({behavior:"smooth"})};return q.useEffect(()=>{s()},[t,n]),P.jsxs("div",{className:"h-full flex flex-col glass-panel rounded-2xl overflow-hidden shadow-sm relative",children:[P.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar space-y-8",children:t.length===0?P.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center opacity-80 mt-10",children:[P.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary/20 to-purple-500/20 rounded-2xl flex items-center justify-center mb-6 text-primary",children:P.jsx(xA,{size:32})}),P.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Welcome to your notebook"}),P.jsx("p",{className:"text-muted-foreground max-w-md mb-8",children:"Upload sources to the left to get started. Once you have sources, I can summarize them, answer questions, or generate study guides."}),i&&i.length>0&&P.jsxs("div",{className:"w-full max-w-lg space-y-2",children:[P.jsx("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Suggested actions"}),i.map((o,a)=>P.jsxs("button",{onClick:()=>e(o),className:"w-full text-left p-4 rounded-xl border border-border hover:bg-muted/50 transition-colors text-sm flex items-center gap-3 group",children:[P.jsx("div",{className:"p-1.5 bg-muted rounded-full group-hover:bg-primary/10 group-hover:text-primary transition-colors",children:P.jsx(u2,{size:14})}),o]},a))]})]}):P.jsx(P.Fragment,{children:t.map((o,a)=>P.jsxs("div",{className:`flex gap-4 ${o.role==="user"?"flex-row-reverse":""}`,children:[P.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${o.role==="user"?"bg-muted text-muted-foreground":"bg-primary text-primary-foreground"}`,children:o.role==="user"?P.jsx(m2,{size:16}):P.jsx(e2,{size:16})}),P.jsx("div",{className:`max-w-[85%] space-y-1 ${o.role==="user"?"text-right":"text-left"}`,children:P.jsx("div",{className:`prose dark:prose-invert prose-sm max-w-none leading-relaxed ${o.role==="user"?"bg-muted/50 rounded-2xl rounded-tr-sm px-5 py-3 inline-block text-left":""}`,children:o.role==="user"?o.content:P.jsx(kw,{remarkPlugins:[S4],rehypePlugins:[n5],components:{a:({node:l,...u})=>{if(u.href&&u.href.startsWith("#source-")){const c=u.href.replace("#source-","");return P.jsxs("span",{className:"inline-flex items-center justify-center px-1.5 py-0.5 mx-1 rounded-md bg-primary/10 text-primary text-xs font-medium border border-primary/20 cursor-pointer hover:bg-primary/20 transition-colors transform translate-y-[-1px]",children:[P.jsx("span",{className:"opacity-50 text-[10px] mr-1",children:"#"}),c]})}return P.jsx("a",{...u,className:"text-primary hover:underline"})}},children:o.content.replace(/\[\[Source (\d+)\]\]/g,"[$1](#source-$1)")})})})]},a))})}),P.jsxs("div",{className:"p-4 bg-background/80 backdrop-blur-md border-t border-border flex flex-col gap-3",children:[P.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 no-scrollbar",children:["Summarize","Explain","Key Points","Critique"].map(o=>P.jsxs("button",{onClick:()=>{e({Summarize:"Summarize the conversation so far.",Explain:"Explain the last point in more detail.","Key Points":"What are the key takeaways?",Critique:"Critique the arguments presented."}[o])},disabled:n,className:"flex items-center gap-1.5 px-3 py-1.5 bg-muted/50 hover:bg-muted text-xs font-medium rounded-lg text-muted-foreground hover:text-foreground transition-colors whitespace-nowrap border border-transparent hover:border-border/50",children:[P.jsx(xA,{size:12,className:"opacity-70"}),o]},o))}),P.jsx(r5,{onSend:e,disabled:n})]})]})},o5=({onGenerate:t,isGenerating:e})=>{const n=[{id:"summary",icon:r2,label:"Briefing Doc",desc:"Get a concise summary and key takeaways"},{id:"faq",icon:o2,label:"FAQ",desc:"Generate frequently asked questions"},{id:"study-guide",icon:Vy,label:"Study Guide",desc:"Create a study guide with quizzes"},{id:"timeline",icon:t2,label:"Timeline",desc:"Extract key dates and events"}];return P.jsxs("div",{className:"h-full flex flex-col glass-panel rounded-2xl overflow-hidden p-6 gap-6",children:[P.jsxs("div",{children:[P.jsx("h2",{className:"font-semibold text-lg mb-4",children:"Notebook Guide"}),P.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-500/10 to-indigo-500/10 rounded-2xl border border-blue-500/20",children:[P.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[P.jsx("div",{className:"p-2 bg-primary text-primary-foreground rounded-full",children:P.jsx(s2,{size:20})}),P.jsx("h3",{className:"font-medium",children:"Audio Overview"})]}),P.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Generate a conversational podcast about your specific sources."}),P.jsxs("button",{disabled:!0,className:"w-full flex items-center justify-center gap-2 bg-white dark:bg-slate-800 border border-border py-2 rounded-xl text-sm font-medium hover:bg-muted transition-colors opacity-70 cursor-not-allowed",children:[P.jsx(d2,{size:16})," Generating... (Coming Soon)"]})]})]}),P.jsxs("div",{className:"space-y-3",children:[P.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Create"}),P.jsx("div",{className:"grid grid-cols-1 gap-3",children:n.map(i=>P.jsxs("button",{onClick:()=>t(i.id),disabled:e,className:"flex items-start gap-4 p-4 rounded-xl border border-border hover:bg-muted/50 text-left transition-all hover:scale-[1.02] disabled:opacity-50 disabled:hover:scale-100",children:[P.jsx("div",{className:"p-2 bg-muted rounded-lg text-foreground",children:P.jsx(i.icon,{size:20})}),P.jsxs("div",{children:[P.jsx("div",{className:"font-medium text-sm",children:i.label}),P.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:i.desc})]})]},i.id))})]})]})},a5=({source:t,isOpen:e,onClose:n})=>!e||!t?null:P.jsxs("div",{className:"h-full flex flex-col glass-panel rounded-2xl overflow-hidden animate-fade-in",children:[P.jsxs("div",{className:"p-4 border-b border-border/50 flex justify-between items-center bg-muted/30",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx("div",{className:"p-2 bg-primary/10 text-primary rounded-lg",children:P.jsx(Vy,{size:20})}),P.jsxs("div",{children:[P.jsx("h2",{className:"font-semibold text-lg",children:t.title}),P.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.type.toUpperCase()," Content"]})]})]}),P.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-muted text-muted-foreground transition-colors",children:P.jsx(tw,{size:20})})]}),P.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar bg-background/50",children:P.jsx("div",{className:"prose dark:prose-invert max-w-none",children:t.type==="pdf"?P.jsx("div",{className:"whitespace-pre-wrap font-mono text-sm leading-relaxed",children:t.content}):t.type==="text"&&t.title.endsWith(".md")?P.jsx(kw,{children:t.content}):P.jsx("div",{className:"whitespace-pre-wrap font-sans text-base leading-relaxed",children:t.content})})})]}),l5=({content:t,type:e,isOpen:n,onClose:i})=>{const[r,s]=Cy.useState(!1);if(!n||!t)return null;const o=()=>{navigator.clipboard.writeText(t),s(!0),setTimeout(()=>s(!1),2e3)},a={summary:"Briefing Document",faq:"Frequently Asked Questions","study-guide":"Study Guide",timeline:"Key Events Timeline"};return P.jsxs("div",{className:"h-full flex flex-col glass-panel rounded-2xl overflow-hidden animate-fade-in",children:[P.jsxs("div",{className:"p-4 border-b border-border/50 flex justify-between items-center bg-muted/30",children:[P.jsx("h2",{className:"font-semibold text-lg",children:a[e]||"Generated Content"}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("button",{onClick:o,className:"p-2 rounded-full hover:bg-muted text-muted-foreground transition-colors",title:"Copy to clipboard",children:r?P.jsx(n2,{size:20,className:"text-green-500"}):P.jsx(i2,{size:20})}),P.jsx("button",{onClick:i,className:"p-2 rounded-full hover:bg-muted text-muted-foreground transition-colors",children:P.jsx(tw,{size:20})})]})]}),P.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar bg-background/50",children:P.jsx("article",{className:"prose dark:prose-invert max-w-none prose-headings:font-semibold prose-a:text-primary",children:P.jsx(kw,{children:t})})})]})};var u5={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let c5,d5;function h5(){return{geminiUrl:c5,vertexUrl:d5}}function f5(t,e,n,i){var r,s;if(!(t!=null&&t.baseUrl)){const o=h5();return e?(r=o.vertexUrl)!==null&&r!==void 0?r:n:(s=o.geminiUrl)!==null&&s!==void 0?s:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qs{}function j(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const s=e[r];return s!=null?String(s):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function m(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let u=0;u<l.length;u++){const c=l[u];m(c,e.slice(s+1),n[u])}else for(const u of l)m(u,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];m(l[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function p(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const s=r.slice(0,-2);if(s in t){const o=t[s];return Array.isArray(o)?o.map(a=>p(a,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function p5(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),s=i.split("."),o=new Set;let a=-1;for(let l=0;l<r.length;l++)if(r[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const u=s[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&o.add(u)}B0(t,r,s,0,o)}}function B0(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const s=e[i];if(s.endsWith("[]")){const o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])B0(l,e,n,i+1,r)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(u=>!u.startsWith("_")&&!r.has(u)),l={};for(const u of a)l[u]=o[u];for(const[u,c]of Object.entries(l)){const d=[];for(const f of n.slice(i))f==="*"?d.push(u):d.push(f);m(o,d,c)}for(const u of a)delete o[u]}}else{const o=t;s in o&&B0(o[s],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uw(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g5(t){const e={},n=p(t,["operationName"]);n!=null&&m(e,["operationName"],n);const i=p(t,["resourceName"]);return i!=null&&m(e,["_url","resourceName"],i),e}function m5(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const i=p(t,["metadata"]);i!=null&&m(e,["metadata"],i);const r=p(t,["done"]);r!=null&&m(e,["done"],r);const s=p(t,["error"]);s!=null&&m(e,["error"],s);const o=p(t,["response","generateVideoResponse"]);return o!=null&&m(e,["response"],v5(o)),e}function y5(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const i=p(t,["metadata"]);i!=null&&m(e,["metadata"],i);const r=p(t,["done"]);r!=null&&m(e,["done"],r);const s=p(t,["error"]);s!=null&&m(e,["error"],s);const o=p(t,["response"]);return o!=null&&m(e,["response"],_5(o)),e}function v5(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>E5(o))),m(e,["generatedVideos"],s)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function _5(t){const e={},n=p(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>b5(o))),m(e,["generatedVideos"],s)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function E5(t){const e={},n=p(t,["video"]);return n!=null&&m(e,["video"],C5(n)),e}function b5(t){const e={},n=p(t,["_self"]);return n!=null&&m(e,["video"],k5(n)),e}function w5(t){const e={},n=p(t,["operationName"]);return n!=null&&m(e,["_url","operationName"],n),e}function S5(t){const e={},n=p(t,["operationName"]);return n!=null&&m(e,["_url","operationName"],n),e}function A5(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const i=p(t,["metadata"]);i!=null&&m(e,["metadata"],i);const r=p(t,["done"]);r!=null&&m(e,["done"],r);const s=p(t,["error"]);s!=null&&m(e,["error"],s);const o=p(t,["response"]);return o!=null&&m(e,["response"],x5(o)),e}function x5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&m(e,["parent"],i);const r=p(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function lP(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const i=p(t,["metadata"]);i!=null&&m(e,["metadata"],i);const r=p(t,["done"]);r!=null&&m(e,["done"],r);const s=p(t,["error"]);s!=null&&m(e,["error"],s);const o=p(t,["response"]);return o!=null&&m(e,["response"],T5(o)),e}function T5(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&m(e,["parent"],i);const r=p(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function C5(t){const e={},n=p(t,["uri"]);n!=null&&m(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&m(e,["videoBytes"],Uw(i));const r=p(t,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function k5(t){const e={},n=p(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],Uw(i));const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var lT;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(lT||(lT={}));var uT;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(uT||(uT={}));var cT;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(cT||(cT={}));var Bo;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Bo||(Bo={}));var dT;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(dT||(dT={}));var hT;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(hT||(hT={}));var fT;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(fT||(fT={}));var pT;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(pT||(pT={}));var gT;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(gT||(gT={}));var mT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(mT||(mT={}));var yT;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(yT||(yT={}));var vT;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(vT||(vT={}));var _T;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(_T||(_T={}));var ET;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(ET||(ET={}));var bT;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(bT||(bT={}));var wT;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(wT||(wT={}));var ST;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(ST||(ST={}));var AT;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(AT||(AT={}));var xT;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(xT||(xT={}));var TT;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(TT||(TT={}));var CT;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(CT||(CT={}));var ey;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ey||(ey={}));var kT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(kT||(kT={}));var IT;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(IT||(IT={}));var RT;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(RT||(RT={}));var z0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(z0||(z0={}));var NT;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(NT||(NT={}));var MT;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(MT||(MT={}));var PT;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(PT||(PT={}));var LT;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(LT||(LT={}));var DT;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(DT||(DT={}));var OT;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(OT||(OT={}));var FT;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(FT||(FT={}));var UT;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(UT||(UT={}));var BT;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(BT||(BT={}));var zT;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(zT||(zT={}));var HT;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(HT||(HT={}));var GT;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(GT||(GT={}));var $T;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})($T||($T={}));var VT;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(VT||(VT={}));var qT;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(qT||(qT={}));var WT;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(WT||(WT={}));var KT;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(KT||(KT={}));var YT;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(YT||(YT={}));var XT;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(XT||(XT={}));var JT;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(JT||(JT={}));var QT;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(QT||(QT={}));var ZT;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(ZT||(ZT={}));var jT;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(jT||(jT={}));var eC;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(eC||(eC={}));var tC;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(tC||(tC={}));var nC;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(nC||(nC={}));var iC;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(iC||(iC={}));var rC;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(rC||(rC={}));var ku;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ku||(ku={}));class H0{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ld{get text(){var e,n,i,r,s,o,a,l;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",c=!1;const d=[];for(const f of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,y]of Object.entries(f))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(y!==null||y!==void 0)&&d.push(g);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;c=!0,u+=f.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?u:void 0}get data(){var e,n,i,r,s,o,a,l;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const c=[];for(const d of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[f,g]of Object.entries(d))f!=="inlineData"&&(g!==null||g!==void 0)&&c.push(f);d.inlineData&&typeof d.inlineData.data=="string"&&(u+=atob(d.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,i,r,s,o,a,l;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(c=>c.functionCall).map(c=>c.functionCall).filter(c=>c!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,i,r,s,o,a,l,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const c=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.executableCode).map(d=>d.executableCode).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return(u=c==null?void 0:c[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,i,r,s,o,a,l,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const c=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.codeExecutionResult).map(d=>d.codeExecutionResult).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return(u=c==null?void 0:c[0])===null||u===void 0?void 0:u.output}}class sC{}class oC{}class I5{}class R5{}class N5{}class M5{}class aC{}class lC{}class uC{}class P5{}class ty{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new ty;let r;const s=e;return n?r=y5(s):r=m5(s),Object.assign(i,r),i}}class cC{}class dC{}class hC{}class fC{}class L5{}class D5{}class O5{}class Bw{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Bw,s=A5(e);return Object.assign(i,s),i}}class F5{}class U5{}class B5{}class pC{}class z5{get text(){var e,n,i;let r="",s=!1;const o=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,r+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?r:void 0}get data(){var e,n,i;let r="";const s=[];for(const o of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(r+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class H5{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class zw{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new zw,s=lP(e);return Object.assign(i,s),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Me(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function uP(t,e){const n=Me(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function cP(t){return Array.isArray(t)?t.map(e=>ny(e)):[ny(t)]}function ny(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function dP(t){const e=ny(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function hP(t){const e=ny(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function gC(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function fP(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>gC(e)):[gC(t)]}function G0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function mC(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function yC(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function cn(t){if(t==null)throw new Error("ContentUnion is required");return G0(t)?t:{role:"user",parts:fP(t)}}function Hw(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=cn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=cn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>cn(n)):[cn(e)]}function Oi(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(mC(t)||yC(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[cn(t)]}const e=[],n=[],i=G0(t[0]);for(const r of t){const s=G0(r);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(r);else{if(mC(r)||yC(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:fP(n)}),e}function G5(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Bo).includes(n[0].toUpperCase())?n[0].toUpperCase():Bo.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Bo).includes(i.toUpperCase())?i.toUpperCase():Bo.TYPE_UNSPECIFIED})}}function Gu(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&G5(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Bo).includes(a.toUpperCase())?a.toUpperCase():Bo.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Gu(a);else if(i.includes(o)){const l=[];for(const u of a){if(u.type=="null"){e.nullable=!0;continue}l.push(Gu(u))}e[o]=l}else if(r.includes(o)){const l={};for(const[u,c]of Object.entries(a))l[u]=Gu(c);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function Gw(t){return Gu(t)}function $w(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Vw(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function dd(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Gu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Gu(e.response));return t}function hd(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function $5(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Ws(t,e){if(typeof e!="string")throw new Error("name must be a string");return $5(t,e,"cachedContents")}function pP(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function aa(t){return Uw(t)}function V5(t){return t!=null&&typeof t=="object"&&"name"in t}function q5(t){return t!=null&&typeof t=="object"&&"video"in t}function W5(t){return t!=null&&typeof t=="object"&&"uri"in t}function gP(t){var e;let n;if(V5(t)&&(n=t.name),!(W5(t)&&(n=t.uri,n===void 0))&&!(q5(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function mP(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function yP(t){for(const e of["models","tunedModels","publisherModels"])if(K5(t,e))return t[e];return[]}function K5(t,e){return t!==null&&typeof t=="object"&&e in t}function Y5(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function X5(t,e={}){const n=[],i=new Set;for(const r of t){const s=r.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const o=Y5(r,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function vP(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function J5(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function _P(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let s=!1;for(const o of r){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function fd(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function EP(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q5(t){const e={},n=p(t,["responsesFile"]);n!=null&&m(e,["fileName"],n);const i=p(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>N6(o))),m(e,["inlinedResponses"],s)}const r=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["inlinedEmbedContentResponses"],s)}return e}function Z5(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&m(e,["format"],n);const i=p(t,["gcsDestination","outputUriPrefix"]);i!=null&&m(e,["gcsUri"],i);const r=p(t,["bigqueryDestination","outputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function j5(t){const e={},n=p(t,["format"]);n!=null&&m(e,["predictionsFormat"],n);const i=p(t,["gcsUri"]);i!=null&&m(e,["gcsDestination","outputUriPrefix"],i);const r=p(t,["bigqueryUri"]);if(r!=null&&m(e,["bigqueryDestination","outputUri"],r),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function um(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const i=p(t,["metadata","displayName"]);i!=null&&m(e,["displayName"],i);const r=p(t,["metadata","state"]);r!=null&&m(e,["state"],EP(r));const s=p(t,["metadata","createTime"]);s!=null&&m(e,["createTime"],s);const o=p(t,["metadata","endTime"]);o!=null&&m(e,["endTime"],o);const a=p(t,["metadata","updateTime"]);a!=null&&m(e,["updateTime"],a);const l=p(t,["metadata","model"]);l!=null&&m(e,["model"],l);const u=p(t,["metadata","output"]);return u!=null&&m(e,["dest"],Q5(_P(u))),e}function $0(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const i=p(t,["displayName"]);i!=null&&m(e,["displayName"],i);const r=p(t,["state"]);r!=null&&m(e,["state"],EP(r));const s=p(t,["error"]);s!=null&&m(e,["error"],s);const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const a=p(t,["startTime"]);a!=null&&m(e,["startTime"],a);const l=p(t,["endTime"]);l!=null&&m(e,["endTime"],l);const u=p(t,["updateTime"]);u!=null&&m(e,["updateTime"],u);const c=p(t,["model"]);c!=null&&m(e,["model"],c);const d=p(t,["inputConfig"]);d!=null&&m(e,["src"],e6(d));const f=p(t,["outputConfig"]);f!=null&&m(e,["dest"],Z5(_P(f)));const g=p(t,["completionStats"]);return g!=null&&m(e,["completionStats"],g),e}function e6(t){const e={},n=p(t,["instancesFormat"]);n!=null&&m(e,["format"],n);const i=p(t,["gcsSource","uris"]);i!=null&&m(e,["gcsUri"],i);const r=p(t,["bigquerySource","inputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function t6(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&m(n,["fileName"],i);const r=p(e,["inlinedRequests"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>R6(t,o))),m(n,["requests","requests"],s)}return n}function n6(t){const e={},n=p(t,["format"]);n!=null&&m(e,["instancesFormat"],n);const i=p(t,["gcsUri"]);i!=null&&m(e,["gcsSource","uris"],i);const r=p(t,["bigqueryUri"]);if(r!=null&&m(e,["bigquerySource","inputUri"],r),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function i6(t){const e={},n=p(t,["data"]);if(n!=null&&m(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function r6(t,e){const n={},i=p(e,["name"]);return i!=null&&m(n,["_url","name"],fd(t,i)),n}function s6(t,e){const n={},i=p(e,["name"]);return i!=null&&m(n,["_url","name"],fd(t,i)),n}function o6(t){const e={},n=p(t,["content"]);n!=null&&m(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],a6(i));const r=p(t,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const s=p(t,["finishReason"]);s!=null&&m(e,["finishReason"],s);const o=p(t,["avgLogprobs"]);o!=null&&m(e,["avgLogprobs"],o);const a=p(t,["groundingMetadata"]);a!=null&&m(e,["groundingMetadata"],a);const l=p(t,["index"]);l!=null&&m(e,["index"],l);const u=p(t,["logprobsResult"]);u!=null&&m(e,["logprobsResult"],u);const c=p(t,["safetyRatings"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(g=>g)),m(e,["safetyRatings"],f)}const d=p(t,["urlContextMetadata"]);return d!=null&&m(e,["urlContextMetadata"],d),e}function a6(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),m(e,["citations"],i)}return e}function bP(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>U6(s))),m(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&m(e,["role"],i),e}function l6(t,e){const n={},i=p(t,["displayName"]);if(e!==void 0&&i!=null&&m(e,["batch","displayName"],i),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function u6(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const r=p(t,["dest"]);return e!==void 0&&r!=null&&m(e,["outputConfig"],j5(J5(r))),n}function vC(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["src"]);r!=null&&m(n,["batch","inputConfig"],t6(t,vP(t,r)));const s=p(e,["config"]);return s!=null&&l6(s,n),n}function c6(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["model"],Me(t,i));const r=p(e,["src"]);r!=null&&m(n,["inputConfig"],n6(vP(t,r)));const s=p(e,["config"]);return s!=null&&u6(s,n),n}function d6(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&m(e,["batch","displayName"],i),n}function h6(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["src"]);r!=null&&m(n,["batch","inputConfig"],_6(t,r));const s=p(e,["config"]);return s!=null&&d6(s,n),n}function f6(t,e){const n={},i=p(e,["name"]);return i!=null&&m(n,["_url","name"],fd(t,i)),n}function p6(t,e){const n={},i=p(e,["name"]);return i!=null&&m(n,["_url","name"],fd(t,i)),n}function g6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const r=p(t,["done"]);r!=null&&m(e,["done"],r);const s=p(t,["error"]);return s!=null&&m(e,["error"],s),e}function m6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const r=p(t,["done"]);r!=null&&m(e,["done"],r);const s=p(t,["error"]);return s!=null&&m(e,["error"],s),e}function y6(t,e){const n={},i=p(e,["contents"]);if(i!=null){let s=Hw(t,i);Array.isArray(s)&&(s=s.map(o=>o)),m(n,["requests[]","request","content"],s)}const r=p(e,["config"]);return r!=null&&(m(n,["_self"],v6(r,n)),p5(n,{"requests[].*":"requests[].request.*"})),n}function v6(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const r=p(t,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const s=p(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&m(e,["requests[]","outputDimensionality"],s),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function _6(t,e){const n={},i=p(e,["fileName"]);i!=null&&m(n,["file_name"],i);const r=p(e,["inlinedRequests"]);return r!=null&&m(n,["requests"],y6(t,r)),n}function E6(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function b6(t){const e={},n=p(t,["id"]);n!=null&&m(e,["id"],n);const i=p(t,["args"]);i!=null&&m(e,["args"],i);const r=p(t,["name"]);if(r!=null&&m(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function w6(t){const e={},n=p(t,["allowedFunctionNames"]);n!=null&&m(e,["allowedFunctionNames"],n);const i=p(t,["mode"]);if(i!=null&&m(e,["mode"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function S6(t,e,n){const i={},r=p(e,["systemInstruction"]);n!==void 0&&r!=null&&m(n,["systemInstruction"],bP(cn(r)));const s=p(e,["temperature"]);s!=null&&m(i,["temperature"],s);const o=p(e,["topP"]);o!=null&&m(i,["topP"],o);const a=p(e,["topK"]);a!=null&&m(i,["topK"],a);const l=p(e,["candidateCount"]);l!=null&&m(i,["candidateCount"],l);const u=p(e,["maxOutputTokens"]);u!=null&&m(i,["maxOutputTokens"],u);const c=p(e,["stopSequences"]);c!=null&&m(i,["stopSequences"],c);const d=p(e,["responseLogprobs"]);d!=null&&m(i,["responseLogprobs"],d);const f=p(e,["logprobs"]);f!=null&&m(i,["logprobs"],f);const g=p(e,["presencePenalty"]);g!=null&&m(i,["presencePenalty"],g);const y=p(e,["frequencyPenalty"]);y!=null&&m(i,["frequencyPenalty"],y);const v=p(e,["seed"]);v!=null&&m(i,["seed"],v);const E=p(e,["responseMimeType"]);E!=null&&m(i,["responseMimeType"],E);const _=p(e,["responseSchema"]);_!=null&&m(i,["responseSchema"],Gw(_));const b=p(e,["responseJsonSchema"]);if(b!=null&&m(i,["responseJsonSchema"],b),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=p(e,["safetySettings"]);if(n!==void 0&&w!=null){let V=w;Array.isArray(V)&&(V=V.map(W=>B6(W))),m(n,["safetySettings"],V)}const A=p(e,["tools"]);if(n!==void 0&&A!=null){let V=hd(A);Array.isArray(V)&&(V=V.map(W=>H6(dd(W)))),m(n,["tools"],V)}const k=p(e,["toolConfig"]);if(n!==void 0&&k!=null&&m(n,["toolConfig"],z6(k)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=p(e,["cachedContent"]);n!==void 0&&T!=null&&m(n,["cachedContent"],Ws(t,T));const N=p(e,["responseModalities"]);N!=null&&m(i,["responseModalities"],N);const L=p(e,["mediaResolution"]);L!=null&&m(i,["mediaResolution"],L);const F=p(e,["speechConfig"]);if(F!=null&&m(i,["speechConfig"],$w(F)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=p(e,["thinkingConfig"]);R!=null&&m(i,["thinkingConfig"],R);const U=p(e,["imageConfig"]);U!=null&&m(i,["imageConfig"],I6(U));const H=p(e,["enableEnhancedCivicAnswers"]);return H!=null&&m(i,["enableEnhancedCivicAnswers"],H),i}function A6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>o6(u))),m(e,["candidates"],l)}const r=p(t,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const s=p(t,["promptFeedback"]);s!=null&&m(e,["promptFeedback"],s);const o=p(t,["responseId"]);o!=null&&m(e,["responseId"],o);const a=p(t,["usageMetadata"]);return a!=null&&m(e,["usageMetadata"],a),e}function x6(t,e){const n={},i=p(e,["name"]);return i!=null&&m(n,["_url","name"],fd(t,i)),n}function T6(t,e){const n={},i=p(e,["name"]);return i!=null&&m(n,["_url","name"],fd(t,i)),n}function C6(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function k6(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function I6(t){const e={},n=p(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const i=p(t,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),p(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function R6(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["request","model"],Me(t,i));const r=p(e,["contents"]);if(r!=null){let a=Oi(r);Array.isArray(a)&&(a=a.map(l=>bP(l))),m(n,["request","contents"],a)}const s=p(e,["metadata"]);s!=null&&m(n,["metadata"],s);const o=p(e,["config"]);return o!=null&&m(n,["request","generationConfig"],S6(t,o,p(n,["request"],{}))),n}function N6(t){const e={},n=p(t,["response"]);n!=null&&m(e,["response"],A6(n));const i=p(t,["error"]);return i!=null&&m(e,["error"],i),e}function M6(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);if(e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function P6(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);e!==void 0&&r!=null&&m(e,["_query","pageToken"],r);const s=p(t,["filter"]);return e!==void 0&&s!=null&&m(e,["_query","filter"],s),n}function L6(t){const e={},n=p(t,["config"]);return n!=null&&M6(n,e),e}function D6(t){const e={},n=p(t,["config"]);return n!=null&&P6(n,e),e}function O6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=p(t,["operations"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>um(o))),m(e,["batchJobs"],s)}return e}function F6(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=p(t,["batchPredictionJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>$0(o))),m(e,["batchJobs"],s)}return e}function U6(t){const e={},n=p(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const s=p(t,["fileData"]);s!=null&&m(e,["fileData"],E6(s));const o=p(t,["functionCall"]);o!=null&&m(e,["functionCall"],b6(o));const a=p(t,["functionResponse"]);a!=null&&m(e,["functionResponse"],a);const l=p(t,["inlineData"]);l!=null&&m(e,["inlineData"],i6(l));const u=p(t,["text"]);u!=null&&m(e,["text"],u);const c=p(t,["thought"]);c!=null&&m(e,["thought"],c);const d=p(t,["thoughtSignature"]);d!=null&&m(e,["thoughtSignature"],d);const f=p(t,["videoMetadata"]);return f!=null&&m(e,["videoMetadata"],f),e}function B6(t){const e={},n=p(t,["category"]);if(n!=null&&m(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function z6(t){const e={},n=p(t,["retrievalConfig"]);n!=null&&m(e,["retrievalConfig"],n);const i=p(t,["functionCallingConfig"]);return i!=null&&m(e,["functionCallingConfig"],w6(i)),e}function H6(t){const e={};if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const i=p(t,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=p(t,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=p(t,["functionDeclarations"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>d)),m(e,["functionDeclarations"],c)}const o=p(t,["googleMaps"]);o!=null&&m(e,["googleMaps"],C6(o));const a=p(t,["googleSearch"]);a!=null&&m(e,["googleSearch"],k6(a));const l=p(t,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const u=p(t,["urlContext"]);return u!=null&&m(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(zs||(zs={}));class Jl{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!i||Object.keys(i).length===0?o={config:{}}:typeof i=="object"?o=Object.assign({},i):o=i,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(r=o.config)===null||r===void 0?void 0:r.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G6 extends qs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Jl(zs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=vC(this.apiClient,e),i=n._url,r=j("{model}:batchGenerateContent",i),a=n.batch.inputConfig.requests,l=a.requests,u=[];for(const c of l){const d=Object.assign({},c);if(d.systemInstruction){const f=d.systemInstruction;delete d.systemInstruction;const g=d.request;g.systemInstruction=f,d.request=g}u.push(d)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${r}`;else if(o)i.dest=`${o}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=c6(this.apiClient,e);return a=j("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>$0(c))}else{const u=vC(this.apiClient,e);return a=j("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o.then(c=>um(c))}}async createEmbeddingsInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=h6(this.apiClient,e);return s=j("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>um(l))}}async get(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=T6(this.apiClient,e);return a=j("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>$0(c))}else{const u=x6(this.apiClient,e);return a=j("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o.then(c=>um(c))}}async cancel(e){var n,i,r,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=s6(this.apiClient,e);o=j("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const l=r6(this.apiClient,e);o=j("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=D6(e);return a=j("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=F6(c),f=new pC;return Object.assign(f,d),f})}else{const u=L6(e);return a=j("batches",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=O6(c),f=new pC;return Object.assign(f,d),f})}}async delete(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=p6(this.apiClient,e);return a=j("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>m6(c))}else{const u=f6(this.apiClient,e);return a=j("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>g6(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $6(t){const e={},n=p(t,["data"]);if(n!=null&&m(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function _C(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>hK(s))),m(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&m(e,["role"],i),e}function V6(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=p(t,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const s=p(t,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=p(t,["contents"]);if(e!==void 0&&o!=null){let c=Oi(o);Array.isArray(c)&&(c=c.map(d=>_C(d))),m(e,["contents"],c)}const a=p(t,["systemInstruction"]);e!==void 0&&a!=null&&m(e,["systemInstruction"],_C(cn(a)));const l=p(t,["tools"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>pK(d))),m(e,["tools"],c)}const u=p(t,["toolConfig"]);if(e!==void 0&&u!=null&&m(e,["toolConfig"],fK(u)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function q6(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=p(t,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const s=p(t,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=p(t,["contents"]);if(e!==void 0&&o!=null){let d=Oi(o);Array.isArray(d)&&(d=d.map(f=>f)),m(e,["contents"],d)}const a=p(t,["systemInstruction"]);e!==void 0&&a!=null&&m(e,["systemInstruction"],cn(a));const l=p(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(f=>gK(f))),m(e,["tools"],d)}const u=p(t,["toolConfig"]);e!==void 0&&u!=null&&m(e,["toolConfig"],u);const c=p(t,["kmsKeyName"]);return e!==void 0&&c!=null&&m(e,["encryption_spec","kmsKeyName"],c),n}function W6(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["model"],uP(t,i));const r=p(e,["config"]);return r!=null&&V6(r,n),n}function K6(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["model"],uP(t,i));const r=p(e,["config"]);return r!=null&&q6(r,n),n}function Y6(t,e){const n={},i=p(e,["name"]);return i!=null&&m(n,["_url","name"],Ws(t,i)),n}function X6(t,e){const n={},i=p(e,["name"]);return i!=null&&m(n,["_url","name"],Ws(t,i)),n}function J6(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function Q6(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function Z6(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function j6(t){const e={},n=p(t,["id"]);n!=null&&m(e,["id"],n);const i=p(t,["args"]);i!=null&&m(e,["args"],i);const r=p(t,["name"]);if(r!=null&&m(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eK(t){const e={},n=p(t,["allowedFunctionNames"]);n!=null&&m(e,["allowedFunctionNames"],n);const i=p(t,["mode"]);if(i!=null&&m(e,["mode"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function tK(t){const e={},n=p(t,["description"]);n!=null&&m(e,["description"],n);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const r=p(t,["parameters"]);r!=null&&m(e,["parameters"],r);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const o=p(t,["response"]);o!=null&&m(e,["response"],o);const a=p(t,["responseJsonSchema"]);if(a!=null&&m(e,["responseJsonSchema"],a),p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function nK(t,e){const n={},i=p(e,["name"]);return i!=null&&m(n,["_url","name"],Ws(t,i)),n}function iK(t,e){const n={},i=p(e,["name"]);return i!=null&&m(n,["_url","name"],Ws(t,i)),n}function rK(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function sK(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function oK(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),n}function aK(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),n}function lK(t){const e={},n=p(t,["config"]);return n!=null&&oK(n,e),e}function uK(t){const e={},n=p(t,["config"]);return n!=null&&aK(n,e),e}function cK(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=p(t,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["cachedContents"],s)}return e}function dK(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=p(t,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["cachedContents"],s)}return e}function hK(t){const e={},n=p(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const s=p(t,["fileData"]);s!=null&&m(e,["fileData"],Z6(s));const o=p(t,["functionCall"]);o!=null&&m(e,["functionCall"],j6(o));const a=p(t,["functionResponse"]);a!=null&&m(e,["functionResponse"],a);const l=p(t,["inlineData"]);l!=null&&m(e,["inlineData"],$6(l));const u=p(t,["text"]);u!=null&&m(e,["text"],u);const c=p(t,["thought"]);c!=null&&m(e,["thought"],c);const d=p(t,["thoughtSignature"]);d!=null&&m(e,["thoughtSignature"],d);const f=p(t,["videoMetadata"]);return f!=null&&m(e,["videoMetadata"],f),e}function fK(t){const e={},n=p(t,["retrievalConfig"]);n!=null&&m(e,["retrievalConfig"],n);const i=p(t,["functionCallingConfig"]);return i!=null&&m(e,["functionCallingConfig"],eK(i)),e}function pK(t){const e={};if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const i=p(t,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=p(t,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=p(t,["functionDeclarations"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>d)),m(e,["functionDeclarations"],c)}const o=p(t,["googleMaps"]);o!=null&&m(e,["googleMaps"],rK(o));const a=p(t,["googleSearch"]);a!=null&&m(e,["googleSearch"],sK(a));const l=p(t,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const u=p(t,["urlContext"]);return u!=null&&m(e,["urlContext"],u),e}function gK(t){const e={},n=p(t,["retrieval"]);n!=null&&m(e,["retrieval"],n);const i=p(t,["computerUse"]);if(i!=null&&m(e,["computerUse"],i),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=p(t,["codeExecution"]);r!=null&&m(e,["codeExecution"],r);const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],s);const o=p(t,["functionDeclarations"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>tK(f))),m(e,["functionDeclarations"],d)}const a=p(t,["googleMaps"]);a!=null&&m(e,["googleMaps"],a);const l=p(t,["googleSearch"]);l!=null&&m(e,["googleSearch"],l);const u=p(t,["googleSearchRetrieval"]);u!=null&&m(e,["googleSearchRetrieval"],u);const c=p(t,["urlContext"]);return c!=null&&m(e,["urlContext"],c),e}function mK(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=p(t,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),n}function yK(t,e){const n={},i=p(t,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=p(t,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),n}function vK(t,e){const n={},i=p(e,["name"]);i!=null&&m(n,["_url","name"],Ws(t,i));const r=p(e,["config"]);return r!=null&&mK(r,n),n}function _K(t,e){const n={},i=p(e,["name"]);i!=null&&m(n,["_url","name"],Ws(t,i));const r=p(e,["config"]);return r!=null&&yK(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EK extends qs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Jl(zs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=K6(this.apiClient,e);return a=j("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}else{const u=W6(this.apiClient,e);return a=j("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async get(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=iK(this.apiClient,e);return a=j("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}else{const u=nK(this.apiClient,e);return a=j("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=X6(this.apiClient,e);return a=j("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=Q6(c),f=new hC;return Object.assign(f,d),f})}else{const u=Y6(this.apiClient,e);return a=j("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=J6(c),f=new hC;return Object.assign(f,d),f})}}async update(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=_K(this.apiClient,e);return a=j("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}else{const u=vK(this.apiClient,e);return a=j("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async listInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=uK(e);return a=j("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=dK(c),f=new fC;return Object.assign(f,d),f})}else{const u=lK(e);return a=j("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=cK(c),f=new fC;return Object.assign(f,d),f})}}}function iy(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function EC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pe(t){return this instanceof pe?(this.v=t,this):new pe(t)}function fr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(g){return function(y){return Promise.resolve(y).then(g,d)}}function a(g,y){i[g]&&(r[g]=function(v){return new Promise(function(E,_){s.push([g,v,E,_])>1||l(g,v)})},y&&(r[g]=y(r[g])))}function l(g,y){try{u(i[g](y))}catch(v){f(s[0][3],v)}}function u(g){g.value instanceof pe?Promise.resolve(g.value.v).then(c,d):f(s[0][2],g)}function c(g){l("next",g)}function d(g){l("throw",g)}function f(g,y){g(y),s.shift(),s.length&&l(s[0][0],s[0][1])}}function pr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof EC=="function"?EC(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bK(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:wP(n)}function wP(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function wK(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function bC(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let s=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),s&&!wP(t[i])&&(s=!1),i++;s?e.push(...r):e.pop()}return e}class SK{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new AK(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class AK{constructor(e,n,i,r={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=s,this.sendPromise=Promise.resolve(),wK(s)}async sendMessage(e){var n;await this.sendPromise;const i=cn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;const l=await r,u=(o=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,c=l.automaticFunctionCallingHistory,d=this.getHistory(!0).length;let f=[];c!=null&&(f=(a=c.slice(d))!==null&&a!==void 0?a:[]);const g=u?[u]:[];this.recordHistory(i,g,f)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=cn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const s=await r;return this.processStreamResponse(s,i)}getHistory(e=!1){const n=e?bC(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return fr(this,arguments,function*(){var r,s,o,a,l,u;const c=[];try{for(var d=!0,f=pr(e),g;g=yield pe(f.next()),r=g.done,!r;d=!0){a=g.value,d=!1;const y=a;if(bK(y)){const v=(u=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content;v!==void 0&&c.push(v)}yield yield pe(y)}}catch(y){s={error:y}}finally{try{!d&&!r&&(o=f.return)&&(yield pe(o.call(f)))}finally{if(s)throw s.error}}this.recordHistory(n,c)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(s=>s.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...bC(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ov extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ov.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xK(t){const e={},n=p(t,["file"]);return n!=null&&m(e,["file"],n),e}function TK(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function CK(t){const e={},n=p(t,["name"]);return n!=null&&m(e,["_url","file"],gP(n)),e}function kK(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function IK(t){const e={},n=p(t,["name"]);return n!=null&&m(e,["_url","file"],gP(n)),e}function RK(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),n}function NK(t){const e={},n=p(t,["config"]);return n!=null&&RK(n,e),e}function MK(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=p(t,["files"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PK extends qs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Jl(zs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=NK(e);return s=j("files",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),r.then(l=>{const u=MK(l),c=new F5;return Object.assign(c,u),c})}}async createInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=xK(e);return s=j("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=TK(l),c=new U5;return Object.assign(c,u),c})}}async get(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=IK(e);return s=j("files/{file}",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async delete(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=CK(e);return s=j("files/{file}",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),r.then(l=>{const u=kK(l),c=new B5;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cm(t){const e={},n=p(t,["data"]);if(n!=null&&m(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function LK(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>JK(s))),m(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&m(e,["role"],i),e}function DK(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function OK(t){const e={},n=p(t,["id"]);n!=null&&m(e,["id"],n);const i=p(t,["args"]);i!=null&&m(e,["args"],i);const r=p(t,["name"]);if(r!=null&&m(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function FK(t){const e={},n=p(t,["description"]);n!=null&&m(e,["description"],n);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const r=p(t,["parameters"]);r!=null&&m(e,["parameters"],r);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const o=p(t,["response"]);o!=null&&m(e,["response"],o);const a=p(t,["responseJsonSchema"]);if(a!=null&&m(e,["responseJsonSchema"],a),p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function UK(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&m(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const r=p(t,["audioTimestamp"]);r!=null&&m(e,["audioTimestamp"],r);const s=p(t,["candidateCount"]);s!=null&&m(e,["candidateCount"],s);const o=p(t,["enableAffectiveDialog"]);o!=null&&m(e,["enableAffectiveDialog"],o);const a=p(t,["frequencyPenalty"]);a!=null&&m(e,["frequencyPenalty"],a);const l=p(t,["logprobs"]);l!=null&&m(e,["logprobs"],l);const u=p(t,["maxOutputTokens"]);u!=null&&m(e,["maxOutputTokens"],u);const c=p(t,["mediaResolution"]);c!=null&&m(e,["mediaResolution"],c);const d=p(t,["presencePenalty"]);d!=null&&m(e,["presencePenalty"],d);const f=p(t,["responseLogprobs"]);f!=null&&m(e,["responseLogprobs"],f);const g=p(t,["responseMimeType"]);g!=null&&m(e,["responseMimeType"],g);const y=p(t,["responseModalities"]);y!=null&&m(e,["responseModalities"],y);const v=p(t,["responseSchema"]);v!=null&&m(e,["responseSchema"],v);const E=p(t,["routingConfig"]);E!=null&&m(e,["routingConfig"],E);const _=p(t,["seed"]);_!=null&&m(e,["seed"],_);const b=p(t,["speechConfig"]);b!=null&&m(e,["speechConfig"],b);const w=p(t,["stopSequences"]);w!=null&&m(e,["stopSequences"],w);const A=p(t,["temperature"]);A!=null&&m(e,["temperature"],A);const k=p(t,["thinkingConfig"]);k!=null&&m(e,["thinkingConfig"],k);const T=p(t,["topK"]);T!=null&&m(e,["topK"],T);const N=p(t,["topP"]);if(N!=null&&m(e,["topP"],N),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function BK(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function zK(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function HK(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const r=p(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const s=p(t,["temperature"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","temperature"],s);const o=p(t,["topP"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","topP"],o);const a=p(t,["topK"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topK"],a);const l=p(t,["maxOutputTokens"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","maxOutputTokens"],l);const u=p(t,["mediaResolution"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","mediaResolution"],u);const c=p(t,["seed"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","seed"],c);const d=p(t,["speechConfig"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","speechConfig"],Vw(d));const f=p(t,["thinkingConfig"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","thinkingConfig"],f);const g=p(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=p(t,["systemInstruction"]);e!==void 0&&y!=null&&m(e,["setup","systemInstruction"],LK(cn(y)));const v=p(t,["tools"]);if(e!==void 0&&v!=null){let T=hd(v);Array.isArray(T)&&(T=T.map(N=>ZK(dd(N)))),m(e,["setup","tools"],T)}const E=p(t,["sessionResumption"]);e!==void 0&&E!=null&&m(e,["setup","sessionResumption"],QK(E));const _=p(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&m(e,["setup","inputAudioTranscription"],_);const b=p(t,["outputAudioTranscription"]);e!==void 0&&b!=null&&m(e,["setup","outputAudioTranscription"],b);const w=p(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&m(e,["setup","realtimeInputConfig"],w);const A=p(t,["contextWindowCompression"]);e!==void 0&&A!=null&&m(e,["setup","contextWindowCompression"],A);const k=p(t,["proactivity"]);if(e!==void 0&&k!=null&&m(e,["setup","proactivity"],k),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function GK(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],UK(i));const r=p(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const s=p(t,["temperature"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","temperature"],s);const o=p(t,["topP"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","topP"],o);const a=p(t,["topK"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topK"],a);const l=p(t,["maxOutputTokens"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","maxOutputTokens"],l);const u=p(t,["mediaResolution"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","mediaResolution"],u);const c=p(t,["seed"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","seed"],c);const d=p(t,["speechConfig"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","speechConfig"],Vw(d));const f=p(t,["thinkingConfig"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","thinkingConfig"],f);const g=p(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=p(t,["systemInstruction"]);e!==void 0&&y!=null&&m(e,["setup","systemInstruction"],cn(y));const v=p(t,["tools"]);if(e!==void 0&&v!=null){let N=hd(v);Array.isArray(N)&&(N=N.map(L=>jK(dd(L)))),m(e,["setup","tools"],N)}const E=p(t,["sessionResumption"]);e!==void 0&&E!=null&&m(e,["setup","sessionResumption"],E);const _=p(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&m(e,["setup","inputAudioTranscription"],_);const b=p(t,["outputAudioTranscription"]);e!==void 0&&b!=null&&m(e,["setup","outputAudioTranscription"],b);const w=p(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&m(e,["setup","realtimeInputConfig"],w);const A=p(t,["contextWindowCompression"]);e!==void 0&&A!=null&&m(e,["setup","contextWindowCompression"],A);const k=p(t,["proactivity"]);e!==void 0&&k!=null&&m(e,["setup","proactivity"],k);const T=p(t,["explicitVadSignal"]);return e!==void 0&&T!=null&&m(e,["setup","explicitVadSignal"],T),n}function $K(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["setup","model"],Me(t,i));const r=p(e,["config"]);return r!=null&&m(n,["config"],HK(r,n)),n}function VK(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["setup","model"],Me(t,i));const r=p(e,["config"]);return r!=null&&m(n,["config"],GK(r,n)),n}function qK(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&m(e,["musicGenerationConfig"],n),e}function WK(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),m(e,["weightedPrompts"],i)}return e}function KK(t){const e={},n=p(t,["media"]);if(n!=null){let u=cP(n);Array.isArray(u)&&(u=u.map(c=>cm(c))),m(e,["mediaChunks"],u)}const i=p(t,["audio"]);i!=null&&m(e,["audio"],cm(hP(i)));const r=p(t,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const s=p(t,["video"]);s!=null&&m(e,["video"],cm(dP(s)));const o=p(t,["text"]);o!=null&&m(e,["text"],o);const a=p(t,["activityStart"]);a!=null&&m(e,["activityStart"],a);const l=p(t,["activityEnd"]);return l!=null&&m(e,["activityEnd"],l),e}function YK(t){const e={},n=p(t,["media"]);if(n!=null){let u=cP(n);Array.isArray(u)&&(u=u.map(c=>c)),m(e,["mediaChunks"],u)}const i=p(t,["audio"]);i!=null&&m(e,["audio"],hP(i));const r=p(t,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const s=p(t,["video"]);s!=null&&m(e,["video"],dP(s));const o=p(t,["text"]);o!=null&&m(e,["text"],o);const a=p(t,["activityStart"]);a!=null&&m(e,["activityStart"],a);const l=p(t,["activityEnd"]);return l!=null&&m(e,["activityEnd"],l),e}function XK(t){const e={},n=p(t,["setupComplete"]);n!=null&&m(e,["setupComplete"],n);const i=p(t,["serverContent"]);i!=null&&m(e,["serverContent"],i);const r=p(t,["toolCall"]);r!=null&&m(e,["toolCall"],r);const s=p(t,["toolCallCancellation"]);s!=null&&m(e,["toolCallCancellation"],s);const o=p(t,["usageMetadata"]);o!=null&&m(e,["usageMetadata"],e9(o));const a=p(t,["goAway"]);a!=null&&m(e,["goAway"],a);const l=p(t,["sessionResumptionUpdate"]);l!=null&&m(e,["sessionResumptionUpdate"],l);const u=p(t,["voiceActivityDetectionSignal"]);return u!=null&&m(e,["voiceActivityDetectionSignal"],u),e}function JK(t){const e={},n=p(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const s=p(t,["fileData"]);s!=null&&m(e,["fileData"],DK(s));const o=p(t,["functionCall"]);o!=null&&m(e,["functionCall"],OK(o));const a=p(t,["functionResponse"]);a!=null&&m(e,["functionResponse"],a);const l=p(t,["inlineData"]);l!=null&&m(e,["inlineData"],cm(l));const u=p(t,["text"]);u!=null&&m(e,["text"],u);const c=p(t,["thought"]);c!=null&&m(e,["thought"],c);const d=p(t,["thoughtSignature"]);d!=null&&m(e,["thoughtSignature"],d);const f=p(t,["videoMetadata"]);return f!=null&&m(e,["videoMetadata"],f),e}function QK(t){const e={},n=p(t,["handle"]);if(n!=null&&m(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ZK(t){const e={};if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const i=p(t,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=p(t,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=p(t,["functionDeclarations"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>d)),m(e,["functionDeclarations"],c)}const o=p(t,["googleMaps"]);o!=null&&m(e,["googleMaps"],BK(o));const a=p(t,["googleSearch"]);a!=null&&m(e,["googleSearch"],zK(a));const l=p(t,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const u=p(t,["urlContext"]);return u!=null&&m(e,["urlContext"],u),e}function jK(t){const e={},n=p(t,["retrieval"]);n!=null&&m(e,["retrieval"],n);const i=p(t,["computerUse"]);if(i!=null&&m(e,["computerUse"],i),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=p(t,["codeExecution"]);r!=null&&m(e,["codeExecution"],r);const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],s);const o=p(t,["functionDeclarations"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>FK(f))),m(e,["functionDeclarations"],d)}const a=p(t,["googleMaps"]);a!=null&&m(e,["googleMaps"],a);const l=p(t,["googleSearch"]);l!=null&&m(e,["googleSearch"],l);const u=p(t,["googleSearchRetrieval"]);u!=null&&m(e,["googleSearchRetrieval"],u);const c=p(t,["urlContext"]);return c!=null&&m(e,["urlContext"],c),e}function e9(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const i=p(t,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const r=p(t,["candidatesTokenCount"]);r!=null&&m(e,["responseTokenCount"],r);const s=p(t,["toolUsePromptTokenCount"]);s!=null&&m(e,["toolUsePromptTokenCount"],s);const o=p(t,["thoughtsTokenCount"]);o!=null&&m(e,["thoughtsTokenCount"],o);const a=p(t,["totalTokenCount"]);a!=null&&m(e,["totalTokenCount"],a);const l=p(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(y=>y)),m(e,["promptTokensDetails"],g)}const u=p(t,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(y=>y)),m(e,["cacheTokensDetails"],g)}const c=p(t,["candidatesTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>y)),m(e,["responseTokensDetails"],g)}const d=p(t,["toolUsePromptTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),m(e,["toolUsePromptTokensDetails"],g)}const f=p(t,["trafficType"]);return f!=null&&m(e,["trafficType"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t9(t){const e={},n=p(t,["data"]);if(n!=null&&m(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function n9(t){const e={},n=p(t,["content"]);n!=null&&m(e,["content"],n);const i=p(t,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],i9(i));const r=p(t,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const s=p(t,["finishReason"]);s!=null&&m(e,["finishReason"],s);const o=p(t,["avgLogprobs"]);o!=null&&m(e,["avgLogprobs"],o);const a=p(t,["groundingMetadata"]);a!=null&&m(e,["groundingMetadata"],a);const l=p(t,["index"]);l!=null&&m(e,["index"],l);const u=p(t,["logprobsResult"]);u!=null&&m(e,["logprobsResult"],u);const c=p(t,["safetyRatings"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(g=>g)),m(e,["safetyRatings"],f)}const d=p(t,["urlContextMetadata"]);return d!=null&&m(e,["urlContextMetadata"],d),e}function i9(t){const e={},n=p(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),m(e,["citations"],i)}return e}function r9(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["contents"]);if(r!=null){let s=Oi(r);Array.isArray(s)&&(s=s.map(o=>o)),m(n,["contents"],s)}return n}function s9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),m(e,["tokensInfo"],r)}return e}function o9(t){const e={},n=p(t,["values"]);n!=null&&m(e,["values"],n);const i=p(t,["statistics"]);return i!=null&&m(e,["statistics"],a9(i)),e}function a9(t){const e={},n=p(t,["truncated"]);n!=null&&m(e,["truncated"],n);const i=p(t,["token_count"]);return i!=null&&m(e,["tokenCount"],i),e}function av(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>m8(s))),m(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&m(e,["role"],i),e}function l9(t){const e={},n=p(t,["controlType"]);n!=null&&m(e,["controlType"],n);const i=p(t,["enableControlImageComputation"]);return i!=null&&m(e,["computeControl"],i),e}function u9(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function c9(t,e){const n={},i=p(t,["systemInstruction"]);e!==void 0&&i!=null&&m(e,["systemInstruction"],cn(i));const r=p(t,["tools"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>TP(a))),m(e,["tools"],o)}const s=p(t,["generationConfig"]);return e!==void 0&&s!=null&&m(e,["generationConfig"],t8(s)),n}function d9(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["contents"]);if(r!=null){let o=Oi(r);Array.isArray(o)&&(o=o.map(a=>av(a))),m(n,["contents"],o)}const s=p(e,["config"]);return s!=null&&u9(s),n}function h9(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["contents"]);if(r!=null){let o=Oi(r);Array.isArray(o)&&(o=o.map(a=>a)),m(n,["contents"],o)}const s=p(e,["config"]);return s!=null&&c9(s,n),n}function f9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);i!=null&&m(e,["totalTokens"],i);const r=p(t,["cachedContentTokenCount"]);return r!=null&&m(e,["cachedContentTokenCount"],r),e}function p9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["totalTokens"]);return i!=null&&m(e,["totalTokens"],i),e}function g9(t,e){const n={},i=p(e,["model"]);return i!=null&&m(n,["_url","name"],Me(t,i)),n}function m9(t,e){const n={},i=p(e,["model"]);return i!=null&&m(n,["_url","name"],Me(t,i)),n}function y9(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function v9(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function _9(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const r=p(t,["negativePrompt"]);e!==void 0&&r!=null&&m(e,["parameters","negativePrompt"],r);const s=p(t,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=p(t,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const a=p(t,["guidanceScale"]);e!==void 0&&a!=null&&m(e,["parameters","guidanceScale"],a);const l=p(t,["seed"]);e!==void 0&&l!=null&&m(e,["parameters","seed"],l);const u=p(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&m(e,["parameters","personGeneration"],c);const d=p(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&m(e,["parameters","includeSafetyAttributes"],d);const f=p(t,["includeRaiReason"]);e!==void 0&&f!=null&&m(e,["parameters","includeRaiReason"],f);const g=p(t,["language"]);e!==void 0&&g!=null&&m(e,["parameters","language"],g);const y=p(t,["outputMimeType"]);e!==void 0&&y!=null&&m(e,["parameters","outputOptions","mimeType"],y);const v=p(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&m(e,["parameters","outputOptions","compressionQuality"],v);const E=p(t,["addWatermark"]);e!==void 0&&E!=null&&m(e,["parameters","addWatermark"],E);const _=p(t,["labels"]);e!==void 0&&_!=null&&m(e,["labels"],_);const b=p(t,["editMode"]);e!==void 0&&b!=null&&m(e,["parameters","editMode"],b);const w=p(t,["baseSteps"]);return e!==void 0&&w!=null&&m(e,["parameters","editConfig","baseSteps"],w),n}function E9(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["prompt"]);r!=null&&m(n,["instances[0]","prompt"],r);const s=p(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>w8(l))),m(n,["instances[0]","referenceImages"],a)}const o=p(e,["config"]);return o!=null&&_9(o,n),n}function b9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>lv(s))),m(e,["generatedImages"],r)}return e}function w9(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const r=p(t,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const s=p(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&m(e,["requests[]","outputDimensionality"],s),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function S9(t,e){const n={},i=p(t,["taskType"]);e!==void 0&&i!=null&&m(e,["instances[]","task_type"],i);const r=p(t,["title"]);e!==void 0&&r!=null&&m(e,["instances[]","title"],r);const s=p(t,["outputDimensionality"]);e!==void 0&&s!=null&&m(e,["parameters","outputDimensionality"],s);const o=p(t,["mimeType"]);e!==void 0&&o!=null&&m(e,["instances[]","mimeType"],o);const a=p(t,["autoTruncate"]);return e!==void 0&&a!=null&&m(e,["parameters","autoTruncate"],a),n}function A9(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["contents"]);if(r!=null){let a=Hw(t,r);Array.isArray(a)&&(a=a.map(l=>l)),m(n,["requests[]","content"],a)}const s=p(e,["config"]);s!=null&&w9(s,n);const o=p(e,["model"]);return o!==void 0&&m(n,["requests[]","model"],Me(t,o)),n}function x9(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["contents"]);if(r!=null){let o=Hw(t,r);Array.isArray(o)&&(o=o.map(a=>a)),m(n,["instances[]","content"],o)}const s=p(e,["config"]);return s!=null&&S9(s,n),n}function T9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["embeddings"],s)}const r=p(t,["metadata"]);return r!=null&&m(e,["metadata"],r),e}function C9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o9(o))),m(e,["embeddings"],s)}const r=p(t,["metadata"]);return r!=null&&m(e,["metadata"],r),e}function k9(t){const e={},n=p(t,["endpoint"]);n!=null&&m(e,["name"],n);const i=p(t,["deployedModelId"]);return i!=null&&m(e,["deployedModelId"],i),e}function I9(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function R9(t){const e={},n=p(t,["id"]);n!=null&&m(e,["id"],n);const i=p(t,["args"]);i!=null&&m(e,["args"],i);const r=p(t,["name"]);if(r!=null&&m(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function N9(t){const e={},n=p(t,["allowedFunctionNames"]);n!=null&&m(e,["allowedFunctionNames"],n);const i=p(t,["mode"]);if(i!=null&&m(e,["mode"],i),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function M9(t){const e={},n=p(t,["description"]);n!=null&&m(e,["description"],n);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const r=p(t,["parameters"]);r!=null&&m(e,["parameters"],r);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const o=p(t,["response"]);o!=null&&m(e,["response"],o);const a=p(t,["responseJsonSchema"]);if(a!=null&&m(e,["responseJsonSchema"],a),p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function P9(t,e,n){const i={},r=p(e,["systemInstruction"]);n!==void 0&&r!=null&&m(n,["systemInstruction"],av(cn(r)));const s=p(e,["temperature"]);s!=null&&m(i,["temperature"],s);const o=p(e,["topP"]);o!=null&&m(i,["topP"],o);const a=p(e,["topK"]);a!=null&&m(i,["topK"],a);const l=p(e,["candidateCount"]);l!=null&&m(i,["candidateCount"],l);const u=p(e,["maxOutputTokens"]);u!=null&&m(i,["maxOutputTokens"],u);const c=p(e,["stopSequences"]);c!=null&&m(i,["stopSequences"],c);const d=p(e,["responseLogprobs"]);d!=null&&m(i,["responseLogprobs"],d);const f=p(e,["logprobs"]);f!=null&&m(i,["logprobs"],f);const g=p(e,["presencePenalty"]);g!=null&&m(i,["presencePenalty"],g);const y=p(e,["frequencyPenalty"]);y!=null&&m(i,["frequencyPenalty"],y);const v=p(e,["seed"]);v!=null&&m(i,["seed"],v);const E=p(e,["responseMimeType"]);E!=null&&m(i,["responseMimeType"],E);const _=p(e,["responseSchema"]);_!=null&&m(i,["responseSchema"],Gw(_));const b=p(e,["responseJsonSchema"]);if(b!=null&&m(i,["responseJsonSchema"],b),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=p(e,["safetySettings"]);if(n!==void 0&&w!=null){let V=w;Array.isArray(V)&&(V=V.map(W=>S8(W))),m(n,["safetySettings"],V)}const A=p(e,["tools"]);if(n!==void 0&&A!=null){let V=hd(A);Array.isArray(V)&&(V=V.map(W=>R8(dd(W)))),m(n,["tools"],V)}const k=p(e,["toolConfig"]);if(n!==void 0&&k!=null&&m(n,["toolConfig"],I8(k)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=p(e,["cachedContent"]);n!==void 0&&T!=null&&m(n,["cachedContent"],Ws(t,T));const N=p(e,["responseModalities"]);N!=null&&m(i,["responseModalities"],N);const L=p(e,["mediaResolution"]);L!=null&&m(i,["mediaResolution"],L);const F=p(e,["speechConfig"]);if(F!=null&&m(i,["speechConfig"],$w(F)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=p(e,["thinkingConfig"]);R!=null&&m(i,["thinkingConfig"],R);const U=p(e,["imageConfig"]);U!=null&&m(i,["imageConfig"],o8(U));const H=p(e,["enableEnhancedCivicAnswers"]);return H!=null&&m(i,["enableEnhancedCivicAnswers"],H),i}function L9(t,e,n){const i={},r=p(e,["systemInstruction"]);n!==void 0&&r!=null&&m(n,["systemInstruction"],cn(r));const s=p(e,["temperature"]);s!=null&&m(i,["temperature"],s);const o=p(e,["topP"]);o!=null&&m(i,["topP"],o);const a=p(e,["topK"]);a!=null&&m(i,["topK"],a);const l=p(e,["candidateCount"]);l!=null&&m(i,["candidateCount"],l);const u=p(e,["maxOutputTokens"]);u!=null&&m(i,["maxOutputTokens"],u);const c=p(e,["stopSequences"]);c!=null&&m(i,["stopSequences"],c);const d=p(e,["responseLogprobs"]);d!=null&&m(i,["responseLogprobs"],d);const f=p(e,["logprobs"]);f!=null&&m(i,["logprobs"],f);const g=p(e,["presencePenalty"]);g!=null&&m(i,["presencePenalty"],g);const y=p(e,["frequencyPenalty"]);y!=null&&m(i,["frequencyPenalty"],y);const v=p(e,["seed"]);v!=null&&m(i,["seed"],v);const E=p(e,["responseMimeType"]);E!=null&&m(i,["responseMimeType"],E);const _=p(e,["responseSchema"]);_!=null&&m(i,["responseSchema"],Gw(_));const b=p(e,["responseJsonSchema"]);b!=null&&m(i,["responseJsonSchema"],b);const w=p(e,["routingConfig"]);w!=null&&m(i,["routingConfig"],w);const A=p(e,["modelSelectionConfig"]);A!=null&&m(i,["modelConfig"],A);const k=p(e,["safetySettings"]);if(n!==void 0&&k!=null){let D=k;Array.isArray(D)&&(D=D.map(z=>z)),m(n,["safetySettings"],D)}const T=p(e,["tools"]);if(n!==void 0&&T!=null){let D=hd(T);Array.isArray(D)&&(D=D.map(z=>TP(dd(z)))),m(n,["tools"],D)}const N=p(e,["toolConfig"]);n!==void 0&&N!=null&&m(n,["toolConfig"],N);const L=p(e,["labels"]);n!==void 0&&L!=null&&m(n,["labels"],L);const F=p(e,["cachedContent"]);n!==void 0&&F!=null&&m(n,["cachedContent"],Ws(t,F));const R=p(e,["responseModalities"]);R!=null&&m(i,["responseModalities"],R);const U=p(e,["mediaResolution"]);U!=null&&m(i,["mediaResolution"],U);const H=p(e,["speechConfig"]);H!=null&&m(i,["speechConfig"],$w(H));const V=p(e,["audioTimestamp"]);V!=null&&m(i,["audioTimestamp"],V);const W=p(e,["thinkingConfig"]);W!=null&&m(i,["thinkingConfig"],W);const X=p(e,["imageConfig"]);if(X!=null&&m(i,["imageConfig"],a8(X)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function wC(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["contents"]);if(r!=null){let o=Oi(r);Array.isArray(o)&&(o=o.map(a=>av(a))),m(n,["contents"],o)}const s=p(e,["config"]);return s!=null&&m(n,["generationConfig"],P9(t,s,n)),n}function SC(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["contents"]);if(r!=null){let o=Oi(r);Array.isArray(o)&&(o=o.map(a=>a)),m(n,["contents"],o)}const s=p(e,["config"]);return s!=null&&m(n,["generationConfig"],L9(t,s,n)),n}function AC(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>n9(u))),m(e,["candidates"],l)}const r=p(t,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const s=p(t,["promptFeedback"]);s!=null&&m(e,["promptFeedback"],s);const o=p(t,["responseId"]);o!=null&&m(e,["responseId"],o);const a=p(t,["usageMetadata"]);return a!=null&&m(e,["usageMetadata"],a),e}function xC(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>c)),m(e,["candidates"],u)}const r=p(t,["createTime"]);r!=null&&m(e,["createTime"],r);const s=p(t,["modelVersion"]);s!=null&&m(e,["modelVersion"],s);const o=p(t,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const a=p(t,["responseId"]);a!=null&&m(e,["responseId"],a);const l=p(t,["usageMetadata"]);return l!=null&&m(e,["usageMetadata"],l),e}function D9(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const r=p(t,["aspectRatio"]);e!==void 0&&r!=null&&m(e,["parameters","aspectRatio"],r);const s=p(t,["guidanceScale"]);if(e!==void 0&&s!=null&&m(e,["parameters","guidanceScale"],s),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=p(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&m(e,["parameters","safetySetting"],o);const a=p(t,["personGeneration"]);e!==void 0&&a!=null&&m(e,["parameters","personGeneration"],a);const l=p(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&m(e,["parameters","includeSafetyAttributes"],l);const u=p(t,["includeRaiReason"]);e!==void 0&&u!=null&&m(e,["parameters","includeRaiReason"],u);const c=p(t,["language"]);e!==void 0&&c!=null&&m(e,["parameters","language"],c);const d=p(t,["outputMimeType"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","mimeType"],d);const f=p(t,["outputCompressionQuality"]);if(e!==void 0&&f!=null&&m(e,["parameters","outputOptions","compressionQuality"],f),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=p(t,["imageSize"]);if(e!==void 0&&g!=null&&m(e,["parameters","sampleImageSize"],g),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function O9(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const r=p(t,["negativePrompt"]);e!==void 0&&r!=null&&m(e,["parameters","negativePrompt"],r);const s=p(t,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=p(t,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const a=p(t,["guidanceScale"]);e!==void 0&&a!=null&&m(e,["parameters","guidanceScale"],a);const l=p(t,["seed"]);e!==void 0&&l!=null&&m(e,["parameters","seed"],l);const u=p(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&m(e,["parameters","personGeneration"],c);const d=p(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&m(e,["parameters","includeSafetyAttributes"],d);const f=p(t,["includeRaiReason"]);e!==void 0&&f!=null&&m(e,["parameters","includeRaiReason"],f);const g=p(t,["language"]);e!==void 0&&g!=null&&m(e,["parameters","language"],g);const y=p(t,["outputMimeType"]);e!==void 0&&y!=null&&m(e,["parameters","outputOptions","mimeType"],y);const v=p(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&m(e,["parameters","outputOptions","compressionQuality"],v);const E=p(t,["addWatermark"]);e!==void 0&&E!=null&&m(e,["parameters","addWatermark"],E);const _=p(t,["labels"]);e!==void 0&&_!=null&&m(e,["labels"],_);const b=p(t,["imageSize"]);e!==void 0&&b!=null&&m(e,["parameters","sampleImageSize"],b);const w=p(t,["enhancePrompt"]);return e!==void 0&&w!=null&&m(e,["parameters","enhancePrompt"],w),n}function F9(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["prompt"]);r!=null&&m(n,["instances[0]","prompt"],r);const s=p(e,["config"]);return s!=null&&D9(s,n),n}function U9(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["prompt"]);r!=null&&m(n,["instances[0]","prompt"],r);const s=p(e,["config"]);return s!=null&&O9(s,n),n}function B9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Q9(o))),m(e,["generatedImages"],s)}const r=p(t,["positivePromptSafetyAttributes"]);return r!=null&&m(e,["positivePromptSafetyAttributes"],AP(r)),e}function z9(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>lv(o))),m(e,["generatedImages"],s)}const r=p(t,["positivePromptSafetyAttributes"]);return r!=null&&m(e,["positivePromptSafetyAttributes"],xP(r)),e}function H9(t,e){const n={},i=p(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=p(t,["durationSeconds"]);if(e!==void 0&&r!=null&&m(e,["parameters","durationSeconds"],r),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=p(t,["aspectRatio"]);e!==void 0&&s!=null&&m(e,["parameters","aspectRatio"],s);const o=p(t,["resolution"]);e!==void 0&&o!=null&&m(e,["parameters","resolution"],o);const a=p(t,["personGeneration"]);if(e!==void 0&&a!=null&&m(e,["parameters","personGeneration"],a),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=p(t,["negativePrompt"]);e!==void 0&&l!=null&&m(e,["parameters","negativePrompt"],l);const u=p(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&m(e,["parameters","enhancePrompt"],u),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const c=p(t,["lastFrame"]);e!==void 0&&c!=null&&m(e,["instances[0]","lastFrame"],uv(c));const d=p(t,["referenceImages"]);if(e!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(g=>$8(g))),m(e,["instances[0]","referenceImages"],f)}if(p(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function G9(t,e){const n={},i=p(t,["numberOfVideos"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const s=p(t,["fps"]);e!==void 0&&s!=null&&m(e,["parameters","fps"],s);const o=p(t,["durationSeconds"]);e!==void 0&&o!=null&&m(e,["parameters","durationSeconds"],o);const a=p(t,["seed"]);e!==void 0&&a!=null&&m(e,["parameters","seed"],a);const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const u=p(t,["resolution"]);e!==void 0&&u!=null&&m(e,["parameters","resolution"],u);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&m(e,["parameters","personGeneration"],c);const d=p(t,["pubsubTopic"]);e!==void 0&&d!=null&&m(e,["parameters","pubsubTopic"],d);const f=p(t,["negativePrompt"]);e!==void 0&&f!=null&&m(e,["parameters","negativePrompt"],f);const g=p(t,["enhancePrompt"]);e!==void 0&&g!=null&&m(e,["parameters","enhancePrompt"],g);const y=p(t,["generateAudio"]);e!==void 0&&y!=null&&m(e,["parameters","generateAudio"],y);const v=p(t,["lastFrame"]);e!==void 0&&v!=null&&m(e,["instances[0]","lastFrame"],_r(v));const E=p(t,["referenceImages"]);if(e!==void 0&&E!=null){let w=E;Array.isArray(w)&&(w=w.map(A=>V8(A))),m(e,["instances[0]","referenceImages"],w)}const _=p(t,["mask"]);e!==void 0&&_!=null&&m(e,["instances[0]","mask"],G8(_));const b=p(t,["compressionQuality"]);return e!==void 0&&b!=null&&m(e,["parameters","compressionQuality"],b),n}function $9(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const i=p(t,["metadata"]);i!=null&&m(e,["metadata"],i);const r=p(t,["done"]);r!=null&&m(e,["done"],r);const s=p(t,["error"]);s!=null&&m(e,["error"],s);const o=p(t,["response","generateVideoResponse"]);return o!=null&&m(e,["response"],K9(o)),e}function V9(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const i=p(t,["metadata"]);i!=null&&m(e,["metadata"],i);const r=p(t,["done"]);r!=null&&m(e,["done"],r);const s=p(t,["error"]);s!=null&&m(e,["error"],s);const o=p(t,["response"]);return o!=null&&m(e,["response"],Y9(o)),e}function q9(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["prompt"]);r!=null&&m(n,["instances[0]","prompt"],r);const s=p(e,["image"]);s!=null&&m(n,["instances[0]","image"],uv(s));const o=p(e,["video"]);o!=null&&m(n,["instances[0]","video"],CP(o));const a=p(e,["source"]);a!=null&&X9(a,n);const l=p(e,["config"]);return l!=null&&H9(l,n),n}function W9(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["prompt"]);r!=null&&m(n,["instances[0]","prompt"],r);const s=p(e,["image"]);s!=null&&m(n,["instances[0]","image"],_r(s));const o=p(e,["video"]);o!=null&&m(n,["instances[0]","video"],kP(o));const a=p(e,["source"]);a!=null&&J9(a,n);const l=p(e,["config"]);return l!=null&&G9(l,n),n}function K9(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>j9(o))),m(e,["generatedVideos"],s)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function Y9(t){const e={},n=p(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>e8(o))),m(e,["generatedVideos"],s)}const i=p(t,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const r=p(t,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function X9(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const r=p(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],uv(r));const s=p(t,["video"]);return e!==void 0&&s!=null&&m(e,["instances[0]","video"],CP(s)),n}function J9(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const r=p(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],_r(r));const s=p(t,["video"]);return e!==void 0&&s!=null&&m(e,["instances[0]","video"],kP(s)),n}function Q9(t){const e={},n=p(t,["_self"]);n!=null&&m(e,["image"],l8(n));const i=p(t,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const r=p(t,["_self"]);return r!=null&&m(e,["safetyAttributes"],AP(r)),e}function lv(t){const e={},n=p(t,["_self"]);n!=null&&m(e,["image"],SP(n));const i=p(t,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const r=p(t,["_self"]);r!=null&&m(e,["safetyAttributes"],xP(r));const s=p(t,["prompt"]);return s!=null&&m(e,["enhancedPrompt"],s),e}function Z9(t){const e={},n=p(t,["_self"]);n!=null&&m(e,["mask"],SP(n));const i=p(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),m(e,["labels"],r)}return e}function j9(t){const e={},n=p(t,["video"]);return n!=null&&m(e,["video"],z8(n)),e}function e8(t){const e={},n=p(t,["_self"]);return n!=null&&m(e,["video"],H8(n)),e}function t8(t){const e={},n=p(t,["modelSelectionConfig"]);n!=null&&m(e,["modelConfig"],n);const i=p(t,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const r=p(t,["audioTimestamp"]);r!=null&&m(e,["audioTimestamp"],r);const s=p(t,["candidateCount"]);s!=null&&m(e,["candidateCount"],s);const o=p(t,["enableAffectiveDialog"]);o!=null&&m(e,["enableAffectiveDialog"],o);const a=p(t,["frequencyPenalty"]);a!=null&&m(e,["frequencyPenalty"],a);const l=p(t,["logprobs"]);l!=null&&m(e,["logprobs"],l);const u=p(t,["maxOutputTokens"]);u!=null&&m(e,["maxOutputTokens"],u);const c=p(t,["mediaResolution"]);c!=null&&m(e,["mediaResolution"],c);const d=p(t,["presencePenalty"]);d!=null&&m(e,["presencePenalty"],d);const f=p(t,["responseLogprobs"]);f!=null&&m(e,["responseLogprobs"],f);const g=p(t,["responseMimeType"]);g!=null&&m(e,["responseMimeType"],g);const y=p(t,["responseModalities"]);y!=null&&m(e,["responseModalities"],y);const v=p(t,["responseSchema"]);v!=null&&m(e,["responseSchema"],v);const E=p(t,["routingConfig"]);E!=null&&m(e,["routingConfig"],E);const _=p(t,["seed"]);_!=null&&m(e,["seed"],_);const b=p(t,["speechConfig"]);b!=null&&m(e,["speechConfig"],b);const w=p(t,["stopSequences"]);w!=null&&m(e,["stopSequences"],w);const A=p(t,["temperature"]);A!=null&&m(e,["temperature"],A);const k=p(t,["thinkingConfig"]);k!=null&&m(e,["thinkingConfig"],k);const T=p(t,["topK"]);T!=null&&m(e,["topK"],T);const N=p(t,["topP"]);if(N!=null&&m(e,["topP"],N),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function n8(t,e){const n={},i=p(e,["model"]);return i!=null&&m(n,["_url","name"],Me(t,i)),n}function i8(t,e){const n={},i=p(e,["model"]);return i!=null&&m(n,["_url","name"],Me(t,i)),n}function r8(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function s8(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function o8(t){const e={},n=p(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const i=p(t,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),p(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function a8(t){const e={},n=p(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const i=p(t,["imageSize"]);i!=null&&m(e,["imageSize"],i);const r=p(t,["personGeneration"]);r!=null&&m(e,["personGeneration"],r);const s=p(t,["outputMimeType"]);s!=null&&m(e,["imageOutputOptions","mimeType"],s);const o=p(t,["outputCompressionQuality"]);return o!=null&&m(e,["imageOutputOptions","compressionQuality"],o),e}function l8(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&m(e,["imageBytes"],aa(n));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function SP(t){const e={},n=p(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],aa(i));const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function uv(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&m(e,["bytesBase64Encoded"],aa(n));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function _r(t){const e={},n=p(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const i=p(t,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],aa(i));const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function u8(t,e,n){const i={},r=p(e,["pageSize"]);n!==void 0&&r!=null&&m(n,["_query","pageSize"],r);const s=p(e,["pageToken"]);n!==void 0&&s!=null&&m(n,["_query","pageToken"],s);const o=p(e,["filter"]);n!==void 0&&o!=null&&m(n,["_query","filter"],o);const a=p(e,["queryBase"]);return n!==void 0&&a!=null&&m(n,["_url","models_url"],mP(t,a)),i}function c8(t,e,n){const i={},r=p(e,["pageSize"]);n!==void 0&&r!=null&&m(n,["_query","pageSize"],r);const s=p(e,["pageToken"]);n!==void 0&&s!=null&&m(n,["_query","pageToken"],s);const o=p(e,["filter"]);n!==void 0&&o!=null&&m(n,["_query","filter"],o);const a=p(e,["queryBase"]);return n!==void 0&&a!=null&&m(n,["_url","models_url"],mP(t,a)),i}function d8(t,e){const n={},i=p(e,["config"]);return i!=null&&u8(t,i,n),n}function h8(t,e){const n={},i=p(e,["config"]);return i!=null&&c8(t,i,n),n}function f8(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=p(t,["_self"]);if(r!=null){let s=yP(r);Array.isArray(s)&&(s=s.map(o=>V0(o))),m(e,["models"],s)}return e}function p8(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=p(t,["_self"]);if(r!=null){let s=yP(r);Array.isArray(s)&&(s=s.map(o=>q0(o))),m(e,["models"],s)}return e}function g8(t){const e={},n=p(t,["maskMode"]);n!=null&&m(e,["maskMode"],n);const i=p(t,["segmentationClasses"]);i!=null&&m(e,["maskClasses"],i);const r=p(t,["maskDilation"]);return r!=null&&m(e,["dilation"],r),e}function V0(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const i=p(t,["displayName"]);i!=null&&m(e,["displayName"],i);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const s=p(t,["version"]);s!=null&&m(e,["version"],s);const o=p(t,["_self"]);o!=null&&m(e,["tunedModelInfo"],N8(o));const a=p(t,["inputTokenLimit"]);a!=null&&m(e,["inputTokenLimit"],a);const l=p(t,["outputTokenLimit"]);l!=null&&m(e,["outputTokenLimit"],l);const u=p(t,["supportedGenerationMethods"]);u!=null&&m(e,["supportedActions"],u);const c=p(t,["temperature"]);c!=null&&m(e,["temperature"],c);const d=p(t,["maxTemperature"]);d!=null&&m(e,["maxTemperature"],d);const f=p(t,["topP"]);f!=null&&m(e,["topP"],f);const g=p(t,["topK"]);g!=null&&m(e,["topK"],g);const y=p(t,["thinking"]);return y!=null&&m(e,["thinking"],y),e}function q0(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const i=p(t,["displayName"]);i!=null&&m(e,["displayName"],i);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const s=p(t,["versionId"]);s!=null&&m(e,["version"],s);const o=p(t,["deployedModels"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>k9(f))),m(e,["endpoints"],d)}const a=p(t,["labels"]);a!=null&&m(e,["labels"],a);const l=p(t,["_self"]);l!=null&&m(e,["tunedModelInfo"],M8(l));const u=p(t,["defaultCheckpointId"]);u!=null&&m(e,["defaultCheckpointId"],u);const c=p(t,["checkpoints"]);if(c!=null){let d=c;Array.isArray(d)&&(d=d.map(f=>f)),m(e,["checkpoints"],d)}return e}function m8(t){const e={},n=p(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const s=p(t,["fileData"]);s!=null&&m(e,["fileData"],I9(s));const o=p(t,["functionCall"]);o!=null&&m(e,["functionCall"],R9(o));const a=p(t,["functionResponse"]);a!=null&&m(e,["functionResponse"],a);const l=p(t,["inlineData"]);l!=null&&m(e,["inlineData"],t9(l));const u=p(t,["text"]);u!=null&&m(e,["text"],u);const c=p(t,["thought"]);c!=null&&m(e,["thought"],c);const d=p(t,["thoughtSignature"]);d!=null&&m(e,["thoughtSignature"],d);const f=p(t,["videoMetadata"]);return f!=null&&m(e,["videoMetadata"],f),e}function y8(t){const e={},n=p(t,["productImage"]);return n!=null&&m(e,["image"],_r(n)),e}function v8(t,e){const n={},i=p(t,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const r=p(t,["baseSteps"]);e!==void 0&&r!=null&&m(e,["parameters","baseSteps"],r);const s=p(t,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=p(t,["seed"]);e!==void 0&&o!=null&&m(e,["parameters","seed"],o);const a=p(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&m(e,["parameters","safetySetting"],a);const l=p(t,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const u=p(t,["addWatermark"]);e!==void 0&&u!=null&&m(e,["parameters","addWatermark"],u);const c=p(t,["outputMimeType"]);e!==void 0&&c!=null&&m(e,["parameters","outputOptions","mimeType"],c);const d=p(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","compressionQuality"],d);const f=p(t,["enhancePrompt"]);e!==void 0&&f!=null&&m(e,["parameters","enhancePrompt"],f);const g=p(t,["labels"]);return e!==void 0&&g!=null&&m(e,["labels"],g),n}function _8(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["source"]);r!=null&&b8(r,n);const s=p(e,["config"]);return s!=null&&v8(s,n),n}function E8(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>lv(r))),m(e,["generatedImages"],i)}return e}function b8(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const r=p(t,["personImage"]);e!==void 0&&r!=null&&m(e,["instances[0]","personImage","image"],_r(r));const s=p(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>y8(a))),m(e,["instances[0]","productImages"],o)}return n}function w8(t){const e={},n=p(t,["referenceImage"]);n!=null&&m(e,["referenceImage"],_r(n));const i=p(t,["referenceId"]);i!=null&&m(e,["referenceId"],i);const r=p(t,["referenceType"]);r!=null&&m(e,["referenceType"],r);const s=p(t,["maskImageConfig"]);s!=null&&m(e,["maskImageConfig"],g8(s));const o=p(t,["controlImageConfig"]);o!=null&&m(e,["controlImageConfig"],l9(o));const a=p(t,["styleImageConfig"]);a!=null&&m(e,["styleImageConfig"],a);const l=p(t,["subjectImageConfig"]);return l!=null&&m(e,["subjectImageConfig"],l),e}function AP(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const r=p(t,["contentType"]);return r!=null&&m(e,["contentType"],r),e}function xP(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const i=p(t,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const r=p(t,["contentType"]);return r!=null&&m(e,["contentType"],r),e}function S8(t){const e={},n=p(t,["category"]);if(n!=null&&m(e,["category"],n),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(t,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function A8(t){const e={},n=p(t,["image"]);return n!=null&&m(e,["image"],_r(n)),e}function x8(t,e){const n={},i=p(t,["mode"]);e!==void 0&&i!=null&&m(e,["parameters","mode"],i);const r=p(t,["maxPredictions"]);e!==void 0&&r!=null&&m(e,["parameters","maxPredictions"],r);const s=p(t,["confidenceThreshold"]);e!==void 0&&s!=null&&m(e,["parameters","confidenceThreshold"],s);const o=p(t,["maskDilation"]);e!==void 0&&o!=null&&m(e,["parameters","maskDilation"],o);const a=p(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&m(e,["parameters","binaryColorThreshold"],a);const l=p(t,["labels"]);return e!==void 0&&l!=null&&m(e,["labels"],l),n}function T8(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["source"]);r!=null&&k8(r,n);const s=p(e,["config"]);return s!=null&&x8(s,n),n}function C8(t){const e={},n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Z9(r))),m(e,["generatedMasks"],i)}return e}function k8(t,e){const n={},i=p(t,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const r=p(t,["image"]);e!==void 0&&r!=null&&m(e,["instances[0]","image"],_r(r));const s=p(t,["scribbleImage"]);return e!==void 0&&s!=null&&m(e,["instances[0]","scribble"],A8(s)),n}function I8(t){const e={},n=p(t,["retrievalConfig"]);n!=null&&m(e,["retrievalConfig"],n);const i=p(t,["functionCallingConfig"]);return i!=null&&m(e,["functionCallingConfig"],N9(i)),e}function R8(t){const e={};if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const i=p(t,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=p(t,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=p(t,["functionDeclarations"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>d)),m(e,["functionDeclarations"],c)}const o=p(t,["googleMaps"]);o!=null&&m(e,["googleMaps"],r8(o));const a=p(t,["googleSearch"]);a!=null&&m(e,["googleSearch"],s8(a));const l=p(t,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const u=p(t,["urlContext"]);return u!=null&&m(e,["urlContext"],u),e}function TP(t){const e={},n=p(t,["retrieval"]);n!=null&&m(e,["retrieval"],n);const i=p(t,["computerUse"]);if(i!=null&&m(e,["computerUse"],i),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=p(t,["codeExecution"]);r!=null&&m(e,["codeExecution"],r);const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],s);const o=p(t,["functionDeclarations"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>M9(f))),m(e,["functionDeclarations"],d)}const a=p(t,["googleMaps"]);a!=null&&m(e,["googleMaps"],a);const l=p(t,["googleSearch"]);l!=null&&m(e,["googleSearch"],l);const u=p(t,["googleSearchRetrieval"]);u!=null&&m(e,["googleSearchRetrieval"],u);const c=p(t,["urlContext"]);return c!=null&&m(e,["urlContext"],c),e}function N8(t){const e={},n=p(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&m(e,["createTime"],i);const r=p(t,["updateTime"]);return r!=null&&m(e,["updateTime"],r),e}function M8(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&m(e,["baseModel"],n);const i=p(t,["createTime"]);i!=null&&m(e,["createTime"],i);const r=p(t,["updateTime"]);return r!=null&&m(e,["updateTime"],r),e}function P8(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const r=p(t,["description"]);e!==void 0&&r!=null&&m(e,["description"],r);const s=p(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&m(e,["defaultCheckpointId"],s),n}function L8(t,e){const n={},i=p(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const r=p(t,["description"]);e!==void 0&&r!=null&&m(e,["description"],r);const s=p(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&m(e,["defaultCheckpointId"],s),n}function D8(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","name"],Me(t,i));const r=p(e,["config"]);return r!=null&&P8(r,n),n}function O8(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["config"]);return r!=null&&L8(r,n),n}function F8(t,e){const n={},i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const r=p(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&m(e,["parameters","safetySetting"],r);const s=p(t,["personGeneration"]);e!==void 0&&s!=null&&m(e,["parameters","personGeneration"],s);const o=p(t,["includeRaiReason"]);e!==void 0&&o!=null&&m(e,["parameters","includeRaiReason"],o);const a=p(t,["outputMimeType"]);e!==void 0&&a!=null&&m(e,["parameters","outputOptions","mimeType"],a);const l=p(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&m(e,["parameters","outputOptions","compressionQuality"],l);const u=p(t,["enhanceInputImage"]);e!==void 0&&u!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],u);const c=p(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const d=p(t,["labels"]);e!==void 0&&d!=null&&m(e,["labels"],d);const f=p(t,["numberOfImages"]);e!==void 0&&f!=null&&m(e,["parameters","sampleCount"],f);const g=p(t,["mode"]);return e!==void 0&&g!=null&&m(e,["parameters","mode"],g),n}function U8(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["_url","model"],Me(t,i));const r=p(e,["image"]);r!=null&&m(n,["instances[0]","image"],_r(r));const s=p(e,["upscaleFactor"]);s!=null&&m(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=p(e,["config"]);return o!=null&&F8(o,n),n}function B8(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>lv(s))),m(e,["generatedImages"],r)}return e}function z8(t){const e={},n=p(t,["uri"]);n!=null&&m(e,["uri"],n);const i=p(t,["encodedVideo"]);i!=null&&m(e,["videoBytes"],aa(i));const r=p(t,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function H8(t){const e={},n=p(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const i=p(t,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],aa(i));const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function G8(t){const e={},n=p(t,["image"]);n!=null&&m(e,["_self"],_r(n));const i=p(t,["maskMode"]);return i!=null&&m(e,["maskMode"],i),e}function $8(t){const e={},n=p(t,["image"]);n!=null&&m(e,["image"],uv(n));const i=p(t,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function V8(t){const e={},n=p(t,["image"]);n!=null&&m(e,["image"],_r(n));const i=p(t,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function CP(t){const e={},n=p(t,["uri"]);n!=null&&m(e,["uri"],n);const i=p(t,["videoBytes"]);i!=null&&m(e,["encodedVideo"],aa(i));const r=p(t,["mimeType"]);return r!=null&&m(e,["encoding"],r),e}function kP(t){const e={},n=p(t,["uri"]);n!=null&&m(e,["gcsUri"],n);const i=p(t,["videoBytes"]);i!=null&&m(e,["bytesBase64Encoded"],aa(i));const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q8(t,e){const n={},i=p(t,["displayName"]);return e!==void 0&&i!=null&&m(e,["displayName"],i),n}function W8(t){const e={},n=p(t,["config"]);return n!=null&&q8(n,e),e}function K8(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),n}function Y8(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&K8(i,e),e}function X8(t){const e={},n=p(t,["name"]);return n!=null&&m(e,["_url","name"],n),e}function J8(t,e){const n={},i=p(t,["customMetadata"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["customMetadata"],s)}const r=p(t,["chunkingConfig"]);return e!==void 0&&r!=null&&m(e,["chunkingConfig"],r),n}function Q8(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const i=p(t,["metadata"]);i!=null&&m(e,["metadata"],i);const r=p(t,["done"]);r!=null&&m(e,["done"],r);const s=p(t,["error"]);s!=null&&m(e,["error"],s);const o=p(t,["response"]);return o!=null&&m(e,["response"],j8(o)),e}function Z8(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&m(e,["_url","file_search_store_name"],n);const i=p(t,["fileName"]);i!=null&&m(e,["fileName"],i);const r=p(t,["config"]);return r!=null&&J8(r,e),e}function j8(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["parent"]);i!=null&&m(e,["parent"],i);const r=p(t,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function eY(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),n}function tY(t){const e={},n=p(t,["config"]);return n!=null&&eY(n,e),e}function nY(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=p(t,["fileSearchStores"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["fileSearchStores"],s)}return e}function IP(t,e){const n={},i=p(t,["mimeType"]);e!==void 0&&i!=null&&m(e,["mimeType"],i);const r=p(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const s=p(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["customMetadata"],a)}const o=p(t,["chunkingConfig"]);return e!==void 0&&o!=null&&m(e,["chunkingConfig"],o),n}function iY(t){const e={},n=p(t,["fileSearchStoreName"]);n!=null&&m(e,["_url","file_search_store_name"],n);const i=p(t,["config"]);return i!=null&&IP(i,e),e}function rY(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sY="Content-Type",oY="X-Server-Timeout",aY="User-Agent",W0="x-goog-api-client",lY="1.35.0",uY=`google-genai-sdk/${lY}`,cY="v1beta1",dY="v1beta";class hY{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:cY,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:dY,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))r.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,r.toString(),e.abortSignal),this.unaryApiCall(r,s,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,s]of Object.entries(n))typeof s=="object"?i[r]=Object.assign(Object.assign({},i[r]),s):s!==void 0&&(i[r]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,r.toString(),e.abortSignal),this.streamApiCall(r,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const s=new AbortController,o=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),e.signal=o}return n&&n.extraBody!==null&&fY(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await TC(r),new H0(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await TC(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return fr(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),s=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let o="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:c}=yield pe(r.read());if(u){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=s.decode(c,{stream:!0});try{const y=JSON.parse(d);if("error"in y){const v=JSON.parse(JSON.stringify(y.error)),E=v.status,_=v.code,b=`got status: ${E}. ${JSON.stringify(y)}`;if(_>=400&&_<600)throw new ov({message:b,status:_})}}catch(y){if(y.name==="ApiError")throw y}o+=d;let f=-1,g=0;for(;;){f=-1,g=0;for(const E of l){const _=o.indexOf(E);_!==-1&&(f===-1||_<f)&&(f=_,g=E.length)}if(f===-1)break;const y=o.substring(0,f);o=o.substring(f+g);const v=y.trim();if(v.startsWith(a)){const E=v.substring(a.length).trim();try{const _=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield pe(new H0(_))}catch(_){throw new Error(`exception parsing stream chunk ${E}. ${_}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=uY+" "+this.clientOptions.userAgentExtra;return e[aY]=n,e[W0]=n,e[sY]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,s]of Object.entries(e.headers))i.append(r,s);e.timeout&&e.timeout>0&&i.append(oY,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);r.sizeBytes=String(o.size);const a=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=a;const l={file:r},u=this.getFileName(e),c=j("upload/v1beta/files",l._url),d=await this.fetchUploadUrl(c,r.sizeBytes,r.mimeType,u,l,n==null?void 0:n.httpOptions);return s.upload(e,d,this)}async uploadFileToFileSearchStore(e,n,i){var r;const s=this.clientOptions.uploader,o=await s.stat(n),a=String(o.size),l=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,c=this.getFileName(n),d={};i!=null&&IP(i,d);const f=await this.fetchUploadUrl(u,a,l,c,d,i==null?void 0:i.httpOptions);return s.uploadToFileSearchStore(n,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,s,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const u=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(a=u==null?void 0:u.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function TC(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new ov({message:r,status:n}):new Error(r)}}function fY(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,o){const a=Object.assign({},s);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const u=o[l],c=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&c&&typeof c=="object"&&!Array.isArray(c)?a[l]=i(c,u):(c&&u&&typeof c!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof c}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pY="mcp_used/unknown";let gY=!1;function RP(t){for(const e of t)if(mY(e)||typeof e=="object"&&"inputSchema"in e)return!0;return gY}function NP(t){var e;const n=(e=t[W0])!==null&&e!==void 0?e:"";t[W0]=(n+` ${pY}`).trimStart()}function mY(t){return t!==null&&typeof t=="object"&&t instanceof qw}function yY(t){return fr(this,arguments,function*(n,i=100){let r,s=0;for(;s<i;){const o=yield pe(n.listTools({cursor:r}));for(const a of o.tools)yield yield pe(a),s++;if(!o.nextCursor)break;r=o.nextCursor}})}class qw{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new qw(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const s={},o=[];for(const c of this.mcpClients)try{for(var a=!0,l=(n=void 0,pr(yY(c))),u;u=await l.next(),e=u.done,!e;a=!0){r=u.value,a=!1;const d=r;o.push(d);const f=d.name;if(s[f])throw new Error(`Duplicate function name ${f} found in MCP tools. Please ensure function names are unique.`);s[f]=c}}catch(d){n={error:d}}finally{try{!a&&!e&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),X5(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await r.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function vY(t,e,n){const i=new H5;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class _Y{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=wY(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${r}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const c=new Promise(w=>{u=w}),d=e.callbacks,f=function(){u({})},g=this.apiClient,y={onopen:f,onmessage:w=>{vY(g,d.onmessage,w)},onerror:(n=d==null?void 0:d.onerror)!==null&&n!==void 0?n:function(w){},onclose:(i=d==null?void 0:d.onclose)!==null&&i!==void 0?i:function(w){}},v=this.webSocketFactory.create(l,bY(o),y);v.connect(),await c;const b={setup:{model:Me(this.apiClient,e.model)}};return v.send(JSON.stringify(b)),new EY(v,this.apiClient)}}class EY{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=WK(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=qK(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ku.PLAY)}pause(){this.sendPlaybackControl(ku.PAUSE)}stop(){this.sendPlaybackControl(ku.STOP)}resetContext(){this.sendPlaybackControl(ku.RESET_CONTEXT)}close(){this.conn.close()}}function bY(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function wY(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SY="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function AY(t,e,n){const i=new z5;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const s=JSON.parse(r);if(t.isVertexAI()){const o=XK(s);Object.assign(i,o)}else Object.assign(i,s);e(i)}class xY{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new _Y(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let c;const d=this.apiClient.getHeaders();e.config&&e.config.tools&&RP(e.config.tools)&&NP(d);const f=IY(d);if(this.apiClient.isVertexAI())c=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(f,c);else{const F=this.apiClient.getApiKey();let R="BidiGenerateContent",U="key";F!=null&&F.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",U="access_token"),c=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${R}?${U}=${F}`}let g=()=>{};const y=new Promise(F=>{g=F}),v=e.callbacks,E=function(){var F;(F=v==null?void 0:v.onopen)===null||F===void 0||F.call(v),g({})},_=this.apiClient,b={onopen:E,onmessage:F=>{AY(_,v.onmessage,F)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(F){},onclose:(i=v==null?void 0:v.onclose)!==null&&i!==void 0?i:function(F){}},w=this.webSocketFactory.create(c,kY(f),b);w.connect(),await y;let A=Me(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){const F=this.apiClient.getProject(),R=this.apiClient.getLocation();A=`projects/${F}/locations/${R}/`+A}let k={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ey.AUDIO]}:e.config.responseModalities=[ey.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const T=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],N=[];for(const F of T)if(this.isCallableTool(F)){const R=F;N.push(await R.tool())}else N.push(F);N.length>0&&(e.config.tools=N);const L={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?k=VK(this.apiClient,L):k=$K(this.apiClient,L),delete k.config,w.send(JSON.stringify(k)),new CY(w,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const TY={turnComplete:!0};class CY{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Oi(n.turns),e.isVertexAI()||(i=i.map(r=>av(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(SY)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},TY),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:YK(e)}:n={realtimeInput:KK(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function kY(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function IY(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CC=10;function kC(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if($u(o)){r=!0;break}if(!r)return!0;const s=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function $u(t){return"callTool"in t&&typeof t.callTool=="function"}function RY(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>$u(r)))!==null&&i!==void 0?i:!1}function IC(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if($u(i))return;const s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(r)}),n}function RC(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NY extends qs{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,s,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!RY(n)||kC(n.config))return await this.generateContentInternal(l);const u=IC(n);if(u.length>0){const v=u.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${v}.`)}let c,d;const f=Oi(l.contents),g=(s=(r=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:CC;let y=0;for(;y<g&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const v=c.candidates[0].content,E=[];for(const _ of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if($u(_)){const w=await _.callTool(c.functionCalls);E.push(...w)}y++,d={role:"user",parts:E},l.contents=Oi(l.contents),l.contents.push(v),l.contents.push(d),RC(l.config)&&(f.push(v),f.push(d))}return RC(l.config)&&(c.automaticFunctionCallingHistory=f),c},this.generateContentStream=async n=>{var i,r,s,o,a;if(this.maybeMoveToResponseJsonSchem(n),kC(n.config)){const d=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(d)}const l=IC(n);if(l.length>0){const d=l.map(f=>`tools[${f}]`).join(", ");throw new Error(`Incompatible tools found at ${d}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(s=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,c=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(u&&!c)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let s;const o=[];if(i!=null&&i.generatedImages)for(const l of i.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((r=l==null?void 0:l.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:o.push(l);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async n=>{var i;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((i=o.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Jl(zs.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,s,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(s=n.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async l=>$u(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&RP(e.config.tools)){const l=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),NP(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var n,i,r;const s=new Map;for(const o of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if($u(o)){const a=o,l=await a.tool();for(const u of(r=l.functionDeclarations)!==null&&r!==void 0?r:[]){if(!u.name)throw new Error("Function declaration name is required.");if(s.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);s.set(u.name,a)}}return s}async processAfcStream(e){var n,i,r;const s=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:CC;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(u,c,d){return fr(this,arguments,function*(){for(var f,g,y,v,E,_;a<s;){o&&(a++,o=!1);const k=yield pe(u.processParamsMaybeAddMcpUsage(d)),T=yield pe(u.generateContentStreamInternal(k)),N=[],L=[];try{for(var b=!0,w=(g=void 0,pr(T)),A;A=yield pe(w.next()),f=A.done,!f;b=!0){v=A.value,b=!1;const F=v;if(yield yield pe(F),F.candidates&&(!((E=F.candidates[0])===null||E===void 0)&&E.content)){L.push(F.candidates[0].content);for(const R of(_=F.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(a<s&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(c.has(R.functionCall.name)){const U=yield pe(c.get(R.functionCall.name).callTool([R.functionCall]));N.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${c.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(F){g={error:F}}finally{try{!b&&!f&&(y=w.return)&&(yield pe(y.call(w)))}finally{if(g)throw g.error}}if(N.length>0){o=!0;const F=new Ld;F.candidates=[{content:{role:"user",parts:N}}],yield yield pe(F);const R=[];R.push(...L),R.push({role:"user",parts:N});const U=Oi(d.contents).concat(R);d.contents=U}else break}})}(this,l,e)}async generateContentInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=SC(this.apiClient,e);return a=j("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=xC(c),f=new Ld;return Object.assign(f,d),f})}else{const u=wC(this.apiClient,e);return a=j("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=AC(c),f=new Ld;return Object.assign(f,d),f})}}async generateContentStreamInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=SC(this.apiClient,e);return a=j("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(d){return fr(this,arguments,function*(){var f,g,y,v;try{for(var E=!0,_=pr(d),b;b=yield pe(_.next()),f=b.done,!f;E=!0){v=b.value,E=!1;const w=v,A=xC(yield pe(w.json()));A.sdkHttpResponse={headers:w.headers};const k=new Ld;Object.assign(k,A),yield yield pe(k)}}catch(w){g={error:w}}finally{try{!E&&!f&&(y=_.return)&&(yield pe(y.call(_)))}finally{if(g)throw g.error}}})})}else{const u=wC(this.apiClient,e);return a=j("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(d){return fr(this,arguments,function*(){var f,g,y,v;try{for(var E=!0,_=pr(d),b;b=yield pe(_.next()),f=b.done,!f;E=!0){v=b.value,E=!1;const w=v,A=AC(yield pe(w.json()));A.sdkHttpResponse={headers:w.headers};const k=new Ld;Object.assign(k,A),yield yield pe(k)}}catch(w){g={error:w}}finally{try{!E&&!f&&(y=_.return)&&(yield pe(y.call(_)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=x9(this.apiClient,e);return a=j("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=C9(c),f=new sC;return Object.assign(f,d),f})}else{const u=A9(this.apiClient,e);return a=j("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=T9(c),f=new sC;return Object.assign(f,d),f})}}async generateImagesInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=U9(this.apiClient,e);return a=j("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=z9(c),f=new oC;return Object.assign(f,d),f})}else{const u=F9(this.apiClient,e);return a=j("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=B9(c),f=new oC;return Object.assign(f,d),f})}}async editImageInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=E9(this.apiClient,e);return s=j("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),r.then(l=>{const u=b9(l),c=new I5;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=U8(this.apiClient,e);return s=j("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),r.then(l=>{const u=B8(l),c=new R5;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=_8(this.apiClient,e);return s=j("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=E8(l),c=new N5;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=T8(this.apiClient,e);return s=j("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=C8(l),c=new M5;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=i8(this.apiClient,e);return a=j("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>q0(c))}else{const u=n8(this.apiClient,e);return a=j("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o.then(c=>V0(c))}}async listInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=h8(this.apiClient,e);return a=j("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=p8(c),f=new aC;return Object.assign(f,d),f})}else{const u=d8(this.apiClient,e);return a=j("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=f8(c),f=new aC;return Object.assign(f,d),f})}}async update(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=O8(this.apiClient,e);return a=j("{model}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>q0(c))}else{const u=D8(this.apiClient,e);return a=j("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o.then(c=>V0(c))}}async delete(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=m9(this.apiClient,e);return a=j("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=v9(c),f=new lC;return Object.assign(f,d),f})}else{const u=g9(this.apiClient,e);return a=j("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=y9(c),f=new lC;return Object.assign(f,d),f})}}async countTokens(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=h9(this.apiClient,e);return a=j("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=p9(c),f=new uC;return Object.assign(f,d),f})}else{const u=d9(this.apiClient,e);return a=j("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=f9(c),f=new uC;return Object.assign(f,d),f})}}async computeTokens(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=r9(this.apiClient,e);return s=j("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),r.then(l=>{const u=s9(l),c=new P5;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=W9(this.apiClient,e);return a=j("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const d=V9(c),f=new ty;return Object.assign(f,d),f})}else{const u=q9(this.apiClient,e);return a=j("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o.then(c=>{const d=$9(c),f=new ty;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MY extends qs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=S5(e);return a=j("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o}else{const u=w5(e);return a=j("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json()),o}}async fetchPredictVideosOperationInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=g5(e);return s=j("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PY(t){const e={},n=p(t,["data"]);if(n!=null&&m(e,["data"],n),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function LY(t){const e={},n=p(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>$Y(s))),m(e,["parts"],r)}const i=p(t,["role"]);return i!=null&&m(e,["role"],i),e}function DY(t,e,n){const i={},r=p(e,["expireTime"]);n!==void 0&&r!=null&&m(n,["expireTime"],r);const s=p(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&m(n,["newSessionExpireTime"],s);const o=p(e,["uses"]);n!==void 0&&o!=null&&m(n,["uses"],o);const a=p(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&m(n,["bidiGenerateContentSetup"],GY(t,a));const l=p(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&m(n,["fieldMask"],l),i}function OY(t,e){const n={},i=p(e,["config"]);return i!=null&&m(n,["config"],DY(t,i,n)),n}function FY(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function UY(t){const e={},n=p(t,["id"]);n!=null&&m(e,["id"],n);const i=p(t,["args"]);i!=null&&m(e,["args"],i);const r=p(t,["name"]);if(r!=null&&m(e,["name"],r),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function BY(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=p(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function zY(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=p(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function HY(t,e){const n={},i=p(t,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const r=p(t,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const s=p(t,["temperature"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","temperature"],s);const o=p(t,["topP"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","topP"],o);const a=p(t,["topK"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topK"],a);const l=p(t,["maxOutputTokens"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","maxOutputTokens"],l);const u=p(t,["mediaResolution"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","mediaResolution"],u);const c=p(t,["seed"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","seed"],c);const d=p(t,["speechConfig"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","speechConfig"],Vw(d));const f=p(t,["thinkingConfig"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","thinkingConfig"],f);const g=p(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=p(t,["systemInstruction"]);e!==void 0&&y!=null&&m(e,["setup","systemInstruction"],LY(cn(y)));const v=p(t,["tools"]);if(e!==void 0&&v!=null){let T=hd(v);Array.isArray(T)&&(T=T.map(N=>qY(dd(N)))),m(e,["setup","tools"],T)}const E=p(t,["sessionResumption"]);e!==void 0&&E!=null&&m(e,["setup","sessionResumption"],VY(E));const _=p(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&m(e,["setup","inputAudioTranscription"],_);const b=p(t,["outputAudioTranscription"]);e!==void 0&&b!=null&&m(e,["setup","outputAudioTranscription"],b);const w=p(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&m(e,["setup","realtimeInputConfig"],w);const A=p(t,["contextWindowCompression"]);e!==void 0&&A!=null&&m(e,["setup","contextWindowCompression"],A);const k=p(t,["proactivity"]);if(e!==void 0&&k!=null&&m(e,["setup","proactivity"],k),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function GY(t,e){const n={},i=p(e,["model"]);i!=null&&m(n,["setup","model"],Me(t,i));const r=p(e,["config"]);return r!=null&&m(n,["config"],HY(r,n)),n}function $Y(t){const e={},n=p(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const i=p(t,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=p(t,["executableCode"]);r!=null&&m(e,["executableCode"],r);const s=p(t,["fileData"]);s!=null&&m(e,["fileData"],FY(s));const o=p(t,["functionCall"]);o!=null&&m(e,["functionCall"],UY(o));const a=p(t,["functionResponse"]);a!=null&&m(e,["functionResponse"],a);const l=p(t,["inlineData"]);l!=null&&m(e,["inlineData"],PY(l));const u=p(t,["text"]);u!=null&&m(e,["text"],u);const c=p(t,["thought"]);c!=null&&m(e,["thought"],c);const d=p(t,["thoughtSignature"]);d!=null&&m(e,["thoughtSignature"],d);const f=p(t,["videoMetadata"]);return f!=null&&m(e,["videoMetadata"],f),e}function VY(t){const e={},n=p(t,["handle"]);if(n!=null&&m(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function qY(t){const e={};if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const i=p(t,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=p(t,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=p(t,["functionDeclarations"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(d=>d)),m(e,["functionDeclarations"],c)}const o=p(t,["googleMaps"]);o!=null&&m(e,["googleMaps"],BY(o));const a=p(t,["googleSearch"]);a!=null&&m(e,["googleSearch"],zY(a));const l=p(t,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const u=p(t,["urlContext"]);return u!=null&&m(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WY(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(s=>`${n}.${s}`);e.push(...r)}else e.push(n)}return e.join(",")}function KY(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const s=WY(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];r.length>0&&(a=r.map(u=>o.includes(u)?`generationConfig.${u}`:u));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class YY extends qs{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=OY(this.apiClient,e);s=j("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=KY(a,e.config);return r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XY(t,e){const n={},i=p(t,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),n}function JY(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const i=p(t,["config"]);return i!=null&&XY(i,e),e}function QY(t){const e={},n=p(t,["name"]);return n!=null&&m(e,["_url","name"],n),e}function ZY(t,e){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=p(t,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),n}function jY(t){const e={},n=p(t,["parent"]);n!=null&&m(e,["_url","parent"],n);const i=p(t,["config"]);return i!=null&&ZY(i,e),e}function eX(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=p(t,["documents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tX extends qs{constructor(e){super(),this.apiClient=e,this.list=async n=>new Jl(zs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=QY(e);return s=j("{name}",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async delete(e){var n,i;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=JY(e);r=j("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=jY(e);return s=j("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=eX(l),c=new L5;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nX extends qs{constructor(e,n=new tX(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Jl(zs.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=W8(e);return s=j("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async get(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=X8(e);return s=j("{name}",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async delete(e){var n,i;let r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Y8(e);r=j("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=tY(e);return s=j("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=nY(l),c=new D5;return Object.assign(c,u),c})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=iY(e);return s=j("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=rY(l),c=new O5;return Object.assign(c,u),c})}}async importFile(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Z8(e);return s=j("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=Q8(l),c=new Bw;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let MP=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return MP=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const iX=()=>MP();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Y0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hi extends Error{}class In extends Hi{constructor(e,n,i,r){super(`${In.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new cv({message:i,cause:Y0(n)});const s=n;return e===400?new LP(e,s,i,r):e===401?new DP(e,s,i,r):e===403?new OP(e,s,i,r):e===404?new FP(e,s,i,r):e===409?new UP(e,s,i,r):e===422?new BP(e,s,i,r):e===429?new zP(e,s,i,r):e>=500?new HP(e,s,i,r):new In(e,s,i,r)}}class X0 extends In{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class cv extends In{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class PP extends cv{constructor({message:e}={}){super({message:e??"Request timed out."})}}class LP extends In{}class DP extends In{}class OP extends In{}class FP extends In{}class UP extends In{}class BP extends In{}class zP extends In{}class HP extends In{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rX=/^[a-z][a-z0-9+.-]*:/i,sX=t=>rX.test(t);let J0=t=>(J0=Array.isArray,J0(t));const oX=J0;let aX=oX;const NC=aX;function lX(t){if(!t)return!0;for(const e in t)return!1;return!0}function uX(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const cX=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Hi(`${t} must be an integer`);if(e<0)throw new Hi(`${t} must be a positive integer`);return e},dX=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hX=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gu="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fX(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const pX=()=>{var t,e,n,i,r;const s=fX();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gu,"X-Stainless-OS":PC(Deno.build.os),"X-Stainless-Arch":MC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gu,"X-Stainless-OS":PC((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":MC((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const o=gX();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function gX(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,s=i[2]||0,o=i[3]||0;return{browser:e,version:`${r}.${s}.${o}`}}}return null}const MC=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",PC=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let hg;const mX=()=>hg??(hg=pX());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yX(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function GP(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function vX(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return GP({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function $P(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function _X(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EX=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VP=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function h_(t,e,n){return VP(),new File(t,e??"unknown_file",n)}function bX(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const wX=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qP=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",SX=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&qP(t),AX=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function xX(t,e,n){if(VP(),t=await t,SX(t))return t instanceof File?t:h_([await t.arrayBuffer()],t.name);if(AX(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),h_(await Q0(r),e,n)}const i=await Q0(t);if(e||(e=bX(t)),!(n!=null&&n.type)){const r=i.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return h_(i,e,n)}async function Q0(t){var e,n,i,r,s;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(qP(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(wX(t))try{for(var a=!0,l=pr(t),u;u=await l.next(),e=u.done,!e;a=!0){r=u.value,a=!1;const c=r;o.push(...await Q0(c))}}catch(c){n={error:c}}finally{try{!a&&!e&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}else{const c=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${c?`; constructor: ${c}`:""}${TX(t)}`)}return o}function TX(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WP{constructor(e){this._client=e}}WP._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KP(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const LC=Object.freeze(Object.create(null)),CX=(t=KP)=>function(n,...i){if(n.length===1)return n[0];let r=!1;const s=[],o=n.reduce((c,d,f)=>{var g,y,v;/[?#]/.test(d)&&(r=!0);const E=i[f];let _=(r?encodeURIComponent:t)(""+E);return f!==i.length&&(E==null||typeof E=="object"&&E.toString===((v=Object.getPrototypeOf((y=Object.getPrototypeOf((g=E.hasOwnProperty)!==null&&g!==void 0?g:LC))!==null&&y!==void 0?y:LC))===null||v===void 0?void 0:v.toString))&&(_=E+"",s.push({start:c.length+d.length,length:_.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),c+d+(f===i.length?"":_)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)s.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(s.sort((c,d)=>c.start-d.start),s.length>0){let c=0;const d=s.reduce((f,g)=>{const y=" ".repeat(g.start-c),v="^".repeat(g.length);return c=g.start+g.length,f+y+v},"");throw new Hi(`Path parameters result in path with invalid segments:
${s.map(f=>f.error).join(`
`)}
${o}
${d}`)}return o},fg=CX(KP);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YP extends WP{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,s=iy(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new Hi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new Hi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(fg`/${r}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(fg`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(fg`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const s=n??{},{api_version:o=this._client.apiVersion}=s,a=iy(s,["api_version"]);return this._client.get(fg`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},i),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}YP._key=Object.freeze(["interactions"]);class XP extends YP{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kX(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let pg;function Ww(t){let e;return(pg??(e=new globalThis.TextEncoder,pg=e.encode.bind(e)))(t)}let gg;function DC(t){let e;return(gg??(e=new globalThis.TextDecoder,gg=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dv{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Ww(e):e;this.buffer=kX([this.buffer,n]);const i=[];let r;for(;(r=IX(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(DC(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,o=DC(this.buffer.subarray(0,s));i.push(o),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}dv.NEWLINE_CHARS=new Set([`
`,"\r"]);dv.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function IX(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function RX(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ry={off:0,error:200,warn:300,info:400,debug:500},OC=(t,e,n)=>{if(t){if(uX(ry,t))return t;En(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ry))}`)}};function ih(){}function mg(t,e,n){return!e||ry[t]>ry[n]?ih:e[t].bind(e)}const NX={error:ih,warn:ih,info:ih,debug:ih};let FC=new WeakMap;function En(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return NX;const r=FC.get(n);if(r&&r[0]===i)return r[1];const s={error:mg("error",n,i),warn:mg("warn",n,i),info:mg("info",n,i),debug:mg("debug",n,i)};return FC.set(n,[i,s]),s}const ma=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Iu{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const s=i?En(i):console;function o(){return fr(this,arguments,function*(){var l,u,c,d;if(r)throw new Hi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let f=!1;try{try{for(var g=!0,y=pr(MX(e,n)),v;v=yield pe(y.next()),l=v.done,!l;g=!0){d=v.value,g=!1;const E=d;if(!f)if(E.data.startsWith("[DONE]")){f=!0;continue}else try{yield yield pe(JSON.parse(E.data))}catch(_){throw s.error("Could not parse message into JSON:",E.data),s.error("From chunk:",E.raw),_}}}catch(E){u={error:E}}finally{try{!g&&!l&&(c=y.return)&&(yield pe(c.call(y)))}finally{if(u)throw u.error}}f=!0}catch(E){if(K0(E))return yield pe(void 0);throw E}finally{f||n.abort()}})}return new Iu(o,n,i)}static fromReadableStream(e,n,i){let r=!1;function s(){return fr(this,arguments,function*(){var l,u,c,d;const f=new dv,g=$P(e);try{for(var y=!0,v=pr(g),E;E=yield pe(v.next()),l=E.done,!l;y=!0){d=E.value,y=!1;const _=d;for(const b of f.decode(_))yield yield pe(b)}}catch(_){u={error:_}}finally{try{!y&&!l&&(c=v.return)&&(yield pe(c.call(v)))}finally{if(u)throw u.error}}for(const _ of f.flush())yield yield pe(_)})}function o(){return fr(this,arguments,function*(){var l,u,c,d;if(r)throw new Hi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let f=!1;try{try{for(var g=!0,y=pr(s()),v;v=yield pe(y.next()),l=v.done,!l;g=!0){d=v.value,g=!1;const E=d;f||E&&(yield yield pe(JSON.parse(E)))}}catch(E){u={error:E}}finally{try{!g&&!l&&(c=y.return)&&(yield pe(c.call(y)))}finally{if(u)throw u.error}}f=!0}catch(E){if(K0(E))return yield pe(void 0);throw E}finally{f||n.abort()}})}return new Iu(o,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=s=>({next:()=>{if(s.length===0){const o=i.next();e.push(o),n.push(o)}return s.shift()}});return[new Iu(()=>r(e),this.controller,this.client),new Iu(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return GP({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:s}=await n.next();if(s)return i.close();const o=Ww(JSON.stringify(r)+`
`);i.enqueue(o)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function MX(t,e){return fr(this,arguments,function*(){var i,r,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Hi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Hi("Attempted to iterate over a response with no body");const a=new LX,l=new dv,u=$P(t.body);try{for(var c=!0,d=pr(PX(u)),f;f=yield pe(d.next()),i=f.done,!i;c=!0){o=f.value,c=!1;const g=o;for(const y of l.decode(g)){const v=a.decode(y);v&&(yield yield pe(v))}}}catch(g){r={error:g}}finally{try{!c&&!i&&(s=d.return)&&(yield pe(s.call(d)))}finally{if(r)throw r.error}}for(const g of l.flush()){const y=a.decode(g);y&&(yield yield pe(y))}})}function PX(t){return fr(this,arguments,function*(){var n,i,r,s;let o=new Uint8Array;try{for(var a=!0,l=pr(t),u;u=yield pe(l.next()),n=u.done,!n;a=!0){s=u.value,a=!1;const c=s;if(c==null)continue;const d=c instanceof ArrayBuffer?new Uint8Array(c):typeof c=="string"?Ww(c):c;let f=new Uint8Array(o.length+d.length);f.set(o),f.set(d,o.length),o=f;let g;for(;(g=RX(o))!==-1;)yield yield pe(o.slice(0,g)),o=o.slice(g)}}catch(c){i={error:c}}finally{try{!a&&!n&&(r=l.return)&&(yield pe(r.call(l)))}finally{if(i)throw i.error}}o.length>0&&(yield yield pe(o))})}class LX{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=DX(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function DX(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function OX(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:s}=e,o=await(async()=>{var a;if(e.options.stream)return En(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Iu.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),u=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return En(t).debug(`[${i}] response parsed`,ma({retryOfRequestLogID:r,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kw extends Promise{constructor(e,n,i=OX){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Kw(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JP=Symbol("brand.privateNullableHeaders");function*FX(t){if(!t)return;if(JP in t){const{values:i,nulls:r}=t;yield*i.entries();for(const s of r)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():NC(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const s=NC(i[1])?i[1]:[i[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[r,null]),yield[r,a])}}const Dd=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[s,o]of FX(i)){const a=s.toLowerCase();r.has(a)||(e.delete(s),r.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[JP]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f_=t=>{var e,n,i,r,s,o;if(typeof globalThis.process<"u")return(i=(n=(e=u5)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(o=(s=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||s===void 0?void 0:s.call(r,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var QP;class hv{constructor(e){var n,i,r,s,o,a,l,{baseURL:u=f_("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:c=(n=f_("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:d="v1beta"}=e,f=iy(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:c,apiVersion:d},f),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(i=g.timeout)!==null&&i!==void 0?i:hv.DEFAULT_TIMEOUT,this.logger=(r=g.logger)!==null&&r!==void 0?r:console;const y="warn";this.logLevel=y,this.logLevel=(o=(s=OC(g.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:OC(f_("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:y,this.fetchOptions=g.fetchOptions,this.maxRetries=(a=g.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:yX(),this.encoder=EX,this._options=g,this.apiKey=c,this.apiVersion=d,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Dd([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Dd([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Dd([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Hi(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${gu}`}defaultIdempotencyKey(){return`stainless-node-retry-${iX()}`}makeStatusError(e,n,i,r){return In.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,s=sX(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return lX(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new Kw(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,s,o;const a=await e,l=(r=a.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:u,url:c,timeout:d}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(u,{url:c,options:a});const f="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=i===void 0?"":`, retryOf: ${i}`,y=Date.now();if(En(this).debug(`[${f}] sending request`,ma({retryOfRequestLogID:i,method:a.method,url:c,options:a,headers:u.headers})),!((s=a.signal)===null||s===void 0)&&s.aborted)throw new X0;const v=new AbortController,E=await this.fetchWithTimeout(c,u,d,v).catch(Y0),_=Date.now();if(E instanceof globalThis.Error){const w=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new X0;const A=K0(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(n)return En(this).info(`[${f}] connection ${A?"timed out":"failed"} - ${w}`),En(this).debug(`[${f}] connection ${A?"timed out":"failed"} (${w})`,ma({retryOfRequestLogID:i,url:c,durationMs:_-y,message:E.message})),this.retryRequest(a,n,i??f);throw En(this).info(`[${f}] connection ${A?"timed out":"failed"} - error; no more retries left`),En(this).debug(`[${f}] connection ${A?"timed out":"failed"} (error; no more retries left)`,ma({retryOfRequestLogID:i,url:c,durationMs:_-y,message:E.message})),A?new PP:new cv({cause:E})}const b=`[${f}${g}] ${u.method} ${c} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${_-y}ms`;if(!E.ok){const w=await this.shouldRetry(E);if(n&&w){const F=`retrying, ${n} attempts remaining`;return await _X(E.body),En(this).info(`${b} - ${F}`),En(this).debug(`[${f}] response error (${F})`,ma({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,durationMs:_-y})),this.retryRequest(a,n,i??f,E.headers)}const A=w?"error; no more retries left":"error; not retryable";En(this).info(`${b} - ${A}`);const k=await E.text().catch(F=>Y0(F).message),T=dX(k),N=T?void 0:k;throw En(this).debug(`[${f}] response error (${A})`,ma({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,message:N,durationMs:Date.now()-y})),this.makeStatusError(E.status,T,N,E.headers)}return En(this).info(b),En(this).debug(`[${f}] response start`,ma({retryOfRequestLogID:i,url:E.url,status:E.status,headers:E.headers,durationMs:_-y})),{response:E,options:a,controller:v,requestLogID:f,retryOfRequestLogID:i,startTime:y}}async fetchWithTimeout(e,n,i,r){const s=n||{},{signal:o,method:a}=s,l=iy(s,["signal","method"]);o&&o.addEventListener("abort",()=>r.abort());const u=setTimeout(()=>r.abort(),i),c=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,d=Object.assign(Object.assign(Object.assign({signal:r.signal},c?{duplex:"half"}:{}),{method:"GET"}),l);a&&(d.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var s;let o;const a=r==null?void 0:r.get("retry-after-ms");if(a){const u=parseFloat(a);Number.isNaN(u)||(o=u)}const l=r==null?void 0:r.get("retry-after");if(l&&!o){const u=parseFloat(l);Number.isNaN(u)?o=Date.parse(l)-Date.now():o=u*1e3}if(!(o&&0<=o&&o<60*1e3)){const u=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,u)}return await hX(o),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,s;const o=Object.assign({},e),{method:a,path:l,query:u,defaultBaseURL:c}=o,d=this.buildURL(l,u,c);"timeout"in o&&cX("timeout",o.timeout),o.timeout=(i=o.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:f,body:g}=this.buildBody({options:o}),y=await this.buildHeaders({options:e,method:a,bodyHeaders:f,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:y},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(s=o.fetchOptions)!==null&&s!==void 0?s:{}),url:d,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let a=Dd([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),mX()),this._options.defaultHeaders,i,e.headers,o]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Dd([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:vX(e)}:this.encoder({body:e,headers:i})}}hv.DEFAULT_TIMEOUT=6e4;class Bt extends hv{constructor(){super(...arguments),this.interactions=new XP(this)}}QP=Bt;Bt.GeminiNextGenAPIClient=QP;Bt.GeminiNextGenAPIClientError=Hi;Bt.APIError=In;Bt.APIConnectionError=cv;Bt.APIConnectionTimeoutError=PP;Bt.APIUserAbortError=X0;Bt.NotFoundError=FP;Bt.ConflictError=UP;Bt.RateLimitError=zP;Bt.BadRequestError=LP;Bt.AuthenticationError=DP;Bt.InternalServerError=HP;Bt.PermissionDeniedError=OP;Bt.UnprocessableEntityError=BP;Bt.toFile=xX;Bt.Interactions=XP;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UX(t,e){const n={},i=p(t,["name"]);return i!=null&&m(n,["_url","name"],i),n}function BX(t,e){const n={},i=p(t,["name"]);return i!=null&&m(n,["_url","name"],i),n}function zX(t,e){const n={},i=p(t,["sdkHttpResponse"]);return i!=null&&m(n,["sdkHttpResponse"],i),n}function HX(t,e){const n={},i=p(t,["sdkHttpResponse"]);return i!=null&&m(n,["sdkHttpResponse"],i),n}function GX(t,e,n){const i={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=p(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&m(e,["displayName"],r),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=p(t,["epochCount"]);e!==void 0&&s!=null&&m(e,["tuningTask","hyperparameters","epochCount"],s);const o=p(t,["learningRateMultiplier"]);if(o!=null&&m(i,["tuningTask","hyperparameters","learningRateMultiplier"],o),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=p(t,["batchSize"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","batchSize"],a);const l=p(t,["learningRate"]);if(e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","learningRate"],l),p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function $X(t,e,n){const i={};let r=p(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const g=p(t,["validationDataset"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec"],UC(g))}else if(r==="PREFERENCE_TUNING"){const g=p(t,["validationDataset"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec"],UC(g))}const s=p(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&m(e,["tunedModelDisplayName"],s);const o=p(t,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);let a=p(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=p(t,["epochCount"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=p(t,["epochCount"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=p(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=p(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=p(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let u=p(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=p(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(u==="PREFERENCE_TUNING"){const g=p(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let c=p(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=p(t,["adapterSize"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(c==="PREFERENCE_TUNING"){const g=p(t,["adapterSize"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const d=p(t,["labels"]);e!==void 0&&d!=null&&m(e,["labels"],d);const f=p(t,["beta"]);return e!==void 0&&f!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],f),i}function VX(t,e){const n={},i=p(t,["baseModel"]);i!=null&&m(n,["baseModel"],i);const r=p(t,["preTunedModel"]);r!=null&&m(n,["preTunedModel"],r);const s=p(t,["trainingDataset"]);s!=null&&tJ(s);const o=p(t,["config"]);return o!=null&&GX(o,n),n}function qX(t,e){const n={},i=p(t,["baseModel"]);i!=null&&m(n,["baseModel"],i);const r=p(t,["preTunedModel"]);r!=null&&m(n,["preTunedModel"],r);const s=p(t,["trainingDataset"]);s!=null&&nJ(s,n,e);const o=p(t,["config"]);return o!=null&&$X(o,n,e),n}function WX(t,e){const n={},i=p(t,["name"]);return i!=null&&m(n,["_url","name"],i),n}function KX(t,e){const n={},i=p(t,["name"]);return i!=null&&m(n,["_url","name"],i),n}function YX(t,e,n){const i={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const s=p(t,["pageToken"]);e!==void 0&&s!=null&&m(e,["_query","pageToken"],s);const o=p(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),i}function XX(t,e,n){const i={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const s=p(t,["pageToken"]);e!==void 0&&s!=null&&m(e,["_query","pageToken"],s);const o=p(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),i}function JX(t,e){const n={},i=p(t,["config"]);return i!=null&&YX(i,n),n}function QX(t,e){const n={},i=p(t,["config"]);return i!=null&&XX(i,n),n}function ZX(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&m(n,["sdkHttpResponse"],i);const r=p(t,["nextPageToken"]);r!=null&&m(n,["nextPageToken"],r);const s=p(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>ZP(a))),m(n,["tuningJobs"],o)}return n}function jX(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&m(n,["sdkHttpResponse"],i);const r=p(t,["nextPageToken"]);r!=null&&m(n,["nextPageToken"],r);const s=p(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>Z0(a))),m(n,["tuningJobs"],o)}return n}function eJ(t,e){const n={},i=p(t,["name"]);i!=null&&m(n,["model"],i);const r=p(t,["name"]);return r!=null&&m(n,["endpoint"],r),n}function tJ(t,e){const n={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),m(n,["examples","examples"],r)}return n}function nJ(t,e,n){const i={};let r=p(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const o=p(t,["gcsUri"]);e!==void 0&&o!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(r==="PREFERENCE_TUNING"){const o=p(t,["gcsUri"]);e!==void 0&&o!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let s=p(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=p(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=p(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function ZP(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&m(n,["sdkHttpResponse"],i);const r=p(t,["name"]);r!=null&&m(n,["name"],r);const s=p(t,["state"]);s!=null&&m(n,["state"],pP(s));const o=p(t,["createTime"]);o!=null&&m(n,["createTime"],o);const a=p(t,["tuningTask","startTime"]);a!=null&&m(n,["startTime"],a);const l=p(t,["tuningTask","completeTime"]);l!=null&&m(n,["endTime"],l);const u=p(t,["updateTime"]);u!=null&&m(n,["updateTime"],u);const c=p(t,["description"]);c!=null&&m(n,["description"],c);const d=p(t,["baseModel"]);d!=null&&m(n,["baseModel"],d);const f=p(t,["_self"]);return f!=null&&m(n,["tunedModel"],eJ(f)),n}function Z0(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&m(n,["sdkHttpResponse"],i);const r=p(t,["name"]);r!=null&&m(n,["name"],r);const s=p(t,["state"]);s!=null&&m(n,["state"],pP(s));const o=p(t,["createTime"]);o!=null&&m(n,["createTime"],o);const a=p(t,["startTime"]);a!=null&&m(n,["startTime"],a);const l=p(t,["endTime"]);l!=null&&m(n,["endTime"],l);const u=p(t,["updateTime"]);u!=null&&m(n,["updateTime"],u);const c=p(t,["error"]);c!=null&&m(n,["error"],c);const d=p(t,["description"]);d!=null&&m(n,["description"],d);const f=p(t,["baseModel"]);f!=null&&m(n,["baseModel"],f);const g=p(t,["tunedModel"]);g!=null&&m(n,["tunedModel"],g);const y=p(t,["preTunedModel"]);y!=null&&m(n,["preTunedModel"],y);const v=p(t,["supervisedTuningSpec"]);v!=null&&m(n,["supervisedTuningSpec"],v);const E=p(t,["preferenceOptimizationSpec"]);E!=null&&m(n,["preferenceOptimizationSpec"],E);const _=p(t,["tuningDataStats"]);_!=null&&m(n,["tuningDataStats"],_);const b=p(t,["encryptionSpec"]);b!=null&&m(n,["encryptionSpec"],b);const w=p(t,["partnerModelTuningSpec"]);w!=null&&m(n,["partnerModelTuningSpec"],w);const A=p(t,["customBaseModel"]);A!=null&&m(n,["customBaseModel"],A);const k=p(t,["experiment"]);k!=null&&m(n,["experiment"],k);const T=p(t,["labels"]);T!=null&&m(n,["labels"],T);const N=p(t,["outputUri"]);N!=null&&m(n,["outputUri"],N);const L=p(t,["pipelineJob"]);L!=null&&m(n,["pipelineJob"],L);const F=p(t,["serviceAccount"]);F!=null&&m(n,["serviceAccount"],F);const R=p(t,["tunedModelDisplayName"]);R!=null&&m(n,["tunedModelDisplayName"],R);const U=p(t,["veoTuningSpec"]);return U!=null&&m(n,["veoTuningSpec"],U),n}function iJ(t,e){const n={},i=p(t,["sdkHttpResponse"]);i!=null&&m(n,["sdkHttpResponse"],i);const r=p(t,["name"]);r!=null&&m(n,["name"],r);const s=p(t,["metadata"]);s!=null&&m(n,["metadata"],s);const o=p(t,["done"]);o!=null&&m(n,["done"],o);const a=p(t,["error"]);return a!=null&&m(n,["error"],a),n}function UC(t,e){const n={},i=p(t,["gcsUri"]);i!=null&&m(n,["validationDatasetUri"],i);const r=p(t,["vertexDatasetResource"]);return r!=null&&m(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rJ extends qs{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Jl(zs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:r});return s.baseModel=void 0,await this.tuneInternal(s)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),s=await this.tuneMldevInternal(r);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:z0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=KX(e);return a=j("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>Z0(c))}else{const u=WX(e);return a=j("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>ZP(c))}}async listInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=QX(e);return a=j("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=jX(c),f=new cC;return Object.assign(f,d),f})}else{const u=JX(e);return a=j("tunedModels",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=ZX(c),f=new cC;return Object.assign(f,d),f})}}async cancel(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=BX(e);return a=j("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=HX(c),f=new dC;return Object.assign(f,d),f})}else{const u=UX(e);return a=j("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=zX(c),f=new dC;return Object.assign(f,d),f})}}async tuneInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=qX(e,e);return s=j("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),r.then(l=>Z0(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=VX(e);return s=j("tunedModels",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),r.then(l=>iJ(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sJ{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const oJ=1024*1024*8,aJ=3,lJ=1e3,uJ=2,sy="x-goog-upload-status";async function cJ(t,e,n){var i;const r=await jP(t,e,n),s=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[sy])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function dJ(t,e,n){var i;const r=await jP(t,e,n),s=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[sy])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=lP(s),a=new zw;return Object.assign(a,o),a}async function jP(t,e,n){var i,r;let s=0,o=0,a=new H0(new Response),l="upload";for(s=t.size;o<s;){const u=Math.min(oJ,s-o),c=t.slice(o,o+u);o+u>=s&&(l+=", finalize");let d=0,f=lJ;for(;d<aJ&&(a=await n.request({path:"",body:c,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(u)}}}),!(!((i=a==null?void 0:a.headers)===null||i===void 0)&&i[sy]));)d++,await fJ(f),f=f*uJ;if(o+=u,((r=a==null?void 0:a.headers)===null||r===void 0?void 0:r[sy])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function hJ(t){return{size:t.size,type:t.type}}function fJ(t){return new Promise(e=>setTimeout(e,t))}class pJ{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await cJ(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dJ(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hJ(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gJ{create(e,n,i){return new mJ(e,n,i)}}class mJ{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BC="x-goog-api-key";class yJ{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(BC)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(BC,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vJ="gl-node/";class _J{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Bt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=f5(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new yJ(this.apiKey);this.apiClient=new hY({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:vJ+"web",uploader:new pJ,downloader:new sJ}),this.models=new NY(this.apiClient),this.live=new xY(this.apiClient,r,new gJ),this.batches=new G6(this.apiClient),this.chats=new SK(this.models,this.apiClient),this.caches=new EK(this.apiClient),this.files=new PK(this.apiClient),this.operations=new MY(this.apiClient),this.authTokens=new YY(this.apiClient),this.tunings=new rJ(this.apiClient),this.fileSearchStores=new nX(this.apiClient)}}let yr=null;const Pp="gemini-3-flash-preview",j0=t=>{if(!t)return!1;try{return yr=new _J({apiKey:t}),!0}catch(e){return console.error("Failed to initialize Gemini:",e),!1}},eL=async(t,e,n="",i=[])=>{if(!yr)throw new Error("Gemini API not initialized");try{const r=n?`Gebruik de volgende bronnen om de vraag van de gebruiker te beantwoorden. Als het antwoord niet in de bronnen staat, vermeld dat dan.
            
            Citeer je bronnen door te verwijzen naar [[Source X]] aan het einde van relevante zinnen.
            Gebruik Markdown voor opmaak: **vetgedrukt** voor belangrijke concepten, lijsten voor opsommingen, en tabellen indien nodig om data te vergelijken.
            Bijvoorbeeld: "Dit is een feit [[Source 1]]." of "Volgens [[Source 2]] is dit waar."

            Bronnen:
            ${n}

`:"",s=[];for(const l of t)s.push({role:l.role==="user"?"user":"model",parts:[{text:l.content}]});const o=[{text:r+e}];if(i&&i.length>0)for(const l of i)o.push({inlineData:{mimeType:l.mimeType,data:l.data}});return s.push({role:"user",parts:o}),(await yr.models.generateContent({model:Pp,contents:s})).text}catch(r){throw console.error("Error generating response:",r),r}},EJ=async t=>{if(!yr)throw new Error("Gemini API not initialized");const e=`Based on the following content, generate 3-4 interesting and relevant questions that a user might want to ask to learn more about the topic. Return ONLY the questions, one per line:

${t.substring(0,3e4)}`;return(await yr.models.generateContent({model:Pp,contents:[{role:"user",parts:[{text:e}]}]})).text.split(`
`).filter(s=>s.trim().length>0).map(s=>s.replace(/^\d+\.\s*|-\s*/,"").trim())},eb=async t=>{if(!yr)throw new Error("Gemini API not initialized");const e=`Create a comprehensive Briefing Doc from the following source material.
    
    Structure it as follows:
    # Briefing Doc
    ## Executive Summary
    [Concise overview of the main topic]
    
    ## Key Themes
    [Bulleted list of major themes with brief explanations]
    
    ## Key Insights & Facts
    [Important details and data points]
    
    ## Conclusion
    [Final synthesis]

    Content:
    ${t.substring(0,3e4)}`;return(await yr.models.generateContent({model:Pp,contents:[{role:"user",parts:[{text:e}]}]})).text},tL=async t=>{if(!yr)throw new Error("Gemini API not initialized");const e=`Maak een studiegids van de volgende tekst. Voeg belangrijke termen, discussievragen en een korte quiz toe:

${t.substring(0,3e4)}`;return(await yr.models.generateContent({model:Pp,contents:[{role:"user",parts:[{text:e}]}]})).text},nL=async t=>{if(!yr)throw new Error("Gemini API not initialized");const e=`Genereer een lijst met Veelgestelde Vragen (FAQ) op basis van de volgende tekst:

${t.substring(0,3e4)}`;return(await yr.models.generateContent({model:Pp,contents:[{role:"user",parts:[{text:e}]}]})).text},bJ=Object.freeze(Object.defineProperty({__proto__:null,generateFAQ:nL,generateResponse:eL,generateStudyGuide:tL,generateSuggestedQuestions:EJ,generateSummary:eb,initializeGemini:j0},Symbol.toStringTag,{value:"Module"}));function $e(t,e="Assertion error"){if(!t)throw Error(e)}function rd({group:t}){const{orientation:e,panels:n}=t;return n.reduce((i,r)=>(i+=e==="horizontal"?r.element.offsetWidth:r.element.offsetHeight,i),0)}function tb(t,e){return e.sort(t==="horizontal"?wJ:SJ)}function wJ(t,e){const n=t.element.offsetLeft-e.element.offsetLeft;return n!==0?n:t.element.offsetWidth-e.element.offsetWidth}function SJ(t,e){const n=t.element.offsetTop-e.element.offsetTop;return n!==0?n:t.element.offsetHeight-e.element.offsetHeight}function iL(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}function rL(t,e){return{x:t.x>=e.left&&t.x<=e.right?0:Math.min(Math.abs(t.x-e.left),Math.abs(t.x-e.right)),y:t.y>=e.top&&t.y<=e.bottom?0:Math.min(Math.abs(t.y-e.top),Math.abs(t.y-e.bottom))}}function AJ({orientation:t,rects:e,targetRect:n}){const i={x:n.x+n.width/2,y:n.y+n.height/2};let r,s=Number.MAX_VALUE;for(const o of e){const{x:a,y:l}=rL(i,o),u=t==="horizontal"?a:l;u<s&&(s=u,r=o)}return $e(r,"No rect found"),r}function sL(t){const{element:e,orientation:n,panels:i,separators:r}=t,s=tb(n,Array.from(e.children).filter(iL).map(c=>({element:c}))).map(({element:c})=>c),o=[];let a=!1,l,u=[];for(const c of s)if(c.hasAttribute("data-panel")){const d=i.find(f=>f.element===c);if(d){if(l){const f=l.element.getBoundingClientRect(),g=c.getBoundingClientRect();let y;if(a){const v=n==="horizontal"?new DOMRect(f.right,f.top,0,f.height):new DOMRect(f.left,f.bottom,f.width,0),E=n==="horizontal"?new DOMRect(g.left,g.top,0,g.height):new DOMRect(g.left,g.top,g.width,0);switch(u.length){case 0:{y=[v,E];break}case 1:{const _=u[0],b=AJ({orientation:n,rects:[f,g],targetRect:_.element.getBoundingClientRect()});y=[_,b===f?E:v];break}default:{y=u;break}}}else u.length?y=u:y=[n==="horizontal"?new DOMRect(f.right,g.top,g.left-f.right,g.height):new DOMRect(g.left,f.bottom,g.width,g.top-f.bottom)];for(const v of y)o.push({group:t,groupSize:rd({group:t}),panels:[l,d],separator:"width"in v?void 0:v,rect:"width"in v?v:v.element.getBoundingClientRect()})}a=!1,l=d,u=[]}}else if(c.hasAttribute("data-separator")){const d=r.find(f=>f.element===c);d?u.push(d):(l=void 0,u=[])}else a=!0;return o}function xJ(t,e){const n=getComputedStyle(t),i=parseFloat(n.fontSize);return e*i}function TJ(t,e){const n=getComputedStyle(t.ownerDocument.body),i=parseFloat(n.fontSize);return e*i}function CJ(t){return t/100*window.innerHeight}function kJ(t){return t/100*window.innerWidth}function IJ(t){switch(typeof t){case"number":return[t,"px"];case"string":{const e=parseFloat(t);return t.endsWith("%")?[e,"%"]:t.endsWith("px")?[e,"px"]:t.endsWith("rem")?[e,"rem"]:t.endsWith("em")?[e,"em"]:t.endsWith("vh")?[e,"vh"]:t.endsWith("vw")?[e,"vw"]:[e,"%"]}}}function yg({groupSize:t,panelElement:e,styleProp:n}){let i;const[r,s]=IJ(n);switch(s){case"%":{i=r/100*t;break}case"px":{i=r;break}case"rem":{i=TJ(e,r);break}case"em":{i=xJ(e,r);break}case"vh":{i=CJ(r);break}case"vw":{i=kJ(r);break}}return i}function lr(t){return parseFloat(t.toFixed(3))}function zC(t){const{panels:e}=t,n=rd({group:t});return n===0?e.map(i=>({collapsedSize:0,collapsible:i.panelConstraints.collapsible===!0,defaultSize:void 0,minSize:0,maxSize:100,panelId:i.id})):e.map(i=>{const{element:r,panelConstraints:s}=i;let o=0;if(s.collapsedSize!==void 0){const c=yg({groupSize:n,panelElement:r,styleProp:s.collapsedSize});o=lr(c/n*100)}let a;if(s.defaultSize!==void 0){const c=yg({groupSize:n,panelElement:r,styleProp:s.defaultSize});a=lr(c/n*100)}let l=0;if(s.minSize!==void 0){const c=yg({groupSize:n,panelElement:r,styleProp:s.minSize});l=lr(c/n*100)}let u=100;if(s.maxSize!==void 0){const c=yg({groupSize:n,panelElement:r,styleProp:s.maxSize});u=lr(c/n*100)}return{collapsedSize:o,collapsible:s.collapsible===!0,defaultSize:a,minSize:l,maxSize:u,panelId:i.id}})}var Lo;class RJ{constructor(){x(this,Lo,{})}addListener(e,n){const i=h(this,Lo)[e];return i===void 0?h(this,Lo)[e]=[n]:i.includes(n)||i.push(n),()=>{this.removeListener(e,n)}}emit(e,n){const i=h(this,Lo)[e];if(i!==void 0)if(i.length===1)i[0].call(null,n);else{let r=!1,s=null;const o=Array.from(i);for(let a=0;a<o.length;a++){const l=o[a];try{l.call(null,n)}catch(u){s===null&&(r=!0,s=u)}}if(r)throw s}}removeAllListeners(){S(this,Lo,{})}removeListener(e,n){const i=h(this,Lo)[e];if(i!==void 0){const r=i.indexOf(n);r>=0&&i.splice(r,1)}}}Lo=new WeakMap;function Sn(t,e,n=0){return Math.abs(lr(t)-lr(e))<=n}let bi={cursorFlags:0,interactionState:{state:"inactive"},mountedGroups:new Map};const Rl=new RJ;function Fi(){return bi}function Gn(t){const e=typeof t=="function"?t(bi):t;if(bi===e)return bi;const n=bi;return bi={...bi,...e},e.cursorFlags!==void 0&&Rl.emit("cursorFlagsChange",bi.cursorFlags),e.interactionState!==void 0&&Rl.emit("interactionStateChange",bi.interactionState),e.mountedGroups!==void 0&&(bi.mountedGroups.forEach((i,r)=>{i.derivedPanelConstraints.forEach(s=>{if(s.collapsible){const{layout:o}=n.mountedGroups.get(r)??{};if(o){const a=Sn(s.collapsedSize,i.layout[s.panelId]),l=Sn(s.collapsedSize,o[s.panelId]);a&&!l&&(r.inMemoryLastExpandedPanelSizes[s.panelId]=o[s.panelId])}}})}),Rl.emit("mountedGroupsChange",bi.mountedGroups)),bi}function NJ(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function qh(t,e){return Sn(t,e)?0:t>e?1:-1}function Ru({panelConstraints:t,size:e}){const{collapsedSize:n=0,collapsible:i,maxSize:r=100,minSize:s=0}=t;if(qh(e,s)<0)if(i){const o=(n+s)/2;qh(e,o)<0?e=n:e=s}else e=s;return e=Math.min(r,e),e=lr(e),e}function Wh({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:i,prevLayout:r,trigger:s}){if(Sn(t,0))return e;const o=Object.values(e),a=Object.values(r),l=[...o],[u,c]=i;$e(u!=null,"Invalid first pivot index"),$e(c!=null,"Invalid second pivot index");let d=0;if(s==="keyboard"){{const y=t<0?c:u,v=n[y];$e(v,`Panel constraints not found for index ${y}`);const{collapsedSize:E=0,collapsible:_,minSize:b=0}=v;if(_){const w=o[y];if($e(w!=null,`Previous layout not found for panel index ${y}`),Sn(w,E)){const A=b-w;qh(A,Math.abs(t))>0&&(t=t<0?0-A:A)}}}{const y=t<0?u:c,v=n[y];$e(v,`No panel constraints found for index ${y}`);const{collapsedSize:E=0,collapsible:_,minSize:b=0}=v;if(_){const w=o[y];if($e(w!=null,`Previous layout not found for panel index ${y}`),Sn(w,b)){const A=w-E;qh(A,Math.abs(t))>0&&(t=t<0?0-A:A)}}}}{const y=t<0?1:-1;let v=t<0?c:u,E=0;for(;;){const b=o[v];$e(b!=null,`Previous layout not found for panel index ${v}`);const w=Ru({panelConstraints:n[v],size:100})-b;if(E+=w,v+=y,v<0||v>=n.length)break}const _=Math.min(Math.abs(t),Math.abs(E));t=t<0?0-_:_}{let y=t<0?u:c;for(;y>=0&&y<n.length;){const v=Math.abs(t)-Math.abs(d),E=o[y];$e(E!=null,`Previous layout not found for panel index ${y}`);const _=E-v,b=Ru({panelConstraints:n[y],size:_});if(!Sn(E,b)&&(d+=E-b,l[y]=b,d.toFixed(3).localeCompare(Math.abs(t).toFixed(3),void 0,{numeric:!0})>=0))break;t<0?y--:y++}}if(NJ(a,l))return r;{const y=t<0?c:u,v=o[y];$e(v!=null,`Previous layout not found for panel index ${y}`);const E=v+d,_=Ru({panelConstraints:n[y],size:E});if(l[y]=_,!Sn(_,E)){let b=E-_,w=t<0?c:u;for(;w>=0&&w<n.length;){const A=l[w];$e(A!=null,`Previous layout not found for panel index ${w}`);const k=A+b,T=Ru({panelConstraints:n[w],size:k});if(Sn(A,T)||(b-=T-A,l[w]=T),Sn(b,0))break;t>0?w--:w++}}}const f=Object.values(l).reduce((y,v)=>v+y,0);if(!Sn(f,100,.1))return r;const g=Object.keys(r);return l.reduce((y,v,E)=>(y[g[E]]=v,y),{})}function dm(t){const{mountedGroups:e}=Fi();for(const[n]of e)if(n.separators.some(i=>i.element===t))return n;throw Error("Could not find parent Group for separator element")}function zl(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(e[n]===void 0||qh(t[n],e[n])!==0)return!1;return!0}function Hl({layout:t,panelConstraints:e}){const n=[...Object.values(t)],i=n.reduce((o,a)=>o+a,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(o=>`${o}%`).join(", ")}`);if(!Sn(i,100)&&n.length>0)for(let o=0;o<e.length;o++){const a=n[o];$e(a!=null,`No layout data found for index ${o}`);const l=100/i*a;n[o]=l}let r=0;for(let o=0;o<e.length;o++){const a=n[o];$e(a!=null,`No layout data found for index ${o}`);const l=Ru({panelConstraints:e[o],size:a});a!=l&&(r+=a-l,n[o]=l)}if(!Sn(r,0))for(let o=0;o<e.length;o++){const a=n[o];$e(a!=null,`No layout data found for index ${o}`);const l=a+r,u=Ru({panelConstraints:e[o],size:l});if(a!==u&&(r-=u-a,n[o]=u,Sn(r,0)))break}const s=Object.keys(t);return n.reduce((o,a,l)=>(o[s[l]]=a,o),{})}function oL({groupId:t}){const e=()=>{const{mountedGroups:n}=Fi();for(const[i,r]of n)if(i.id===t)return{group:i,...r};throw Error(`Could not find Group with id "${t}"`)};return{getLayout(){const{defaultLayoutDeferred:n,layout:i}=e();return n?{}:i},setLayout(n){const{defaultLayoutDeferred:i,derivedPanelConstraints:r,group:s,layout:o,separatorToPanels:a}=e(),l=Hl({layout:n,panelConstraints:r});return i?o:(zl(o,l)||Gn(u=>({mountedGroups:new Map(u.mountedGroups).set(s,{defaultLayoutDeferred:i,derivedPanelConstraints:r,layout:l,separatorToPanels:a})})),l)}}}function aL(t){const{mountedGroups:e}=Fi(),n=e.get(t);return $e(n,`Mounted Group ${t.id} not found`),n}function ca(t,e){const n=dm(t),i=aL(n),r=n.separators.find(c=>c.element===t);$e(r,"Matching separator not found");const s=i.separatorToPanels.get(r);$e(s,"Matching panels not found");const o=s.map(c=>n.panels.indexOf(c)),a=oL({groupId:n.id}).getLayout(),l=Wh({delta:e,initialLayout:a,panelConstraints:i.derivedPanelConstraints,pivotIndices:o,prevLayout:a,trigger:"keyboard"}),u=Hl({layout:l,panelConstraints:i.derivedPanelConstraints});zl(a,u)||Gn(c=>({mountedGroups:new Map(c.mountedGroups).set(n,{defaultLayoutDeferred:i.defaultLayoutDeferred,derivedPanelConstraints:i.derivedPanelConstraints,layout:u,separatorToPanels:i.separatorToPanels})}))}function HC(t){if(t.defaultPrevented)return;const e=t.currentTarget,n=dm(e);if(!n.disabled)switch(t.key){case"ArrowDown":{t.preventDefault(),n.orientation==="vertical"&&ca(e,5);break}case"ArrowLeft":{t.preventDefault(),n.orientation==="horizontal"&&ca(e,-5);break}case"ArrowRight":{t.preventDefault(),n.orientation==="horizontal"&&ca(e,5);break}case"ArrowUp":{t.preventDefault(),n.orientation==="vertical"&&ca(e,-5);break}case"End":{t.preventDefault(),ca(e,100);break}case"Enter":{t.preventDefault();const i=dm(e),{derivedPanelConstraints:r,layout:s,separatorToPanels:o}=aL(i),a=i.separators.find(d=>d.element===e);$e(a,"Matching separator not found");const l=o.get(a);$e(l,"Matching panels not found");const u=l[0],c=r.find(d=>d.panelId===u.id);if($e(c,"Panel metadata not found"),c.collapsible){const d=s[u.id],f=c.collapsedSize===d?i.inMemoryLastExpandedPanelSizes[u.id]??c.minSize:c.collapsedSize;ca(e,f-d)}break}case"F6":{t.preventDefault();const i=dm(e).separators.map(o=>o.element),r=Array.from(i).findIndex(o=>o===t.currentTarget);$e(r!==null,"Index not found");const s=t.shiftKey?r>0?r-1:i.length-1:r+1<i.length?r+1:0;i[s].focus();break}case"Home":{t.preventDefault(),ca(e,-100);break}}}const MJ=t=>t,p_=()=>{},lL=1,uL=2,cL=4,dL=8,GC={coarse:10,precise:5};function PJ(t,e,n){let i,r={x:1/0,y:1/0};for(const s of e){const o=rL(n,s.rect);switch(t){case"horizontal":{o.x<=r.x&&(i=s,r=o);break}case"vertical":{o.y<=r.y&&(i=s,r=o);break}}}return i?{distance:r,hitRegion:i}:void 0}let vg;function LJ(){return vg===void 0&&(typeof matchMedia=="function"?vg=!!matchMedia("(pointer:coarse)").matches:vg=!1),vg}function DJ(t){return t!==null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function OJ(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:qC(t),b:qC(e)};let i;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),i=t;$e(i,"Stacking order can only be calculated for elements with a common ancestor");const r={a:VC($C(n.a)),b:VC($C(n.b))};if(r.a===r.b){const s=i.childNodes,o={a:n.a.at(-1),b:n.b.at(-1)};let a=s.length;for(;a--;){const l=s[a];if(l===o.a)return 1;if(l===o.b)return-1}}return Math.sign(r.a-r.b)}const FJ=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function UJ(t){const e=getComputedStyle(hL(t)??t).display;return e==="flex"||e==="inline-flex"}function BJ(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||UJ(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||FJ.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function $C(t){let e=t.length;for(;e--;){const n=t[e];if($e(n,"Missing node"),BJ(n))return n}return null}function VC(t){return t&&Number(getComputedStyle(t).zIndex)||0}function qC(t){const e=[];for(;t;)e.push(t),t=hL(t);return e}function hL(t){const{parentNode:e}=t;return DJ(e)?e.host:e}function zJ(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function HJ({groupElement:t,hitRegion:e,pointerEventTarget:n}){if(!iL(n)||n.contains(t)||t.contains(n))return!0;if(OJ(n,t)>0){let i=n;for(;i;){if(i.contains(t))return!0;if(zJ(i.getBoundingClientRect(),e))return!1;i=i.parentElement}}return!0}function fL(t,e){const n=[];return e.forEach((i,r)=>{if(r.disabled)return;const s=LJ()?GC.coarse:GC.precise,o=sL(r),a=PJ(r.orientation,o,{x:t.clientX,y:t.clientY});a&&a.distance.x<=s&&a.distance.y<=s&&HJ({groupElement:r.element,hitRegion:a.hitRegion.rect,pointerEventTarget:t.target})&&n.push(a.hitRegion)}),n}function WC(t){if(t.defaultPrevented||t.pointerType==="mouse"&&t.button>0)return;const{mountedGroups:e}=Fi(),n=fL(t,e),i=new Set,r=new Set,s=new Set,o=new Map;let a=!1;n.forEach(l=>{i.add(l.group),l.panels.forEach(c=>{r.add(c)}),l.separator&&(s.add(l.separator),a||(a=!0,l.separator.element.focus()));const u=e.get(l.group);u&&o.set(l.group,u.layout)}),Gn({interactionState:{hitRegions:n,initialLayoutMap:o,pointerDownAtPoint:{x:t.clientX,y:t.clientY},state:"active"}}),n.length&&t.preventDefault()}function GJ({cursorFlags:t,groups:e,state:n}){let i=0,r=0;switch(n){case"active":case"hover":e.forEach(s=>{if(!s.disableCursor)switch(s.orientation){case"horizontal":{i++;break}case"vertical":{r++;break}}})}if(i===0&&r===0)return null;switch(n){case"active":{const s=(t&lL)!==0,o=(t&uL)!==0,a=(t&cL)!==0,l=(t&dL)!==0;if(t){if(s)return a?"se-resize":l?"ne-resize":"e-resize";if(o)return a?"sw-resize":l?"nw-resize":"w-resize";if(a)return"s-resize";if(l)return"n-resize"}break}}return i>0&&r>0?"move":i>0?"ew-resize":"ns-resize"}const KC=new WeakMap;function Yw(t){if(t.defaultView===null||t.defaultView===void 0)return;let{prevStyle:e,styleSheet:n}=KC.get(t)??{};n===void 0&&(n=new t.defaultView.CSSStyleSheet,t.adoptedStyleSheets=[n]);const{cursorFlags:i,interactionState:r}=Fi();switch(r.state){case"active":case"hover":{const s=GJ({cursorFlags:i,groups:r.hitRegions.map(a=>a.group),state:r.state}),o=`*{cursor: ${s} !important; ${r.state==="active"?"touch-action: none;":""} }`;if(e===o)return;e=o,s?n.cssRules.length===0?n.insertRule(o):n.replaceSync(o):n.cssRules.length===1&&n.deleteRule(0);break}case"inactive":{e=void 0,n.cssRules.length===1&&n.deleteRule(0);break}}KC.set(t,{prevStyle:e,styleSheet:n})}function pL({document:t,event:e,hitRegions:n,initialLayoutMap:i,mountedGroups:r,pointerDownAtPoint:s}){let o=0;const a=new Map(r);n.forEach(l=>{const{group:u,groupSize:c}=l,{disableCursor:d,orientation:f,panels:g}=u;let y=0;s?f==="horizontal"?y=(e.clientX-s.x)/c*100:y=(e.clientY-s.y)/c*100:f==="horizontal"?y=e.clientX<0?-100:100:y=e.clientY<0?-100:100;const v=i.get(u),{defaultLayoutDeferred:E,derivedPanelConstraints:_,layout:b,separatorToPanels:w}=r.get(u)??{defaultLayoutDeferred:!1};if(_&&v&&b&&w){const A=Wh({delta:y,initialLayout:v,panelConstraints:_,pivotIndices:l.panels.map(k=>g.indexOf(k)),prevLayout:b,trigger:"mouse-or-touch"});if(zl(A,b)){if(y!==0&&!d)switch(f){case"horizontal":{o|=y<0?lL:uL;break}case"vertical":{o|=y<0?cL:dL;break}}}else{a.set(l.group,{defaultLayoutDeferred:E,derivedPanelConstraints:_,layout:A,separatorToPanels:w});const k=l.group.panels.map(({id:T})=>T).join(",");l.group.inMemoryLayouts[k]=A}}}),Gn({cursorFlags:o,mountedGroups:a}),Yw(t)}function YC(t){const{interactionState:e,mountedGroups:n}=Fi();switch(e.state){case"active":pL({document:t.currentTarget,event:t,hitRegions:e.hitRegions,initialLayoutMap:e.initialLayoutMap,mountedGroups:n})}}function XC(t){if(t.defaultPrevented)return;const{interactionState:e,mountedGroups:n}=Fi();switch(e.state){case"active":{if(t.buttons===0){Gn(i=>i.interactionState.state==="inactive"?i:{cursorFlags:0,interactionState:{state:"inactive"}}),Gn(i=>({mountedGroups:new Map(i.mountedGroups)}));return}pL({document:t.currentTarget,event:t,hitRegions:e.hitRegions,initialLayoutMap:e.initialLayoutMap,mountedGroups:n,pointerDownAtPoint:e.pointerDownAtPoint});break}default:{const i=fL(t,n);i.length===0?e.state!=="inactive"&&Gn({interactionState:{state:"inactive"}}):Gn({interactionState:{hitRegions:i,state:"hover"}}),Yw(t.currentTarget);break}}}function JC(t){if(t.defaultPrevented||t.pointerType==="mouse"&&t.button>0)return;const{interactionState:e}=Fi();switch(e.state){case"active":Gn({cursorFlags:0,interactionState:{state:"inactive"}}),e.hitRegions.length>0&&(Yw(t.currentTarget),Gn(n=>({mountedGroups:new Map(n.mountedGroups)})),t.preventDefault())}}function QC(t){let e=0,n=0;const i={};for(const s of t)if(s.defaultSize!==void 0){e++;const o=lr(s.defaultSize);n+=o,i[s.panelId]=o}else i[s.panelId]=void 0;const r=t.length-e;if(r!==0){const s=lr((100-n)/r);for(const o of t)o.defaultSize===void 0&&(i[o.panelId]=s)}return i}function $J(t,e,n){if(!n[0])return;const i=t.panels.find(l=>l.element===e);if(!i||!i.onResize)return;const r=rd({group:t}),s=t.orientation==="horizontal"?i.element.offsetWidth:i.element.offsetHeight,o=i.mutableValues.prevSize,a={asPercentage:lr(s/r*100),inPixels:s};i.mutableValues.prevSize=a,i.onResize(a,i.id,o)}function VJ(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function qJ(t,e){const n=t.map(r=>r.id),i=Object.keys(e);if(n.length!==i.length)return!1;for(const r of n)if(!i.includes(r))return!1;return!0}const ru=new Map;function WJ(t){let e=!0;$e(t.element.ownerDocument.defaultView,"Cannot register an unmounted Group");const n=t.element.ownerDocument.defaultView.ResizeObserver,i=new Set,r=new Set,s=new n(y=>{for(const v of y){const{borderBoxSize:E,target:_}=v;if(_===t.element){if(e){if(rd({group:t})===0)return;Gn(b=>{const w=b.mountedGroups.get(t);if(w){const A=zC(t),k=w.defaultLayoutDeferred?QC(A):w.layout,T=Hl({layout:k,panelConstraints:A});return!w.defaultLayoutDeferred&&zl(k,T)&&VJ(w.derivedPanelConstraints,A)?b:{mountedGroups:new Map(b.mountedGroups).set(t,{defaultLayoutDeferred:!1,derivedPanelConstraints:A,layout:T,separatorToPanels:w.separatorToPanels})}}return b})}}else $J(t,_,E)}});s.observe(t.element),t.panels.forEach(y=>{$e(!i.has(y.id),`Panel ids must be unique; id "${y.id}" was used more than once`),i.add(y.id),y.onResize&&s.observe(y.element)});const o=rd({group:t}),a=zC(t),l=t.panels.map(({id:y})=>y).join(",");let u=t.defaultLayout;u&&(qJ(t.panels,u)||(u=void 0));const c=t.inMemoryLayouts[l]??u??QC(a),d=Hl({layout:c,panelConstraints:a}),f=sL(t),g=t.element.ownerDocument;return Gn(y=>{const v=new Map;return ru.set(g,(ru.get(g)??0)+1),f.forEach(E=>{E.separator&&v.set(E.separator,E.panels)}),{mountedGroups:new Map(y.mountedGroups).set(t,{defaultLayoutDeferred:o===0,derivedPanelConstraints:a,layout:d,separatorToPanels:v})}}),t.separators.forEach(y=>{$e(!r.has(y.id),`Separator ids must be unique; id "${y.id}" was used more than once`),r.add(y.id),y.element.addEventListener("keydown",HC)}),ru.get(g)===1&&(g.addEventListener("pointerdown",WC,!0),g.addEventListener("pointerleave",YC),g.addEventListener("pointermove",XC),g.addEventListener("pointerup",JC,!0)),function(){e=!1,ru.set(g,Math.max(0,(ru.get(g)??0)-1)),Gn(y=>{const v=new Map(y.mountedGroups);return v.delete(t),{mountedGroups:v}}),t.separators.forEach(y=>{y.element.removeEventListener("keydown",HC)}),ru.get(g)||(g.removeEventListener("pointerdown",WC,!0),g.removeEventListener("pointerleave",YC),g.removeEventListener("pointermove",XC),g.removeEventListener("pointerup",JC,!0)),s.disconnect()}}function gL(){const[t,e]=q.useState({}),n=q.useCallback(()=>e({}),[]);return[t,n]}function Xw(t){const e=q.useId();return`${t??e}`}const Ql=typeof window<"u"?q.useLayoutEffect:q.useEffect;function yh(t){const e=q.useRef(t);return Ql(()=>{e.current=t},[t]),q.useCallback((...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[e])}function Jw(...t){return yh(e=>{t.forEach(n=>{if(n)switch(typeof n){case"function":{n(e);break}case"object":{n.current=e;break}}})})}function KJ(t){const e=q.useRef({...t});return Ql(()=>{for(const n in t)e.current[n]=t[n]},[t]),e.current}const mL=q.createContext(null);function YJ(t,e){const n=q.useRef({getLayout:()=>({}),setLayout:MJ});q.useImperativeHandle(e,()=>n.current,[]),Ql(()=>{Object.assign(n.current,oL({groupId:t}))})}function yL({children:t,className:e,defaultLayout:n,disableCursor:i,disabled:r,elementRef:s,groupRef:o,id:a,onLayoutChange:l,onLayoutChanged:u,orientation:c="horizontal",style:d,...f}){const g=q.useRef({onLayoutChange:{},onLayoutChanged:{}}),y=yh(R=>{zl(g.current.onLayoutChange,R)||(g.current.onLayoutChange=R,l==null||l(R))}),v=yh(R=>{zl(g.current.onLayoutChanged,R)||(g.current.onLayoutChanged=R,u==null||u(R))}),E=Xw(a),_=q.useRef(null),[b,w]=gL(),A=q.useRef({lastExpandedPanelSizes:{},layouts:{},panels:[],separators:[]}),k=Jw(_,s);YJ(E,o);const T=yh((R,U)=>{const{interactionState:H,mountedGroups:V}=Fi();for(const W of V.keys())if(W.id===R){const X=V.get(W);if(X){let D=!1;switch(H.state){case"active":{D=H.hitRegions.some(z=>z.group===W);break}}return{flexGrow:X.layout[U]??1,pointerEvents:D?"none":void 0}}}return{flexGrow:(n==null?void 0:n[U])??1}}),N=q.useMemo(()=>({getPanelStyles:T,id:E,orientation:c,registerPanel:R=>{const U=A.current;return U.panels=tb(c,[...U.panels,R]),w(),()=>{U.panels=U.panels.filter(H=>H!==R),w()}},registerSeparator:R=>{const U=A.current;return U.separators=tb(c,[...U.separators,R]),w(),()=>{U.separators=U.separators.filter(H=>H!==R),w()}}}),[T,E,w,c]),L=KJ({defaultLayout:n,disableCursor:i}),F=q.useRef(null);return Ql(()=>{const R=_.current;if(R===null)return;const U=A.current,H={defaultLayout:L.defaultLayout,disableCursor:!!L.disableCursor,disabled:!!r,element:R,id:E,inMemoryLastExpandedPanelSizes:A.current.lastExpandedPanelSizes,inMemoryLayouts:A.current.layouts,orientation:c,panels:U.panels,separators:U.separators};F.current=H;const V=WJ(H),W=Fi().mountedGroups.get(H);if(W){const{defaultLayoutDeferred:z,derivedPanelConstraints:B,layout:$}=W;!z&&B.length>0&&(y($),v($),U.panels.forEach(I=>{I.scheduleUpdate()}))}const X=Rl.addListener("interactionStateChange",()=>{U.panels.forEach(z=>{z.scheduleUpdate()})}),D=Rl.addListener("mountedGroupsChange",z=>{const B=z.get(H);if(B){const{defaultLayoutDeferred:$,derivedPanelConstraints:I,layout:Z}=B;if($||I.length===0)return;const{interactionState:ee}=Fi(),M=ee.state!=="active";y(Z),M&&v(Z),U.panels.forEach(ge=>{ge.scheduleUpdate()})}});return()=>{F.current=null,V(),X(),D()}},[r,E,v,y,c,b,L]),q.useEffect(()=>{const R=F.current;R&&(R.defaultLayout=n,R.disableCursor=!!i)}),P.jsx(mL.Provider,{value:N,children:P.jsx("div",{...f,"aria-orientation":c,className:e,"data-group":!0,"data-testid":E,id:E,ref:k,style:{height:"100%",width:"100%",overflow:"hidden",...d,display:"flex",flexDirection:c==="horizontal"?"row":"column",flexWrap:"nowrap"},children:t})})}yL.displayName="Group";function Qw(){const t=q.useContext(mL);return $e(t,"Group Context not found; did you render a Panel or Separator outside of a Group?"),t}function XJ({groupId:t,panelId:e}){const n=()=>{const{mountedGroups:a}=Fi();for(const[l,{defaultLayoutDeferred:u,derivedPanelConstraints:c,layout:d,separatorToPanels:f}]of a)if(l.id===t)return{defaultLayoutDeferred:u,derivedPanelConstraints:c,group:l,layout:d,separatorToPanels:f};throw Error(`Group ${t} not found`)},i=()=>{const a=n().derivedPanelConstraints.find(l=>l.panelId===e);if(a!==void 0)return a;throw Error(`Panel constraints not found for Panel ${e}`)},r=()=>{const a=n().group.panels.find(l=>l.id===e);if(a!==void 0)return a;throw Error(`Layout not found for Panel ${e}`)},s=()=>{const a=n().layout[e];if(a!==void 0)return a;throw Error(`Layout not found for Panel ${e}`)},o=a=>{const l=s();if(a===l)return;const{defaultLayoutDeferred:u,derivedPanelConstraints:c,group:d,layout:f,separatorToPanels:g}=n(),y=d.panels.findIndex(b=>b.id===e),v=y===d.panels.length-1,E=Wh({delta:v?l-a:a-l,initialLayout:f,panelConstraints:c,pivotIndices:v?[y-1,y]:[y,y+1],prevLayout:f,trigger:"imperative-api"}),_=Hl({layout:E,panelConstraints:c});zl(f,_)||Gn(b=>({mountedGroups:new Map(b.mountedGroups).set(d,{defaultLayoutDeferred:u,derivedPanelConstraints:c,layout:_,separatorToPanels:g})}))};return{collapse:()=>{const{collapsible:a,collapsedSize:l}=i(),{mutableValues:u}=r(),c=s();a&&c!==l&&(u.expandToSize=c,o(l))},expand:()=>{const{collapsible:a,collapsedSize:l,minSize:u}=i(),{mutableValues:c}=r(),d=s();if(a&&d===l){let f=c.expandToSize??u;f===0&&(f=1),o(f)}},getSize:()=>{const{group:a}=n(),l=s(),{element:u}=r(),c=a.orientation==="horizontal"?u.offsetWidth:u.offsetHeight;return{asPercentage:l,inPixels:c}},isCollapsed:()=>{const{collapsible:a,collapsedSize:l}=i(),u=s();return a&&Sn(l,u)},resize:a=>{if(s()!==a){let l;switch(typeof a){case"number":{const{group:u}=n(),c=rd({group:u});l=lr(a/c*100);break}case"string":{l=parseFloat(a);break}}o(l)}}}}function JJ(t,e){const{id:n}=Qw(),i=q.useRef({collapse:p_,expand:p_,getSize:()=>({asPercentage:0,inPixels:0}),isCollapsed:()=>!1,resize:p_});q.useImperativeHandle(e,()=>i.current,[]),Ql(()=>{Object.assign(i.current,XJ({groupId:n,panelId:t}))})}function hm({children:t,className:e,collapsedSize:n="0%",collapsible:i=!1,defaultSize:r,elementRef:s,id:o,maxSize:a="100%",minSize:l="0%",onResize:u,panelRef:c,style:d,...f}){const g=!!o,y=Xw(o),v=q.useRef(null),E=Jw(v,s),[,_]=gL(),{getPanelStyles:b,id:w,registerPanel:A}=Qw(),k=u!==null,T=yh((L,F,R)=>{u==null||u(L,o,R)});Ql(()=>{const L=v.current;if(L!==null)return A({element:L,id:y,idIsStable:g,mutableValues:{expandToSize:void 0,prevSize:void 0},onResize:k?T:void 0,panelConstraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},scheduleUpdate:_})},[n,i,r,_,k,y,g,a,l,T,A]),JJ(y,c);const N=b(w,y);return P.jsx("div",{...f,"data-panel":!0,"data-testid":y,id:y,ref:E,style:{...QJ,flexBasis:0,flexShrink:1,overflow:"hidden",...N},children:P.jsx("div",{className:e,style:{width:"100%",height:"100%",...d},children:t})})}hm.displayName="Panel";const QJ={minHeight:0,maxHeight:"100%",height:"auto",minWidth:0,maxWidth:"100%",width:"auto",border:"none",borderWidth:0,padding:0,margin:0};function ZJ({layout:t,panelConstraints:e,panelId:n,panelIndex:i}){let r,s;const o=t[n],a=e.find(l=>l.panelId===n);if(a){const l=a.maxSize,u=s=a.collapsible?a.collapsedSize:a.minSize,c=[i,i+1];s=Hl({layout:Wh({delta:u-o,initialLayout:t,panelConstraints:e,pivotIndices:c,prevLayout:t,trigger:"keyboard"}),panelConstraints:e})[n],r=Hl({layout:Wh({delta:l-o,initialLayout:t,panelConstraints:e,pivotIndices:c,prevLayout:t,trigger:"keyboard"}),panelConstraints:e})[n]}return{valueControls:n,valueMax:r,valueMin:s,valueNow:o}}function nb({children:t,className:e,elementRef:n,id:i,style:r,...s}){const o=Xw(i),[a,l]=q.useState({}),[u,c]=q.useState("inactive"),d=q.useRef(null),f=Jw(d,n),{id:g,orientation:y,registerSeparator:v}=Qw(),E=y==="horizontal"?"vertical":"horizontal";return Ql(()=>{const _=d.current;if(_!==null){const b={element:_,id:o},w=v(b),A=Rl.addListener("interactionStateChange",T=>{c(T.state!=="inactive"&&T.hitRegions.some(N=>N.separator===b)?T.state:"inactive")}),k=Rl.addListener("mountedGroupsChange",T=>{T.forEach(({derivedPanelConstraints:N,layout:L,separatorToPanels:F},R)=>{if(R.id===g){const U=F.get(b);if(U){const H=U[0],V=R.panels.indexOf(H);l(ZJ({layout:L,panelConstraints:N,panelId:H.id,panelIndex:V}))}}})});return()=>{A(),k(),w()}}},[g,o,v]),P.jsx("div",{...s,"aria-controls":a.valueControls,"aria-orientation":E,"aria-valuemax":a.valueMax,"aria-valuemin":a.valueMin,"aria-valuenow":a.valueNow,children:t,className:e,"data-separator":u,"data-testid":o,id:o,ref:f,role:"separator",style:{flexBasis:"auto",...r,flexGrow:0,flexShrink:0},tabIndex:0})}nb.displayName="Separator";const jJ=({theme:t,toggleTheme:e})=>{const{id:n}=AF(),i=ew(),[r,s]=zd("notebooks",[]),[o,a]=zd("gemini_api_key",""),[l,u]=q.useState(!o),c=r.find(H=>H.id===n),[d,f]=zd(`sources_${n}`,[]),[g,y]=zd(`messages_${n}`,[]),[v,E]=q.useState(!1),[_,b]=q.useState(null),[w,A]=q.useState(null),[k,T]=q.useState(null),[N,L]=q.useState([]);q.useEffect(()=>{c?o&&j0(o):i("/");const H=()=>u(!0);return window.addEventListener("open-settings",H),()=>window.removeEventListener("open-settings",H)},[n,c,o,i]),q.useEffect(()=>{if(c&&c.sourceCount!==d.length){const H=r.map(V=>V.id===n?{...V,sourceCount:d.length,updatedAt:new Date().toISOString()}:V);s(H)}d.length>0&&o?(async()=>{try{const V=d.map(X=>X.content).join(`

`),W=await nw(()=>Promise.resolve().then(()=>bJ),void 0).then(X=>X.generateSuggestedQuestions(V));L(W)}catch(V){console.error("Failed to generate questions:",V)}})():L(["Summarize the main points","What are the key themes?","Create a study guide"])},[d.length,o]);const F=async H=>{if(!H.trim())return;if(!o){u(!0);return}const V={role:"user",content:H},W=[...g,V];y(W),E(!0);try{const X=d.filter($=>$.type!=="image"),D=d.filter($=>$.type==="image").map($=>({mimeType:$.mimeType,data:$.content})),z=X.map(($,I)=>`[[Source ${I+1}]] Title: ${$.title}
Content: ${$.content}`).join(`

`),B=await eL(g,H,z,D);y([...W,{role:"model",content:B}])}catch(X){console.error("Chat error:",X),y([...W,{role:"model",content:"Sorry, I encountered an error. Please check your API key or try again."}])}finally{E(!1)}},R=async H=>{if(!o){u(!0);return}if(d.length===0){alert("Please add some sources first!");return}E(!0);try{const V=d.map(X=>X.content).join(`

`);let W="";switch(H){case"summary":W=await eb(V);break;case"faq":W=await nL(V);break;case"study-guide":W=await tL(V);break;case"timeline":W=await eb(V+`

Extract a timeline of key events with dates.`);break;default:break}T(H),A(W)}catch(V){console.error("Generation error:",V),alert("Failed to generate content. Please check API key.")}finally{E(!1)}},U=H=>{H.preventDefault();const V=H.target.elements.key.value;V&&(a(V),u(!1),j0(V))};return c?P.jsxs("div",{className:"h-screen flex flex-col bg-background text-foreground overflow-hidden",children:[P.jsx(xR,{theme:t,toggleTheme:e,title:c.title}),P.jsx("main",{className:"flex-1 flex overflow-hidden relative",children:P.jsxs(yL,{direction:"horizontal",children:[P.jsx(hm,{defaultSize:20,minSize:15,maxSize:40,className:"flex flex-col",children:P.jsx("div",{className:"h-full overflow-hidden p-3",children:_?P.jsx(a5,{source:_,isOpen:!!_,onClose:()=>b(null)}):P.jsx(PB,{sources:d,setSources:f,onSourceClick:b})})}),P.jsx(nb,{className:"w-1 bg-border/40 hover:bg-primary/50 transition-colors flex items-center justify-center group focus:outline-none",children:P.jsx("div",{className:"z-10 bg-background border border-border rounded-full p-0.5 shadow-sm transform translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:P.jsx(AA,{size:12,className:"text-muted-foreground"})})}),P.jsx(hm,{defaultSize:55,minSize:30,children:P.jsx("div",{className:"h-full overflow-hidden p-3",children:P.jsx(s5,{messages:g,onSendMessage:F,isLoading:v,suggestedQuestions:N})})}),P.jsx(nb,{className:"w-1 bg-border/40 hover:bg-primary/50 transition-colors flex items-center justify-center group focus:outline-none",children:P.jsx("div",{className:"z-10 bg-background border border-border rounded-full p-0.5 shadow-sm transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:P.jsx(AA,{size:12,className:"text-muted-foreground"})})}),P.jsx(hm,{defaultSize:25,minSize:15,maxSize:40,children:P.jsx("div",{className:"h-full overflow-hidden p-3",children:w?P.jsx(l5,{content:w,type:k,isOpen:!!w,onClose:()=>A(null)}):P.jsx(o5,{onGenerate:R,isGenerating:v})})})]})}),l&&P.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:P.jsxs("div",{className:"bg-card w-full max-w-md rounded-3xl p-8 shadow-2xl border border-primary/20",children:[P.jsx("div",{className:"flex justify-center mb-6",children:P.jsx("div",{className:"p-4 bg-primary/10 rounded-full text-primary",children:P.jsx(l2,{size:32})})}),P.jsx("h2",{className:"text-2xl font-bold text-center mb-2",children:"Enter Gemini API Key"}),P.jsx("p",{className:"text-center text-muted-foreground mb-6",children:"To power the AI features, you need a Google Gemini API key. It's free to get started."}),P.jsxs("form",{onSubmit:U,children:[P.jsx("input",{name:"key",type:"password",placeholder:"Paste your API key here...",className:"w-full px-4 py-3 rounded-xl border border-border bg-muted/50 mb-4 focus:ring-2 focus:ring-primary focus:outline-none",autoFocus:!0}),P.jsx("button",{type:"submit",className:"w-full bg-primary text-primary-foreground py-3 rounded-xl font-medium hover:opacity-90 transition-opacity",children:"Save & Continue"}),P.jsx("div",{className:"mt-4 text-center",children:P.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline",children:"Get a free API key here"})})]})]})})]}):null};function e7(){const[t,e]=q.useState("light");q.useEffect(()=>{window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&e("dark")},[]),q.useEffect(()=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const n=()=>{e(i=>i==="light"?"dark":"light")};return P.jsx("div",{className:"min-h-screen bg-background text-foreground transition-colors duration-300",children:P.jsxs(zF,{children:[P.jsx(uE,{path:"/",element:P.jsx(A2,{theme:t,toggleTheme:n})}),P.jsx(uE,{path:"/notebook/:id",element:P.jsx(jJ,{theme:t,toggleTheme:n})})]})})}g_.createRoot(document.getElementById("root")).render(P.jsx(Cy.StrictMode,{children:P.jsx(KF,{children:P.jsx(e7,{})})}));export{xy as a,fm as c,n7 as g};
